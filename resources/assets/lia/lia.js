var lib=function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=15)}([function(e,t,i){var n,r;/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(t,i){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!=typeof window?window:this,function(i,o){"use strict";function a(e,t,i){t=t||ce;var n,r=t.createElement("script");if(r.text=e,i)for(n in Ce)i[n]&&(r[n]=i[n]);t.head.appendChild(r).parentNode.removeChild(r)}function s(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ge[ve.call(e)]||"object":typeof e}function l(e){var t=!!e&&"length"in e&&e.length,i=s(e);return!_e(e)&&!ke(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function h(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function c(e,t,i){return _e(t)?Se.grep(e,function(e,n){return!!t.call(e,n,e)!==i}):t.nodeType?Se.grep(e,function(e){return e===t!==i}):"string"!=typeof t?Se.grep(e,function(e){return me.call(t,e)>-1!==i}):Se.filter(t,e,i)}function u(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function d(e){var t={};return Se.each(e.match(Pe)||[],function(e,i){t[i]=!0}),t}function f(e){return e}function p(e){throw e}function m(e,t,i,n){var r;try{e&&_e(r=e.promise)?r.call(e).done(t).fail(i):e&&_e(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}function g(){ce.removeEventListener("DOMContentLoaded",g),i.removeEventListener("load",g),Se.ready()}function v(e,t){return t.toUpperCase()}function b(e){return e.replace(Oe,"ms-").replace(ze,v)}function w(){this.expando=Se.expando+w.uid++}function x(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:We.test(e)?JSON.parse(e):e)}function y(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(Ue,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=x(i)}catch(e){}Ve.set(e,t,i)}else i=void 0;return i}function _(e,t,i,n){var r,o,a=20,s=n?function(){return n.cur()}:function(){return Se.css(e,t,"")},l=s(),h=i&&i[3]||(Se.cssNumber[t]?"":"px"),c=(Se.cssNumber[t]||"px"!==h&&+l)&&Ge.exec(Se.css(e,t));if(c&&c[3]!==h){for(l/=2,h=h||c[3],c=+l||1;a--;)Se.style(e,t,c+h),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;c*=2,Se.style(e,t,c+h),i=i||[]}return i&&(c=+c||+l||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=c,n.end=r)),r}function k(e){var t,i=e.ownerDocument,n=e.nodeName,r=Je[n];return r||(t=i.body.appendChild(i.createElement(n)),r=Se.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),Je[n]=r,r)}function C(e,t){for(var i,n,r=[],o=0,a=e.length;o<a;o++)n=e[o],n.style&&(i=n.style.display,t?("none"===i&&(r[o]=qe.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&Xe(n)&&(r[o]=k(n))):"none"!==i&&(r[o]="none",qe.set(n,"display",i)));for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}function S(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&h(e,t)?Se.merge([e],i):i}function $(e,t){for(var i=0,n=e.length;i<n;i++)qe.set(e[i],"globalEval",!t||qe.get(t[i],"globalEval"))}function T(e,t,i,n,r){for(var o,a,l,h,c,u,d=t.createDocumentFragment(),f=[],p=0,m=e.length;p<m;p++)if((o=e[p])||0===o)if("object"===s(o))Se.merge(f,o.nodeType?[o]:o);else if(nt.test(o)){for(a=a||d.appendChild(t.createElement("div")),l=(et.exec(o)||["",""])[1].toLowerCase(),h=it[l]||it._default,a.innerHTML=h[1]+Se.htmlPrefilter(o)+h[2],u=h[0];u--;)a=a.lastChild;Se.merge(f,a.childNodes),a=d.firstChild,a.textContent=""}else f.push(t.createTextNode(o));for(d.textContent="",p=0;o=f[p++];)if(n&&Se.inArray(o,n)>-1)r&&r.push(o);else if(c=Se.contains(o.ownerDocument,o),a=S(d.appendChild(o),"script"),c&&$(a),i)for(u=0;o=a[u++];)tt.test(o.type||"")&&i.push(o);return d}function E(){return!0}function M(){return!1}function I(){try{return ce.activeElement}catch(e){}}function A(e,t,i,n,r,o){var a,s;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=void 0);for(s in t)A(e,s,i,n,t[s],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=M;else if(!r)return e;return 1===o&&(a=r,r=function(e){return Se().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=Se.guid++)),e.each(function(){Se.event.add(this,t,r,n,i)})}function D(e,t){return h(e,"table")&&h(11!==t.nodeType?t:t.firstChild,"tr")?Se(e).children("tbody")[0]||e:e}function N(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function L(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function F(e,t){var i,n,r,o,a,s,l,h;if(1===t.nodeType){if(qe.hasData(e)&&(o=qe.access(e),a=qe.set(t,o),h=o.events)){delete a.handle,a.events={};for(r in h)for(i=0,n=h[r].length;i<n;i++)Se.event.add(t,r,h[r][i])}Ve.hasData(e)&&(s=Ve.access(e),l=Se.extend({},s),Ve.set(t,l))}}function P(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Qe.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function j(e,t,i,n){t=fe.apply([],t);var r,o,s,l,h,c,u=0,d=e.length,f=d-1,p=t[0],m=_e(p);if(m||d>1&&"string"==typeof p&&!ye.checkClone&&ct.test(p))return e.each(function(r){var o=e.eq(r);m&&(t[0]=p.call(this,r,o.html())),j(o,t,i,n)});if(d&&(r=T(t,e[0].ownerDocument,!1,e,n),o=r.firstChild,1===r.childNodes.length&&(r=o),o||n)){for(s=Se.map(S(r,"script"),N),l=s.length;u<d;u++)h=r,u!==f&&(h=Se.clone(h,!0,!0),l&&Se.merge(s,S(h,"script"))),i.call(e[u],h,u);if(l)for(c=s[s.length-1].ownerDocument,Se.map(s,L),u=0;u<l;u++)h=s[u],tt.test(h.type||"")&&!qe.access(h,"globalEval")&&Se.contains(c,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?Se._evalUrl&&Se._evalUrl(h.src):a(h.textContent.replace(ut,""),c,h))}return e}function H(e,t,i){for(var n,r=t?Se.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||Se.cleanData(S(n)),n.parentNode&&(i&&Se.contains(n.ownerDocument,n)&&$(S(n,"script")),n.parentNode.removeChild(n));return e}function B(e,t,i){var n,r,o,a,s=e.style;return i=i||ft(e),i&&(a=i.getPropertyValue(t)||i[t],""!==a||Se.contains(e.ownerDocument,e)||(a=Se.style(e,t)),!ye.pixelBoxStyles()&&dt.test(a)&&pt.test(t)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function O(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function z(e){if(e in xt)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=wt.length;i--;)if((e=wt[i]+t)in xt)return e}function R(e){var t=Se.cssProps[e];return t||(t=Se.cssProps[e]=z(e)||e),t}function q(e,t,i){var n=Ge.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function V(e,t,i,n,r,o){var a="width"===t?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=Se.css(e,i+Ke[a],!0,r)),n?("content"===i&&(l-=Se.css(e,"padding"+Ke[a],!0,r)),"margin"!==i&&(l-=Se.css(e,"border"+Ke[a]+"Width",!0,r))):(l+=Se.css(e,"padding"+Ke[a],!0,r),"padding"!==i?l+=Se.css(e,"border"+Ke[a]+"Width",!0,r):s+=Se.css(e,"border"+Ke[a]+"Width",!0,r));return!n&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))),l}function W(e,t,i){var n=ft(e),r=B(e,t,n),o="border-box"===Se.css(e,"boxSizing",!1,n),a=o;if(dt.test(r)){if(!i)return r;r="auto"}return a=a&&(ye.boxSizingReliable()||r===e.style[t]),("auto"===r||!parseFloat(r)&&"inline"===Se.css(e,"display",!1,n))&&(r=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(r=parseFloat(r)||0)+V(e,t,i||(o?"border":"content"),a,n,r)+"px"}function U(e,t,i,n,r){return new U.prototype.init(e,t,i,n,r)}function Z(){_t&&(!1===ce.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(Z):i.setTimeout(Z,Se.fx.interval),Se.fx.tick())}function G(){return i.setTimeout(function(){yt=void 0}),yt=Date.now()}function K(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)i=Ke[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function X(e,t,i){for(var n,r=(Q.tweeners[t]||[]).concat(Q.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,t,e))return n}function Y(e,t,i){var n,r,o,a,s,l,h,c,u="width"in t||"height"in t,d=this,f={},p=e.style,m=e.nodeType&&Xe(e),g=qe.get(e,"fxshow");i.queue||(a=Se._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,Se.queue(e,"fx").length||a.empty.fire()})}));for(n in t)if(r=t[n],kt.test(r)){if(delete t[n],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;m=!0}f[n]=g&&g[n]||Se.style(e,n)}if((l=!Se.isEmptyObject(t))||!Se.isEmptyObject(f)){u&&1===e.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],h=g&&g.display,null==h&&(h=qe.get(e,"display")),c=Se.css(e,"display"),"none"===c&&(h?c=h:(C([e],!0),h=e.style.display||h,c=Se.css(e,"display"),C([e]))),("inline"===c||"inline-block"===c&&null!=h)&&"none"===Se.css(e,"float")&&(l||(d.done(function(){p.display=h}),null==h&&(c=p.display,h="none"===c?"":c)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1;for(n in f)l||(g?"hidden"in g&&(m=g.hidden):g=qe.access(e,"fxshow",{display:h}),o&&(g.hidden=!m),m&&C([e],!0),d.done(function(){m||C([e]),qe.remove(e,"fxshow");for(n in f)Se.style(e,n,f[n])})),l=X(m?g[n]:0,n,d),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}}function J(e,t){var i,n,r,o,a;for(i in e)if(n=b(i),r=t[n],o=e[i],Array.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),(a=Se.cssHooks[n])&&"expand"in a){o=a.expand(o),delete e[n];for(i in o)i in e||(e[i]=o[i],t[i]=r)}else t[n]=r}function Q(e,t,i){var n,r,o=0,a=Q.prefilters.length,s=Se.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=yt||G(),i=Math.max(0,h.startTime+h.duration-t),n=i/h.duration||0,o=1-n,a=0,l=h.tweens.length;a<l;a++)h.tweens[a].run(o);return s.notifyWith(e,[h,o,i]),o<1&&l?i:(l||s.notifyWith(e,[h,1,0]),s.resolveWith(e,[h]),!1)},h=s.promise({elem:e,props:Se.extend({},t),opts:Se.extend(!0,{specialEasing:{},easing:Se.easing._default},i),originalProperties:t,originalOptions:i,startTime:yt||G(),duration:i.duration,tweens:[],createTween:function(t,i){var n=Se.Tween(e,h.opts,t,i,h.opts.specialEasing[t]||h.opts.easing);return h.tweens.push(n),n},stop:function(t){var i=0,n=t?h.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)h.tweens[i].run(1);return t?(s.notifyWith(e,[h,1,0]),s.resolveWith(e,[h,t])):s.rejectWith(e,[h,t]),this}}),c=h.props;for(J(c,h.opts.specialEasing);o<a;o++)if(n=Q.prefilters[o].call(h,e,c,h.opts))return _e(n.stop)&&(Se._queueHooks(h.elem,h.opts.queue).stop=n.stop.bind(n)),n;return Se.map(c,X,h),_e(h.opts.start)&&h.opts.start.call(e,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),Se.fx.timer(Se.extend(l,{elem:e,anim:h,queue:h.opts.queue})),h}function ee(e){return(e.match(Pe)||[]).join(" ")}function te(e){return e.getAttribute&&e.getAttribute("class")||""}function ie(e){return Array.isArray(e)?e:"string"==typeof e?e.match(Pe)||[]:[]}function ne(e,t,i,n){var r;if(Array.isArray(t))Se.each(t,function(t,r){i||Ft.test(e)?n(e,r):ne(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,i,n)});else if(i||"object"!==s(t))n(e,t);else for(r in t)ne(e+"["+r+"]",t[r],i,n)}function re(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,o=t.toLowerCase().match(Pe)||[];if(_e(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function oe(e,t,i,n){function r(s){var l;return o[s]=!0,Se.each(e[s]||[],function(e,s){var h=s(t,i,n);return"string"!=typeof h||a||o[h]?a?!(l=h):void 0:(t.dataTypes.unshift(h),r(h),!1)}),l}var o={},a=e===Zt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function ae(e,t){var i,n,r=Se.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&Se.extend(!0,e,n),e}function se(e,t,i){for(var n,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),i[o]}function le(e,t,i,n){var r,o,a,s,l,h={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)h[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=h[l+" "+o]||h["* "+o]))for(r in h)if(s=r.split(" "),s[1]===o&&(a=h[l+" "+s[0]]||h["* "+s[0]])){!0===a?a=h[r]:!0!==h[r]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}var he=[],ce=i.document,ue=Object.getPrototypeOf,de=he.slice,fe=he.concat,pe=he.push,me=he.indexOf,ge={},ve=ge.toString,be=ge.hasOwnProperty,we=be.toString,xe=we.call(Object),ye={},_e=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},ke=function(e){return null!=e&&e===e.window},Ce={type:!0,src:!0,noModule:!0},Se=function(e,t){return new Se.fn.init(e,t)},$e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Se.fn=Se.prototype={jquery:"3.3.1",constructor:Se,length:0,toArray:function(){return de.call(this)},get:function(e){return null==e?de.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=Se.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return Se.each(this,e)},map:function(e){return this.pushStack(Se.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(de.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:pe,sort:he.sort,splice:he.splice},Se.extend=Se.fn.extend=function(){var e,t,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[s]||{},s++),"object"==typeof a||_e(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=a[t],n=e[t],a!==n&&(h&&n&&(Se.isPlainObject(n)||(r=Array.isArray(n)))?(r?(r=!1,o=i&&Array.isArray(i)?i:[]):o=i&&Se.isPlainObject(i)?i:{},a[t]=Se.extend(h,o,n)):void 0!==n&&(a[t]=n));return a},Se.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==ve.call(e))&&(!(t=ue(e))||"function"==typeof(i=be.call(t,"constructor")&&t.constructor)&&we.call(i)===xe)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){a(e)},each:function(e,t){var i,n=0;if(l(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace($e,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(l(Object(e))?Se.merge(i,"string"==typeof e?[e]:e):pe.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:me.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,o=e.length,a=!i;r<o;r++)!t(e[r],r)!==a&&n.push(e[r]);return n},map:function(e,t,i){var n,r,o=0,a=[];if(l(e))for(n=e.length;o<n;o++)null!=(r=t(e[o],o,i))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,i))&&a.push(r);return fe.apply([],a)},guid:1,support:ye}),"function"==typeof Symbol&&(Se.fn[Symbol.iterator]=he[Symbol.iterator]),Se.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ge["[object "+t+"]"]=t.toLowerCase()});var Te=/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){function t(e,t,i,n){var r,o,a,s,l,c,d,f=t&&t.ownerDocument,p=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==p&&9!==p&&11!==p)return i;if(!n&&((t?t.ownerDocument||t:B)!==A&&I(t),t=t||A,N)){if(11!==p&&(l=me.exec(e)))if(r=l[1]){if(9===p){if(!(a=t.getElementById(r)))return i;if(a.id===r)return i.push(a),i}else if(f&&(a=f.getElementById(r))&&j(t,a)&&a.id===r)return i.push(a),i}else{if(l[2])return X.apply(i,t.getElementsByTagName(e)),i;if((r=l[3])&&x.getElementsByClassName&&t.getElementsByClassName)return X.apply(i,t.getElementsByClassName(r)),i}if(x.qsa&&!V[e+" "]&&(!L||!L.test(e))){if(1!==p)f=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(we,xe):t.setAttribute("id",s=H),c=C(e),o=c.length;o--;)c[o]="#"+s+" "+u(c[o]);d=c.join(","),f=ge.test(e)&&h(t.parentNode)||t}if(d)try{return X.apply(i,f.querySelectorAll(d)),i}catch(e){}finally{s===H&&t.removeAttribute("id")}}}return $(e.replace(oe,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>y.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[H]=!0,e}function r(e){var t=A.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var i=e.split("|"),n=i.length;n--;)y.attrHandle[i[n]]=t}function a(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&_e(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return n(function(t){return t=+t,n(function(i,n){for(var r,o=e([],i.length,t),a=o.length;a--;)i[r=o[a]]&&(i[r]=!(n[r]=i[r]))})})}function h(e){return e&&void 0!==e.getElementsByTagName&&e}function c(){}function u(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function d(e,t,i){var n=t.dir,r=t.next,o=r||n,a=i&&"parentNode"===o,s=z++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,r);return!1}:function(t,i,l){var h,c,u,d=[O,s];if(l){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||a)if(u=t[H]||(t[H]={}),c=u[t.uniqueID]||(u[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[n]||t;else{if((h=c[o])&&h[0]===O&&h[1]===s)return d[2]=h[2];if(c[o]=d,d[2]=e(t,i,l))return!0}return!1}}function f(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function p(e,i,n){for(var r=0,o=i.length;r<o;r++)t(e,i[r],n);return n}function m(e,t,i,n,r){for(var o,a=[],s=0,l=e.length,h=null!=t;s<l;s++)(o=e[s])&&(i&&!i(o,n,r)||(a.push(o),h&&t.push(s)));return a}function g(e,t,i,r,o,a){return r&&!r[H]&&(r=g(r)),o&&!o[H]&&(o=g(o,a)),n(function(n,a,s,l){var h,c,u,d=[],f=[],g=a.length,v=n||p(t||"*",s.nodeType?[s]:s,[]),b=!e||!n&&t?v:m(v,d,e,s,l),w=i?o||(n?e:g||r)?[]:a:b;if(i&&i(b,w,s,l),r)for(h=m(w,f),r(h,[],s,l),c=h.length;c--;)(u=h[c])&&(w[f[c]]=!(b[f[c]]=u));if(n){if(o||e){if(o){for(h=[],c=w.length;c--;)(u=w[c])&&h.push(b[c]=u);o(null,w=[],h,l)}for(c=w.length;c--;)(u=w[c])&&(h=o?J(n,u):d[c])>-1&&(n[h]=!(a[h]=u))}}else w=m(w===a?w.splice(g,w.length):w),o?o(null,a,w,l):X.apply(a,w)})}function v(e){for(var t,i,n,r=e.length,o=y.relative[e[0].type],a=o||y.relative[" "],s=o?1:0,l=d(function(e){return e===t},a,!0),h=d(function(e){return J(t,e)>-1},a,!0),c=[function(e,i,n){var r=!o&&(n||i!==T)||((t=i).nodeType?l(e,i,n):h(e,i,n));return t=null,r}];s<r;s++)if(i=y.relative[e[s].type])c=[d(f(c),i)];else{if(i=y.filter[e[s].type].apply(null,e[s].matches),i[H]){for(n=++s;n<r&&!y.relative[e[n].type];n++);return g(s>1&&f(c),s>1&&u(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(oe,"$1"),i,s<n&&v(e.slice(s,n)),n<r&&v(e=e.slice(n)),n<r&&u(e))}c.push(i)}return f(c)}function b(e,i){var r=i.length>0,o=e.length>0,a=function(n,a,s,l,h){var c,u,d,f=0,p="0",g=n&&[],v=[],b=T,w=n||o&&y.find.TAG("*",h),x=O+=null==b?1:Math.random()||.1,_=w.length;for(h&&(T=a===A||a||h);p!==_&&null!=(c=w[p]);p++){if(o&&c){for(u=0,a||c.ownerDocument===A||(I(c),s=!N);d=e[u++];)if(d(c,a||A,s)){l.push(c);break}h&&(O=x)}r&&((c=!d&&c)&&f--,n&&g.push(c))}if(f+=p,r&&p!==f){for(u=0;d=i[u++];)d(g,v,a,s);if(n){if(f>0)for(;p--;)g[p]||v[p]||(v[p]=G.call(l));v=m(v)}X.apply(l,v),h&&!n&&v.length>0&&f+i.length>1&&t.uniqueSort(l)}return h&&(O=x,T=b),g};return r?n(a):a}var w,x,y,_,k,C,S,$,T,E,M,I,A,D,N,L,F,P,j,H="sizzle"+1*new Date,B=e.document,O=0,z=0,R=i(),q=i(),V=i(),W=function(e,t){return e===t&&(M=!0),0},U={}.hasOwnProperty,Z=[],G=Z.pop,K=Z.push,X=Z.push,Y=Z.slice,J=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ie="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ne=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",re=RegExp(ee+"+","g"),oe=RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=RegExp("^"+ee+"*,"+ee+"*"),se=RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),he=RegExp(ne),ce=RegExp("^"+te+"$"),ue={ID:RegExp("^#("+te+")"),CLASS:RegExp("^\\.("+te+")"),TAG:RegExp("^("+te+"|[*])"),ATTR:RegExp("^"+ie),PSEUDO:RegExp("^"+ne),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:RegExp("^(?:"+Q+")$","i"),needsContext:RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},de=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,pe=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,ve=RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),be=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},we=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,xe=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ye=function(){I()},_e=d(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{X.apply(Z=Y.call(B.childNodes),B.childNodes),Z[B.childNodes.length].nodeType}catch(e){X={apply:Z.length?function(e,t){K.apply(e,Y.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}x=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},I=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:B;return n!==A&&9===n.nodeType&&n.documentElement?(A=n,D=A.documentElement,N=!k(A),B!==A&&(i=A.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ye,!1):i.attachEvent&&i.attachEvent("onunload",ye)),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(A.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=pe.test(A.getElementsByClassName),x.getById=r(function(e){return D.appendChild(e).id=H,!A.getElementsByName||!A.getElementsByName(H).length}),x.getById?(y.filter.ID=function(e){var t=e.replace(ve,be);return function(e){return e.getAttribute("id")===t}},y.find.ID=function(e,t){if(void 0!==t.getElementById&&N){var i=t.getElementById(e);return i?[i]:[]}}):(y.filter.ID=function(e){var t=e.replace(ve,be);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},y.find.ID=function(e,t){if(void 0!==t.getElementById&&N){var i,n,r,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(r=t.getElementsByName(e),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),y.find.TAG=x.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},y.find.CLASS=x.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&N)return t.getElementsByClassName(e)},F=[],L=[],(x.qsa=pe.test(A.querySelectorAll))&&(r(function(e){D.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||L.push("\\["+ee+"*(?:value|"+Q+")"),e.querySelectorAll("[id~="+H+"-]").length||L.push("~="),e.querySelectorAll(":checked").length||L.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||L.push(".#.+[+~]")}),r(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=A.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&L.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&L.push(":enabled",":disabled"),D.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&L.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),L.push(",.*:")})),(x.matchesSelector=pe.test(P=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&r(function(e){x.disconnectedMatch=P.call(e,"*"),P.call(e,"[s!='']:x"),F.push("!=",ne)}),L=L.length&&RegExp(L.join("|")),F=F.length&&RegExp(F.join("|")),t=pe.test(D.compareDocumentPosition),j=t||pe.test(D.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return M=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!x.sortDetached&&t.compareDocumentPosition(e)===i?e===A||e.ownerDocument===B&&j(B,e)?-1:t===A||t.ownerDocument===B&&j(B,t)?1:E?J(E,e)-J(E,t):0:4&i?-1:1)}:function(e,t){if(e===t)return M=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!r||!o)return e===A?-1:t===A?1:r?-1:o?1:E?J(E,e)-J(E,t):0;if(r===o)return a(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;s[n]===l[n];)n++;return n?a(s[n],l[n]):s[n]===B?-1:l[n]===B?1:0},A):A},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==A&&I(e),i=i.replace(le,"='$1']"),x.matchesSelector&&N&&!V[i+" "]&&(!F||!F.test(i))&&(!L||!L.test(i)))try{var n=P.call(e,i);if(n||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(i,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&I(e),j(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&I(e);var i=y.attrHandle[t.toLowerCase()],n=i&&U.call(y.attrHandle,t.toLowerCase())?i(e,t,!N):void 0;return void 0!==n?n:x.attributes||!N?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.escape=function(e){return(e+"").replace(we,xe)},t.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;if(M=!x.detectDuplicates,E=!x.sortStable&&e.slice(0),e.sort(W),M){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return E=null,e},_=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=_(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=_(t);return i},y=t.selectors={cacheLength:50,createPseudo:n,match:ue,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,be),e[3]=(e[3]||e[4]||e[5]||"").replace(ve,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return ue.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&he.test(i)&&(t=C(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=R[e+" "];return t||(t=RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&R(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var o=t.attr(r,e);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(re," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,i,n,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var h,c,u,d,f,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s,w=!1;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&b){for(d=g,u=d[H]||(d[H]={}),c=u[d.uniqueID]||(u[d.uniqueID]={}),h=c[e]||[],f=h[0]===O&&h[1],w=f&&h[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(w=f=0)||p.pop();)if(1===d.nodeType&&++w&&d===t){c[e]=[O,f,w];break}}else if(b&&(d=t,u=d[H]||(d[H]={}),c=u[d.uniqueID]||(u[d.uniqueID]={}),h=c[e]||[],f=h[0]===O&&h[1],w=f),!1===w)for(;(d=++f&&d&&d[m]||(w=f=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++w||(b&&(u=d[H]||(d[H]={}),c=u[d.uniqueID]||(u[d.uniqueID]={}),c[e]=[O,w]),d!==t)););return(w-=r)===n||w%n==0&&w/n>=0}}},PSEUDO:function(e,i){var r,o=y.pseudos[e]||y.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[H]?o(i):o.length>1?(r=[e,e,"",i],y.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=o(e,i),a=r.length;a--;)n=J(e,r[a]),e[n]=!(t[n]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:n(function(e){var t=[],i=[],r=S(e.replace(oe,"$1"));return r[H]?n(function(e,t,i,n){for(var o,a=r(e,null,n,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,n,o){return t[0]=e,r(t,null,o,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(ve,be),function(t){return(t.textContent||t.innerText||_(t)).indexOf(e)>-1}}),lang:n(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ve,be).toLowerCase(),function(t){var i;do{if(i=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!y.pseudos.empty(e)},header:function(e){return fe.test(e.nodeName)},input:function(e){return de.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,i){return[i<0?i+t:i]}),even:l(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:l(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:l(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:l(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},y.pseudos.nth=y.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}(w);return c.prototype=y.filters=y.pseudos,y.setFilters=new c,C=t.tokenize=function(e,i){var n,r,o,a,s,l,h,c=q[e+" "];if(c)return i?0:c.slice(0);for(s=e,l=[],h=y.preFilter;s;){n&&!(r=ae.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),n=!1,(r=se.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(oe," ")}),s=s.slice(n.length));for(a in y.filter)!(r=ue[a].exec(s))||h[a]&&!(r=h[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return i?s.length:s?t.error(e):q(e,l).slice(0)},S=t.compile=function(e,t){var i,n=[],r=[],o=V[e+" "];if(!o){for(t||(t=C(e)),i=t.length;i--;)o=v(t[i]),o[H]?n.push(o):r.push(o);o=V(e,b(r,n)),o.selector=e}return o},$=t.select=function(e,t,i,n){var r,o,a,s,l,c="function"==typeof e&&e,d=!n&&C(e=c.selector||e);if(i=i||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&N&&y.relative[o[1].type]){if(!(t=(y.find.ID(a.matches[0].replace(ve,be),t)||[])[0]))return i;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=ue.needsContext.test(e)?0:o.length;r--&&(a=o[r],!y.relative[s=a.type]);)if((l=y.find[s])&&(n=l(a.matches[0].replace(ve,be),ge.test(o[0].type)&&h(t.parentNode)||t))){if(o.splice(r,1),!(e=n.length&&u(o)))return X.apply(i,n),i;break}}return(c||S(e,d))(n,t,!N,i,!t||ge.test(e)&&h(t.parentNode)||t),i},x.sortStable=H.split("").sort(W).join("")===H,x.detectDuplicates=!!M,I(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(A.createElement("fieldset"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(Q,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(i);Se.find=Te,Se.expr=Te.selectors,Se.expr[":"]=Se.expr.pseudos,Se.uniqueSort=Se.unique=Te.uniqueSort,Se.text=Te.getText,Se.isXMLDoc=Te.isXML,Se.contains=Te.contains,Se.escapeSelector=Te.escape;var Ee=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&Se(e).is(i))break;n.push(e)}return n},Me=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},Ie=Se.expr.match.needsContext,Ae=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Se.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?Se.find.matchesSelector(n,e)?[n]:[]:Se.find.matches(e,Se.grep(t,function(e){return 1===e.nodeType}))},Se.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(Se(e).filter(function(){for(t=0;t<n;t++)if(Se.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)Se.find(e,r[t],i);return n>1?Se.uniqueSort(i):i},filter:function(e){return this.pushStack(c(this,e||[],!1))},not:function(e){return this.pushStack(c(this,e||[],!0))},is:function(e){return!!c(this,"string"==typeof e&&Ie.test(e)?Se(e):e||[],!1).length}});var De,Ne=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(Se.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||De,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Ne.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Se?t[0]:t,Se.merge(this,Se.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ce,!0)),Ae.test(n[1])&&Se.isPlainObject(t))for(n in t)_e(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=ce.getElementById(n[2]),r&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):_e(e)?void 0!==i.ready?i.ready(e):e(Se):Se.makeArray(e,this)}).prototype=Se.fn,De=Se(ce);var Le=/^(?:parents|prev(?:Until|All))/,Fe={children:!0,contents:!0,next:!0,prev:!0};Se.fn.extend({has:function(e){var t=Se(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(Se.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,o=[],a="string"!=typeof e&&Se(e);if(!Ie.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&Se.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?Se.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?me.call(Se(e),this[0]):me.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Se.uniqueSort(Se.merge(this.get(),Se(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Se.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Ee(e,"parentNode")},parentsUntil:function(e,t,i){return Ee(e,"parentNode",i)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return Ee(e,"nextSibling")},prevAll:function(e){return Ee(e,"previousSibling")},nextUntil:function(e,t,i){return Ee(e,"nextSibling",i)},prevUntil:function(e,t,i){return Ee(e,"previousSibling",i)},siblings:function(e){return Me((e.parentNode||{}).firstChild,e)},children:function(e){return Me(e.firstChild)},contents:function(e){return h(e,"iframe")?e.contentDocument:(h(e,"template")&&(e=e.content||e),Se.merge([],e.childNodes))}},function(e,t){Se.fn[e]=function(i,n){var r=Se.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=Se.filter(n,r)),this.length>1&&(Fe[e]||Se.uniqueSort(r),Le.test(e)&&r.reverse()),this.pushStack(r)}});var Pe=/[^\x20\t\r\n\f]+/g;Se.Callbacks=function(e){e="string"==typeof e?d(e):Se.extend({},e);var t,i,n,r,o=[],a=[],l=-1,h=function(){for(r=r||e.once,n=t=!0;a.length;l=-1)for(i=a.shift();++l<o.length;)!1===o[l].apply(i[0],i[1])&&e.stopOnFalse&&(l=o.length,i=!1);e.memory||(i=!1),t=!1,r&&(o=i?[]:"")},c={add:function(){return o&&(i&&!t&&(l=o.length-1,a.push(i)),function t(i){Se.each(i,function(i,n){_e(n)?e.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==s(n)&&t(n)})}(arguments),i&&!t&&h()),this},remove:function(){return Se.each(arguments,function(e,t){for(var i;(i=Se.inArray(t,o,i))>-1;)o.splice(i,1),i<=l&&l--}),this},has:function(e){return e?Se.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=i="",this},disabled:function(){return!o},lock:function(){return r=a=[],i||t||(o=i=""),this},locked:function(){return!!r},fireWith:function(e,i){return r||(i=i||[],i=[e,i.slice?i.slice():i],a.push(i),t||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},Se.extend({Deferred:function(e){var t=[["notify","progress",Se.Callbacks("memory"),Se.Callbacks("memory"),2],["resolve","done",Se.Callbacks("once memory"),Se.Callbacks("once memory"),0,"resolved"],["reject","fail",Se.Callbacks("once memory"),Se.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return Se.Deferred(function(i){Se.each(t,function(t,n){var r=_e(e[n[4]])&&e[n[4]];o[n[1]](function(){var e=r&&r.apply(this,arguments);e&&_e(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(e,n,r){function o(e,t,n,r){return function(){var s=this,l=arguments,h=function(){var i,h;if(!(e<a)){if((i=n.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");h=i&&("object"==typeof i||"function"==typeof i)&&i.then,_e(h)?r?h.call(i,o(a,t,f,r),o(a,t,p,r)):(a++,h.call(i,o(a,t,f,r),o(a,t,p,r),o(a,t,f,t.notifyWith))):(n!==f&&(s=void 0,l=[i]),(r||t.resolveWith)(s,l))}},c=r?h:function(){try{h()}catch(i){Se.Deferred.exceptionHook&&Se.Deferred.exceptionHook(i,c.stackTrace),e+1>=a&&(n!==p&&(s=void 0,l=[i]),t.rejectWith(s,l))}};e?c():(Se.Deferred.getStackHook&&(c.stackTrace=Se.Deferred.getStackHook()),i.setTimeout(c))}}var a=0;return Se.Deferred(function(i){t[0][3].add(o(0,i,_e(r)?r:f,i.notifyWith)),t[1][3].add(o(0,i,_e(e)?e:f)),t[2][3].add(o(0,i,_e(n)?n:p))}).promise()},promise:function(e){return null!=e?Se.extend(e,r):r}},o={};return Se.each(t,function(e,i){var a=i[2],s=i[5];r[i[1]]=a.add,s&&a.add(function(){n=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(i[3].fire),o[i[0]]=function(){return o[i[0]+"With"](this===o?void 0:this,arguments),this},o[i[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,i=t,n=Array(i),r=de.call(arguments),o=Se.Deferred(),a=function(e){return function(i){n[e]=this,r[e]=arguments.length>1?de.call(arguments):i,--t||o.resolveWith(n,r)}};if(t<=1&&(m(e,o.done(a(i)).resolve,o.reject,!t),"pending"===o.state()||_e(r[i]&&r[i].then)))return o.then();for(;i--;)m(r[i],a(i),o.reject);return o.promise()}});var je=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Se.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&je.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},Se.readyException=function(e){i.setTimeout(function(){throw e})};var He=Se.Deferred();Se.fn.ready=function(e){return He.then(e).catch(function(e){Se.readyException(e)}),this},Se.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--Se.readyWait:Se.isReady)||(Se.isReady=!0,!0!==e&&--Se.readyWait>0||He.resolveWith(ce,[Se]))}}),Se.ready.then=He.then,"complete"===ce.readyState||"loading"!==ce.readyState&&!ce.documentElement.doScroll?i.setTimeout(Se.ready):(ce.addEventListener("DOMContentLoaded",g),i.addEventListener("load",g));var Be=function(e,t,i,n,r,o,a){var l=0,h=e.length,c=null==i;if("object"===s(i)){r=!0;for(l in i)Be(e,t,l,i[l],!0,o,a)}else if(void 0!==n&&(r=!0,_e(n)||(a=!0),c&&(a?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(Se(e),i)})),t))for(;l<h;l++)t(e[l],i,a?n:n.call(e[l],l,t(e[l],i)));return r?e:c?t.call(e):h?t(e[0],i):o},Oe=/^-ms-/,ze=/-([a-z])/g,Re=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};w.uid=1,w.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Re(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[b(t)]=i;else for(n in t)r[b(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][b(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){Array.isArray(t)?t=t.map(b):(t=b(t),t=t in n?[t]:t.match(Pe)||[]),i=t.length;for(;i--;)delete n[t[i]]}(void 0===t||Se.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!Se.isEmptyObject(t)}};var qe=new w,Ve=new w,We=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ue=/[A-Z]/g;Se.extend({hasData:function(e){return Ve.hasData(e)||qe.hasData(e)},data:function(e,t,i){return Ve.access(e,t,i)},removeData:function(e,t){Ve.remove(e,t)},_data:function(e,t,i){return qe.access(e,t,i)},_removeData:function(e,t){qe.remove(e,t)}}),Se.fn.extend({data:function(e,t){var i,n,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=Ve.get(o),1===o.nodeType&&!qe.get(o,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&(n=a[i].name,0===n.indexOf("data-")&&(n=b(n.slice(5)),y(o,n,r[n])));qe.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Ve.set(this,e)}):Be(this,function(t){var i;if(o&&void 0===t){if(void 0!==(i=Ve.get(o,e)))return i;if(void 0!==(i=y(o,e)))return i}else this.each(function(){Ve.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ve.remove(this,e)})}}),Se.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=qe.get(e,t),i&&(!n||Array.isArray(i)?n=qe.access(e,t,Se.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=Se.queue(e,t),n=i.length,r=i.shift(),o=Se._queueHooks(e,t),a=function(){Se.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return qe.get(e,i)||qe.access(e,i,{empty:Se.Callbacks("once memory").add(function(){qe.remove(e,[t+"queue",i])})})}}),Se.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?Se.queue(this[0],e):void 0===t?this:this.each(function(){var i=Se.queue(this,e,t);Se._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&Se.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Se.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=Se.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=qe.get(o[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(t)}});var Ze=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ge=RegExp("^(?:([+-])=|)("+Ze+")([a-z%]*)$","i"),Ke=["Top","Right","Bottom","Left"],Xe=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&Se.contains(e.ownerDocument,e)&&"none"===Se.css(e,"display")},Ye=function(e,t,i,n){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=i.apply(e,n||[]);for(o in t)e.style[o]=a[o];return r},Je={};Se.fn.extend({show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Xe(this)?Se(this).show():Se(this).hide()})}});var Qe=/^(?:checkbox|radio)$/i,et=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,tt=/^$|^module$|\/(?:java|ecma)script/i,it={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};it.optgroup=it.option,it.tbody=it.tfoot=it.colgroup=it.caption=it.thead,it.th=it.td;var nt=/<|&#?\w+;/;!function(){var e=ce.createDocumentFragment(),t=e.appendChild(ce.createElement("div")),i=ce.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),ye.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ye.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var rt=ce.documentElement,ot=/^key/,at=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,st=/^([^.]*)(?:\.(.+)|)/;Se.event={global:{},add:function(e,t,i,n,r){var o,a,s,l,h,c,u,d,f,p,m,g=qe.get(e);if(g)for(i.handler&&(o=i,i=o.handler,r=o.selector),r&&Se.find.matchesSelector(rt,r),i.guid||(i.guid=Se.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==Se&&Se.event.triggered!==t.type?Se.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Pe)||[""],h=t.length;h--;)s=st.exec(t[h])||[],f=m=s[1],p=(s[2]||"").split(".").sort(),f&&(u=Se.event.special[f]||{},f=(r?u.delegateType:u.bindType)||f,u=Se.event.special[f]||{},c=Se.extend({type:f,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&Se.expr.match.needsContext.test(r),namespace:p.join(".")},o),(d=l[f])||(d=l[f]=[],d.delegateCount=0,u.setup&&!1!==u.setup.call(e,n,p,a)||e.addEventListener&&e.addEventListener(f,a)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),Se.event.global[f]=!0)},remove:function(e,t,i,n,r){var o,a,s,l,h,c,u,d,f,p,m,g=qe.hasData(e)&&qe.get(e);if(g&&(l=g.events)){for(t=(t||"").match(Pe)||[""],h=t.length;h--;)if(s=st.exec(t[h])||[],f=m=s[1],p=(s[2]||"").split(".").sort(),f){for(u=Se.event.special[f]||{},f=(n?u.delegateType:u.bindType)||f,d=l[f]||[],s=s[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!r&&m!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,u.remove&&u.remove.call(e,c));a&&!d.length&&(u.teardown&&!1!==u.teardown.call(e,p,g.handle)||Se.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)Se.event.remove(e,f+t[h],i,n,!0);Se.isEmptyObject(l)&&qe.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,o,a,s=Se.event.fix(e),l=Array(arguments.length),h=(qe.get(this,"events")||{})[s.type]||[],c=Se.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=Se.event.handlers.call(this,s,h),t=0;(r=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(n=((Se.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var i,n,r,o,a,s=[],l=t.delegateCount,h=e.target;if(l&&h.nodeType&&!("click"===e.type&&e.button>=1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==e.type||!0!==h.disabled)){for(o=[],a={},i=0;i<l;i++)n=t[i],r=n.selector+" ",void 0===a[r]&&(a[r]=n.needsContext?Se(r,this).index(h)>-1:Se.find(r,this,null,[h]).length),a[r]&&o.push(n);o.length&&s.push({elem:h,handlers:o})}return h=this,l<t.length&&s.push({elem:h,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(Se.Event.prototype,e,{enumerable:!0,configurable:!0,get:_e(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[Se.expando]?e:new Se.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==I()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===I()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&h(this,"input"))return this.click(),!1},_default:function(e){return h(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},Se.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},Se.Event=function(e,t){if(!(this instanceof Se.Event))return new Se.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?E:M,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Se.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[Se.expando]=!0},Se.Event.prototype={constructor:Se.Event,isDefaultPrevented:M,isPropagationStopped:M,isImmediatePropagationStopped:M,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=E,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=E,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=E,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},Se.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ot.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&at.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},Se.event.addProp),Se.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Se.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===n||Se.contains(n,r))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),Se.fn.extend({on:function(e,t,i,n){return A(this,e,t,i,n)},one:function(e,t,i,n){return A(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,Se(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=M),this.each(function(){Se.event.remove(this,e,i,t)})}});var lt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ht=/<script|<style|<link/i,ct=/checked\s*(?:[^=]|=\s*.checked.)/i,ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Se.extend({htmlPrefilter:function(e){return e.replace(lt,"<$1></$2>")},clone:function(e,t,i){var n,r,o,a,s=e.cloneNode(!0),l=Se.contains(e.ownerDocument,e);if(!(ye.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Se.isXMLDoc(e)))for(a=S(s),o=S(e),n=0,r=o.length;n<r;n++)P(o[n],a[n]);if(t)if(i)for(o=o||S(e),a=a||S(s),n=0,r=o.length;n<r;n++)F(o[n],a[n]);else F(e,s);return a=S(s,"script"),a.length>0&&$(a,!l&&S(e,"script")),s},cleanData:function(e){for(var t,i,n,r=Se.event.special,o=0;void 0!==(i=e[o]);o++)if(Re(i)){if(t=i[qe.expando]){if(t.events)for(n in t.events)r[n]?Se.event.remove(i,n):Se.removeEvent(i,n,t.handle);i[qe.expando]=void 0}i[Ve.expando]&&(i[Ve.expando]=void 0)}}}),Se.fn.extend({detach:function(e){return H(this,e,!0)},remove:function(e){return H(this,e)},text:function(e){return Be(this,function(e){return void 0===e?Se.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return j(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){D(this,e).appendChild(e)}})},prepend:function(){return j(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=D(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return j(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return j(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Se.cleanData(S(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Se.clone(this,e,t)})},html:function(e){return Be(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ht.test(e)&&!it[(et.exec(e)||["",""])[1].toLowerCase()]){e=Se.htmlPrefilter(e);try{for(;i<n;i++)t=this[i]||{},1===t.nodeType&&(Se.cleanData(S(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return j(this,arguments,function(t){var i=this.parentNode;Se.inArray(this,e)<0&&(Se.cleanData(S(this)),i&&i.replaceChild(t,this))},e)}}),Se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Se.fn[e]=function(e){for(var i,n=[],r=Se(e),o=r.length-1,a=0;a<=o;a++)i=a===o?this:this.clone(!0),Se(r[a])[t](i),pe.apply(n,i.get());return this.pushStack(n)}});var dt=RegExp("^("+Ze+")(?!px)[a-z%]+$","i"),ft=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},pt=RegExp(Ke.join("|"),"i");!function(){function e(){if(h){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",h.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",rt.appendChild(l).appendChild(h);var e=i.getComputedStyle(h);n="1%"!==e.top,s=12===t(e.marginLeft),h.style.right="60%",a=36===t(e.right),r=36===t(e.width),h.style.position="absolute",o=36===h.offsetWidth||"absolute",rt.removeChild(l),h=null}}function t(e){return Math.round(parseFloat(e))}var n,r,o,a,s,l=ce.createElement("div"),h=ce.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",ye.clearCloneStyle="content-box"===h.style.backgroundClip,Se.extend(ye,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),o}}))}();var mt=/^(none|table(?!-c[ea]).+)/,gt=/^--/,vt={position:"absolute",visibility:"hidden",display:"block"},bt={letterSpacing:"0",fontWeight:"400"},wt=["Webkit","Moz","ms"],xt=ce.createElement("div").style;Se.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=B(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=b(t),l=gt.test(t),h=e.style;if(l||(t=R(s)),a=Se.cssHooks[t]||Se.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(e,!1,n))?r:h[t];o=typeof i,"string"===o&&(r=Ge.exec(i))&&r[1]&&(i=_(e,t,r),o="number"),null!=i&&i===i&&("number"===o&&(i+=r&&r[3]||(Se.cssNumber[s]?"":"px")),ye.clearCloneStyle||""!==i||0!==t.indexOf("background")||(h[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(l?h.setProperty(t,i):h[t]=i))}},css:function(e,t,i,n){var r,o,a,s=b(t);return gt.test(t)||(t=R(s)),a=Se.cssHooks[t]||Se.cssHooks[s],a&&"get"in a&&(r=a.get(e,!0,i)),void 0===r&&(r=B(e,t,n)),"normal"===r&&t in bt&&(r=bt[t]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),Se.each(["height","width"],function(e,t){Se.cssHooks[t]={get:function(e,i,n){if(i)return!mt.test(Se.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?W(e,t,n):Ye(e,vt,function(){return W(e,t,n)})},set:function(e,i,n){var r,o=ft(e),a="border-box"===Se.css(e,"boxSizing",!1,o),s=n&&V(e,t,n,a,o);return a&&ye.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-V(e,t,"border",!1,o)-.5)),s&&(r=Ge.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=Se.css(e,t)),q(e,i,s)}}}),Se.cssHooks.marginLeft=O(ye.reliableMarginLeft,function(e,t){if(t)return(parseFloat(B(e,"marginLeft"))||e.getBoundingClientRect().left-Ye(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),Se.each({margin:"",padding:"",border:"Width"},function(e,t){Se.cssHooks[e+t]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];n<4;n++)r[e+Ke[n]+t]=o[n]||o[n-2]||o[0];return r}},"margin"!==e&&(Se.cssHooks[e+t].set=q)}),Se.fn.extend({css:function(e,t){return Be(this,function(e,t,i){var n,r,o={},a=0;if(Array.isArray(t)){for(n=ft(e),r=t.length;a<r;a++)o[t[a]]=Se.css(e,t[a],!1,n);return o}return void 0!==i?Se.style(e,t,i):Se.css(e,t)},e,t,arguments.length>1)}}),Se.Tween=U,U.prototype={constructor:U,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||Se.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(Se.cssNumber[i]?"":"px")},cur:function(){var e=U.propHooks[this.prop];return e&&e.get?e.get(this):U.propHooks._default.get(this)},run:function(e){var t,i=U.propHooks[this.prop];return this.options.duration?this.pos=t=Se.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):U.propHooks._default.set(this),this}},U.prototype.init.prototype=U.prototype,U.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=Se.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){Se.fx.step[e.prop]?Se.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[Se.cssProps[e.prop]]&&!Se.cssHooks[e.prop]?e.elem[e.prop]=e.now:Se.style(e.elem,e.prop,e.now+e.unit)}}},U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Se.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},Se.fx=U.prototype.init,Se.fx.step={};var yt,_t,kt=/^(?:toggle|show|hide)$/,Ct=/queueHooks$/;Se.Animation=Se.extend(Q,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return _(i.elem,e,Ge.exec(t),i),i}]},tweener:function(e,t){_e(e)?(t=e,e=["*"]):e=e.match(Pe);for(var i,n=0,r=e.length;n<r;n++)i=e[n],Q.tweeners[i]=Q.tweeners[i]||[],Q.tweeners[i].unshift(t)},prefilters:[Y],prefilter:function(e,t){t?Q.prefilters.unshift(e):Q.prefilters.push(e)}}),Se.speed=function(e,t,i){var n=e&&"object"==typeof e?Se.extend({},e):{complete:i||!i&&t||_e(e)&&e,duration:e,easing:i&&t||t&&!_e(t)&&t};return Se.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in Se.fx.speeds?n.duration=Se.fx.speeds[n.duration]:n.duration=Se.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){_e(n.old)&&n.old.call(this),n.queue&&Se.dequeue(this,n.queue)},n},Se.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Xe).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=Se.isEmptyObject(e),o=Se.speed(t,i,n),a=function(){var t=Q(this,Se.extend({},e),o);(r||qe.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=Se.timers,a=qe.get(this);if(r)a[r]&&a[r].stop&&n(a[r]);else for(r in a)a[r]&&a[r].stop&&Ct.test(r)&&n(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(i),t=!1,o.splice(r,1));!t&&i||Se.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=qe.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],o=Se.timers,a=n?n.length:0;for(i.finish=!0,Se.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),Se.each(["toggle","show","hide"],function(e,t){var i=Se.fn[t];Se.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(K(t,!0),e,n,r)}}),Se.each({slideDown:K("show"),slideUp:K("hide"),slideToggle:K("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Se.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),Se.timers=[],Se.fx.tick=function(){var e,t=0,i=Se.timers;for(yt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||Se.fx.stop(),yt=void 0},Se.fx.timer=function(e){Se.timers.push(e),Se.fx.start()},Se.fx.interval=13,Se.fx.start=function(){_t||(_t=!0,Z())},Se.fx.stop=function(){_t=null},Se.fx.speeds={slow:600,fast:200,_default:400},Se.fn.delay=function(e,t){return e=Se.fx?Se.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(r)}})},function(){var e=ce.createElement("input"),t=ce.createElement("select"),i=t.appendChild(ce.createElement("option"));e.type="checkbox",ye.checkOn=""!==e.value,ye.optSelected=i.selected,e=ce.createElement("input"),e.value="t",e.type="radio",ye.radioValue="t"===e.value}();var St,$t=Se.expr.attrHandle;Se.fn.extend({attr:function(e,t){return Be(this,Se.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Se.removeAttr(this,e)})}}),Se.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?Se.prop(e,t,i):(1===o&&Se.isXMLDoc(e)||(r=Se.attrHooks[t.toLowerCase()]||(Se.expr.match.bool.test(t)?St:void 0)),void 0!==i?null===i?void Se.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:(n=Se.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!ye.radioValue&&"radio"===t&&h(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(Pe);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),St={set:function(e,t,i){return!1===t?Se.removeAttr(e,i):e.setAttribute(i,i),i}},Se.each(Se.expr.match.bool.source.match(/\w+/g),function(e,t){var i=$t[t]||Se.find.attr;$t[t]=function(e,t,n){var r,o,a=t.toLowerCase();return n||(o=$t[a],$t[a]=r,r=null!=i(e,t,n)?a:null,$t[a]=o),r}});var Tt=/^(?:input|select|textarea|button)$/i,Et=/^(?:a|area)$/i;Se.fn.extend({prop:function(e,t){return Be(this,Se.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Se.propFix[e]||e]})}}),Se.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&Se.isXMLDoc(e)||(t=Se.propFix[t]||t,r=Se.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=Se.find.attr(e,"tabindex");return t?parseInt(t,10):Tt.test(e.nodeName)||Et.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ye.optSelected||(Se.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),Se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Se.propFix[this.toLowerCase()]=this}),Se.fn.extend({addClass:function(e){var t,i,n,r,o,a,s,l=0;if(_e(e))return this.each(function(t){Se(this).addClass(e.call(this,t,te(this)))});if(t=ie(e),t.length)for(;i=this[l++];)if(r=te(i),n=1===i.nodeType&&" "+ee(r)+" "){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");s=ee(n),r!==s&&i.setAttribute("class",s)}return this},removeClass:function(e){var t,i,n,r,o,a,s,l=0;if(_e(e))return this.each(function(t){Se(this).removeClass(e.call(this,t,te(this)))});if(!arguments.length)return this.attr("class","");if(t=ie(e),t.length)for(;i=this[l++];)if(r=te(i),n=1===i.nodeType&&" "+ee(r)+" "){for(a=0;o=t[a++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");s=ee(n),r!==s&&i.setAttribute("class",s)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):_e(e)?this.each(function(i){Se(this).toggleClass(e.call(this,i,te(this),t),t)}):this.each(function(){var t,r,o,a;if(n)for(r=0,o=Se(this),a=ie(e);t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==i||(t=te(this),t&&qe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":qe.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+ee(te(i))+" ").indexOf(t)>-1)return!0;return!1}});var Mt=/\r/g;Se.fn.extend({val:function(e){var t,i,n,r=this[0];{if(arguments.length)return n=_e(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,Se(this).val()):e,null==r?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=Se.map(r,function(e){return null==e?"":e+""})),(t=Se.valHooks[this.type]||Se.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return(t=Se.valHooks[r.type]||Se.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(Mt,""):null==i?"":i)}}}),Se.extend({valHooks:{option:{get:function(e){var t=Se.find.attr(e,"value");return null!=t?t:ee(Se.text(e))}},select:{get:function(e){var t,i,n,r=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:r.length;for(n=o<0?l:a?o:0;n<l;n++)if(i=r[n],(i.selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!h(i.parentNode,"optgroup"))){if(t=Se(i).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var i,n,r=e.options,o=Se.makeArray(t),a=r.length;a--;)n=r[a],(n.selected=Se.inArray(Se.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),Se.each(["radio","checkbox"],function(){Se.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=Se.inArray(Se(e).val(),t)>-1}},ye.checkOn||(Se.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),ye.focusin="onfocusin"in i;var It=/^(?:focusinfocus|focusoutblur)$/,At=function(e){e.stopPropagation()};Se.extend(Se.event,{trigger:function(e,t,n,r){var o,a,s,l,h,c,u,d,f=[n||ce],p=be.call(e,"type")?e.type:e,m=be.call(e,"namespace")?e.namespace.split("."):[];if(a=d=s=n=n||ce,3!==n.nodeType&&8!==n.nodeType&&!It.test(p+Se.event.triggered)&&(p.indexOf(".")>-1&&(m=p.split("."),p=m.shift(),m.sort()),h=p.indexOf(":")<0&&"on"+p,e=e[Se.expando]?e:new Se.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:Se.makeArray(t,[e]),u=Se.event.special[p]||{},r||!u.trigger||!1!==u.trigger.apply(n,t))){if(!r&&!u.noBubble&&!ke(n)){for(l=u.delegateType||p,It.test(l+p)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(n.ownerDocument||ce)&&f.push(s.defaultView||s.parentWindow||i)}for(o=0;(a=f[o++])&&!e.isPropagationStopped();)d=a,e.type=o>1?l:u.bindType||p,c=(qe.get(a,"events")||{})[e.type]&&qe.get(a,"handle"),c&&c.apply(a,t),(c=h&&a[h])&&c.apply&&Re(a)&&(e.result=c.apply(a,t),!1===e.result&&e.preventDefault());return e.type=p,r||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(f.pop(),t)||!Re(n)||h&&_e(n[p])&&!ke(n)&&(s=n[h],s&&(n[h]=null),Se.event.triggered=p,e.isPropagationStopped()&&d.addEventListener(p,At),n[p](),e.isPropagationStopped()&&d.removeEventListener(p,At),Se.event.triggered=void 0,s&&(n[h]=s)),e.result}},simulate:function(e,t,i){var n=Se.extend(new Se.Event,i,{type:e,isSimulated:!0});Se.event.trigger(n,null,t)}}),Se.fn.extend({trigger:function(e,t){return this.each(function(){Se.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return Se.event.trigger(e,t,i,!0)}}),ye.focusin||Se.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){Se.event.simulate(t,e.target,Se.event.fix(e))};Se.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=qe.access(n,t);r||n.addEventListener(e,i,!0),qe.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=qe.access(n,t)-1;r?qe.access(n,t,r):(n.removeEventListener(e,i,!0),qe.remove(n,t))}}});var Dt=i.location,Nt=Date.now(),Lt=/\?/;Se.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||Se.error("Invalid XML: "+e),t};var Ft=/\[\]$/,Pt=/\r?\n/g,jt=/^(?:submit|button|image|reset|file)$/i,Ht=/^(?:input|select|textarea|keygen)/i;Se.param=function(e,t){var i,n=[],r=function(e,t){var i=_e(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!Se.isPlainObject(e))Se.each(e,function(){r(this.name,this.value)});else for(i in e)ne(i,e[i],t,r);return n.join("&")},Se.fn.extend({serialize:function(){return Se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Se.prop(this,"elements");return e?Se.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Se(this).is(":disabled")&&Ht.test(this.nodeName)&&!jt.test(e)&&(this.checked||!Qe.test(e))}).map(function(e,t){var i=Se(this).val();return null==i?null:Array.isArray(i)?Se.map(i,function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}}):{name:t.name,value:i.replace(Pt,"\r\n")}}).get()}});var Bt=/%20/g,Ot=/#.*$/,zt=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)$/gm,qt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Vt=/^(?:GET|HEAD)$/,Wt=/^\/\//,Ut={},Zt={},Gt="*/".concat("*"),Kt=ce.createElement("a");Kt.href=Dt.href,Se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dt.href,type:"GET",isLocal:qt.test(Dt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ae(ae(e,Se.ajaxSettings),t):ae(Se.ajaxSettings,e)},ajaxPrefilter:re(Ut),ajaxTransport:re(Zt),ajax:function(e,t){function n(e,t,n,s){var h,d,f,x,y,_=t;c||(c=!0,l&&i.clearTimeout(l),r=void 0,a=s||"",k.readyState=e>0?4:0,h=e>=200&&e<300||304===e,n&&(x=se(p,k,n)),x=le(p,x,k,h),h?(p.ifModified&&(y=k.getResponseHeader("Last-Modified"),y&&(Se.lastModified[o]=y),(y=k.getResponseHeader("etag"))&&(Se.etag[o]=y)),204===e||"HEAD"===p.type?_="nocontent":304===e?_="notmodified":(_=x.state,d=x.data,f=x.error,h=!f)):(f=_,!e&&_||(_="error",e<0&&(e=0))),k.status=e,k.statusText=(t||_)+"",h?v.resolveWith(m,[d,_,k]):v.rejectWith(m,[k,_,f]),k.statusCode(w),w=void 0,u&&g.trigger(h?"ajaxSuccess":"ajaxError",[k,p,h?d:f]),b.fireWith(m,[k,_]),u&&(g.trigger("ajaxComplete",[k,p]),--Se.active||Se.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,o,a,s,l,h,c,u,d,f,p=Se.ajaxSetup({},t),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?Se(m):Se.event,v=Se.Deferred(),b=Se.Callbacks("once memory"),w=p.statusCode||{},x={},y={},_="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Rt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=y[e.toLowerCase()]=y[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)k.always(e[k.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||_;return r&&r.abort(t),n(0,t),this}};if(v.promise(k),p.url=((e||p.url||Dt.href)+"").replace(Wt,Dt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Pe)||[""],null==p.crossDomain){h=ce.createElement("a");try{h.href=p.url,h.href=h.href,p.crossDomain=Kt.protocol+"//"+Kt.host!=h.protocol+"//"+h.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=Se.param(p.data,p.traditional)),oe(Ut,p,t,k),c)return k;u=Se.event&&p.global,u&&0==Se.active++&&Se.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Vt.test(p.type),o=p.url.replace(Ot,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Bt,"+")):(f=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Lt.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(zt,"$1"),f=(Lt.test(o)?"&":"?")+"_="+Nt+++f),p.url=o+f),p.ifModified&&(Se.lastModified[o]&&k.setRequestHeader("If-Modified-Since",Se.lastModified[o]),Se.etag[o]&&k.setRequestHeader("If-None-Match",Se.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&k.setRequestHeader("Content-Type",p.contentType),k.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Gt+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)k.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(m,k,p)||c))return k.abort();if(_="abort",b.add(p.complete),k.done(p.success),k.fail(p.error),r=oe(Zt,p,t,k)){if(k.readyState=1,u&&g.trigger("ajaxSend",[k,p]),c)return k;p.async&&p.timeout>0&&(l=i.setTimeout(function(){k.abort("timeout")},p.timeout));try{c=!1,r.send(x,n)}catch(e){if(c)throw e;n(-1,e)}}else n(-1,"No Transport");return k},getJSON:function(e,t,i){return Se.get(e,t,i,"json")},getScript:function(e,t){return Se.get(e,void 0,t,"script")}}),Se.each(["get","post"],function(e,t){Se[t]=function(e,i,n,r){return _e(i)&&(r=r||n,n=i,i=void 0),Se.ajax(Se.extend({url:e,type:t,dataType:r,data:i,success:n},Se.isPlainObject(e)&&e))}}),Se._evalUrl=function(e){return Se.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},Se.fn.extend({wrapAll:function(e){var t;return this[0]&&(_e(e)&&(e=e.call(this[0])),t=Se(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return _e(e)?this.each(function(t){Se(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Se(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=_e(e);return this.each(function(i){Se(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){Se(this).replaceWith(this.childNodes)}),this}}),Se.expr.pseudos.hidden=function(e){return!Se.expr.pseudos.visible(e)},Se.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},Se.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Xt={0:200,1223:204},Yt=Se.ajaxSettings.xhr();ye.cors=!!Yt&&"withCredentials"in Yt,ye.ajax=Yt=!!Yt,Se.ajaxTransport(function(e){var t,n;if(ye.cors||Yt&&!e.crossDomain)return{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Xt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&i.setTimeout(function(){t&&n()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),Se.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),Se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return Se.globalEval(e),e}}}),Se.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Se.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=Se("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),ce.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Jt=[],Qt=/(=)\?(?=&|$)|\?\?/;Se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||Se.expando+"_"+Nt++;return this[e]=!0,e}}),Se.ajaxPrefilter("json jsonp",function(e,t,n){var r,o,a,s=!1!==e.jsonp&&(Qt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=_e(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Qt,"$1"+r):!1!==e.jsonp&&(e.url+=(Lt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||Se.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=i[r],i[r]=function(){a=arguments},n.always(function(){void 0===o?Se(i).removeProp(r):i[r]=o,e[r]&&(e.jsonpCallback=t.jsonpCallback,Jt.push(r)),a&&_e(o)&&o(a[0]),a=o=void 0}),"script"}),ye.createHTMLDocument=function(){var e=ce.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),Se.parseHTML=function(e,t,i){if("string"!=typeof e)return[];"boolean"==typeof t&&(i=t,t=!1);var n,r,o;return t||(ye.createHTMLDocument?(t=ce.implementation.createHTMLDocument(""),n=t.createElement("base"),n.href=ce.location.href,t.head.appendChild(n)):t=ce),r=Ae.exec(e),o=!i&&[],r?[t.createElement(r[1])]:(r=T([e],t,o),o&&o.length&&Se(o).remove(),Se.merge([],r.childNodes))},Se.fn.load=function(e,t,i){var n,r,o,a=this,s=e.indexOf(" ");return s>-1&&(n=ee(e.slice(s)),e=e.slice(0,s)),_e(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&Se.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?Se("<div>").append(Se.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},Se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Se.fn[t]=function(e){return this.on(t,e)}}),Se.expr.pseudos.animated=function(e){return Se.grep(Se.timers,function(t){return e===t.elem}).length},Se.offset={setOffset:function(e,t,i){var n,r,o,a,s,l,h,c=Se.css(e,"position"),u=Se(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=Se.css(e,"top"),l=Se.css(e,"left"),h=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,h?(n=u.position(),a=n.top,r=n.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),_e(t)&&(t=t.call(e,i,Se.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):u.css(d)}},Se.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Se.offset.setOffset(this,e,t)});var t,i,n=this[0];if(n)return n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,i,n=this[0],r={top:0,left:0};if("fixed"===Se.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===Se.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&(r=Se(e).offset(),r.top+=Se.css(e,"borderTopWidth",!0),r.left+=Se.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-Se.css(n,"marginTop",!0),left:t.left-r.left-Se.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===Se.css(e,"position");)e=e.offsetParent;return e||rt})}}),Se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;Se.fn[e]=function(n){return Be(this,function(e,n,r){var o;if(ke(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r)return o?o[t]:e[n];o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):e[n]=r},e,n,arguments.length)}}),Se.each(["top","left"],function(e,t){Se.cssHooks[t]=O(ye.pixelPosition,function(e,i){if(i)return i=B(e,t),dt.test(i)?Se(e).position()[t]+"px":i})}),Se.each({Height:"height",Width:"width"},function(e,t){Se.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){Se.fn[n]=function(r,o){var a=arguments.length&&(i||"boolean"!=typeof r),s=i||(!0===r||!0===o?"margin":"border");return Be(this,function(t,i,r){var o;return ke(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?Se.css(t,i,s):Se.style(t,i,r,s)},t,a?r:void 0,a)}})}),Se.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){Se.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),Se.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Se.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),Se.proxy=function(e,t){var i,n,r;if("string"==typeof t&&(i=e[t],t=e,e=i),_e(e))return n=de.call(arguments,2),r=function(){return e.apply(t||this,n.concat(de.call(arguments)))},r.guid=e.guid=e.guid||Se.guid++,r},Se.holdReady=function(e){e?Se.readyWait++:Se.ready(!0)},Se.isArray=Array.isArray,Se.parseJSON=JSON.parse,Se.nodeName=h,Se.isFunction=_e,Se.isWindow=ke,Se.camelCase=b,Se.type=s,Se.now=Date.now,Se.isNumeric=function(e){var t=Se.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},n=[],void 0!==(r=function(){return Se}.apply(t,n))&&(e.exports=r);var ei=i.jQuery,ti=i.$;return Se.noConflict=function(e){return i.$===Se&&(i.$=ti),e&&i.jQuery===Se&&(i.jQuery=ei),Se},o||(i.jQuery=i.$=Se),Se})},function(e,t,i){var n,r;!function(o,a){n=a,void 0!==(r="function"==typeof n?n.call(t,i,t,e):n)&&(e.exports=r)}(0,function(){function e(e,t,i){return e<t?t:e>i?i:e}function t(e){return 100*(-1+e)}function i(e,i,n){var r;return r="translate3d"===h.positionUsing?{transform:"translate3d("+t(e)+"%,0,0)"}:"translate"===h.positionUsing?{transform:"translate("+t(e)+"%,0)"}:{"margin-left":t(e)+"%"},r.transition="all "+i+"ms "+n,r}function n(e,t){return("string"==typeof e?e:a(e)).indexOf(" "+t+" ")>=0}function r(e,t){var i=a(e),r=i+t;n(i,t)||(e.className=r.substring(1))}function o(e,t){var i,r=a(e);n(e,t)&&(i=r.replace(" "+t+" "," "),e.className=i.substring(1,i.length-1))}function a(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function s(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var l={};l.version="0.2.0";var h=l.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};l.configure=function(e){var t,i;for(t in e)void 0!==(i=e[t])&&e.hasOwnProperty(t)&&(h[t]=i);return this},l.status=null,l.set=function(t){var n=l.isStarted();t=e(t,h.minimum,1),l.status=1===t?null:t;var r=l.render(!n),o=r.querySelector(h.barSelector),a=h.speed,s=h.easing;return r.offsetWidth,c(function(e){""===h.positionUsing&&(h.positionUsing=l.getPositioningCSS()),u(o,i(t,a,s)),1===t?(u(r,{transition:"none",opacity:1}),r.offsetWidth,setTimeout(function(){u(r,{transition:"all "+a+"ms linear",opacity:0}),setTimeout(function(){l.remove(),e()},a)},a)):setTimeout(e,a)}),this},l.isStarted=function(){return"number"==typeof l.status},l.start=function(){l.status||l.set(0);var e=function(){setTimeout(function(){l.status&&(l.trickle(),e())},h.trickleSpeed)};return h.trickle&&e(),this},l.done=function(e){return e||l.status?l.inc(.3+.5*Math.random()).set(1):this},l.inc=function(t){var i=l.status;return i?("number"!=typeof t&&(t=(1-i)*e(Math.random()*i,.1,.95)),i=e(i+t,0,.994),l.set(i)):l.start()},l.trickle=function(){return l.inc(Math.random()*h.trickleRate)},function(){var e=0,t=0;l.promise=function(i){return i&&"resolved"!==i.state()?(0===t&&l.start(),e++,t++,i.always(function(){t--,0===t?(e=0,l.done()):l.set((e-t)/e)}),this):this}}(),l.render=function(e){if(l.isRendered())return document.getElementById("nprogress");r(document.documentElement,"nprogress-busy");var i=document.createElement("div");i.id="nprogress",i.innerHTML=h.template;var n,o=i.querySelector(h.barSelector),a=e?"-100":t(l.status||0),c=document.querySelector(h.parent);return u(o,{transition:"all 0 linear",transform:"translate3d("+a+"%,0,0)"}),h.showSpinner||(n=i.querySelector(h.spinnerSelector))&&s(n),c!=document.body&&r(c,"nprogress-custom-parent"),c.appendChild(i),i},l.remove=function(){o(document.documentElement,"nprogress-busy"),o(document.querySelector(h.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&s(e)},l.isRendered=function(){return!!document.getElementById("nprogress")},l.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var c=function(){function e(){var i=t.shift();i&&i(e)}var t=[];return function(i){t.push(i),1==t.length&&e()}}(),u=function(){function e(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function t(e){var t=document.body.style;if(e in t)return e;for(var i,n=r.length,o=e.charAt(0).toUpperCase()+e.slice(1);n--;)if((i=r[n]+o)in t)return i;return e}function i(i){return i=e(i),o[i]||(o[i]=t(i))}function n(e,t,n){t=i(t),e.style[t]=n}var r=["Webkit","O","Moz","ms"],o={};return function(e,t){var i,r,o=arguments;if(2==o.length)for(i in t)void 0!==(r=t[i])&&t.hasOwnProperty(i)&&n(e,i,r);else n(e,o[1],o[2])}}();return l})},function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=[];e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?"object"===(void 0===t?"undefined":n(t))?(void 0==r[e]&&(r[e]={}),r[e]=Object.assign(r[e],t)):void 0!=r[e]?r[e]:r[e]={}:r}},function(e,i,n){(function(e){/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.8
 *
 */
!function(e){e.fn.extend({slimScroll:function(i){var n={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},r=e.extend(n,i);return this.each(function(){function n(t){if(h){var t=t||window.event,i=0;t.wheelDelta&&(i=-t.wheelDelta/120),t.detail&&(i=t.detail/3);var n=t.target||t.srcTarget||t.srcElement;e(n).closest("."+r.wrapperClass).is(x.parent())&&o(i,!0),t.preventDefault&&!w&&t.preventDefault(),w||(t.returnValue=!1)}}function o(e,t,i){w=!1;var n=e,o=x.outerHeight()-$.outerHeight();if(t&&(n=parseInt($.css("top"))+e*parseInt(r.wheelStep)/100*$.outerHeight(),n=Math.min(Math.max(n,0),o),n=e>0?Math.ceil(n):Math.floor(n),$.css({top:n+"px"})),m=parseInt($.css("top"))/(x.outerHeight()-$.outerHeight()),n=m*(x[0].scrollHeight-x.outerHeight()),i){n=e;var a=n/x[0].scrollHeight*x.outerHeight();a=Math.min(Math.max(a,0),o),$.css({top:a+"px"})}x.scrollTop(n),x.trigger("slimscrolling",~~n),s(),l()}function a(){p=Math.max(x.outerHeight()/x[0].scrollHeight*x.outerHeight(),b),$.css({height:p+"px"});var e=p==x.outerHeight()?"none":"block";$.css({display:e})}function s(){if(a(),clearTimeout(d),m==~~m){if(w=r.allowPageScroll,g!=m){var e=0==~~m?"top":"bottom";x.trigger("slimscroll",e)}}else w=!1;if(g=m,p>=x.outerHeight())return void(w=!0);$.stop(!0,!0).fadeIn("fast"),r.railVisible&&S.stop(!0,!0).fadeIn("fast")}function l(){r.alwaysVisible||(d=setTimeout(function(){r.disableFadeOut&&h||c||u||($.fadeOut("slow"),S.fadeOut("slow"))},1e3))}var h,c,u,d,f,p,m,g,v="<div></div>",b=30,w=!1,x=e(this);if(x.parent().hasClass(r.wrapperClass)){var y=x.scrollTop();if($=x.siblings("."+r.barClass),S=x.siblings("."+r.railClass),a(),e.isPlainObject(i)){if("height"in i&&"auto"==i.height){x.parent().css("height","auto"),x.css("height","auto");var _=x.parent().parent().height();x.parent().css("height",_),x.css("height",_)}else if("height"in i){var k=i.height;x.parent().css("height",k),x.css("height",k)}if("scrollTo"in i)y=parseInt(r.scrollTo);else if("scrollBy"in i)y+=parseInt(r.scrollBy);else if("destroy"in i)return $.remove(),S.remove(),void x.unwrap();o(y,!1,!0)}}else if(!(e.isPlainObject(i)&&"destroy"in i)){r.height="auto"==r.height?x.parent().height():r.height;var C=e(v).addClass(r.wrapperClass).css({position:"relative",overflow:"hidden",width:r.width,height:r.height});x.css({overflow:"hidden",width:r.width,height:r.height});var S=e(v).addClass(r.railClass).css({width:r.size,height:"100%",position:"absolute",top:0,display:r.alwaysVisible&&r.railVisible?"block":"none","border-radius":r.railBorderRadius,background:r.railColor,opacity:r.railOpacity,zIndex:90}),$=e(v).addClass(r.barClass).css({background:r.color,width:r.size,position:"absolute",top:0,opacity:r.opacity,display:r.alwaysVisible?"block":"none","border-radius":r.borderRadius,BorderRadius:r.borderRadius,MozBorderRadius:r.borderRadius,WebkitBorderRadius:r.borderRadius,zIndex:99}),T="right"==r.position?{right:r.distance}:{left:r.distance};S.css(T),$.css(T),x.wrap(C),x.parent().append($),x.parent().append(S),r.railDraggable&&$.bind("mousedown",function(i){var n=e(document);return u=!0,t=parseFloat($.css("top")),pageY=i.pageY,n.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,$.css("top",currTop),o(0,$.position().top,!1)}),n.bind("mouseup.slimscroll",function(e){u=!1,l(),n.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),S.hover(function(){s()},function(){l()}),$.hover(function(){c=!0},function(){c=!1}),x.hover(function(){h=!0,s(),l()},function(){h=!1,l()}),x.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(f=e.originalEvent.touches[0].pageY)}),x.bind("touchmove",function(e){if(w||e.originalEvent.preventDefault(),e.originalEvent.touches.length){o((f-e.originalEvent.touches[0].pageY)/r.touchScrollStep,!0),f=e.originalEvent.touches[0].pageY}}),a(),"bottom"===r.start?($.css({top:x.outerHeight()-$.outerHeight()}),o(0,!0)):"top"!==r.start&&(o(e(r.start).position().top,null,!0),r.alwaysVisible||$.hide()),function(e){window.addEventListener?(e.addEventListener("DOMMouseScroll",n,!1),e.addEventListener("mousewheel",n,!1)):document.attachEvent("onmousewheel",n)}(this)}}),this}}),e.fn.extend({slimscroll:e.fn.slimScroll})}(e)}).call(i,n(0))},function(e,t,i){"use strict";e.exports=function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.componentState.callback=e;try{if(null===myLayout.selectedItem)try{myLayout.root.contentItems[0].addChild(t)}catch(e){myLayout.root.addChild(t)}else myLayout.selectedItem.addChild(t)}catch(e){webix.alert("Oops, something went wrong!")}return!1}}},function(e,t,i){i(27)(i(28))},function(e,t,i){"use strict";(function(t,i){e.exports=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("error"==e.status)webix.alert({title:"Oops, something went wrong!",type:"alert-error",width:t("#layoutContainer").width()/2,text:e.message,callback:function(e){e&&void 0!=n.error&&"function"==typeof n.error&&n.error()}});else{if("success"!=e.status)return webix.message("Oops, something went wrong!","error");webix.alert({title:"Success",width:t("#layoutContainer").width()/2,text:e.message,callback:function(e){e&&void 0!=n.success&&"function"==typeof n.success&&n.success()}})}i.done()}}).call(t,i(0),i(1))},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){function n(e){return i(r(e))}function r(e){var t=o[e];if(!(t+1))throw Error("Cannot find module '"+e+"'.");return t}var o={"./modal":9,"./modal.js":9,"./other":4,"./other.js":4};n.keys=function(){return Object.keys(o)},n.resolve=r,e.exports=n,n.id=8},function(e,t,i){"use strict";e.exports=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{$$(e.uri).show(),"function"==typeof t&&t($$(e.uri))}catch(o){var n={view:"window",id:e.uri,head:'<i class="fa fa-'+e.icon+'"></i> '+e.title+" <span onclick=\"$$('"+e.uri+'\').close()" class="minimazedModalMenu"><i class="fa fa-remove"></i></span><span onclick="$$(\''+e.uri+'\').hide()" class="minimazedModalMenu"><i class="fa fa-minus-circle"></i></span>'},r=i(26)("./"+e.uri+".js")(e,t);webix.ui(Object.assign(n,r)).show()}}}},function(e,t,i){"use strict";(function(t){var n=(i(3),i(1));i(5);var r=[];r.cd=function(e){(""+e).toLowerCase().indexOf("not found!")<=0&&(""+e).toLowerCase().indexOf("missing")<=0?terminal.options.basePath=e.replace("[32m","").replace("[39m",""):terminal.line(e)},e.exports=function(e,i){return{position:"center",move:!0,resize:!0,width:t("#layoutContainer").width()/1.5,height:t("#layoutContainer").height()/1,padding:-4,margin:0,body:{id:"bodyTerminal",view:"template",template:"<div id='terminal-shell'></div>",margin:0,padding:-4},on:{onShow:function(){if(""!=t("#terminal-shell").html())return!0;n.start(),webix.ajax().get(Route("terminal.index"),function(e){window.terminal=new Terminal("#terminal-shell",JSON.parse(e),r),t('[view_id="bodyTerminal"] div').css("padding",0),t(".CodeMirror-fullscreen").height(t("#layoutContainer").height()+34),t(".CodeMirror-scroll").slimScroll({height:t("#layoutContainer").height()+34,color:"#fff"}),t(".CodeMirror-fullscreen").css("position","absolute"),n.done(),"function"==typeof i&&i($$(e.uri))})},onViewResize:function(){t("#terminal-shell").height(t('[view_id="bodyTerminal"] .webix_template').height()-20),t("#terminal-shell").width(t('[view_id="bodyTerminal"] .webix_template').width()-20),terminal.scrollToBottom()}}}}}).call(t,i(0))},function(e,t,i){"use strict";e.exports=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=i.responseJSON,o=webix.ui({container:n||e.getElement()[0],rows:[{view:"template",type:"header",template:r.file+" Line: "+r.line},{view:"template",type:"header",template:""+r.message}]});e.on("resize",function(){o&&o.$setSize(e.width,e.height)}),webix.alert("Error! Status: "+i.status+" <br> "+i.statusText)}},function(e,t,i){(function(t){e.exports=function(e,n,r){var o=null;e.on("open",function(){const a=i(33)(n.href,r);var s={container:e.getElement()[0]};try{var l=i(34)("./"+n.href+".js")(a,n,e)}catch(e){webix.alert("Error! Component "+n.href+" not found!");var l=i(14)(n)}o=webix.ui(Object.assign(s,l)),"function"==typeof n.callback&&n.callback(a),t(r,{status:"done"})}),e.on("resize",function(){o&&o.$setSize(e.width,e.height)})}}).call(t,i(2))},function(e,t,i){"use strict";(function(t){var n=i(1);e.exports=function(e){var i=!1,r=function(e,t,i){n.start(),webix.ajax().post(Route("remote.update",{name:"file"}),{saveFile:e,saveValue:t},function(e){i(),n.done()})};n.start(),webix.ajax().get(Route("remote.get",{name:"file",getContent:e.id}),function(o){webix.ui({view:"window",id:"editFWindow",head:"Edit file - "+e.value,fullscreen:!0,modal:!0,body:{rows:[{view:"template",template:"<div id='monacoEditor' style='height: 100%'></div>"},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Save and Exit (Alt+S)",icon:"floppy-o",click:function(){r(e.id,i.getValue(),function(){$$("editFWindow").close()})},hotkey:"Alt+S"},{view:"button",type:"iconButton",label:"Save (Ctrl+S)",icon:"floppy-o",click:function(){r(e.id,i.getValue(),function(){i.focus()})},hotkey:"Ctrl+S"},{view:"button",type:"iconButton",label:"Open Diff and Save (Shift+Ctrl+S)",icon:"floppy-o",click:function(){webix.ui({view:"window",id:"lookDiff",head:e.value,position:"center",resize:!0,modal:!0,move:!0,width:t("#layoutContainer").width()/1.1,height:t("#layoutContainer").height()/1.1,body:{rows:[{view:"template",template:"<div id='monacoDiff' style='height: 100%'></div>"},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Save and Exit (Key: 1)",icon:"floppy-o",click:function(){r(e.id,i.getValue(),function(){$$("lookDiff").close(),$$("editFWindow").close()})},hotkey:"1"},{view:"button",type:"iconButton",label:"Save and close Diff (Key: 2)",icon:"floppy-o",click:function(){r(e.id,i.getValue(),function(){$$("lookDiff").close(),i.focus()})},hotkey:"2"},{view:"button",type:"iconButton",label:"Close (Esc)",icon:"remove",click:function(){$$("lookDiff").close(),i.focus()},hotkey:"esc"}]}]},on:{onShow:function(){var t=e.id.split(".");t=t[t.length-1];var n=monaco.editor.createModel(o,void 0!=vs_exts[t]?vs_exts[t]:"javascript"),r=monaco.editor.createModel(i.getValue(),void 0!=vs_exts[t]?vs_exts[t]:"javascript"),a=monaco.editor.createDiffEditor(document.getElementById("monacoDiff"),{language:void 0!=vs_exts[t]?vs_exts[t]:"javascript",theme:"vs-dark",readOnly:!0,automaticLayout:!0});a.setModel({original:n,modified:r}),a.focus()}}}).show()},hotkey:"Shift+Ctrl+S"},{view:"button",type:"iconButton",label:"Close (Esc)",icon:"remove",click:function(){void 0==$$("lookDiff")&&(i.getValue()!=o?webix.confirm({title:"Close editor?",text:"The file has been modified!",type:"confirm",callback:function(e){e?$$("editFWindow").close():i.focus()}}):$$("editFWindow").close())},hotkey:"esc"}]}]},on:{onShow:function(){var t=e.id.split(".");t=t[t.length-1],i=monaco.editor.create(document.getElementById("monacoEditor"),{value:o,language:void 0!=vs_exts[t]?vs_exts[t]:"javascript",theme:"vs-dark",automaticLayout:!0}),i.focus(),n.done()}}}).show()})}}).call(t,i(0))},function(e,t,i){"use strict";e.exports=function(e){return{type:"line",rows:[{view:"template",type:"header",template:e.header},{template:"<h1>Undefined template</h1>"}]}}},function(e,t,i){e.exports=i(16)},function(e,t,i){"use strict";(function(e,n){window.vs_exts={bat:"bat",coffee:"coffee",cpp:"cpp",csharp:"csharp",css:"css",less:"less",scss:"scss",html:"html",htm:"html",ini:"ini",env:"ini",md:"markdown",php:"php",sql:"sql",xml:"xml",yaml:"yaml",js:"javascript",json:"json"},window.Route=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0==routList[t])return routList;var n=routList[t],r="";return e.each(i,function(e,t){n.indexOf("{"+e+"}")>0?n=n.replace("{"+e+"}",t):r+=(""!=r?"&":"")+e+"="+t}),n+(""!=r?"?"+r:"")},window.Remote=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return Route("remote."+t,{name:e})},i(17);var r=i(21);t.CStore=n,t.layout=r}).call(t,i(0),i(2))},function(module,exports,__webpack_require__){(function(setImmediate){window.webix||(webix={}),webix.version="4.4.13",webix.codebase="./",webix.name="core",webix.cdn="//cdn.webix.com",webix.clone=function(e){var t=webix.clone.a;return t.prototype=e,new t},webix.clone.a=function(){},webix.extend=function(e,t,i){if(e.$protoWait)return webix.PowerArray.insertAt.call(e.$protoWait,t,1),e;for(var n in t)n in e&&!i||(e[n]=t[n]);return t.defaults&&webix.extend(e.defaults,t.defaults),t.$init&&t.$init.call(e),e},webix.copy=function(e){var t;arguments.length>1?(t=arguments[0],e=arguments[1]):t=webix.isArray(e)?[]:{};for(var i in e){var n=e[i];!n||"object"!=typeof n||n instanceof RegExp?t[i]=n:webix.isDate(n)?t[i]=new Date(n):webix.env.esModern&&(n instanceof Map||n instanceof Set||n instanceof WeakMap||n instanceof WeakSet)?t[i]=n:(t[i]=webix.isArray(n)?[]:{},webix.copy(t[i],n))}return t},webix.single=function(e){var t=null;return function(i){return t||(t=new e({})),t.c&&t.c.apply(t,arguments),t}},webix.protoUI=function(){var e=arguments,t=e[0].name,i=function(e){if(!i)return webix.ui[t].prototype;var n=i.$protoWait;if(n){for(var r=[n[0]],o=1;o<n.length;o++)r[o]=n[o],r[o].$protoWait&&(r[o]=r[o].call(webix,r[o].name)),r[o].prototype&&r[o].prototype.name&&(webix.ui[r[o].prototype.name]=r[o]);if(webix.ui[t]=webix.proto.apply(webix,r),i.d)for(var o=0;o<i.d.length;o++)webix.type(webix.ui[t],i.d[o]);i=n=null}return this!=webix?new webix.ui[t](e):webix.ui[t]};return i.$protoWait=Array.prototype.slice.call(arguments,0),webix.ui[t]=i},webix.proto=function(){for(var e=arguments,t=e[0],i=!!t.$init,n=[],r=e.length-1;r>0;r--){if("function"==typeof e[r]&&(e[r]=e[r].prototype),e[r].$init&&n.push(e[r].$init),e[r].defaults){var o=e[r].defaults;t.defaults||(t.defaults={});for(var a in o)webix.isUndefined(t.defaults[a])&&(t.defaults[a]=o[a])}if(e[r].type&&t.type)for(var a in e[r].type)t.type[a]||(t.type[a]=e[r].type[a]);for(var s in e[r])t[s]||!1===t[s]||(t[s]=e[r][s])}i&&n.push(t.$init),t.$init=function(){for(var e=0;e<n.length;e++)n[e].apply(this,arguments)},t.$skin&&t.$skin();var l=function(e){this.$ready=[],this.$init(e),this.e&&this.e(e,this.defaults);for(var t=0;t<this.$ready.length;t++)this.$ready[t].call(this)};return l.prototype=t,t=e=null,l},webix.bind=function(e,t){return function(){return e.apply(t,arguments)}},webix.require=function(e,t,i){var n=webix.promise.defer();if(t&&!0!==t&&(n=n.then(function(){t.call(i||this)})),webix.require.disabled)return n.resolve(),n;if("string"==typeof e){if(!0!==webix.f[e]){var r=e;if((""+e).match(/^([a-z]+\:)*\/\//i)||(r=webix.codebase+e),".css"==e.substr(e.length-4)){var o=webix.html.create("LINK",{type:"text/css",rel:"stylesheet",href:r});return document.getElementsByTagName("head")[0].appendChild(o),n.resolve(),n}!0===t?(webix.exec(webix.ajax().sync().get(r).responseText),webix.f[e]=!0):webix.f[e]?webix.f[e].push(n):(webix.f[e]=[n],webix.ajax(r,function(t){webix.exec(t);var i=webix.f[e];webix.f[e]=!0;for(var n=0;n<i.length;n++)i[n].resolve()}))}else n.resolve();return n}var a=e.length||0;if(a){var s=function(){a?(a--,webix.require(e[e.length-a-1],s,i)):n.resolve()};s()}else{for(var l in e)a++;var s=function(){0===--a&&n.resolve()};for(var l in e)webix.require(l,s,i)}},webix.f={},webix.exec=function(e){window.execScript?window.execScript(e):window.eval(e)},webix.wrap=function(e,t){return e?function(){var i=e.apply(this,arguments);return t.apply(this,arguments),i}:t},webix.isUndefined=function(e){return void 0===e},webix.delay=function(e,t,i,n){return window.setTimeout(function(){if(!t||!t.$destructed){var n=e.apply(t,i||[]);return e=t=i=null,n}},n||1)},webix.once=function(e){var t=!0;return function(){t&&(t=!1,e.apply(this,arguments))}},webix.uid=function(){return this.g||(this.g=(new Date).valueOf()),++this.g},webix.toNode=function(e){return"string"==typeof e?document.getElementById(e):e},webix.toArray=function(e){return webix.extend(e||[],webix.PowerArray,!0)},webix.toFunctor=function(str,scope){if("string"==typeof str){var method=str.replace("()","");return scope&&scope[method]?scope[method]:window[method]||eval(str)}return str},webix.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},webix.isDate=function(e){return e instanceof Date},webix.stringify=function(e){var t=Date.prototype.toJSON;Date.prototype.toJSON=function(){return webix.i18n.parseFormatStr(this)};var i;return i=e instanceof Date?e.toJSON():JSON.stringify(e),Date.prototype.toJSON=t,i},webix.h={},webix.UE=function(e,t,i,n){n=n||{},n.inner=!0,webix.event(e,t,i,n)},webix.event=function(e,t,i,n){n=n||{},e=webix.toNode(e);var r=n.id||webix.uid();n.bind&&(i=webix.bind(i,n.bind));var o=[e,t,i,n.capture];return n.inner||(webix.h[r]=o),e.addEventListener?e.addEventListener(t,i,!!n.capture):e.attachEvent&&e.attachEvent("on"+t,o[2]=function(){return i.apply(e,arguments)}),r},webix.eventRemove=function(e){if(e){var t=webix.h[e];t[0].removeEventListener?t[0].removeEventListener(t[1],t[2],!!t[3]):t[0].detachEvent&&t[0].detachEvent("on"+t[1],t[2]),delete this.h[e]}},webix.EventSystem={$init:function(){this.i||(this.i={},this.j={},this.k={})},blockEvent:function(){this.i.l=!0},unblockEvent:function(){this.i.l=!1},mapEvent:function(e){webix.extend(this.k,e,!0)},on_setter:function(e){if(e)for(var t in e){var i=webix.toFunctor(e[t],this.$scope),n=t.indexOf("->");-1!==n?this[t.substr(0,n)].attachEvent(t.substr(n+2),webix.bind(i,this)):this.attachEvent(t,i)}},callEvent:function(e,t){if(this.i.l)return!0;e=e.toLowerCase();var i=this.i[e.toLowerCase()],n=!0;if(i)for(var r=0;r<i.length;r++)!1===i[r].apply(this,t||[])&&(n=!1);if(this.k[e]){var o=this.k[e];o.$eventSource=this,o.callEvent(e,t)||(n=!1),o.$eventSource=null}return n},attachEvent:function(e,t,i){e=e.toLowerCase(),i=i||webix.uid(),t=webix.toFunctor(t,this.$scope);var n=this.i[e]||webix.toArray();return arguments[3]?n.unshift(t):n.push(t),this.i[e]=n,this.j[i]={f:t,t:e},i},detachEvent:function(e){if(!this.j[e]){var t=(e+"").toLowerCase();return void(this.i[t]&&(this.i[t]=webix.toArray()))}var i=this.j[e].t,n=this.j[e].f;this.i[i].remove(n),delete this.j[e]},hasEvent:function(e){e=e.toLowerCase();var t=this.i[e];if(t&&t.length)return!0;var i=this.k[e];return!!i&&i.hasEvent(e)}},webix.extend(webix,webix.EventSystem,!0),webix.PowerArray={removeAt:function(e,t){e>=0&&this.splice(e,t||1)},remove:function(e){this.removeAt(this.find(e))},insertAt:function(e,t){if(t||0===t){var i=this.splice(t,this.length-t);this[t]=e,this.push.apply(this,i)}else this.push(e)},find:function(e){for(var t=0;t<this.length;t++)if(e==this[t])return t;return-1},each:function(e,t){for(var i=0;i<this.length;i++)e.call(t||this,this[i])},map:function(e,t){for(var i=0;i<this.length;i++)this[i]=e.call(t||this,this[i]);return this},filter:function(e,t){for(var i=0;i<this.length;i++)e.call(t||this,this[i])||(this.splice(i,1),i--);return this}},webix.env={},function(){webix.env.strict=!!window.webix_strict,webix.env.https="https:"===document.location.protocol,webix.env.esModern=!!Object.assign;var e=navigator.userAgent;if((-1!=e.indexOf("Mobile")||-1!=e.indexOf("Windows Phone"))&&(webix.env.mobile=!0),(webix.env.mobile||-1!=e.indexOf("iPad")||-1!=e.indexOf("Android"))&&(webix.env.touch=!0),-1!=e.indexOf("Opera"))webix.env.isOpera=!0;else{if(webix.env.isIE=!!document.all||-1!==e.indexOf("Trident"),webix.env.isIE){8==parseFloat(navigator.appVersion.split("MSIE")[1])&&(webix.env.isIE8=!0)}webix.env.isEdge=-1!=e.indexOf("Edge"),webix.env.isFF=-1!=e.indexOf("Firefox"),webix.env.isWebKit=-1!=e.indexOf("KHTML"),webix.env.isSafari=webix.env.isWebKit&&-1!=e.indexOf("Mac")&&-1==e.indexOf("Chrome"),(webix.env.isIE||webix.env.isEdge||webix.env.isFF)&&(webix.env.maxHTMLElementSize=1e7),webix.env.isSafari&&(webix.env.maxHTMLElementSize=1e8)}-1!=e.toLowerCase().indexOf("android")&&(webix.env.isAndroid=!0,-1!=e.toLowerCase().indexOf("trident")&&(webix.env.isAndroid=!1,webix.env.isIEMobile=!0)),webix.env.transform=!1,webix.env.transition=!1;for(var t=-1,i=["","webkit","Moz","O","ms"],n=["","-webkit-","-Moz-","-o-","-ms-"],r=document.createElement("DIV"),o=0;o<5;o++){var a=i[o]?i[o]+"Transform":"transform";if(void 0!==r.style[a]){t=o;break}}if(t>-1){webix.env.cssPrefix=n[t];var s=webix.env.jsPrefix=i[t];webix.env.transform=s?s+"Transform":"transform",webix.env.transition=s?s+"Transition":"transition",webix.env.transitionDuration=s?s+"TransitionDuration":"transitionDuration",r.style[webix.env.transform]="translate3d(0,0,0)",webix.env.translate=r.style[webix.env.transform]?"translate3d":"translate",webix.env.transitionEnd="-Moz-"==webix.env.cssPrefix?"transitionend":s?s+"TransitionEnd":"transitionend"}webix.env.pointerevents=!webix.env.isIE||null!==RegExp("Trident/.*rv:11").exec(e)}(),webix.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),webix.env.svganimation=function(){return document.implementation.hasFeature("https://www.w3.org/TR/SVG11/feature#SVG-animation","1.1")}(),webix.html={m:0,ky:{},denySelect:function(){webix.m||(webix.m=document.onselectstart),document.onselectstart=webix.html.stopEvent},allowSelect:function(){0!==webix.m&&(document.onselectstart=webix.m||null),webix.m=0},index:function(e){for(var t=0;e=e.previousSibling;)t++;return t},n:{},createCss:function(e,t){var i="";t=t||"";for(var n in e)i+=n+":"+e[n]+";";var r=this.n[i+t];return r||(r="s"+webix.uid(),this.addStyle("."+r+(t||"")+"{"+i+"}"),this.n[i+t]=r),r},addStyle:function(e,t){var i=t?this.ky[t]:this.ky.default;i||(i=document.createElement("style"),i.setAttribute("type","text/css"),i.setAttribute("media","screen,print"),document.getElementsByTagName("head")[0].appendChild(i),t?this.ky[t]=i:this.ky.default=i),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(document.createTextNode(e))},removeStyle:function(e){var t=this.ky[e||"default"];t&&(t.innerHTML="")},create:function(e,t,i){t=t||{};var n=document.createElement(e);for(var r in t)n.setAttribute(r,t[r]);return t.style&&(n.style.cssText=t.style),t.class&&(n.className=t.class),i&&(n.innerHTML=i),n},getValue:function(e){return e=webix.toNode(e),e?webix.isUndefined(e.value)?e.innerHTML:e.value:""},remove:function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)this.remove(e[t]);else e&&e.parentNode&&e.parentNode.removeChild(e)},insertBefore:function(e,t,i){e&&(t&&t.parentNode?t.parentNode.insertBefore(e,t):i.appendChild(e))},locate:function(e,t){var i;for(e.tagName?i=e:(e=e||event,i=e.target||e.srcElement);i;){if(i.getAttribute){var n=i.getAttribute(t);if(n)return n}i=i.parentNode}return null},offset:function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect(),i=document.body,n=document.documentElement,r=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,a=n.clientTop||i.clientTop||0,s=n.clientLeft||i.clientLeft||0,l=t.top+r-a,h=t.left+o-s;return{y:Math.round(l),x:Math.round(h),width:e.offsetWidth,height:e.offsetHeight}}for(var l=0,h=0;e;)l+=parseInt(e.offsetTop,10),h+=parseInt(e.offsetLeft,10),e=e.offsetParent;return{y:l,x:h,width:e.offsetHeight,height:e.offsetWidth}},posRelative:function(e){return e=e||event,webix.isUndefined(e.offsetX)?{x:e.layerX,y:e.layerY}:{x:e.offsetX,y:e.offsetY}},pos:function(e){if(e=e||event,e.touches&&e.touches[0]&&(e=e.touches[0]),e.pageX||e.pageY)return{x:e.pageX,y:e.pageY};var t=webix.env.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:e.clientX+t.scrollLeft-t.clientLeft,y:e.clientY+t.scrollTop-t.clientTop}},preventEvent:function(e){return e&&e.preventDefault&&e.preventDefault(),e&&(e.returnValue=!1),webix.html.stopEvent(e)},stopEvent:function(e){return e=e||event,e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1},triggerEvent:function(e,t,i){if(document.createEventObject){var n=document.createEventObject();e.fireEvent&&e.fireEvent("on"+i,n)}else{var n=document.createEvent(t);n.initEvent(i,!0,!0),e.dispatchEvent&&e.dispatchEvent(n)}},addCss:function(e,t,i){i&&-1!==e.className.indexOf(t)||(e.className+=" "+t)},removeCss:function(e,t){e.className=e.className.replace(RegExp(" "+t,"g"),"")},getTextSize:function(e,t,i){var n=webix.html.create("DIV",{class:"webix_view webix_measure_size "+(t||"")},"");n.style.cssText="height:auto;visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;"+(i?"width:"+i+"px;":"width:auto;white-space:nowrap;"),document.body.appendChild(n);for(var r="object"!=typeof e?[e]:e,i=0,o=0,a=0;a<r.length;a++)n.innerHTML=r[a],i=Math.max(i,n.offsetWidth),o=Math.max(o,n.offsetHeight);return webix.html.remove(n),{width:i,height:o}},download:function(e,t){var i=!1;if("object"==typeof e){if(window.navigator.msSaveBlob)return window.navigator.msSaveBlob(e,t);e=window.URL.createObjectURL(e),i=!0}var n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),webix.delay(function(){i&&window.URL.revokeObjectURL(e),document.body.removeChild(n),n.remove()})},TC:function(e){if(!e)return"";var t=e.className||"";return t.baseVal&&(t=t.baseVal),t.indexOf||(t=""),t},setSelectionRange:function(e,t,i){if(t=t||0,i=i||t,e.focus(),e.setSelectionRange)e.setSelectionRange(t,i);else{var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n.select()}},getSelectionRange:function(e){if("selectionStart"in e)return{start:e.selectionStart||0,end:e.selectionEnd||0};e.focus();var t=document.selection.createRange(),i=t.getBookmark(),n=e.createTextRange();n.moveToBookmark(i);var r=n.text.length;n.collapse(!0),n.moveStart("character",-e.value.length);var o=n.text.length;return{start:o,end:o+r}}},webix.ready=function(e){this.o?e.call():this.p.push(e)},webix.p=[],function(){var e=document.getElementsByTagName("SCRIPT");e.length&&(e=(e[e.length-1].getAttribute("src")||"").split("/"),e.splice(e.length-1,1),webix.codebase=e.slice(0,e.length).join("/")+"/");var t=function(){webix.env.isIE&&(document.body.className+=" webix_ie"),webix.callEvent("onReady",[])},i=function(){webix.o=!0,window.webix_ready&&webix.isArray(webix_ready)&&(webix.p=webix_ready.concat(webix.p));for(var e=0;e<webix.p.length;e++)webix.p[e].call();webix.p=[]};webix.attachEvent("onReady",function(e){e?i():webix.delay(i)}),"complete"==document.readyState?t():webix.event(window,"load",t)}(),webix.locale=webix.locale||{},webix.ready(function(){webix.event(document.body,"click",function(e){webix.callEvent("onClick",[e||event])})}),webix.editStop=function(){webix.callEvent("onEditEnd",[])},function(e){function t(e){n.setImmediate?setImmediate(e):n.importScripts||!n.addEventListener?setTimeout(e):(r++,o[r]=e,n.postMessage(r,"*"))}function i(e){"use strict";function n(e,t,i,n){if(2==l)return n();if("object"!=typeof h&&"function"!=typeof h||"function"!=typeof e)n();else try{var r=0;e.call(h,function(e){r++||(h=e,t())},function(e){r++||(h=e,i())})}catch(e){h=e,i()}}function r(){var e;try{e=h&&h.then}catch(e){return h=e,l=2,r()}n(e,function(){l=1,r()},function(){l=2,r()},function(){try{1==l&&"function"==typeof o?h=o(h):2==l&&"function"==typeof a&&(h=a(h),l=1)}catch(e){return h=e,u()}h==s?(h=TypeError(),u()):n(e,function(){u(3)},u,function(){u(1==l&&3)})})}if("function"!=typeof e&&void 0!=e)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var o,a,s=this,l=0,h=0,c=[];s.promise=s,s.resolve=function(e){return o=s.fn,a=s.er,l||(h=e,l=1,t(r)),s},s.reject=function(e){return o=s.fn,a=s.er,l||(h=e,l=2,t(r)),s},s.fG=1,s.then=function(e,t){if(1!=this.fG)throw TypeError();var n=new i;return n.fn=e,n.er=t,3==l?n.resolve(h):4==l?n.reject(h):c.push(n),n},s.catch=function(e){return s.then(null,e)},s.fail=function(e){return s.then(null,e)};var u=function(e){l=e||4;for(var t=0;t<c.length;t++){var i=c[t];3==l&&i.resolve(h)||i.reject(h)}};try{"function"==typeof e&&e(s.resolve,s.reject)}catch(e){s.reject(e)}return s}var n=this,r=1,o={},a=!1;!n.setImmediate&&n.addEventListener&&n.addEventListener("message",function(e){if(e.source==n)if(a)t(o[e.data]);else{a=!0;try{o[e.data]()}catch(e){}delete o[e.data],a=!1}}),i.resolve=function(e){if(1!=this.fG)throw TypeError();return e instanceof i?e:new i(function(t){t(e)})},i.reject=function(e){if(1!=this.fG)throw TypeError();return new i(function(t,i){i(e)})},i.all=function(e){function t(i,r){return r?n.resolve(r):i?n.reject(i):(0==e.reduce(function(e,t){return t&&t.then?e+1:e},0)&&n.resolve(e),void e.map(function(i,n){i&&i.then&&i.then(function(i){return e[n]=i,t(),i},t)}))}if(1!=this.fG)throw TypeError();if(!(e instanceof Array))return i.reject(TypeError());var n=new i;return t(),n},i.race=function(e){function t(i,r){return r?n.resolve(r):i?n.reject(i):(0==e.reduce(function(e,t){return t&&t.then?e+1:e},0)&&n.resolve(e),void e.map(function(e,i){e&&e.then&&e.then(function(e){t(null,e)},t)}))}if(1!=this.fG)throw TypeError();if(!(e instanceof Array))return i.reject(TypeError());if(0==e.length)return new i;var n=new i;return t(),n},i.fG=1,i.defer=function(){return new i(null)},e.promise=i}(webix),function(){function e(e,t){this.kD={},this.lD=[],this.mD=e,this.U="",t?this.nD(t):this.o=webix.ajax(e).then(function(e){return e.text()}).then(webix.bind(function(e){return e=e.split("/*api*/")[1],this.nD(JSON.parse(e)),this.kD},this))}function t(t,i){return new e(t,i).oD()}var i="__webix_remote_error";e.prototype={nD:function(e){if(e.$key&&(this.U=e.$key),e.$vars)for(var t in e.$vars)this.kD[t]=e.$vars[t];this.df(e,this.kD,"")},df:function(e,t,i){for(var n in e)if("$key"!==n&&"$vars"!==n){var r=e[n];if("object"==typeof r){var o=t[n]={};this.df(r,o,i+n+".")}else t[n]=this.pD(this,i+n)}},qD:function(e,t){var i=this.rD(this,e,t);return this.lD.push(i),this.sD(),i},sD:function(){this.tD||(this.tD=setTimeout(webix.bind(this.uD,this),1))},uD:function(){for(var e=[],t=this.lD,n=0;n<this.lD.length;n++){var r=this.lD[n];r.$sync?(t.splice(n,1),n--):e.push({name:r.$name,args:r.$args})}if(t.length){var o=webix.ajax(),a=this.vD(e);webix.callEvent("onBeforeRemoteCall",[o,a,{}]);var s=o.post(this.mD,a).then(function(e){for(var n=e.json(),r=n.data,o=0;o<r.length;o++){var e=r[o],a=r[o]&&r[o][i];a?(webix.callEvent("onRemoteError",[a]),t[o].reject(a)):t[o].resolve(e)}},function(e){for(var i=0;i<t.length;i++)t[i].reject(e);throw e});webix.callEvent("onAfterRemoteCall",[s])}this.lD=[],this.tD=null},H:function(){var e=null;this.$sync=!0;var t=[{name:this.$name,args:this.$args}];try{var n=webix.ajax(),r=this.$context.vD(t);webix.callEvent("onBeforeRemoteCall",[n,r,{sync:!0}]);var o=n.sync().post(this.$context.mD,r);webix.callEvent("onAfterRemoteCall",[null]);var e=JSON.parse(o.responseText).data[0];e[i]&&(e=null)}catch(e){}return e},rD:function(e,t,i){var n=webix.promise.defer();return n.sync=e.H,n.$name=t,n.$args=i,n.$context=this,n},pD:function(e,t){return function(){return e.qD(t,[].slice.call(arguments))}},oD:function(){return this.o||this.kD},vD:function(e){return{key:this.U,payload:e}}},webix.remote=function(e,i){if("object"!=typeof e)return t(e,i);var n=document.getElementsByTagName("script");i=e,e=n[n.length-1].src,webix.remote=t(e,i)}}(),webix.skin={},webix.skin.air={topLayout:"wide",barHeight:34,tabbarHeight:36,rowHeight:34,toolbarHeight:22,listItemHeight:28,inputHeight:34,inputPadding:2,menuHeight:34,menuMargin:0,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:0,popupPadding:8,calendarHeight:70,padding:0,optionHeight:27},webix.skin.aircompact={topLayout:"wide",barHeight:24,tabbarHeight:26,rowHeight:26,toolbarHeight:22,listItemHeight:28,inputHeight:29,inputPadding:2,menuHeight:25,menuMargin:0,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:12,sliderPadding:10,sliderBorder:1,vSliderPadding:12.5,vSliderHeight:100,switchHeight:20,switchWidth:40,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:0,popupPadding:8,calendarHeight:70,padding:0,optionHeight:23},webix.skin.web={name:"web",topLayout:"space",barHeight:28,tabbarHeight:30,rowHeight:30,toolbarHeight:22,listItemHeight:28,inputHeight:28,inputPadding:2,menuMargin:0,menuHeight:27,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:11,sliderPadding:10,sliderBorder:1,vSliderPadding:10,vSliderHeight:100,switchHeight:19,switchWidth:40,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8,accordion:0},tabMargin:3,tabTopOffset:3,popupPadding:8,calendarHeight:70,padding:0,optionHeight:22},webix.skin.clouds={topLayout:"wide",barHeight:36,tabbarHeight:46,rowHeight:34,toolbarHeight:22,listItemHeight:32,inputHeight:30,inputPadding:2,menuHeight:34,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:12,sliderPadding:10,sliderBorder:1,vSliderPadding:11,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:2,tabOffset:0,tabBottomOffset:10,popupPadding:8,calendarHeight:70,padding:0},webix.skin.terrace={topLayout:"space",barHeight:37,tabbarHeight:39,rowHeight:38,toolbarHeight:22,listItemHeight:28,inputHeight:30,inputPadding:2,menuMargin:0,menuHeight:32,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:14,vSliderHeight:100,switchHeight:20,switchWidth:50,layoutMargin:{space:20,wide:20,clean:0,head:4,line:-1,toolbar:4,form:8},layoutPadding:{space:20,wide:0,clean:0,head:0,line:0,toolbar:4,form:8},tabMargin:2,tabOffset:0,popupPadding:8,calendarHeight:70,padding:17,optionHeight:24},webix.skin.metro={topLayout:"space",barHeight:36,tabbarHeight:46,rowHeight:34,toolbarHeight:36,listItemHeight:32,inputHeight:30,buttonHeight:45,inputPadding:2,menuHeight:36,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:0,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,popupPadding:8,calendarHeight:70,padding:0,optionHeight:23},webix.skin.light={topLayout:"space",barHeight:36,tabbarHeight:46,rowHeight:32,toolbarHeight:36,listItemHeight:32,inputHeight:34,buttonHeight:45,inputPadding:3,menuHeight:36,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:15,wide:15,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:15,wide:0,clean:0,head:0,line:0,toolbar:0,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,popupPadding:8,calendarHeight:70,padding:0,optionHeight:27},webix.skin.glamour={topLayout:"space",barHeight:39,tabbarHeight:39,rowHeight:32,toolbarHeight:39,listItemHeight:32,inputHeight:34,buttonHeight:34,inputPadding:3,menuHeight:36,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:13,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:15,wide:15,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:15,wide:0,clean:0,head:0,line:0,toolbar:3,form:8,accordion:0},tabMargin:1,tabOffset:0,tabBottomOffset:1,popupPadding:8,calendarHeight:70,padding:0,optionHeight:27},webix.skin.touch={topLayout:"space",barHeight:42,tabbarHeight:50,rowHeight:42,toolbarHeight:42,listItemHeight:42,inputHeight:42,inputPadding:4,menuHeight:42,labelTopHeight:24,unitHeaderHeight:34,inputSpacing:4,borderWidth:1,sliderHandleWidth:18,sliderPadding:10,sliderBorder:1,vSliderPadding:17,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:4,clean:0,head:4,line:-1,toolbar:0,form:0,accordion:9},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:8,accordion:0},tabMargin:2,tabOffset:0,tabBottomOffset:10,calendar:{headerHeight:70,timepickerHeight:35,height:310,width:300},padding:0,customCheckbox:!0,customRadio:!0,popupPadding:8,optionHeight:32},webix.skin.flat={topLayout:"space",barHeight:46,tabbarHeight:46,rowHeight:34,toolbarHeight:46,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:34,labelTopHeight:22,propertyItemHeight:28,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:15,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:17,accordion:0},tabMargin:4,tabOffset:0,tabBottomOffset:6,tabTopOffset:1,customCheckbox:!0,customRadio:!0,popupPadding:8,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:32},webix.skin.compact={topLayout:"space",barHeight:34,tabbarHeight:34,rowHeight:24,toolbarHeight:34,listItemHeight:28,inputHeight:30,buttonHeight:30,inputPadding:3,menuHeight:28,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:12,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:20,switchWidth:40,layoutMargin:{space:5,wide:5,clean:0,head:4,line:-1,toolbar:4,form:4,accordion:5},layoutPadding:{space:5,wide:0,clean:0,head:0,line:0,toolbar:2,form:12,accordion:0},tabMargin:3,tabOffset:0,tabBottomOffset:3,tabTopOffset:1,customCheckbox:!0,customRadio:!0,popupPadding:8,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:23},webix.skin.material={topLayout:"space",barHeight:45,tabbarHeight:47,rowHeight:38,toolbarHeight:22,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:2,menuMargin:0,menuHeight:34,labelTopHeight:16,propertyItemHeight:34,inputSpacing:4,borderWidth:1,sliderHandleWidth:16,sliderPadding:10,sliderBorder:1,switchHeight:22,switchWidth:50,layoutMargin:{material:10,space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:16,accordion:0},layoutPadding:{material:10,space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:16,accordion:0},tabMargin:0,tabOffset:0,tabBottomOffset:0,tabTopOffset:0,customCheckbox:!0,customRadio:!0,popupPadding:8,calendarHeight:70,padding:0,accordionType:"accordion"},webix.skin.contrast={topLayout:"space",barHeight:46,tabbarHeight:46,rowHeight:34,toolbarHeight:46,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:34,labelTopHeight:22,propertyItemHeight:28,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:15,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:8,form:8,accordion:10},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:4,form:17,accordion:0},tabMargin:4,tabOffset:0,tabBottomOffset:6,tabTopOffset:1,customCheckbox:!0,customRadio:!0,popupPadding:8,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:32},webix.skin.set=function(e){if(webix.skin.$active=webix.skin[e],webix.skin.$name=e,webix.ui)for(var t in webix.ui){var i=webix.ui[t];i&&i.prototype&&i.prototype.$skin&&i.prototype.$skin(i.prototype)}},webix.skin.set(window.webix_skin||"flat"),webix.Destruction={$init:function(){var e=this.VE={obj:this};webix.destructors.push(e)},destructor:function(){var e=this.s;if(this.di&&this.editCancel(),this.callEvent&&this.callEvent("onDestruct",[]),this.destructor=function(){},this.VE.obj=null,this.getChildViews){var t=this.getChildViews();if(t)for(var i=0;i<t.length;i++)t[i].destructor();if(this.Ns)for(var i=0;i<this.Ns.length;i++)this.Ns[i].destructor()}if(delete webix.ui.views[e.id],e.$id){var n=this.getTopParentView();n&&n.oC&&n.oC(e.$id)}this.t=null,this.u=null,this.v=null,this.w&&(this.w.innerHTML="",this.w.t=null),this.x&&this.x.parentNode&&this.x.parentNode.removeChild(this.x),this.data&&this.data.destructor&&this.data.destructor(),this.unbind&&this.unbind(),this.data=null,this.x=this.$view=this.w=this.y=null,this.i=this.j={},webix.UIManager.A==this&&(webix.UIManager.A=null);var r=e.url;r&&r.$proxy&&r.release&&r.release(),this.$scope=null,this.$destructed=!0}},webix.destructors=[],webix.event(window,"unload",function(){webix.callEvent("unload",[]),webix.B=!0;for(var e=0;e<webix.destructors.length;e++){var t=webix.destructors[e].obj;t&&t.destructor()}webix.destructors=[],webix.ui.et=webix.toArray();for(var i in webix.h)webix.eventRemove(i)}),function(){var e={},t={},i=RegExp("(\\r\\n|\\n)","g"),n=RegExp('(\\")',"g"),r=RegExp("(\\\\)","g"),o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,s=function(e){return o[e]||"&amp;"};webix.template=function(o){if("function"==typeof o)return o;if(e[o])return e[o];if(o=""+(o||""),-1!=o.indexOf("->")){var a=o.split("->");switch(a[0]){case"html":o=webix.html.getValue(a[1]);break;case"http":o=(new webix.ajax).sync().get(a[1],{uid:webix.uid()}).responseText}}if(o=""+(o||""),webix.env.strict){if(!t[o]){t[o]=[];var s=[];if(o.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,function(e,t,i,n,r){s.push({pos:r,str:e,fn:function(e,r){return e[t]?i:n}})}),o.replace(/\{common\.([^}\(]*)\}/g,function(e,t,i){s.push({pos:i,str:e,fn:function(e,i){return i[t]||""}})}),o.replace(/\{common\.([^\}\(]*)\(\)\}/g,function(e,t,i){s.push({pos:i,str:e,fn:function(e,i){return i[t]?i[t].apply(this,arguments):""}})}),o.replace(/\{obj\.([^:}]*)\}/g,function(e,t,i){s.push({pos:i,str:e,fn:function(e,i){return e[t]}})}),o.replace("{obj}",function(e,t,i){s.push({pos:i,str:e,fn:function(e,t){return e}})}),o.replace(/#([^#'";, ]+)#/gi,function(e,t,i){"!"==t.charAt(0)?(t=t.substr(1),s.push({pos:i,str:e,fn:function(e,i){return-1!=t.indexOf(".")&&(e=webix.CodeParser.collapseNames(e)),webix.template.escape(e[t])}})):s.push({pos:i,str:e,fn:function(e,i){return-1!=t.indexOf(".")&&(e=webix.CodeParser.collapseNames(e)),e[t]}})}),s.sort(function(e,t){return e.pos>t.pos?1:-1}),s.length){for(var l=0,h=function(e,i,n){t[e].push(function(){return e.slice(i,n)})},c=0;c<s.length;c++){var u=s[c].pos;h(o,l,u),t[o].push(s[c].fn),l=u+s[c].str.length}h(o,l,o.length)}else t[o].push(function(){return o})}return function(){for(var e="",i=0;i<t[o].length;i++)e+=t[o][i].apply(this,arguments);return e}}o=o.replace(r,"\\\\"),o=o.replace(i,"\\n"),o=o.replace(n,'\\"'),o=o.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"'),o=o.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\""),o=o.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"'),o=o.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"'),o=o.replace("{obj}",'"+obj+"'),o=o.replace(/#([^#'";, ]+)#/gi,function(e,t){return"!"==t.charAt(0)?'"+webix.template.escape(obj.'+t.substr(1)+')+"':'"+(obj.'+t+')+"'});try{e[o]=Function("obj","common",'return "'+o+'";')}catch(e){}return e[o]},webix.template.escape=function(e){return e===webix.undefined||null===e?"":(""+e||"").replace(a,s)},webix.template.empty=function(){return""},webix.template.bind=function(e){return webix.bind(webix.template(e),this)},webix.type=function(e,t){if(e.$protoWait)return e.d||(e.d=[]),void e.d.push(t);"function"==typeof e&&(e=e.prototype),e.types||(e.types={default:e.type},e.type.name="default");var i=t.name,n=e.type;i&&(n=e.types[i]=webix.clone(t.baseType?e.types[t.baseType]:e.type));for(var r in t)0===r.indexOf("template")?n[r]=webix.template(t[r]):n[r]=t[r];return i}}(),webix.Settings={$init:function(){this.s=this.config={}},define:function(e,t){return"object"==typeof e?this.C(e):this.D(e,t)},D:function(e,t){var i=this[e+"_setter"];return this.s[e]=i?i.call(this,t,e):t},C:function(e){if(e)for(var t in e)this.D(t,e[t])},e:function(e,t){var i={};t&&(i=webix.extend(i,t)),"object"!=typeof e||e.tagName||webix.extend(i,e,!0),this.C(i)},E:function(e,t){for(var i in t)switch(typeof e[i]){case"object":e[i]=this.E(e[i]||{},t[i]);break;case"undefined":e[i]=t[i]}return e}},webix.proxy=function(e,t,i){var n=webix.copy(webix.proxy[e]);return n.source=t,i&&webix.extend(n,i,!0),n.init&&n.init(),n},webix.proxy.$parse=function(e){if("string"==typeof e&&-1!=e.indexOf("->")){var t=e.split("->");return webix.proxy(t[0],t[1])}return e},webix.proxy.post={$proxy:!0,load:function(e,t,i){i=webix.extend(i||{},this.params||{},!0),webix.ajax().bind(e).post(this.source,i,t)}},webix.proxy.sync={$proxy:!0,load:function(e,t){webix.ajax().sync().bind(e).get(this.source,null,t)}},webix.proxy.connector={$proxy:!0,connectorName:"!nativeeditor_status",load:function(e,t){webix.ajax(this.source,t,e)},saveAll:function(e,t,i,n){for(var r=this.source,o={},a=[],s=0;s<t.length;s++){var l=t[s];a.push(l.id);for(var h in l.data)0!==h.indexOf("$")&&(o[l.id+"_"+h]=l.data[h]);o[l.id+"_"+this.connectorName]=l.operation}o.ids=a.join(","),o.webix_security=webix.securityKey,r+=-1==r.indexOf("?")?"?":"&",r+="editing=true",webix.ajax().post(r,o,n)},result:function(e,t,i,n,r,o){if(!(r=r.xml()))return i.yr(null,n,r,o);var a=r.data.action;a.length||(a=[a]);for(var s=[],l=0;l<a.length;l++){var h=a[l];s.push(h),h.status=h.type,h.id=h.sid,h.newid=h.tid,i.processResult(h,h,{text:n,data:r,loader:o})}return s}},webix.proxy.rest={$proxy:!0,load:function(e,t){webix.ajax(this.source,t,e)},save:function(e,t,i,n){return webix.proxy.rest.dC.call(this,e,t,i,n,webix.ajax())},dC:function(e,t,i,n,r){var o=this.source,a="",s=o.indexOf("?");-1!==s&&(a=o.substr(s),o=o.substr(0,s)),o+="/"==o.charAt(o.length-1)?"":"/";var l=t.operation,h=t.data;"insert"==l&&delete h.id,"update"==l?r.put(o+h.id+a,h,n):"delete"==l?r.del(o+h.id+a,h,n):r.post(o+a,h,n)}},webix.proxy.json={$proxy:!0,load:function(e,t){webix.ajax(this.source,t,e)},save:function(e,t,i,n){var r=webix.ajax().headers({"Content-Type":"application/json"});return webix.proxy.rest.dC.call(this,e,t,i,n,r)}},webix.proxy.faye={$proxy:!0,init:function(){this.clientId=this.clientId||webix.uid()},load:function(e){var t=this.clientId;this.client.subscribe(this.source,function(i){i.clientId!=t&&webix.dp(e).ignore(function(){if("delete"==i.operation)e.remove(i.data.id);else if("insert"==i.operation)e.add(i.data);else if("update"==i.operation){var t=e.getItem(i.data.id);t&&(webix.extend(t,i.data,!0),e.refresh(t.id))}})})},save:function(e,t,i,n){t.clientId=this.clientId,this.client.publish(this.source,t)}},webix.proxy.indexdb={$proxy:!0,create:function(e,t,i,n){this.source=e+"/",this.F(n,i,function(e){var i=e.target.result;for(var n in t)for(var r=t[n],o=i.createObjectStore(n,{keyPath:"id",autoIncrement:!0}),a=0;a<r.length;a++)o.put(r[a])})},F:function(e,t,i){if(-1!=this.source.indexOf("/")){var n=this.source.split("/");this.source=n[1],t=t||n[2];var r,o=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB;r=t?o.open(n[0],t):o.open(n[0]),i&&(r.onupgradeneeded=i),r.onerror=function(){},r.onblocked=function(){},r.onsuccess=webix.bind(function(t){this.db=t.target.result,e&&e.call(this)},this)}else this.db?e.call(this):webix.delay(this.F,this,[e],50)},load:function(e,t){this.F(function(){var i=this.db.transaction(this.source).objectStore(this.source),n=[];i.openCursor().onsuccess=function(i){var r=i.target.result;r?(n.push(r.value),r.continue()):(e.parse(n),webix.ajax.$callback(e,t,"[]",n))}})},save:function(e,t,i,n){this.F(function(){var e,n=t.operation,r=t.data,o=t.id,a=this.db.transaction([this.source],"readwrite").objectStore(this.source);"delete"==n?e=a.delete(o):"update"==n?e=a.put(r):"insert"==n&&(delete r.id,e=a.add(r)),e.onsuccess=function(e){var r={status:n,id:t.id};"insert"==n&&(r.newid=e.target.result),i.processResult(r,r)}})}},webix.proxy.binary={$proxy:!0,load:function(e,t){var i=this.source.split("@"),n=i[0].split(".").pop();return webix.ajax().response("arraybuffer").get(i[0]).then(function(r){var o={ext:n,dataurl:i[1]};webix.ajax.$callback(e,t,"",{data:r,options:o},-1)})}},webix.ajax=function(e,t,i){return 0!==arguments.length?(new webix.ajax).get(e,t,i):this.getXHR?this:new webix.ajax},webix.ajax.count=0,webix.ajax.prototype={master:null,getXHR:function(){return new XMLHttpRequest},stringify:function(e){return webix.stringify(e)},G:function(e,t,i,n){var r;t&&(webix.isArray(t)||"function"==typeof(t.success||t.error||t))&&(r=i,i=t,t=null);var o=webix.promise.defer(),a=this.getXHR();webix.isArray(i)||(i=[i]),i.push({success:function(e,t){o.resolve(t)},error:function(e,t){o.reject(a)}});var s=this.I||{};if(webix.callEvent("onBeforeAjax",[n,e,t,a,s,null,o])){var l=!1;if("GET"!==n){var h=!1;for(var c in s)"content-type"==(""+c).toLowerCase()&&(h=!0,"application/json"==s[c]&&(l=!0));h||(s["Content-Type"]="application/x-www-form-urlencoded")}if("object"==typeof t&&!(window.FormData&&t instanceof window.FormData))if(l)t=this.stringify(t);else{var u=[];for(var d in t){var f=t[d];(null===f||f===webix.undefined)&&(f=""),"object"==typeof f&&(f=this.stringify(f)),u.push(d+"="+encodeURIComponent(f))}t=u.join("&")}t&&"GET"===n&&(e=e+(-1!=e.indexOf("?")?"&":"?")+t,t=null),a.open(n,e,!this.H);var p=this.Tw;p&&(a.responseType=p);for(var c in s)a.setRequestHeader(c,s[c]);var m=this;return this.master=this.master||r,a.onreadystatechange=function(){if(!a.readyState||4==a.readyState){if(webix.ajax.count++,i&&m&&!a.aborted){if(-1!=webix.ly.find(a))return webix.ly.remove(a);var e,t,n=m.master||m,o=a.status>=400||0===a.status;"blob"==a.responseType||"arraybuffer"==a.responseType?(e="",t=a.response):(e=a.responseText||"",t=m.J(a)),webix.ajax.$callback(n,i,e,t,a,o)}m&&(m.master=null),i=m=r=null}},this.qh&&(a.timeout=this.qh),this.H?a.send(t||null):setTimeout(function(){a.aborted||(-1!=webix.ly.find(a)?webix.ly.remove(a):a.send(t||null))},1),this.master&&this.master.Ve&&this.master.Ve.push(a),this.H?a:o}},J:function(e){return{xml:function(){try{return webix.DataDriver.xml.tagToObject(webix.DataDriver.xml.toObject(e.responseText,this))}catch(e){}},rawxml:function(){return window.XPathResult?e.responseXML:webix.DataDriver.xml.fromString(e.responseText)},text:function(){return e.responseText},json:function(){return webix.DataDriver.json.toObject(e.responseText,!1)}}},get:function(e,t,i){return this.G(e,t,i,"GET")},post:function(e,t,i){return this.G(e,t,i,"POST")},put:function(e,t,i){return this.G(e,t,i,"PUT")},del:function(e,t,i){return this.G(e,t,i,"DELETE")},patch:function(e,t,i){return this.G(e,t,i,"PATCH")},sync:function(){return this.H=!0,this},timeout:function(e){return this.qh=e,this},response:function(e){return this.Tw=e,this},header:function(e){return this.I=e,this},headers:function(e){return this.I=webix.extend(this.I||{},e),this},bind:function(e){return this.master=e,this}},webix.ajax.$callback=function(e,t,i,n,r,o){if(!e.$destructed){if(-1===r&&n&&"function"==typeof n.json&&(n=n.json()),o&&webix.callEvent("onAjaxError",[r]),webix.isArray(t)||(t=[t]),!o)for(var a=0;a<t.length;a++)if(t[a]){var s=t[a].before;s&&s.call(e,i,n,r)}for(var a=0;a<t.length;a++)if(t[a]){var l=t[a].success||t[a];o&&(l=t[a].error),l&&l.call&&l.call(e,i,n,r)}}},webix.send=function(e,t,i,n){var r=webix.html.create("FORM",{target:n||"_self",action:e,method:i||"POST"},"");for(var o in t){var a=webix.html.create("INPUT",{type:"hidden",name:o,value:t[o]},"");r.appendChild(a)}r.style.display="none",document.body.appendChild(r),r.submit(),document.body.removeChild(r)},webix.AtomDataLoader={$init:function(e){this.data={},this.waitData=webix.promise.defer(),e&&(this.s.datatype=e.datatype||"json"),this.$ready.push(this.K)},K:function(){this.L=!0,this.s.url&&this.url_setter(this.s.url),this.s.data&&this.data_setter(this.s.data)},url_setter:function(e){return e=webix.proxy.$parse(e),this.L?(this.load(e,this.s.datatype),e):e},data_setter:function(e){return this.L?(this.parse(e,this.s.datatype),!0):e},load:function(e,t){var i=arguments[2]||null;if(!this.callEvent("onBeforeLoad",[]))return webix.promise.reject();"string"==typeof t?(this.data.driver=webix.DataDriver[t],t=arguments[2]):this.data.driver||(this.data.driver=webix.DataDriver.json);var n=[{success:this.M,error:this.N}];return t&&(webix.isArray(t)?n.push.apply(n,t):n.push(t)),e=webix.proxy.$parse(e),e.$proxy&&e.load?e.load(this,n,i):"function"==typeof e?e(i).then(webix.bind(function(e){webix.ajax.$callback(this,n,"",e,-1)},this),webix.bind(function(e){webix.ajax.$callback(this,n,"",null,e,!0)},this)):webix.ajax(e,n,this)},parse:function(e,t){return e&&e.then&&"function"==typeof e.then?e.then(webix.bind(function(e){e&&"function"==typeof e.json&&(e=e.json()),this.parse(e,t)},this)):e&&e.sync&&this.sync?this.UC(e):this.callEvent("onBeforeLoad",[])?(this.data.driver=webix.DataDriver[t||"json"],void this.M(e,null)):webix.promise.reject()},UC:function(e){this.data&&this.data.attachEvent("onSyncApply",webix.bind(function(){this.ef&&this.ef()},this)),this.sync(e)},df:function(e){var t,i,n=this.data.driver;i=n.getRecords(e)[0],t=i?n.getDetails(i):{},this.setValues?this.setValues(t):this.data=t},tB:function(e,t,i,n){e?this.$onLoad&&this.$onLoad(e,this.data.driver)||(this.data&&this.data.df?this.data.df(e):this.df(e)):this.N(t,i,n),this.ef&&this.ef(),this.callEvent("onAfterLoad",[]),this.waitData.resolve()},M:function(e,t,i){var n,r=this.data.driver;-1===i?n=r.toObject(t):(this.Ve&&this.Ve.remove(i),n=r.toObject(e,t)),n&&n.then?n.then&&"function"==typeof n.then&&n.then(webix.bind(this.tB,this)):this.tB(n)},N:function(e,t,i){this.callEvent("onAfterLoad",[]),this.callEvent("onLoadError",arguments),webix.callEvent("onLoadError",[e,t,i,this])},O:function(e){if(!this.s.dataFeed||this.P||!e)return!0;var t=this.s.dataFeed;return"function"==typeof t?t.call(this,e.id||e,e):(t=t+(-1==t.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(e.id||e),!!this.callEvent("onBeforeLoad",[])&&(webix.ajax(t,function(e,t,i){this.P=!0;var n=webix.DataDriver.json,r=n.toObject(e,t);r?this.setValues(n.getDetails(n.getRecords(r)[0])):this.N(e,t,i),this.P=!1,this.callEvent("onAfterLoad",[])},this),!1))}},webix.DataDriver={},webix.DataDriver.json={toObject:function(e){if(!e)return null;if("string"==typeof e)try{if(this.parseDates){var t=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{1-3})?Z/;e=JSON.parse(e,function(e,i){return"string"==typeof i&&t.test(i)?new Date(i):i})}else e=JSON.parse(e)}catch(e){return null}return e},getRecords:function(e){return e&&e.data&&(e=e.data),e&&!webix.isArray(e)?[e]:e},getDetails:function(e){return"string"==typeof e?{id:e||webix.uid(),value:e}:e},getOptions:function(e){return e.collections},getInfo:function(e){return{size:e.total_count||0,from:e.pos,parent:e.parent||0,config:e.config,key:e.webix_security}},child:"data",parseDates:!1},webix.DataDriver.html={toObject:function(e){if("string"==typeof e){var t=null;return-1==e.indexOf("<")&&(t=webix.toNode(e)),t||(t=document.createElement("DIV"),t.innerHTML=e),t.firstChild}return e},getRecords:function(e){return e.getElementsByTagName(this.tag)},getDetails:function(e){return webix.DataDriver.xml.tagToObject(e)},getOptions:function(){return!1},getInfo:function(e){return{size:0}},tag:"LI"},webix.DataDriver.jsarray={toObject:function(e){return"string"==typeof e?JSON.parse(e):e},getRecords:function(e){return e&&e.data&&(e=e.data),e},getDetails:function(e){for(var t={},i=0;i<e.length;i++)t["data"+i]=e[i];return null!==this.idColumn&&(t.id=e[this.idColumn]),t},getOptions:function(){return!1},getInfo:function(e){return{size:0}},idColumn:null},webix.DataDriver.csv={toObject:function(e){return e},getRecords:function(e){return e.split(this.row)},getDetails:function(e){e=this.stringToArray(e);for(var t={},i=0;i<e.length;i++)t["data"+i]=e[i];return null!==this.idColumn&&(t.id=e[this.idColumn]),t},getOptions:function(){return!1},getInfo:function(e){return{size:0}},stringToArray:function(e){e=e.split(this.cell);for(var t=0;t<e.length;t++)e[t]=e[t].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return e},idColumn:null,row:"\n",cell:","},webix.DataDriver.xml={V:function(e){return e&&e.documentElement?e.getElementsByTagName("parsererror").length?null:e:null},toObject:function(e,t){var i=t?t.rawxml?t.rawxml():t:null;return this.V(i)?i:(i="string"==typeof e?this.fromString(e.replace(/^[\s]+/,"")):e,this.V(i)?i:null)},getRecords:function(e){return this.xpath(e,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(e){return this.tagToObject(e,{})},getOptions:function(){return!1},getInfo:function(e){var t=this.xpath(e,this.config);return t=t.length?this.assignTypes(this.tagToObject(t[0],{})):null,{size:e.documentElement.getAttribute("total_count")||0,from:e.documentElement.getAttribute("pos"),parent:e.documentElement.getAttribute("parent")||0,config:t,key:e.documentElement.getAttribute("webix_security")||null}},xpath:function(e,t){if(window.XPathResult){var i=e;-1==e.nodeName.indexOf("document")&&(e=e.ownerDocument);for(var n=[],r=e.evaluate(t,i,null,XPathResult.ANY_TYPE,null),o=r.iterateNext();o;)n.push(o),o=r.iterateNext();return n}var a=!0;try{void 0===e.selectNodes&&(a=!1)}catch(e){}if(a)return e.selectNodes(t);var s=t.split("/").pop();return e.getElementsByTagName(s)},assignTypes:function(e){for(var t in e){var i=e[t];if("object"==typeof i)this.assignTypes(i);else if("string"==typeof i){if(""===i)continue;"true"==i?e[t]=!0:"false"==i?e[t]=!1:i==1*i&&(e[t]=1*e[t])}}return e},tagToObject:function(e,t){var i=1==e.nodeType&&e.getAttribute("stack"),n=0;if(i){t=[];for(var r=e.childNodes,o=0;o<r.length;o++)1==r[o].nodeType&&t.push(this.tagToObject(r[o],{}))}else{t=t||{};var a=e.attributes;if(a&&a.length)for(var o=0;o<a.length;o++)t[a[o].name]=a[o].value,n=1;for(var r=e.childNodes,o=0;o<r.length;o++)if(1==r[o].nodeType){var s=r[o].tagName;t[s]?("function"!=typeof t[s].push&&(t[s]=[t[s]]),t[s].push(this.tagToObject(r[o],{}))):t[s]=this.tagToObject(r[o],{}),n=2}if(!n)return this.nodeValue(e);2>n&&(t.value=t.value||this.nodeValue(e))}return t},nodeValue:function(e){return e.firstChild?e.firstChild.wholeText||e.firstChild.data:""},fromString:function(e){try{if(window.DOMParser)return(new DOMParser).parseFromString(e,"text/xml");if(window.ActiveXObject){var t=new ActiveXObject("Microsoft.xmlDOM");return t.loadXML(e),t}}catch(e){return null}}},webix.BaseBind={bind:function(e,t,i){this.attachEvent||webix.extend(this,webix.EventSystem),"string"==typeof e&&(e=webix.$$(e)),e.W&&e.W(),this.W&&this.W(),e.getBindData||webix.extend(e,webix.BindSource),this.X(),e.addBind(this.s.id,t,i),this.Os=e.s.id;var n=this.s.id;this.Ps=this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return e.getBindData(n)}),this.refresh&&this.isVisible(this.s.id)&&this.refresh()},unbind:function(){if(this.Os){var e=webix.$$(this.Os);e&&e.removeBind(this.s.id),this.detachEvent(this.Ps),this.Os=null}},X:function(){var e=this.s;if(this.filter){var t=e.id;this.data.Y=webix.bind(function(){webix.$$(this.Os).Z[t]=!1},this)}var i=this.render;this.render=function(){if(!this.$){this.$=!0;var e=this.callEvent("onBindRequest");return this.$=!1,i.apply(this,!1===e?arguments:[])}},(this.getValue||this.getValues)&&(this.save=function(e){var t=webix.$$(this.Os);if(e)t.setBindData(e);else{if(this.validate&&!this.validate())return!1;var i=this.getValue?this.getValue:this.getValues();t.setBindData(i,this.s.id),this.setDirty&&this.setDirty(!1)}}),this.X=function(){}}},webix.BindSource={$init:function(){this.bb={},this.Z={},this.cb={},this.db(this)},saveBatch:function(e){this.eb=!0,e.call(this),this.eb=!1,this.fb()},setBindData:function(e,t){if(t&&(this.cb[t]=!0),this.setValue)this.setValue(e);else if(this.setValues)this.setValues(e);else{var i=this.getCursor();i?this.updateItem(i,e):this.add(e)}this.callEvent("onBindUpdate",[e,t]),this.save&&this.save(),t&&(this.cb[t]=!1)},getBindData:function(e,t){if(this.Z[e])return!1;var i=webix.$$(e);i.isVisible(i.s.id)&&(this.Z[e]=!0,this.gb(i,this.bb[e][0],this.bb[e][1]),t&&i.filter&&i.refresh())},addBind:function(e,t,i){this.bb[e]=[t,i]},removeBind:function(e){delete this.bb[e],delete this.Z[e],delete this.cb[e]},db:function(e){e.filter?webix.extend(this,webix.CollectionBind):e.setValue?webix.extend(this,webix.ValueBind):webix.extend(this,webix.RecordBind)},fb:function(){if(!this.eb)for(var e in this.bb)this.cb[e]||(this.Z[e]=!1,this.getBindData(e,!0))},hb:function(e,t,i){e.setValue?e.setValue(i&&t?i[t]:i):e.filter?e.data.silent(function(){this.filter(t,i)}):!i&&e.clear?e.clear():e.O(i)&&e.setValues(webix.clone(i)),e.callEvent("onBindApply",[i,t,this])}},webix.DataValue=webix.proto({name:"DataValue",isVisible:function(){return!0},$init:function(e){(!e||webix.isUndefined(e.value))&&(this.data=e||"");var t=e&&e.id?e.id:webix.uid();this.s={id:t},webix.ui.views[t]=this},setValue:function(e){this.data=e,this.callEvent("onChange",[e])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},webix.EventSystem,webix.BaseBind),webix.DataRecord=webix.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(e){this.data=e||{};var t=e&&e.id?e.id:webix.uid();this.s={id:t},webix.ui.views[t]=this},getValues:function(){return this.data},setValues:function(e,t){this.data=t?webix.extend(this.data,e,!0):e,this.callEvent("onChange",[e])},refresh:function(){this.callEvent("onBindRequest")}},webix.EventSystem,webix.BaseBind,webix.AtomDataLoader,webix.Settings),webix.ValueBind={$init:function(){this.attachEvent("onChange",this.fb)},gb:function(e,t,i){t=t||"value";var n=this.getValue()||"";if(i&&(n=i(n)),e.setValue)e.setValue(n);else if(e.filter)e.data.silent(function(){this.filter(t,n)});else{var r={};r[t]=n,e.O(n)&&e.setValues(r)}e.callEvent("onBindApply",[n,t,this])}},webix.RecordBind={$init:function(){this.attachEvent("onChange",this.fb)},gb:function(e,t,i){var n=this.getValues()||null;i&&(n=i(n)),this.hb(e,t,n)}},webix.CollectionBind={$init:function(){this.ib=null,this.attachEvent("onSelectChange",function(e){var t=this.getSelectedId();this.setCursor(t?t.id||t:null)}),this.attachEvent("onAfterCursorChange",this.fb),this.attachEvent("onAfterDelete",function(e){e==this.getCursor()&&this.setCursor(null)}),this.data.attachEvent("onStoreUpdated",webix.bind(function(e,t,i){e&&e==this.getCursor()&&"paint"!=i&&"delete"!=i&&this.fb()},this)),this.data.attachEvent("onClearAll",webix.bind(function(){this.ib=null},this)),this.data.attachEvent("onIdChange",webix.bind(function(e,t){this.ib==e&&(this.ib=t,this.fb())},this))},refreshCursor:function(){this.ib&&this.callEvent("onAfterCursorChange",[this.ib])},setCursor:function(e){e==this.ib||null!==e&&!this.getItem(e)||(this.callEvent("onBeforeCursorChange",[this.ib]),this.ib=e,this.callEvent("onAfterCursorChange",[e]))},getCursor:function(){return this.ib},gb:function(e,t,i){if("$level"==t&&this.data.getBranch)return(e.data||e).importData(this.data.getBranch(this.getCursor()));var n=this.getItem(this.getCursor())||this.s.defaultData||null;"$data"==t?("function"==typeof i?i.call(e,n,this):e.data.importData(n?n[i]:[]),e.callEvent("onBindApply",[n,t,this])):(i&&(n=i(n)),this.hb(e,t,n))}},webix.AtomRender={jb:function(e){return e.$empty?"":this.s.template(e,this)},render:function(){var e=this.s;return!!this.isVisible(e.id)&&((!this.callEvent||this.callEvent("onBeforeRender",[this.data]))&&(this.data&&!e.content&&(this.y.innerHTML="",this.y.innerHTML=this.jb(this.data)),this.callEvent&&this.callEvent("onAfterRender",[])),!0)},sync:function(e){this.kb=!1,"DataStore"!=e.name&&(e.data&&"DataStore"==e.name?e=e.data:this.kb=!0),this.kb?e.bind("change",webix.bind(function(e){e.id==this.data.id&&(this.data=e.attributes,this.refresh())},this)):e.attachEvent("onStoreUpdated",webix.bind(function(t){t&&t!=this.data.id||(this.data=e.pull[t],this.refresh())},this))},template_setter:webix.template},webix.SingleRender=webix.proto({template_setter:function(e){this.type.template=webix.template(e)},jb:function(e){var t=this.type;return(t.templateStart?t.templateStart(e,t):"")+t.template(e,t)+(t.templateEnd?t.templateEnd(e,t):"")},customize:function(e){webix.type(this,e)}},webix.AtomRender),webix.UIManager={A:null,lb:{},mb:0,XE:0,lH:0,nb:{enter:13,tab:9,esc:27,escape:27,up:38,down:40,left:37,right:39,pgdown:34,pagedown:34,pgup:33,pageup:33,end:35,home:36,insert:45,delete:46,backspace:8,space:32,meta:91,win:91,mac:91,multiply:106,add:107,subtract:109,decimal:110,divide:111,scrollock:145,pausebreak:19,numlock:144,"5numlocked":12,shift:16,capslock:20},wD:{input:1,button:1,textarea:1,select:1},ob:function(){webix.event(document.body,"click",webix.bind(this.pb,this)),webix.event(document,"keydown",webix.bind(this.qb,this)),webix.UE(document.body,"mousedown",webix.bind(function(){this.lH=new Date},this)),document.body.addEventListener&&webix.event(document.body,"focus",this.rb,{capture:!0,bind:this}),webix.destructors.push({obj:this})},destructor:function(){webix.UIManager.A=null},getFocus:function(){return this.A},sb:function(e){this.tb=this.tb||e.s.id},setFocus:function(e,t){return e=webix.$$(e),e&&!e.$view&&(e=null),this.mb=webix.mb=new Date,this.A===e||(this.A&&this.A.callEvent&&this.A.callEvent("onBlur",[this.A]),e&&e.callEvent&&e.callEvent("onFocus",[e,this.A]),webix.callEvent("onFocusChange",[e,this.A]),this.A&&this.A.blur&&!t&&this.A.blur(),this.A=e,e&&e.focus&&!t&&e.focus(),!0)},applyChanges:function(e){var t=this.getFocus();t&&t!=e&&t.Xy&&t.Xy(e)},hasFocus:function(e){return e===this.A},ub:function(e,t){var i=webix.html.locate(e,"view_id")||this.tb;return i=webix.$$(i),this.tb=null,webix.mb=new Date,i!=this.A?(t||(this.tb=null),i?(i=webix.$$(i),this.canFocus(i)&&(i.getNode&&i.getNode(e),this.setFocus(i))):t||this.setFocus(null),!0):void 0},pb:function(e){return new Date-this.mb<100?(this.tb=null,!1):this.ub(e)},rb:function(e){return!!this.wD[e.target.nodeName.toLowerCase()]&&this.ub(e,!0)},canFocus:function(e){return e.isVisible()&&e.isEnabled()},vb:function(e){var t=this.getFocus();return!(e&&!this.wb(e,t))&&void(this.xb("getPrev",e)||(this.A=null))},Xz:{},wb:function(e,t){if(!e)return!1;if(!t)return!1;for(;t;){if(t===e)return!0;t=t.getParentView()}return!1},yb:function(){this&&this.callEvent&&this.callEvent("onTimedKeyPress",[])},BA:function(e){return 112>e&&e>105},qb:function(e){var t=e.which||e.keyCode;t>95&&106>t&&(t-=48),t=this.Xz[t]||t;var i=e.ctrlKey,n=e.shiftKey,r=e.altKey,o=e.metaKey,a=this.zb(t,i,n,r,o),s=this.getFocus();s&&s.callEvent&&(!1===s.callEvent("onKeyPress",[t,e])&&webix.html.preventEvent(e),s.hasEvent("onTimedKeyPress")&&(clearTimeout(s.Ab),s.Ab=webix.delay(this.yb,s,[],s.s.keyPressTimeout||250))),this.BA(t)||(a=this.zb(String.fromCharCode(t),i,n,r,o));var l=!i&&!r&&!o&&9!=t&&27!=t&&13!=t;return!1===this.Bb(a,l,e)?(webix.html.preventEvent(e),!1):void 0},xb:function(e){if(!this.getFocus())return null;e=e||"getNext";for(var t=this.getFocus(),i=t,n=webix.uid();;){if((t=this[e](t))&&this.canFocus(t))return this.setFocus(t);if(t===i||t.$fmarker==n)return null;t.$fmarker=n}},WE:function(e,t){var i=!t.shiftKey;if(webix.UIManager.XE=new Date,e&&e.Gb&&!e.Gb(i,t))return!1;if(e&&e.Eb){if(e.editNext)return e.editNext(i);if(e.editStop)return e.editStop(),!0}else webix.delay(function(){webix.UIManager.setFocus(webix.$$(document.activeElement),!0)},1)},getTop:function(e){for(var t,i=webix.$$(e);i&&(t=i.getParentView());)i=t;return i},getNext:function(e,t){var i=e.getChildViews();if(i.length&&!t)return i[0];var n=e.getParentView();if(!n)return e;var r=n.getChildViews();if(r.length)for(var o=webix.PowerArray.find.call(r,e)+1;o<r.length;){if(this.canFocus(r[o]))return r[o];o++}return this.getNext(n,!0)},getPrev:function(e,t){var i=e.getChildViews();if(i.length&&t)return this.getPrev(i[i.length-1],!0);if(t)return e;var n=e.getParentView();if(!n)return this.getPrev(e,!0);var r=n.getChildViews();if(r)for(var o=webix.PowerArray.find.call(r,e)-1;o>=0;){if(this.canFocus(r[o]))return this.getPrev(r[o],!0);o--}return n},addHotKey:function(e,t,i){var n=this.Cb(e);i||(i=null),n.handler=t,n.view=i;var r=this.zb(n.letter,n.ctrl,n.shift,n.alt,n.meta);return this.lb[r]||(this.lb[r]=[]),this.lb[r].push(n),e},removeHotKey:function(e,t,i){var n=this.Cb(e),r=this.zb(n.letter,n.ctrl,n.shift,n.alt,n.meta);if(t||i){var o=this.lb[r];if(o){for(var a=o.length-1;a>=0;a--)i&&o[a].view!==i||t&&o[a].handler!==t||o.splice(a,1);o.length||delete this.lb[r]}}else delete this.lb[r]},zb:function(e,t,i,n,r){return e+"_"+(t?"1":"0")+(i?"1":"0")+(n?"1":"0")+(r?"1":"0")},Bb:function(e,t,i){var n=this.getFocus();return this.lb[e]?this.Db(this.lb[e],n,i):!t||!this.lb.ANY_0000||this.Db(this.lb.ANY_0000,n,i)},Db:function(e,t,i){for(var n=0;n<e.length;n++){var r=e[n];if(null===r.view||t===r.view||"string"==typeof r.view&&t&&t.name===r.view){var o=r.handler(t,i);if(!!o===o)return o}}return!0},Cb:function(e){var t,i,n,r,o=this.nb,a=e.toLowerCase().split(/[\+\-_]/);t=i=n=r=0;for(var s="",l=0;l<a.length;l++)if("ctrl"===a[l])t=1;else if("shift"===a[l])i=1;else if("alt"===a[l])n=1;else if("command"===a[l])r=1;else if(o[a[l]]){var h=o[a[l]];s=this.BA(h)?""+h:String.fromCharCode(h)}else s=a[l];return{letter:s.toUpperCase(),ctrl:t,shift:i,alt:n,meta:r}}},webix.ready(function(){webix.UIManager.ob(),webix.UIManager.addHotKey("enter",function(e,t){if(e&&e.callEvent&&e.callEvent("onEnter",[t]),e&&e.editStop&&e.Eb)return e.editStop(),!0;if(e&&e.touchable){var i=e.getFormView();i&&!e.Dt&&i.callEvent("onSubmit",[e,t])}}),webix.UIManager.addHotKey("esc",function(e){if(e){if(e.editCancel&&e.Eb)return e.editCancel(),!0;var t=e.getTopParentView();t&&t.setPosition&&t.Fb()}}),webix.UIManager.addHotKey("shift+tab",webix.UIManager.WE),webix.UIManager.addHotKey("tab",webix.UIManager.WE)}),webix.IdSpace={$init:function(){this.Hb={},this.Ib={},this.getTopParentView=this.CD=webix.bind(function(){return this},this),this.Jb(),this.$ready.push(this.Kb)},$$:function(e){return this.Hb[e]},innerId:function(e){return this.Ib[e]},Jb:function(e){this.Lb=webix.Mb,webix.Mb=this},Kb:function(e){for(var t in this.Hb){var i=this.Hb[t];this.callEvent&&i.mapEvent&&!i.k.onitemclick&&i.mapEvent({onitemclick:this}),i.getTopParentView=this.CD}webix.Mb=this.Lb,this.Lb=0},oC:function(e){delete this.Hb[e]},ui:function(){this.Jb();var e=webix.ui.apply(webix,arguments);return this.Kb(),e}},function(){var e=[],t=webix.ui;if(!webix.ui){t=webix.ui=function(e,r,o){webix.Nb=!0;var a=webix.isArray(e),s=webix.toNode(e.container||r||document.body);s.s&&(o=n(s,a,o));var l,h=s==document.body;if(e.s||s&&a?l=e:(s&&h&&(e.$topView=!0),e.Ob||(e.Ob={}),l=t.A(e)),!h||l.setPosition||l.$apiOnly||webix.ui.Pb(),l.s&&l.s.ft&&!s.$view)l.s.gt=s;else if(!l.$apiOnly)if(s.appendChild)i(s,l,e);else if(s.destructor){var c=s;if(o||0===o||webix.isArray(l)||(o=s,s=s.getParentView()),s&&s.Qb)l.getParentView&&l.getParentView()&&l.getParentView().Rb(l),s.Qb(l,o);else{var r=c.$view.parentNode;c.destructor(),i(r,l,e)}}return webix.Nb=!1,l};var i=function(t,i,n){t.appendChild(i.x),((!i.setPosition||i.s.fullscreen)&&t==document.body||i.s.position)&&e.push(i.VE),n.skipResize||i.adjust()},n=function(e,t,i){var n=[e];if(t)n=e.getChildViews();else if(e.gd)n=[e.gd];else{if("number"==typeof i)return i;if(i)return n=[webix.$$(i)],r(n),n[0].config.id}return r(n),i},r=function(e){for(var t=e.length-1;t>=0;t--)delete webix.ui.views[e[t].config.id],e[t].config.id="x"+webix.uid(),webix.ui.views[e[t].config.id]=e[t],r(e[t].getChildViews())}}webix.ui.animate=function(e,t,i){var n=webix.$$(t);if(n){var r=i||{type:"slide",direction:"left"},o=n.x.cloneNode(!0),a=webix.ui(e,t);a.x.parentNode.appendChild(o);var s=webix.animate.formLine(a.x,o,r);return r.callback=function(){webix.animate.breakLine(s)},webix.animate(s,r),a}},webix.ui.animateView=function(e,t,i){if(e=webix.$$(e)){i=i||{type:"slide",direction:"left"};for(var n=function(e){var t=e.x,i=t.className,n=t.innerHTML;return"<div class='"+i+"' style='width:"+t.offsetWidth+"px;height:"+t.offsetHeight+"px;'>"+n+"</div>"},r=[],o=0;o<e.x.childNodes.length;o++){var a=e.x.childNodes[o],s=a.currentStyle?a.currentStyle.display:getComputedStyle(a,null).display;r.push(s||"")}var l=n(e);"function"==typeof t&&t.call(this);for(var h=n(e),c=e.x.insertBefore(webix.html.create("DIV",{class:"webix_view_animate",style:"width:"+e.x.offsetWidth+"px;height:"+e.x.offsetHeight+"px;"},h+l),e.x.firstChild),o=1;o<e.x.childNodes.length;o++)e.x.childNodes[o].style.display="none";var u=webix.animate.formLine(c.childNodes[0],c.childNodes[1],i);return i.callback=function(){if(c){e.x.removeChild(c),c=null;for(var t=0;t<e.x.childNodes.length;t++)e.x.childNodes[t].style.display=r[t]}},webix.animate(u,i),e}},webix.ui.Sb=function(){var e=webix.html.create("div");e.className="webix_skin_mark",e.style.cssText="position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth,i={110:"air",120:"aircompact",130:"clouds",140:"web",150:"terrace",160:"metro",170:"light",180:"glamour",190:"touch",200:"flat",210:"compact",220:"material",230:"contrast"}[10*Math.floor(e.offsetHeight/10)];if(document.body.removeChild(e),i){var n=webix.skin[i];n&&n!=webix.skin.$active&&webix.skin.set(i)}return webix.env.$customScroll?0:t},webix.ui.scrollSize=webix.env.touch||webix.env.$customScroll?0:17,webix.ready(function(){var e=webix.ui.Sb();webix.ui.scrollSize=webix.env.touch?0:e}),webix.ui.Tb=function(e){return"$"+e+(this.Ub[e]=(this.Ub[e]||0)+1)},webix.ui.Ub={},webix.ui.Pb=function(){webix.html.addStyle("html, body{ height:100%; }"),document.body.className+=" webix_full_screen",webix.ui.Pb=function(){},webix.Touch.limit(!1)},webix.ui.freeze=function(e,t){webix.ui.PG=!0;var i=e();i&&i.then?i.then(function(e){return webix.ui.PG=!1,!1!==t&&webix.ui.resize(),e}):(webix.ui.PG=!1,!1!==t&&webix.ui.resize())},webix.ui.resize=function(){if(webix.UIManager.applyChanges(),webix.callEvent("onClick",[]),webix.ui.QG=!0,!webix.ui.PG)for(var t=e.length-1;t>=0;t--)e[t].obj&&e[t].obj.resize();webix.ui.QG=!1},webix.ui.each=function(e,t,i,n){if(e)for(var r=n?[e]:e.getChildViews(),o=0;o<r.length;o++)!1!==t.call(i||webix,r[o])&&webix.ui.each(r[o],t,i)},webix.event(window,"resize",function(){webix.env.touch&&(webix.edit_open_time&&new Date-webix.edit_open_time<1e3||webix.mb&&new Date-webix.mb<1e3)||webix.ui.resize()}),t.Wb={},t.delay=function(e){webix.ui.Wb[e.id]=e},t.hasMethod=function(e,t){var i=webix.ui[e];return!!i&&(i.$protoWait&&(i=i.call(webix)),!!webix.ui[e].prototype[t])},webix.ui.zIndex=function(){return webix.ui.zIndexBase++},webix.ui.zIndexBase=100,t.A=function(e){if(e.view){var i=e.view;return new t[i](e)}if(e.rows||e.cols){for(var n=e.rows||e.cols,r=!1,o=0;o<n.length;o++)!n[o].body||n[o].view||n[o].align||(r=!0);return r?new t.headerlayout(e):new t.layout(e)}return e.cells?new t.multiview(e):e.template||e.content?new t.template(e):e.align&&e.body?new t.align(e):new t.spacer(e)},t.views={},webix.$$=function(e){if(!e)return null;if(t.views[e])return t.views[e];if(t.Wb[e])return webix.ui(t.Wb[e]);var i=e;if("object"==typeof e){if(e.s)return e;i=e.target||e.srcElement||e}return t.views[webix.html.locate({target:webix.toNode(i)},"view_id")]},webix.isUndefined(window.$$)&&(window.$$=webix.$$),webix.UIExtension=window.webix_view||{},webix.protoUI({name:"baseview",$init:function(e){e.id||(e.id=webix.ui.Tb(this.name)),this.Xb=webix.Xb,webix.Xb=null,this.$scope=e.$scope||(this.Xb?this.Xb.$scope:null),this.x||(this.w=this.x=webix.html.create("DIV",{class:"webix_view"}),this.$view=this.x)},$skin:!1,defaults:{width:0,height:0,gravity:1},getNode:function(){return this.x},getParentView:function(){return this.Xb||null},getTopParentView:function(){var e=this.getParentView();return e?e.getTopParentView():this},getFormView:function(){var e=this.getParentView();return!e||e.setValues?e:e.getFormView()},getChildViews:function(){return[]},queryView:function(e,t){var i;if("object"==typeof e){for(var n=Object.keys(e),r=[],o=0;o<n.length;o++)r[o]=e[n[o]];var i=function(e){for(var t=e.config,i=0;i<n.length;i++)if(t[n[i]]!=r[i])return!1;return!0}}else i=e;if("self"===t&&i(this))return this;var a="all"===t&&[],s="parent"===t?this.gG:this.hG,l=this.iG(i,s,a);return"all"===t?a:l},hG:function(e){return e.getChildViews()},gG:function(e){var t=e.getParentView();return t?[t]:[]},iG:function(e,t,i){for(var n=t(this),r=0;r<n.length;r++)if(e(n[r])){if(!i)return n[r];i.push(n[r])}else{var o=n[r].iG(e,t,i);if(o)return o}return null},isVisible:function(e,t){if(this.s.hidden)return e&&(this.Yb||(this.Yb=[],this.Zb={}),this.Zb[e]||(this.Zb[e]=!0,this.Yb.push(e))),!1;var i=this.getParentView();return!i||i.isVisible(e,this.s.id)},isEnabled:function(){if(this.$b)return!1;var e=this.getParentView();return!e||e.isEnabled()},disable:function(){webix.html.remove(this.$b),this.s.disabled=!0,this.$b=webix.html.create("div",{class:"webix_disabled"}),this.x.appendChild(this.$b),this.x.setAttribute("aria-disabled","true"),webix.html.addCss(this.x,"webix_disabled_view",!0),webix.UIManager.vb(this)},enable:function(){this.s.disabled=!1,this.$b&&(webix.html.remove(this.$b),webix.html.removeCss(this.x,"webix_disabled_view"),this.x.removeAttribute("aria-disabled"),this.$b=null)},disabled_setter:function(e){return e?this.disable():this.enable(),e},container_setter:function(e){return!0},css_setter:function(e){return"object"==typeof e&&(e=webix.html.createCss(e)),this.x.className+=" "+e,e},id_setter:function(e){if(webix.Mb&&(webix.Mb!=this||this.Lb)){var t=this.config.$id=e;(this.Lb||webix.Mb).Hb[e]=this,e=webix.ui.Tb(this.name),(this.Lb||webix.Mb).Ib[e]=t}return webix.ui.views[e]=this,this.x.setAttribute("view_id",e),e},$setSize:function(e,t){var i=this.ac;return(!i||i[0]!=e||i[1]!=t)&&(this.ac=[e,t],this.$width=this.bc=e-(this.cc?webix.ui.scrollSize:0),this.$height=this.dc=t-(this.ec?webix.ui.scrollSize:0),this.s.flex||(this.x.style.width=e+"px",this.x.style.height=t+"px"),!0)},$getSize:function(e,t){var i=this.s,n=[1*(i.width||i.minWidth||0),1*(i.width||i.maxWidth||1e5),1*(i.height||i.minHeight||0),1*(i.height||i.maxHeight||1e5),i.gravity];return n[0]+=e,n[1]+=e,n[2]+=t,n[3]+=t,n},show:function(e,t){var i=this.getParentView(),n=!arguments[2];if(i)!t&&!1!==t&&this.s.animate&&i.s.animate&&(t=webix.extend(i.s.animate?webix.extend({},i.s.animate):{},this.s.animate,!0)),(n?i.fc:i.Fb)&&(n?i.fc:i.Fb).call(i,this,t),n&&this.Qd(),e&&n&&i.show(!i.$$&&e);else if(this.s.hidden){if(n){var r=webix.toNode(this.s.gt||document.body);r.appendChild(this.x),this.s.hidden=!1,this.adjust(),this.Qd()}}else n||(this.s.hidden=this.s.ft=!0,this.x&&(this.s.gt=this.x.parentNode,webix.html.remove(this.x)))},Qd:function(){if(this.Yb){for(var e=0;e<this.Yb.length;e++){var t=webix.$$(this.Yb[e]);t&&t.render()}this.Yb=[],this.Zb={}}},DD:function(e,t){var i=t.srcElement||t.target,n=i.getAttribute("role");13!==e&&32!==e||"button"!=n||this.s.disabled||(webix.html.triggerEvent(i,"MouseEvents","click"),webix.html.preventEvent(t))},hidden_setter:function(e){return e&&this.hide(),this.s.hidden},hide:function(){this.show(null,null,!0),webix.UIManager.vb(this)},adjust:function(){if(!this.x.parentNode)return!1;var e=this.x.parentNode.clientWidth||0,t=this.x.parentNode.clientHeight||0,i=this.$getSize(0,0),n=this.x.parentNode==document.body&&!this.setPosition;i[0]>e&&(e=i[0]),i[2]>t&&(t=i[2]),(!n||this.s.width)&&e>i[1]&&(e=i[1]),(!n||this.s.height)&&t>i[3]&&(t=i[3]),this.$setSize(e,t),webix.ED&&(webix.ED=!1,this.adjust())},resize:function(){if(!(webix.gc||webix.ui.PG||webix.ot)){var e=this.getParentView();e?e.resizeChildren?e.resizeChildren():e.resize():(this.adjust(),webix.callEvent("onResize",[]))}}},webix.Settings,webix.Destruction,webix.BaseBind,webix.UIExtension),webix.protoUI({name:"view",$init:function(e){this.hc(e)},hc:function(e){var t=webix.isUndefined(e.borderless);t&&!this.setPosition&&e.$topView&&(e.borderless=!0,t=!1),t&&this.defaults.borderless||e.borderless?e.Ob={top:!0,left:!0,bottom:!0,right:!0}:(e.Ob||(e.Ob={}),this.w.style.borderWidth="1px")},$getSize:function(e,t){var i=this.s.Ob;return i&&(e+=(i.left?0:1)+(i.right?0:1),t+=(i.top?0:1)+(i.bottom?0:1)),webix.ui.baseview.prototype.$getSize.call(this,e,t)},$setSize:function(e,t){var i=this.s.Ob;return i&&(e-=(i.left?0:1)+(i.right?0:1),t-=(i.top?0:1)+(i.bottom?0:1)),webix.ui.baseview.prototype.$setSize.call(this,e,t)}},webix.ui.baseview)}(),webix.ui.view.call(webix),webix.protoUI({name:"spacer",defaults:{borderless:!0},$init:function(){this.x.className+=" webix_spacer"}},webix.ui.view),webix.protoUI({name:"baselayout",restore:function(e,t,i){var n=this.mH(webix.copy(e),t);return i?n:void webix.ui(n.cols||n.rows,this)},mH:function(e,t){if(!e.$layout)return t.call(this,e);for(var i=e.cols||e.rows,n=0;n<i.length;n++)i[n]=this.mH(i[n],t);return e},serialize:function(e){for(var t=[],i=this.getChildViews(),n=0;n<i.length;n++){var r=i[n];if(r.movePortlet){var o=r.getChildViews();t.push(e.call(this,o[o.length-1]))}else r.serialize?t.push(r.serialize(e,!0)):t.push(e.call(this,r))}var a={$layout:!0,type:this.config.type};return this.config.rows?a.rows=t:a.cols=t,a},$init:function(e){this.$ready.push(this.kc),this.y=this.w,this.lc=[],this.ht=[],e.$topView&&(e.borderless=!0,e.Ob={top:!0,left:!0,bottom:!0,right:!0}),e.isolate&&webix.extend(this,webix.IdSpace)},rows_setter:function(e){return this.mc=1,this.nc=e,!0},cols_setter:function(e){return this.mc=0,this.$view.style.whiteSpace="nowrap",this.nc=e,!0},Rb:function(e){webix.PowerArray.removeAt.call(this.q,webix.PowerArray.find.call(this.q,e)),this.resizeChildren(!0)},Qb:function(e,t){if(webix.isUndefined(t)){for(var i=0;i<this.q.length;i++)this.q[i].destructor();this.nc=e,this.kc()}else{var n;if("number"==typeof t){(0>t||t>this.q.length)&&(t=this.q.length);var r=(this.q[t]||{}).x;webix.PowerArray.insertAt.call(this.q,e,t),e.s.hidden||webix.html.insertBefore(e.x,r,this.y)}else{n=webix.$$(t),t=webix.PowerArray.find.call(this.q,n);var o=n.x.parentNode;o&&!e.s.hidden&&o.insertBefore(e.x,n.x),n.destructor(),this.q[t]=e}this.mc||this.oc(e),this.q[t].Xb=this}this.resizeChildren(!0);var a=this.elements?this:this.getFormView();a&&a.Qs(),webix.callEvent("onReconstruct",[this])},oc:function(e){e.x.style.display="inline-block",e.x.style.verticalAlign="top"},addView:function(e,t){webix.isUndefined(t)&&(t=this.q.length);var i=this.$$?this:this.getTopParentView();return i=i&&i.ui?i:webix,i.ui(e,this,t).s.id},removeView:function(e){var t;t="object"!=typeof e?webix.$$(e)||(this.$$?this.$$(e):null):e;var i=webix.PowerArray.find.call(this.q,t);if(i>=0){this.Vx&&this.Vx(i,t);var n=this.elements?this:this.getFormView();this.q.splice(i,1),n&&webix.ui.each(t,function(e){e.name&&delete n.getCleanValues()[e.config.name]},n,!0),t.destructor(),this.resizeChildren(!0),n&&n.Qs()}webix.callEvent("onReconstruct",[this])},reconstruct:function(){this.qc=0,this.Qb(this.nc)},Fb:function(e,t,i){e.s.hidden||(e.s.hidden=!0,webix.html.remove(e.x),this.qc++,i||webix.Nb||this.resizeChildren(!0))},Lw:function(e){e.callEvent&&e.callEvent("onViewShow",[])},resizeChildren:function(){if(!webix.ui.PG&&this.lc){var e=this.getParentView();if(e)return e.resizeChildren?e.resizeChildren():e.resize();var t,i,n,r,o=this.$getSize(0,0);if(n=t=this.lc[0]||0,r=i=this.lc[1]||0,(o[1]>=1e5||o[3]>=1e5)&&this.x.parentNode&&(n=t=Math.max(o[0],this.s.width||this.x.parentNode.offsetWidth||t||0),r=i=Math.max(o[2],this.s.height||this.x.parentNode.offsetHeight||i||0)),e)this.rc(t,i);else{o[0]>t&&(n=o[0]),o[2]>i&&(r=o[2]);var a=this.x.parentNode==document.body&&!this.setPosition;!a&&t>o[1]&&(n=o[1]),!a&&i>o[3]&&(r=o[3]),this.$setSize(n,r)}webix.ED&&(webix.ED=!1,this.resizeChildren()),webix.callEvent("onResize",[])}},getChildViews:function(){return this.q},index:function(e){e.s&&(e=e.s.id);for(var t=0;t<this.q.length;t++)if(this.q[t].s.id==e)return t;return-1},fc:function(e,t,i){if(e.s.hidden){e.s.hidden=!1;for(var n=this.index(e)+1;this.q[n]&&this.q[n].s.hidden;)n++;var r=this.q[n]?this.q[n].x:null;webix.html.insertBefore(e.x,r,this.y||this.x),this.qc--,i||(this.resizeChildren(!0),e.refresh&&e.refresh()),e.callEvent&&(e.callEvent("onViewShow",[]),webix.ui.each(e,this.Lw))}},showBatch:function(e,t){var i=void 0!==t;if(t=!1!==t,i)this.s.visibleBatch="";else{if(this.s.visibleBatch==e)return;this.s.visibleBatch=e}for(var n=[],r=0;r<this.q.length;r++)this.q[r].s.batch?this.q[r].s.batch==e?t?n.push(this.q[r]):this.Fb(this.q[r],null,!0):i||this.Fb(this.q[r],null,!0):n.push(this.q[r]);for(var r=0;r<n.length;r++)this.fc(n[r],null,!0),n[r].Qd();this.resizeChildren(!0)},kc:function(e){this.q=[];for(var t=0;t<e.length;t++)webix.Xb=this,e[t].Ob||(e[t].borderless=!0),this.q[t]=webix.ui.A(e[t],this),this.mc||this.oc(this.q[t]),this.s.visibleBatch&&this.s.visibleBatch!=this.q[t].s.batch&&this.q[t].s.batch&&(this.q[t].s.hidden=!0,this.qc++),this.q[t].s.hidden||((this.y||this.w).appendChild(this.q[t].x),this.q[t].$nospace&&this.qc++);this.sc&&this.sc(e)},tc:function(e,t,i){if(this.mc!=i)for(var n=0;n<this.q.length;n++)this.q[n].s[e]=t,this.q[n].tc&&this.q[n].tc(e,t,i)},$getSize:function(e,t){var i=0,n=1e5,r=1e5,o=0;this.mc?r=0:n=0;var a=0,s=0,l=0;this.uc=[];for(var h=0;h<this.q.length;h++)if(!this.q[h].s.hidden){var c=this.uc[h]=this.q[h].$getSize(0,0);this.q[h].$nospace?s++:this.mc?(c[0]>i&&(i=c[0]),c[1]<n&&(n=c[1]),o+=c[2],r+=c[3],c[2]==c[3]&&-1!=c[2]?(a+=c[2],s++):l+=c[4]):(c[2]>o&&(o=c[2]),c[3]<r&&(r=c[3]),i+=c[0],n+=c[1],c[0]==c[1]&&-1!=c[0]?(a+=c[0],s++):l+=c[4])}o>r&&(r=o),i>n&&(n=i),this.vc=[a,this.q.length-s,l],this.ng=[i+e,o+t];var u=webix.ui.baseview.prototype.$getSize.call(this,0,0);return u[1]>=1e5&&(u[1]=0),u[3]>=1e5&&(u[3]=0),u[0]=(u[0]||i)+e,u[1]=Math.max(u[0],(u[1]||n)+e),u[2]=(u[2]||o)+t,u[3]=Math.max(u[2],(u[3]||r)+t),!this.mc&&this.s.responsive&&(u[0]=0),u},$setSize:function(e,t){this.lc=[e,t],webix.ui.baseview.prototype.$setSize.call(this,e,t),this.rc(e,t)},wc:function(e,t,i){t=e[t],i=e[i];var n=t;if(t!=i){var r=this.xc*e[4]/this.yc;if(t>r)n=t,this.yc-=e[4],this.xc-=n;else{if(!(r>i))return-1;n=i,this.yc-=e[4],this.xc-=n}}return n},it:function(e,t){var i=webix.$$(t);"hide"!==i&&i?(i||(i=webix.ui({view:"popup",body:[{}]})),e.jt=e.s.width,e.kt=e.s.height,e.lt=i.s.id,e.s.width=0,e.s.height||(e.s.autoheight=!0),webix.ui(e,i,this.ht.length)):(e.hide(),e.lt="hide"),this.ht.push(e)},mt:function(e){var t=e.lt;if(e.lt=0,"hide"!==t&&t){e.s.width=e.jt,e.s.height=e.kt,delete e.s.autoheight;for(var i=0;this.q[i]&&!1===this.q[i].s.responsiveCell;)i++;webix.ui(e,this,i)}else e.show();this.ht.pop()},nt:function(e,t){if(webix.ot=!0,e+2*this.Dc+this.Cc*(this.q.length-1)<this.ng[0])for(var i=this.q.length-1,n=0;i>n;n++){var r=this.q[n];if(!r.lt){if(!1!==r.s.responsiveCell){this.it(r,this.s.responsive),webix.callEvent("onResponsiveHide",[r.s.id]),webix.ED=!0;break}i=this.q.length}}else if(this.ht.length){var r=this.ht[this.ht.length-1],o="hide"==r.lt?0:r.jt,a=r.$getSize(o,0);a[0]+this.ng[0]+this.Cc+20<=e&&(this.mt(r),webix.callEvent("onResponsiveShow",[r.s.id]),webix.ED=!0)}webix.ot=!1},rc:function(e,t){webix.gc=(webix.gc||0)+1,!this.mc&&this.s.responsive&&this.nt(e,t),this.xc=(this.mc?t:e)-this.vc[0],this.yc=this.vc[2];for(var i=e,n=t,r=[],o=0;o<this.q.length;o++)if(!this.q[o].s.hidden&&this.uc[o]){var a=this.uc[o];if(this.mc){var n=this.wc(a,2,3);if(0>n){r.push(o);continue}}else{var i=this.wc(a,0,1);if(0>i){r.push(o);continue}}this.q[o].$setSize(i,n)}for(var o=0;o<r.length;o++){var s=r[o],a=this.uc[s],l=Math.round(this.xc*a[4]/this.yc);this.xc-=l,this.yc-=a[4],this.mc?n=l:i=l,this.q[s].$setSize(i,n)}webix.gc-=1},zc:function(e,t){var i=this.index(e);return-1==i?null:this.q[i+t]},Ac:function(){return this.q[0]}},webix.EventSystem,webix.ui.baseview),webix.protoUI({name:"layout",$init:function(e){this.qc=0},defaults:{type:"line"},kc:function(){this.Bc&&(e=this.Bc(e)),this.Uw||(this.x.className+=" webix_layout_"+(this.s.type||""),this.Uw=1),this.s.margin!==webix.undefined&&(this.Cc=this.s.margin),this.s.padding!=webix.undefined&&(this.Dc=this.Ec=this.s.padding),this.s.paddingX!==webix.undefined&&(this.Dc=this.s.paddingX),this.s.paddingY!==webix.undefined&&(this.Ec=this.s.paddingY),(this.Ec||this.Dc)&&(this.Fc=!0),this.Wx()&&!this.s.borderless&&(this.w.style.borderWidth="1px",this.Gc=!0);var e=this.nc;this.s.borderless&&(this.s.Ob={top:!0,left:!0,right:!0,bottom:!0}),this.Hc(e),webix.ui.baselayout.prototype.kc.call(this,e),this.Ic(e)},$getSize:function(e,t){e=e||0,t=t||0;var i=this.Cc*(this.q.length-this.qc-1);if(this.Gc||this.Wx()){var n=this.s.Ob;n&&(e+=(n.left?0:1)+(n.right?0:1),t+=(n.top?0:1)+(n.bottom?0:1))}return this.s.height||(t+=2*(this.Ec||0)+(this.mc?i:0)),this.s.width||(e+=2*(this.Dc||0)+(this.mc?0:i)),webix.ui.baselayout.prototype.$getSize.call(this,e,t)},$setSize:function(e,t){this.lc=[e,t];this.Wx()||this.Gc?webix.ui.view.prototype.$setSize.call(this,e,t):webix.ui.baseview.prototype.$setSize.call(this,e,t),t=this.dc,e=this.bc,this.s.scroll&&(t=Math.max(t,this.ng[1]),e=Math.max(e,this.ng[0])),this.rc(e,t)},rc:function(e,t){var i=this.Cc*(this.q.length-this.qc-1);return this.mc?(t-=i+2*this.Ec,e-=2*this.Dc):(e-=i+2*this.Dc,t-=2*this.Ec),webix.ui.baselayout.prototype.rc.call(this,e,t)},resizeChildren:function(e){if(e){this.ac=null;for(var t=[],i=0;i<this.q.length;i++){var n=this.q[i];t[i]=n.s;var r=n.lc&&!n.Gc||n.s.borderless?"0px":"1px";n.x.style.borderTopWidth=n.x.style.borderBottomWidth=n.x.style.borderLeftWidth=n.x.style.borderRightWidth=r}this.Hc(t);for(var i=0;i<t.length;i++)t[i].borderless&&this.q[i].hc&&this.q[i].hc(t[i]);this.Ic(this.q)}webix.ot||webix.ui.baselayout.prototype.resizeChildren.call(this)},Wx:function(){return this.Fc&&this.Cc>0&&!this.Xx},Hc:function(e){if(!this.Wx()||this.s.borderless&&"space"!=this.s.type){for(var t=0;t<e.length;t++)e[t].Ob=webix.clone(this.s.Ob);var i=!1;this.Xx&&(i=!0);var n=e.length;if(this.mc){for(var t=1;n-1>t;t++)e[t].Ob.top=e[t].Ob.bottom=i;if(n>1){for("head"!=this.s.type&&(e[0].Ob.bottom=i);e[n-1].hidden&&n>1;)n--;n>0&&(e[n-1].Ob.top=i)}}else{for(var t=1;n-1>t;t++)e[t].Ob.left=e[t].Ob.right=i;if(n>1){for("head"!=this.s.type&&(e[0].Ob.right=i),e[n-1].Ob.left=i;n>1&&e[n-1].hidden;)n--;n>0&&(e[n-1].Ob.left=i)}}}else for(var t=0;t<e.length;t++)e[t].Ob&&e[t].borderless||(e[t].Ob={top:!1,left:!1,right:!1,bottom:!1})},Jc:function(e,t){t.top&&(e.borderTopWidth="0px"),t.left&&(e.borderLeftWidth="0px"),t.right&&(e.borderRightWidth="0px"),t.bottom&&(e.borderBottomWidth="0px")},Ic:function(e){for(var t=0,i=0;i<e.length;i++){var n=this.q[i],r=n.s.Ob;if(n.s.hidden&&this.q[i+1]){var o=this.q[i+1].s.Ob;r.top||(o.top=!1),r.left||(o.left=!1),i==t&&t++}this.Jc(n.x.style,n.s.Ob)}for(var a=this.mc?"marginLeft":"marginTop",s=this.mc?"marginTop":"marginLeft",l=this.mc?this.Dc:this.Ec,h=this.mc?this.Ec:this.Dc,i=0;i<e.length;i++)this.q[i].x.style[a]=(l||0)+"px";this.q.length&&(this.q[t].x.style[s]=(h||0)+"px");for(var c=t+1;c<e.length;c++)this.q[c].x.style[s]=this.Cc+"px"},type_setter:function(e){return this.Cc=void 0!==this.Kc[e]?this.Kc[e]:this.Kc.line,this.Dc=this.Ec=void 0!==this.Kc[e]?this.Lc[e]:this.Lc.line,this.Xx="material"==e||"clean"==e,"material"==e&&(this.s.borderless=!0),e},$skin:function(){var e=webix.skin.$active;this.Kc=e.layoutMargin,this.Lc=e.layoutPadding}},webix.ui.baselayout),webix.ui.layout.call(webix),webix.FlexLayout={$init:function(){this.$view.className+=" webix_flexlayout"},oc:function(){},Hc:function(){},Ic:function(){},$getSize:function(e,t){var i=0,n=0,r=this.s.gravity;this.uc=[];for(var o=0;o<this.q.length;o++){var a=this.q[o].$getSize(0,0);this.uc.push(a),i=Math.max(i,a[0]),n=Math.max(n,a[2])}return i+=2*(this.Dc||0),n+=2*(this.Ec||0),this.s.width&&(i=Math.max(i,this.s.width)),this.s.height&&(n=Math.max(n,this.s.height)),[i,1e5,n,1e5,r]},rc:function(e,t){var i=this.$view.style,n=Math.round(this.Cc/2);i.paddingTop=i.paddingBottom=this.Ec-n+"px",i.paddingLeft=i.paddingRight=this.Dc-n+"px";for(var r=0;r<this.q.length;r++)if(!this.q[r].s.hidden){var o=this.q[r].$view,a=this.uc[r],s=this.q[r].s;o&&(o.style.minWidth=a[0]+"px",a[1]<1e5&&a[1]!=a[0]&&(o.style.maxWidth=a[1]+"px"),o.style.flexBasis=s.flexBasis||a[0]+"px",o.style.flexGrow=s.flexGrow||(a[1]!=a[0]?a[4]:0),o.style.height=a[3]!=a[2]?"auto":a[2]+"px",o.style.minHeight=a[2]+"px",a[3]<1e5&&a[3]!=a[2]&&(o.style.maxHeight=a[3]+"px"),o.style.margin=n+"px")}for(var l=[],r=0;r<this.q.length;r++)if(!this.q[r].s.hidden){var o=this.q[r].$view;l[r]=[o.offsetWidth,o.offsetHeight]}for(var r=0;r<this.q.length;r++)if(!this.q[r].s.hidden){var h=this.q[r],o=h.$view;if(o){h.s.flex=!0;var a=this.uc[r],c=a[2]==a[3]?a[2]:l[r][1];h.$setSize(l[r][0],c),h.s.flex=!1}}this.$height=this.dc=this.$view.scrollHeight,this.$view.style.height=this.dc+"px"}},webix.protoUI({$init:function(){webix.extend(this,webix.FlexLayout,!0)},name:"flexlayout"},webix.ui.layout),webix.protoUI({name:"align",defaults:{borderless:!0,left:0,top:0,right:0,bottom:0},$init:function(){this.x.className+=" webix_view_align"},getChildViews:function(){return[this.gd]},body_setter:function(e){return e.Ob={top:!1,left:!1,right:!1,bottom:!1},this.gd=webix.ui.A(e),this.gd.Xb=this,this.x.appendChild(this.gd.x),e},align_setter:function(e){"string"==typeof e&&(e=e.split(",")),this.FD=this.GD=this.HD="";for(var t=0;t<e.length;t++){var i=e[t];("center"===i||"left"===i||"right"===i)&&(this.FD=i),("top"===i||"bottom"===i||"middle"===i)&&(this.GD=i),"absolute"===i&&(this.FD=this.GD=this.HD="precise")}return e},getBody:function(){return this.gd},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t);var i,n;this.HD?(i=e-this.s.left-this.s.right,n=t-this.s.top-this.s.bottom):(i=this.ng[0]||e,n=this.ng[2]||t),this.gd.$setSize(i,n);var r=this.gd.x;"center"==this.FD?r.style.marginLeft=Math.ceil((e-i)/2)+"px":"right"==this.FD?r.style.marginLeft=e-i+"px":r.style.marginLeft=(this.HD?this.s.left:0)+"px","middle"==this.GD?r.style.marginTop=Math.ceil((t-n)/2)+"px":"bottom"==this.GD?r.style.marginTop=t-n+"px":r.style.marginTop=(this.HD?this.s.top:0)+"px"},$getSize:function(e,t){var i=this.ng=this.gd.$getSize(0,0),n=webix.ui.baseview.prototype.$getSize.call(this,0,0);return this.HD&&(e+=this.s.left+this.s.right,t+=this.s.top+this.s.bottom),!this.FD||this.HD?(n[0]=i[0]+e,n[1]=i[1]+e):(n[0]=(n[0]||i[0])+t,n[1]+=e),!this.GD||this.HD?(n[2]=i[2]+t,n[3]=i[3]+t):(n[2]=(n[2]||i[2])+t,n[3]+=t),n}},webix.ui.view),webix.animate=function(e,t){var i=t;if(webix.isArray(e))for(var n=0;n<e.length;n++){if(webix.isArray(t)&&(i=t[n]),"slide"==i.type){if("out"==i.subtype&&0===n)continue;if("in"==i.subtype&&1==n)continue}if("flip"!=i.type)webix.animate(e[n],i);else{var r=webix.clone(i);0===n&&(r.type="flipback"),1==n&&(r.callback=null),webix.animate(e[n],r)}}else{var o=webix.toNode(e);o.Mc?webix.animate.end(o,i):webix.animate.start(o,i)}},webix.animate.end=function(e,t){e.style[webix.env.transitionDuration]="1ms",e.Mc=null,webix.Nc&&window.clearTimeout(webix.Nc),webix.Nc=webix.delay(webix.animate,webix,[e,t],10)},webix.animate.isSupported=function(){return!webix.$testmode&&!webix.noanimate&&webix.env.transform&&webix.env.transition&&!webix.env.isOpera},webix.animate.formLine=function(e,t,i){var n=i.direction;t.parentNode&&(t.parentNode.style.position="relative"),t.style.position="absolute",e.style.position="absolute";var r=webix.env.isFF?"top"==n||"left"==n?-1:1:0;return"top"==n||"bottom"==n?(e.style.left="0px",e.style.top=(i.top||r)+("top"==n?1:-1)*t.offsetHeight+"px"):(e.style.top=(i.top||0)+"px",e.style.left=r+("left"==n?1:-1)*t.offsetWidth+"px"),t.parentNode==e.parentNode&&i.keepViews?e.style.display="":webix.html.insertBefore(e,t.nextSibling,t.parentNode),"slide"==i.type&&"out"==i.subtype&&(e.style.left="0px",e.style.top=(i.top||0)+"px",t.parentNode.removeChild(t),webix.html.insertBefore(t,e.nextSibling,e.parentNode)),[e,t]},webix.animate.breakLine=function(e){arguments[1]?e[1].style.display="none":webix.html.remove(e[1]),webix.animate.clear(e[0]),webix.animate.clear(e[1]),e[0].style.position=""},webix.animate.clear=function(e){e.style[webix.env.transform]="none",e.style[webix.env.transition]="none",e.style.top=e.style.left=""},webix.animate.defaults={type:"slide",delay:"0",duration:"500",timing:"ease-in-out",x:0,y:0},webix.animate.start=function(e,t){"string"==typeof t&&(t={type:t}),t=webix.Settings.E(t,webix.animate.defaults);var i,n,r=webix.env.cssPrefix,o=e.Mc=t;switch("slide"==o.type&&o.direction){case"right":o.x=e.offsetWidth;break;case"left":o.x=-e.offsetWidth;break;case"top":o.y=-e.offsetHeight;break;case"bottom":default:o.y=o.y||e.offsetHeight}("flip"==o.type||"flipback"==o.type)&&(i=[0,0],n="scaleX","vertical"==o.subtype?(i[0]=20,n="scaleY"):i[1]=20,("right"==o.direction||"bottom"==o.direction)&&(i[0]*=-1,i[1]*=-1));var a=o.duration+"ms "+o.timing+" "+o.delay+"ms",s=r+"TransformStyle: preserve-3d;",l="",h="";switch(o.type){case"fade":l="opacity "+a,s="opacity: 0;";break;case"show":l="opacity "+a,s="opacity: 1;";break;case"flip":a=o.duration/2+"ms "+o.timing+" "+o.delay+"ms",h="skew("+i[0]+"deg, "+i[1]+"deg) "+n+"(0.00001)",l="all "+a;break;case"flipback":o.delay+=o.duration/2,a=o.duration/2+"ms "+o.timing+" "+o.delay+"ms",e.style[webix.env.transform]="skew("+-1*i[0]+"deg, "+-1*i[1]+"deg) "+n+"(0.00001)",e.style.left="0",h="skew(0deg, 0deg) "+n+"(1)",l="all "+a;break;case"slide":var c=o.x+"px",u=o.y+"px";h=webix.env.translate+"("+c+", "+u+("translate3d"==webix.env.translate?", 0":"")+")",l=r+"transform "+a}webix.delay(function(){e.style[webix.env.transition]=l,webix.delay(function(){s&&(e.style.cssText+=s),h&&(e.style[webix.env.transform]=h);var t=!1,i=webix.event(e,webix.env.transitionEnd,function(n){e.Mc=null,o.callback&&o.callback.call(o.master||window,e,o,n),t=!0,webix.eventRemove(i)});window.setTimeout(function(){t||(e.Mc=null,o.callback&&o.callback.call(o.master||window,e,o),t=!0,webix.eventRemove(i))},1.3*(1*o.duration+1*o.delay))})})},webix.MouseEvents={$init:function(e){e=e||{},this.Oc=0,this.Pc=300,this.Qc=null,this.Rc(e.onClick,"on_click"),this.Rc(e.onContext,"on_context"),this.Rc(e.onDblClick,"on_dblclick"),this.Rc(e.onMouseMove,"on_mouse_move"),this.on_click&&(webix.UE(this.w,"click",this.Sc,{bind:this}),webix.env.isIE8&&this.on_dblclick&&webix.UE(this.w,"dblclick",this.Tc,{bind:this})),this.on_context&&webix.UE(this.w,"contextmenu",this.Uc,{bind:this}),this.on_mouse_move&&this.Vc()},Vc:function(){this.Wc||(this.on_mouse_move=this.on_mouse_move||{},webix.UE(this.w,"mousemove",this.Xc,{bind:this}),webix.UE(this.w,webix.env.isIE?"mouseleave":"mouseout",this.Xc,{bind:this}),this.Wc=1,this.attachEvent("onDestruct",function(){this.Zc&&window.clearTimeout(this.Zc)}))},Rc:function(e,t){if(e){var i=this[t],n=i?webix.extend({},i):{};this[t]=webix.extend(n,e)}},Sc:function(e){if(!this.isEnabled())return!1;if(webix.UIManager.sb(this),this.on_dblclick){var t=(new Date).valueOf();if(t-this.Oc<=this.Pc&&this.locate){if(""+this.locate(e)==""+this.Qc)return this.Oc=0,this.Tc(e)}this.Oc=t}return this.Yc(e,this.on_click,"ItemClick")},Tc:function(e){return this.Yc(e,this.on_dblclick,"ItemDblClick")},Uc:function(e){this.Yc(e,this.on_context,"BeforeContextMenu","AfterContextMenu")},Xc:function(e){if(!this.$destructed){if(document.createEventObject)e=document.createEventObject(event);else if(!(webix.$testmode||webix.isUndefined(e.movementY)||e.movementY||e.movementX))return;this.Zc&&window.clearTimeout(this.Zc),this.callEvent("onMouseMoving",[e]),this.Zc=window.setTimeout(webix.bind(function(){"mousemove"==e.type?this.$c(e):this._c(e)},this),this.s.mouseEventDelay||500)}},$c:function(e){this.Yc(e,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[e||event])},_c:function(e){this.callEvent("onMouseOut",[e||event])},Yc:function(e,t,i,n){if(e=e||event,!e.processed&&this.x){e.processed=!0;var r=e.target||e.srcElement;if(webix.env.isIE8){var o=this.s.id,a=r.w_view;if(a){if(a!==o)return}else r.w_view=o}for(var s="",l=null,h=!1;r&&r.parentNode&&this.x&&r!=this.x.parentNode;){if(!h&&r.getAttribute&&(l=r.getAttribute(this.ad))){if(this.Qc=l,this.callEvent){if(!this.callEvent("on"+i,[l,e,r]))return;n&&this.callEvent("on"+n,[l,e,r])}h=!0}if(s=webix.html.TC(r)){s=(""+s).split(" ");for(var c=0;c<s.length;c++)if(t[s[c]]){var u=webix.toFunctor(t[s[c]],this.$scope),d=u.call(this,e,l||webix.html.locate(e,this.ad),r);if(!1===d)return h}}r=r.parentNode}return h}}},webix.protoUI({name:"accordionitem",$init:function(e){this.x.innerHTML="<div webix_ai_id='"+e.id+"'  class='webix_accordionitem_header'><div tabindex='0' role='button' class='webix_accordionitem_button' ></div><div class='webix_accordionitem_label' ></div></div><div class='webix_accordionitem_body'></div>",this.w=this.x,this.bd=this.w.childNodes[0],e.header||(this.bd.style.display="none"),this.cd=this.w.childNodes[0].childNodes[1],this.dd=this.w.childNodes[0].childNodes[0],this.ed=this.w.childNodes[1],this.x.className+=" webix_accordionitem",this.fd=this.gd=null,this.q=!0,this.ed.setAttribute("role","tabpanel"),this.bd.setAttribute("role","tab"),this.attachEvent("onKeyPress",this.DD)},Rb:function(){this.gd={destructor:function(){}}},Qb:function(e){this.gd.destructor(),this.gd=e,this.gd.Xb=this,this.ed.appendChild(this.gd.x),this.resize()},ad:"webix_ai_id",getChildViews:function(){return[this.gd]},body_setter:function(e){return"object"!=typeof e&&(e={template:e}),e.Ob={top:!0,left:!0,right:!0,bottom:!0},webix.Xb=this,this.gd=webix.ui.A(e),this.gd.$view.style.border="0px solid red",this.ed.appendChild(this.gd.x),e},header_setter:function(e){return e&&(e=webix.template(e)),e},headerAlt_setter:function(e){return e&&(e=webix.template(e)),e},$getSize:function(e,t){var i=this.gd.$getSize(0,0),n=this.s.Ob;n&&(e+=(n.left?0:1)+(n.right?0:1),t+=(n.top?0:1)+(n.bottom?0:1));var r=0,o=webix.ui.baseview.prototype.$getSize.call(this,0,0);o[0]=(o[0]||i[0])+e,o[1]>=1e5&&(o[1]=i[1]),o[1]+=e,o[2]=(o[2]||i[2])+t;var a=o[3]<1e5;return a||(o[3]=i[3]),o[3]+=t,this.getParentView().mc?this.s.collapsed?o[2]=o[3]=this.hd():this.s.header&&(r=this.s.headerHeight):(this.s.collapsed&&(o[0]=o[1]=this.hd()),this.s.header&&(r=this.s.headerHeight)),a||(o[2]+=r,o[3]+=r),o},on_click:{webix_accordionitem_header:function(e,t){return this.id(e),!1},webix_accordionitem_header_v:function(e,t){return this.id(e),!1}},id:function(e){this.define("collapsed",!this.s.collapsed)},collapsed_setter:function(e){if(!1!==this.s.header){var t=this.getParentView();if(t){if(e)if(t.jd(this))this.kd();else{var i=0;if(t.q.length>1)for(var n=0;n<t.q.length;n++){var r=t.q[n];if(this!=r&&r.isVisible()&&r.expand){r.expand(),this.kd(),i=1;break}}if(!i)return}else this.ld();this.s.collapsed=e,e||t.md(this),this.refresh(),webix.Nb||this.resize(),t.callEvent("onAfter"+(e?"Collapse":"Expand"),[this.s.id]),this.s.$noresize=e}return e}},collapse:function(){this.define("collapsed",!0),webix.UIManager.vb(this)},expand:function(){this.define("collapsed",!1)},fc:function(){this.show()},Fb:function(){this.hide()},ld:function(){this.ed.style.display="",webix.html.removeCss(this.$view,"collapsed"),webix.html.removeCss(this.bd,"collapsed"),this.bd.setAttribute("aria-expanded","true")},kd:function(){this.getParentView().mc,this.s.headerAlt&&(this.cd.innerHTML=this.s.headerAlt()),this.ed.style.display="none",webix.html.addCss(this.$view,"collapsed"),webix.html.addCss(this.bd,"collapsed"),this.bd.setAttribute("aria-expanded","false")},refresh:function(){var e=this.s[this.s.collapsed?"headerAlt":"header"]||this.s.header;e&&(this.cd.innerHTML=e(),this.dd.setAttribute("aria-label",e()));var t=this.getParentView().mc?"vertical":"horizontal";this.x.className.indexOf(" "+t)<0&&webix.html.addCss(this.x,t),webix.env.transform||webix.html.addCss(this.x,"webix_ie",!0)},hd:function(){return this.s.collapsed?this.s.headerAltHeight:this.s.headerHeight},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)||this.hd()!=this.CA){e=this.bc,t=this.dc;var i=this.CA=this.hd();if(this.s.header)if(this.bd.style.height=i+"px",this.bd.style.width="auto",this.bd.style[webix.env.transform]="",this.bd.style.borderBottomWidth=(this.s.collapsed?0:1)+"px",this.getParentView().mc||!this.s.collapsed)t-=this.hd();else if(this.s.collapsed)if(webix.animate.isSupported()){this.bd.style.width=t+"px",this.bd.style.height=e+3+"px";var n=Math.floor(t/2-e/2)+(e-this.s.headerAltHeight)/2;this.bd.style[webix.env.transform]="rotate(90deg) translate("+n+"px, "+(n+1)+"px)"}else this.bd.style.width=e+"px",this.bd.style.height=t+3+"px";this.s.collapsed||(this.gd.$setSize(e,t),this.ct=t)}else if(!this.s.collapsed){var r=this.gd;this.ct&&r.$setSize(this.bc,this.ct)}},$skin:function(){var e=this.defaults;e.headerAltHeight=e.headerHeight=webix.skin.$active.barHeight,webix.skin.$active.borderlessAccordion&&(e.borderless=!0)},defaults:{header:!1,headerAlt:!1,body:""}},webix.MouseEvents,webix.EventSystem,webix.ui.view),webix.protoUI({name:"accordion",defaults:{panelClass:"accordionitem",multi:!1,collapsed:!1},$init:function(){this.x.setAttribute("role","tablist"),this.x.setAttribute("aria-multiselectable","true")},Qb:function(e,t){webix.ui.layout.prototype.Qb.apply(this,arguments),e.collapsed_setter&&e.refresh&&e.refresh()},kc:function(){for(var e=this.s.panelClass,t=this.nc,i=0;i<t.length;i++)!t[i].body&&!t[i].header||t[i].view||t[i].align||(t[i].view=e),webix.isUndefined(t[i].collapsed)&&(t[i].collapsed=this.s.collapsed);this.nd=!0,webix.ui.layout.prototype.kc.call(this),this.nd=!1;for(var i=0;i<this.q.length;i++)this.q[i].name==e&&this.q[i].refresh(),this.q[i].od=!1;for(var n=!1,i=this.q.length-1;i>=0&&!n;i--)this.q[i].s.hidden||(this.q[i].od=!0,n=!0)},md:function(e){if(!1===this.s.multi&&!0!==this.nd)for(var t=0;t<this.q.length;t++)e!=this.q[t]&&!this.q[t].s.collapsed&&this.q[t].collapse&&this.q[t].collapse();e.callEvent&&(e.callEvent("onViewShow",[]),webix.ui.each(e,this.Lw))},jd:function(e){if(!0===this.s.multi||this.nd)return!0;for(var t=0;t<this.q.length;t++)if(e!=this.q[t]&&!this.q[t].s.collapsed&&this.q[t].isVisible()&&!this.q[t].$nospace)return!0;return!1},$skin:function(){var e=this.defaults;webix.skin.$active.accordionType&&(e.type=webix.skin.$active.accordionType)}},webix.ui.layout),webix.protoUI({name:"headerlayout",defaults:{type:"accordion",multi:"mixed",collapsed:!1}},webix.ui.accordion),webix.DragControl={pd:webix.toArray(["dummy"]),addDrop:function(e,t,i){e=webix.toNode(e),e.webix_drop=this.qd(t),i&&(e.webix_master=!0)},qd:function(e){e=e||webix.DragControl;var t=this.pd.find(e);return 0>t&&(t=this.pd.length,this.pd.push(e)),t},UB:function(e){var t=webix.DragControl,i=this.VB();if(i&&i.WB){t.v||t.createDrag(e);var n=t.Gd;t.v.style.left=e.x+t.left+(n.x_offset||0)+"px",t.v.style.top=e.y+t.top+(n.y_offset||0)+"px"}},addDrag:function(e,t){e=webix.toNode(e),e.webix_drag=this.qd(t),webix.UE(e,webix.env.mouse.down,this.rd,{bind:e}),webix.UE(e,"dragstart",webix.html.preventEvent)},rd:function(e){if(webix.DragControl.sd){if(webix.DragControl.td==e)return;webix.DragControl.ud(),webix.DragControl.destroyDrag(e)}webix.DragControl.sd=this;var t=webix.env.mouse.context(e);webix.DragControl.vd=t,webix.DragControl.td=e,webix.DragControl.wd=webix.event(document.body,webix.env.mouse.move,webix.DragControl.xd),webix.DragControl.yd=webix.event(document,webix.env.mouse.up,webix.DragControl.ud),webix.html.addCss(document.body,"webix_noselect",1)},ud:function(){webix.DragControl.zd()},xd:function(e){var t=webix.env.mouse.context(e),i=webix.DragControl.VB();return i&&webix.env.touch&&i.WB&&!webix.Touch.qm||Math.abs(t.x-webix.DragControl.vd.x)<5&&Math.abs(t.y-webix.DragControl.vd.y)<5||(webix.DragControl.zd(!0),!webix.DragControl.v&&!webix.DragControl.createDrag(webix.DragControl.td))?void 0:(webix.DragControl.sendSignal("start"),webix.DragControl.wd=webix.event(document.body,webix.env.mouse.move,webix.DragControl.Ad),webix.DragControl.yd=webix.event(document,webix.env.mouse.up,webix.DragControl.Bd),webix.DragControl.Ad(e),webix.env.touch?webix.html.preventEvent(e):void 0)},Bd:function(e){webix.DragControl.zd(),webix.DragControl.td=null,webix.DragControl.Cd&&(webix.DragControl.$drop(webix.DragControl.sd,webix.DragControl.Cd,e),webix.DragControl.$dragOut(webix.DragControl.sd,webix.DragControl.Cd,null,e)),webix.DragControl.destroyDrag(e),webix.DragControl.sendSignal("stop")},zd:function(e){this.wd=webix.eventRemove(this.wd),this.yd=webix.eventRemove(this.yd),e||webix.html.removeCss(document.body,"webix_noselect")},Ad:function(e){var t=webix.DragControl,i=webix.html.pos(e),n=webix.env.mouse.context(e),r=t.$dragPos(i,e),o=t.Gd;if(t.v.style.top=i.y+t.top+(r||!o.y_offset?0:o.y_offset)+"px",t.v.style.left=i.x+t.left+(r||!o.x_offset?0:o.x_offset)+"px",t.Ed)t.Ed=!1;else{var a=n.target=webix.env.touch?document.elementFromPoint(n.x,n.y):n.target,s=webix.env.touch?n:e;t.Fd(a,s)}return webix.html.preventEvent(e)},Fd:function(e,t){for(;e&&"BODY"!=e.tagName;){if(e.webix_drop){if(this.Cd&&(this.Cd!=e||e.webix_master)&&this.$dragOut(this.sd,this.Cd,e,t),!this.Cd||this.Cd!=e||e.webix_master)return this.Cd=null,this.Dd=this.$dragIn(webix.DragControl.sd,e,t),void(this.Dd&&(this.Cd=e));return}e=e.parentNode}this.Cd&&(this.Cd=this.Dd=this.$dragOut(this.sd,this.Cd,null,t))},sendSignal:function(e){webix.DragControl.active="start"==e},getMaster:function(e){return this.pd[e.webix_drag||e.webix_drop]},getContext:function(){return this.Gd},getNode:function(){return this.v},createDrag:function(e){var t=webix.DragControl,i=t.sd;t.Gd={};var n,r=this.pd[i.webix_drag];if(r.$dragCreate){if(!(n=r.$dragCreate(i,e)))return!1;this.ZB(e),n.style.position="absolute"}else{var o=t.$drag(i,e);if(t.ZB(e),!o)return!1;n=document.createElement("DIV"),n.innerHTML=o,n.className="webix_drag_zone",document.body.appendChild(n);var a=t.Gd;a.html&&webix.env.pointerevents&&(a.x_offset=-Math.round(.5*n.offsetWidth),a.y_offset=-Math.round(.75*n.offsetHeight))}return n.style.zIndex=Math.max(n.style.zIndex,webix.ui.zIndex()),webix.DragControl.Hd=webix.event(n,webix.env.mouse.move,webix.DragControl.Id),webix.DragControl.Gd.from||(webix.DragControl.Gd={source:i,from:i}),webix.DragControl.v=n,!0},Id:function(){webix.DragControl.Ed=!0},destroyDrag:function(e){var t=webix.DragControl.sd,i=this.pd[t.webix_drag];i&&i.$dragDestroy?(webix.DragControl.Hd=webix.eventRemove(webix.DragControl.Hd),webix.DragControl.v&&i.$dragDestroy(t,webix.DragControl.v,e)):webix.html.remove(webix.DragControl.v),webix.DragControl.Dd=webix.DragControl.sd=webix.DragControl.Cd=webix.DragControl.v=null},VB:function(){return webix.DragControl.pd[webix.DragControl.sd.webix_drag]},top:5,left:5,ZB:function(e){var t=webix.DragControl,i=t.vd,n=t.Gd;if(void 0!==n.x_offset&&void 0!==n.y_offset)return null;if(n.x_offset=n.y_offset=0,webix.env.pointerevents){var r=webix.DragControl.VB();if(r.WB&&r!==this){var o=r.WB(i,e);o&&(n.x_offset=o.x-i.x,n.y_offset=o.y-i.y)}}},$dragPos:function(e,t){var i=this.pd[webix.DragControl.sd.webix_drag];return i.$dragPos&&i!=this?(i.$dragPos(e,t,webix.DragControl.v),!0):void 0},$dragIn:function(e,t,i){var n=this.pd[t.webix_drop];return n.$dragIn&&n!=this?n.$dragIn(e,t,i):(t.className=t.className+" webix_drop_zone",t)},$dragOut:function(e,t,i,n){var r=this.pd[t.webix_drop];return r.$dragOut&&r!=this?r.$dragOut(e,t,i,n):(t.className=t.className.replace("webix_drop_zone",""),null)},$drop:function(e,t,i){var n=this.pd[t.webix_drop];return webix.DragControl.Gd.from=webix.DragControl.getMaster(e),n.$drop&&n!=this?n.$drop(e,t,i):void t.appendChild(e)},$drag:function(e,t){var i=this.pd[e.webix_drag];return i.$drag&&i!=this?i.$drag(e,t):"<div style='"+e.style.cssText+"'>"+e.innerHTML+"</div>"}},webix.attachEvent("onLongTouch",function(e){webix.DragControl.sd&&webix.DragControl.UB(e)}),webix.DataMove={copy:function(e,t,i,n){n=n||{};var r=n.newId||e;i=i||this;var o=this.getItem(e);return i&&(o=i.Jd(o)),i.data.add(i.Jd(o,r),t,n.parent||0)},Kd:function(e,t,i){if(t&&e){var n=this.getIndexById(e);return n+(i==this&&i.getIndexById(t)<n?0:1)}},move:function(e,t,i,n){n=n||{};var r=n.newId||e;if(i=i||this,i.data){if(webix.isArray(e)){e.length>3&&(this.$blockRender=i.$blockRender=!0);for(var o=0;o<e.length;o++){var a=this.move(e[o],t,i,n);t=i.Kd(a,e[o+1],this)}return this.$blockRender=i.$blockRender=!1,void(e.length>3&&(this.refresh(),i!=this&&i.refresh()))}var a=e,s=this.getItem(e);return i&&i!=this?(a=i.data.add(i.Jd(s,r),t,n.parent||0),this.data.remove(e)):(0>t&&(t=this.data.order.length-1),this.data.move(this.getIndexById(e),t),this.data.callEvent("onDataMove",[e,t,null,this.data.order[t+1]])),a}},moveUp:function(e,t){return this.move(e,this.getIndexById(e)-(t||1))},moveDown:function(e,t){return this.moveUp(e,-1*(t||1))},moveTop:function(e){return this.move(e,0)},moveBottom:function(e){return this.move(e,this.data.count()-1)},Jd:function(e,t){var i=webix.extend({},e);return i.id=!t||this.data.pull[t]?webix.uid():t,i.$template=null,this.s.externalData&&(i=this.s.externalData.call(this,i,t,e)),i}},webix.Movable={move_setter:function(e){return e&&(this.Ld=webix.clone(this.Ld),this.Ld.master=this,webix.DragControl.addDrag(this.bd?this.bd:this.$view,this.Ld)),e},Ld:{$dragCreate:function(e,t){if(this.master.config.move){var i=webix.html.offset(e),n=webix.html.pos(t);return webix.DragControl.top=i.y-n.y,webix.DragControl.left=i.x-n.x,webix.toNode(this.master.x)}},$dragDestroy:function(e,t){var i=this.master;i.s&&(i.s.top=parseInt(t.style.top,10),i.s.left=parseInt(t.style.left,10)),webix.DragControl.top=webix.DragControl.left=5,this.master.callEvent("onViewMoveEnd",[])},$dragPos:function(e,t){this.master.callEvent("onViewMove",[e,t])}}},webix.Modality={Md:function(e){if(e){if(!this.Nd){this.Nd=webix.html.create("div",{class:"webix_modal"});var t=this.s.zIndex||webix.ui.zIndex();this.Od=webix.Pd,webix.Pd=t,this.Nd.style.zIndex=t-1,this.x.style.zIndex=t,document.body.appendChild(this.Nd),document.body.style.overflow="hidden",webix.UE(this.Nd,"click",webix.bind(this.Vw,this))}}else if(this.Nd){webix.html.remove(this.Nd),document.body.style.overflow="";var i=this.Od;setTimeout(function(){webix.Pd=i},1),this.Nd=null}return e}},webix.protoUI({name:"window",$init:function(e){this.x.innerHTML="<div class='webix_win_content'><div class='webix_win_head'></div><div class='webix_win_body'></div></div>",this.w=this.x.firstChild,this.bd=this.w.childNodes[0],this.y=this.ed=this.w.childNodes[1],this.x.className+=" webix_window",this.x.setAttribute("role","dialog"),this.x.setAttribute("tabindex","0"),this.fd=this.gd=null,this.s.Ob={top:!1,left:!1,right:!1,bottom:!1},e.id||(e.id=webix.uid()),webix.UE(this.w,"click",webix.bind(this.Vw,this)),this.w.addEventListener&&webix.UE(this.w,"click",function(){!this.s.zIndex&&this.s.toFront&&(this.x.style.zIndex=webix.ui.zIndex())},{bind:this,capture:!0}),e.modal&&(this.my=!0),this.attachEvent("onViewMoveEnd",function(){this.s.position&&delete this.s.position})},Vw:function(e){var t=webix.ui.et,i=t.find(this);-1==i&&(i=t.length-1),e.click_view=i,webix.env.isIE8&&(e.srcElement.click_view=i)},getChildViews:function(){return this.fd?[this.fd,this.gd]:[this.gd]},zIndex_setter:function(e){return this.x.style.zIndex=e,e},Rb:function(){this.gd={destructor:function(){}}},Qb:function(e){this.gd.destructor(),this.gd=e,this.gd.Xb=this,this.ed.appendChild(this.gd.x);var t=this.gd.x.style;t.borderTopWidth=t.borderBottomWidth=t.borderLeftWidth=t.borderRightWidth="1px",this.gd.s.Ob=webix.clone(this.s.Ob),this.resize(!0)},show:function(e,t,i){if(!0===e){if(!this.s.hidden)return;e=null}if(!this.callEvent("onBeforeShow",arguments))return!1;this.s.hidden=!1,this.x.style.zIndex=this.s.zIndex||webix.ui.zIndex(),(this.s.modal||this.my)&&(this.Md(!0),this.my=null);var n,r,o;if(t=t||{},t.pos||(t.pos=this.s.relative),e){"object"!=typeof e||e.tagName?(e=webix.toNode(e),n=webix.html.offset(e)):e.target||e.srcElement?(n=webix.html.pos(e),r=20,o=5):n=e;var a=Math.max(window.innerWidth||0,document.body.offsetWidth),s=Math.max(window.innerHeight||0,document.body.offsetHeight);r=r||e.offsetWidth||0,o=o||e.offsetHeight||0;var l=this.ac,h=n.x,c=n.y,u=0,d=0,f=0,p=0,m=this.s.autofit;if(m){var g="node"===m,v=6;i="top",c=0,h=0,f=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,a-n.x-r<l[0]&&"right"==t.pos&&!g&&(t.pos="left"),"right"==t.pos?(h=n.x+6+r,v=-o,i="left",u=Math.round(n.y+o/2),d=h-6):"left"==t.pos?(h=n.x-6-l[0]-1,v=-o,i="right",u=Math.round(n.y+o/2),d=h+l[0]+1):(h=n.x<f?f:a+f-n.x>l[0]?n.x:a+f-6-l[0],d=Math.round(n.x+r/2),d=Math.min(d,h+l[0]-18)),p=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,(!l[1]||s+p-o-n.y-v>l[1]||g)&&"top"!=t.pos?(c=o+n.y+v-4,u||(i="top",u=c-6)):(c=n.y-v-l[1],0>c?(c=0,"top"==i&&(i=!1)):u||(i="bottom",c--,u=c+l[1]+1))}var b=t.x||0,w=t.y||0,x=this.jG();x&&(c-=p,u-=p),this.setPosition(h+b,c+w),this.Rd&&(i&&this.s.point?this.Rd(i,d+b,u+w,x):this.Sd())}else this.Td(this.s.left,this.s.top);this.x.style.display="block",this.Ww=1,webix.delay(function(){this.Ww=0},this,[],webix.env.touch?400:100),this.Qd(),this.config.autofocus&&(this.Vd=webix.UIManager.getFocus(),webix.UIManager.setFocus(this)),-1==webix.ui.et.find(this)&&webix.ui.et.push(this),this.callEvent("onShow",[])},Fb:function(e){if(!(this.s.hidden||this.s.modal||this.Ww||e&&e.showpopup||webix.Pd&&this.s.zIndex<=webix.Pd)){if(e){var t=webix.env.isIE8?e.srcElement.click_view:e.click_view;t||0===t||(t=-1);if(t>=webix.ui.et.find(this))return}this.hide()}},hidden_setter:function(e){return e?this.hide():this.show(),!!e},hide:function(e){if(!this.$destructed&&(e||!this.s.hidden)){if(this.s.modal&&this.Md(!1),"top"==this.s.position?webix.animate(this.x,{type:"slide",x:0,y:-(this.dc+20),duration:300,callback:this.Wd,master:this}):this.Wd(),this.s.autofocus){var t=document.activeElement;t&&this.x&&(this.x.contains(t)||t===document.body)&&(webix.UIManager.setFocus(this.Vd),this.Vd=null)}this.ny()}},ny:function(){var e=webix.ui.et,t=e.find(this),i=e.length-1;if(t>-1)for(var n=i;n>t;n--)e[n].Sd&&e[n].hide();e.removeAt(t)},destructor:function(){this.Md(!1),webix.html.remove(this.x),this.s.autofocus&&(webix.B||webix.UIManager.setFocus(this.Vd),this.Vd=null),this.ny(),this.Sd&&this.Sd(),webix.Destruction.destructor.apply(this,[])},Wd:function(){this.$destructed||(this.x.style.display="none",this.s.hidden=!0,this.callEvent("onHide",[]))},close:function(){this.destructor()},Xd:function(e){e.borderless=!0},body_setter:function(e){return"object"!=typeof e&&(e={template:e}),this.Xd(e),webix.Xb=this,this.gd=webix.ui.A(e),this.gd.Xb=this,this.ed.appendChild(this.gd.x),e},head_setter:function(e){return!1===e?e:("object"!=typeof e&&(this.x.setAttribute("aria-label",e),e={template:e,padding:0}),e.borderless=!0,webix.Xb=this,this.fd=webix.ui.A(e),this.fd.Xb=this,this.bd.appendChild(this.fd.x),e)},getBody:function(){return this.gd},getHead:function(){return this.fd},adjust:function(){return this.resize()},resizeChildren:function(){this.gd&&this.resize()},resize:function(){webix.ui.baseview.prototype.adjust.call(this),this.isVisible()&&this.Td(this.s.left,this.s.top)},jG:function(){if(this.s.master){var e=webix.$$(this.s.master).getTopParentView().$view;return e&&"fixed"===e.style.position}return!1},Td:function(e,t){if(this.s.position||this.jG()){this.$view.style.position="fixed";var i=this.bc,n=this.dc;if(0>=i||0>=n)return;var r=window.innerWidth||document.documentElement.offsetWidth,o=window.innerHeight||document.documentElement.offsetHeight,a=Math.round((r-i)/2),s=Math.round((o-n)/2);if("function"==typeof this.s.position){var l={left:a,top:s,width:i,height:n,maxWidth:r,maxHeight:o};this.s.position.call(this,l),(l.width!=i||l.height!=n)&&this.$setSize(l.width,l.height),this.setPosition(l.left,l.top)}else"top"==this.s.position&&(s=webix.animate.isSupported()?-1*n:10),this.s.position||(a=this.s.left||a,s=this.s.top||s),this.setPosition(a,s);"top"==this.s.position&&webix.animate(this.x,{type:"slide",x:0,y:n-2*(this.s.padding||0),duration:300,callback:this.Yd,master:this})}else this.setPosition(e,t)},Yd:function(e){webix.animate.clear(e),this.s.top=-2*(this.s.padding||0),this.setPosition(this.s.left,this.s.top)},setPosition:function(e,t){this.x.style.top=t+"px",this.x.style.left=e+"px",this.s.left=e,this.s.top=t},$getSize:function(e,t){var i=this.s.Ob;i&&(e+=(i.left?0:1)+(i.right?0:1),t+=(i.top?0:1)+(i.bottom?0:1)),this.s.head&&(t+=1);var n=this.gd.$getSize(0,0),r=0;if(this.fd){var o=this.fd.$getSize(0,0);o[3]==o[2]&&(this.s.headHeight=o[3]),t+=this.s.headHeight,r=o[0]}if(this.s.fullscreen){var a=window.innerWidth||document.body.clientWidth,s=window.innerHeight||document.body.clientHeight;return[a,a,s,s]}var l=webix.ui.view.prototype.$getSize.call(this,0,0);return r&&n[1]>1e5&&(n[0]=Math.max(r,n[0])),l[1]=Math.min(l[1],(n[1]>=1e5&&l[1]>=1e5?Math.max(n[0],l[0]):n[1])+e),l[3]=Math.min(l[3],(n[3]>=1e5&&l[3]>=1e5?Math.max(n[2],l[2]):n[3])+t),l[0]=Math.min(Math.max(l[0],n[0]+e),l[1]),l[2]=Math.min(Math.max(l[2],n[2]+t),l[3]),l},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t),e=this.bc,t=this.dc,!1===this.s.head?(this.bd.style.display="none",this.gd.$setSize(e,t)):(this.fd.$setSize(e,this.s.headHeight),this.gd.$setSize(e,t-this.s.headHeight))},$skin:function(){this.defaults.headHeight=webix.skin.$active.barHeight},defaults:{top:0,left:0,autofit:!0,relative:"bottom",body:"",head:"",hidden:!0,autofocus:!0,minWidth:300,minHeight:200}},webix.ui.view,webix.Movable,webix.Modality,webix.EventSystem),webix.protoUI({name:"popup",defaults:{point:!0},$init:function(){this.s.head=!1,this.$view.className+=" webix_popup",webix.attachEvent("onClick",webix.bind(this.Fb,this)),this.attachEvent("onHide",this.Sd)},$skin:function(){this.defaults.headHeight=webix.skin.$active.barHeight,this.defaults.padding=webix.skin.$active.popupPadding},close:function(){webix.html.remove(this.$d),webix.ui.window.prototype.close.call(this)},$getSize:function(e,t){return webix.ui.window.prototype.$getSize.call(this,e+2*this.s.padding,t+2*this.s.padding)},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t),e=this.bc-2*this.s.padding,t=this.dc-2*this.s.padding,this.w.style.padding=this.s.padding+"px",this.bd.style.display="none",this.gd.$setSize(e,t)},Xd:function(){},head_setter:function(){},Rd:function(e,t,i,n){this.Sd(),document.body.appendChild(this.$d=webix.html.create("DIV",{class:"webix_point_"+e},"")),this.$d.style.zIndex=webix.ui.zIndex(),this.$d.style.position=n?"fixed":"absolute",this.$d.style.top=i+"px",this.$d.style.left=t+"px"},Sd:function(){this.$d=webix.html.remove(this.$d)}},webix.ui.window),webix.ui.et=webix.toArray(),webix.ResizeArea={resize_setter:function(e){return e&&!this.Yz&&this.Zz(),e},Zz:function(){if(!this.$z){var e=this.x;e.firstChild&&(e=e.firstChild,e.style.position="relative"),this.$z=webix.html.create("DIV",{class:"webix_resize_handle",webix_disable_drag:"true"}),e.appendChild(this.$z),webix.UE(this.$z,webix.env.mouse.down,this._z,{bind:this})}},aA:function(e,t){if(!this.bA){this.bA=webix.html.create("div",{class:"webix_resize_frame"},""),document.body.appendChild(this.bA);var i=webix.html.offset(this.x);this.bA.style.left=i.x+"px",this.bA.style.top=i.y+"px",this.bA.style.zIndex=webix.ui.zIndex()}this.bA.style.width=e+"px",this.bA.style.height=t+"px"},_z:function(e){this.config.resize&&(webix.html.addCss(document.body,"webix_noselect webix_resize_cursor"),this.cA=webix.html.offset(this.x),this.dA=webix.event(document.body,webix.env.mouse.move,this.eA,{bind:this}),this.fA=webix.event(document.body,webix.env.mouse.up,this.gA,{bind:this}))},eA:function(e){if(!1!==this.cA){var t=webix.html.pos(e),i={x:t.x-this.cA.x+10,y:t.y-this.cA.y+10};if(this.$resizeMove)this.$resizeMove(i);else if(Math.abs(this.cA.x-t.x)<(this.config.minWidth||100)||Math.abs(this.cA.y-t.y)<(this.config.minHeight||100))return;this.hA=i,this.aA(i.x,i.y)}},gA:function(){this.bA&&(this.bA=webix.html.remove(this.bA)),webix.html.removeCss(document.body,"webix_resize_cursor"),webix.html.removeCss(document.body,"webix_noselect"),webix.eventRemove(this.dA),webix.eventRemove(this.fA),this.hA&&(this.$resizeEnd?this.$resizeEnd(this.hA):(this.config.width=this.hA.x,this.config.height=this.hA.y,this.resize())),this.cA=this.hA=!1,this.callEvent("onViewResize",[])}},webix.extend(webix.ui.window,webix.ResizeArea),webix.protoUI({name:"suggest",defaults:{autofocus:!1,type:"list",keyPressTimeout:1,body:{yCount:10,autoheight:!0,body:!0,select:!0,borderless:!0,navigation:!0},filter:function(e,t){return 0===(""+e.value).toLowerCase().indexOf(t.toLowerCase())}},template_setter:webix.template,filter_setter:function(e){return webix.toFunctor(e,this.$scope)},$init:function(e){var t={};webix.extend(t,webix.copy(this.defaults.body)),t.view=e.type||this.defaults.type;var i=this.Jt(t);e.body&&webix.extend(i,e.body,!0),e.data&&(i.data=e.data),e.url&&(i.url=e.url),e.datatype&&(i.datatype=e.datatype),e.id&&(t.id=t.id||e.id+"_"+t.view),e.body=t,this.$ready.push(this._d),this.attachEvent("onShow",function(){if(this.s.master){var e=webix.$$(this.s.master);if(e){(e.JA?e.JA():e.getInputNode()).setAttribute("aria-expanded","true")}}this.ke()}),this.attachEvent("onHide",function(){if(this.s.master){var e=webix.$$(this.s.master);if(e){(e.JA?e.JA():e.getInputNode()).setAttribute("aria-expanded","false")}}}),this.oy={}},Jt:function(e){return e},Rs:function(e){var t,i,n="";e&&this.s.master&&(t=webix.$$(this.s.master),i=t.getInputNode(),i&&t.$setValueHere?t.$setValueHere(e.value):i&&(t.options_setter?n=this.getItemText(e.id):e.value&&(n=t.YE?t.YE(e.value):""+e.value),webix.isUndefined(i.value)?i.innerHTML=n:i.value=n.replace(/<[^>]*>/g,""))),(i=i||this.ae)&&i.focus()},setMasterValue:function(e,t){var i=e.id?this.getItemText(e.id):e.text||e.value;if(this.s.master){var n=webix.$$(this.s.master);t&&e.id?n.refresh():n.options_setter?n.setValue(e.$empty?"":e.id):n.setValueHere?n.setValueHere(i):n.setValue(i)}else this.ae&&(this.ae.value=i);t||(this.hide(!0),this.ae&&this.ae.focus()),this.callEvent("onValueSuggest",[e,i]),webix.delay(function(){webix.callEvent("onEditEnd",[])})},getMasterValue:function(){return this.s.master?webix.$$(this.s.master).getValue():null},getItemId:function(e){var t=this.getList();t.type;for(var i in t.data.pull){var n=t.getItem(i);if(this.s.filter.call(this,n,e))return n.id}},getItemText:function(e){var t=this.getList().getItem(e);if(!t)return this.oy[e]||"";if(this.s.template)return this.s.template.call(this,t,this.type);if(this.s.textValue)return""+t[this.s.textValue];var i=this.getList().type,n=i.template.call(i,t,i);return this.oy[e]=n},getSuggestion:function(){var e,t=this.getList(),i=t.data.order;return t.getSelectedId&&(e=t.getSelectedId()),i.length&&(!e||i.find(e)<0)&&(e=i[0]),e&&"object"==typeof e&&(e+=""),e},getList:function(){return this.gd},_d:function(){var e=this.getList(),t=this.s.type;e.count?(e.attachEvent("onItemClick",webix.bind(function(t){this.setMasterValue(e.getItem(t))},this)),e.data.attachEvent("onstoreupdated",webix.bind(function(e,t,i){"delete"==i&&e==this.getMasterValue()?this.setMasterValue({id:"",text:""},1):"update"==i&&e==this.getMasterValue()&&this.setMasterValue(t,1)},this)),e.data.attachEvent("onAfterFilter",webix.bind(this.be,this)),e.data.attachEvent("onStoreLoad",webix.bind(this.be,this)),webix.isUndefined(this.s.fitMaster)&&(this.s.fitMaster=!0)):"calendar"==t?(e.attachEvent("onDateSelect",function(t){this.getParentView().setMasterValue({value:e.getSelectedDate()},e.config.multiselect)}),e.attachEvent("onTodaySet",function(e){this.getParentView().setMasterValue({value:e})}),e.attachEvent("onDateClear",function(e){this.getParentView().setMasterValue({value:e})})):"colorboard"==t&&e.attachEvent("onItemClick",function(e){this.getParentView().setMasterValue({value:e})})},input_setter:function(e){return this.linkInput(e),0},linkInput:function(e){var t;e.getInputNode?(t=e.getInputNode(),t.webix_master_id=e.s.id):t=webix.toNode(e),webix.UE(t,"keydown",function(i){t==document.body&&!this.isVisible()||(e.config?e.config.readonly:t.getAttribute("readonly"))||this.ce(i)},{bind:this}),e.JA&&(t=e.JA()),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-expanded","false"),"DIV"===t.tagName&&(t.setAttribute("aria-live","assertive"),t.setAttribute("aria-atomic","true")),this.pt=!0},ce:function(e){e=e||event;var t=this.getList(),i=e.target||e.srcElement;if(i!=document.body&&"webix_clipbuffer"!=i.className){this.ae=i,this.s.master=i.webix_master_id,window.clearTimeout(this.de);var n=e.keyCode;if(16!=n&&17!=n)return 9==n?this.ee(this,t):27==n?this.fe(this,t):13==n?this.$enterKey(this,t):this.he(e)?(webix.html.preventEvent(e),!1):void(webix.isUndefined(i.value)||(clearTimeout(this.dt),this.dt=webix.delay(function(){if(this.pt||webix.UIManager.getFocus()==webix.$$(this.s.master)){this.ie=!0;var e=i.value;t.config.dataFeed?t.filter("value",e):t.filter&&t.filter(webix.bind(function(t){return this.s.filter.call(this,t,e)},this))}},this,[],this.s.keyPressTimeout)))}},be:function(){if(!this.ie)return!0;this.ie=!1,this.getList().count()>0?(this.adjust(),this.isVisible()||(this.je=!0),this.show(this.ae,null,!0),this.je=!1):(this.hide(!0),this.ae=null)},show:function(e){if(!this.isVisible()){var t=this.getList();t.filter&&!this.je&&t.filter(""),this.$customWidth&&(this.s.fitMaster||!this.s.width||webix.isUndefined(this.s.fitMaster))&&this.$customWidth(e),e.tagName&&this.s.fitMaster&&(this.s.width=e.offsetWidth-2),t.Np&&t.render(),this.adjust(),"INPUT"==e.tagName&&(this.ae=e)}webix.ui.popup.prototype.show.apply(this,arguments)},ke:function(e){e=e||this.getList();var t=this.getMasterValue();e.select&&e.showItem?t&&e.exists&&e.exists(t)?(e.select(t),e.showItem(t)):(e.unselect(),e.showItem(e.getFirstId())):e.setValue&&(this.s.master&&(t=webix.$$(this.s.master).$prepareValue(t)),e.setValue(t))},$enterKey:function(e,t){var i;e.isVisible()?(t.count&&t.count()?(i=t.getSelectedId(!1,!0),1==t.count()&&t.getFirstId()!=i&&(i=t.getFirstId()),i&&(i=t.getItem(i))):t.getSelectedDate&&t.getSelectedDate()?i={value:t.getSelectedDate()}:t.getValue&&t.getValue()&&(i={value:t.getValue()}),i&&this.setMasterValue(i),e.hide(!0)):e.show(this.ae)},fe:function(e,t){return e.hide(!0)},ee:function(e,t){return e.hide(!0)},he:function(e){var t,i=this.getList(),n=e.keyCode;if(i.moveSelection&&41>n&&n>32&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey){if(40===n){this.isVisible()||this.show(this.ae),i.moveSelection("down",!1,!1)}else{if(i.count&&38!==n||!i.count&&!i.isVisible())return!1;var r;33==n&&(r="pgup"),34==n&&(r="pgdown"),35==n&&(r="bottom"),36==n&&(r="top"),37==n&&(r="left"),38==n&&(r="up"),39==n&&(r="right"),i.moveSelection(r,!1,!1)}return i.count?t=i.getSelectedItem():i.getSelectedDate?t={value:i.getVisibleDate()}:i.getValue&&(t={value:i.getValue()}),this.Rs(t),!0}return!1},getValue:function(){var e=this.getList(),t=(e.getValue?e.getValue():e.getSelectedId())||"";if(t=t.id||t,e.getItem){var i=e.getItem(t);if(i&&i.$empty)return""}return t},setValue:function(e){var t=this.getList();e?t.exists(e)&&(t.select(e),t.showItem(e)):(t.unselect(),t.showItem(t.getFirstId()))}},webix.ui.popup),webix.HTMLOptions={$init:function(e){(webix.skin.$active.customRadio||this.addOption)&&webix.UE(this.$view,"keydown",this.ID,{bind:this})},ub:function(){var e=this.Ie();if(e)for(var t=0;t<e.length;t++)"0"==e[t].getAttribute("tabindex")&&e[t].focus()},JD:function(){var e=this.Ie();if(e)for(var t=0;t<e.length;t++)"0"==e[t].getAttribute("tabindex")&&e[t].blur()},ID:function(e){var t=e.which||e.keyCode;if(t>(this.addOption?34:36)&&41>t){webix.html.preventEvent(e);var i,n=this.Ie();if(35==t)i=n.length-1;else if(36===t)i=0;else for(var r=37===t||38===t?-1:1,o=0;o<n.length;o++)if("0"==n[o].getAttribute("tabindex")){i=o+r,0>i?i=n.length-1:i>=n.length&&(i=0);break}if(!webix.isUndefined(i)){var a=this.addOption?n[i].getAttribute("button_id"):n[i].value;webix.skin.$active.customRadio&&!this.addOption&&(n=this.$view.getElementsByTagName("BUTTON")),this.setValue(a),n[i].focus()}}}},webix.attachEvent("onClick",function(e){var t=webix.$$(e);if(t&&t.touchable){webix.UIManager.applyChanges(t),t.getNode(e);var i=e.target||e.srcElement;if("webix_disabled"==i.className)return;var n="";if(i.className&&0===(""+i.className).indexOf("webix_view"))return;for(t&&webix.UIManager.sb(t);i&&i.parentNode;){if(i.getAttribute){if(i.getAttribute("view_id"))break;if(n=i.className){n=(""+n).split(" ");for(var r=0;r<n.length;r++)if(t.on_click[n[r]]){var o=t.on_click[n[r]].call(t,e,t.s.id,i);if(!1===o)return}}}i=i.parentNode}if(t.s.click){var a=webix.toFunctor(t.s.click,t.$scope);a&&a.call&&a.call(t,t.s.id,e)}var s=t.s.popup;if(t.s.popup&&!t.s.readonly){"object"!=typeof s||s.name||(s=t.s.popup=webix.ui(s).s.id);var s=webix.$$(s);s.isVisible()||(s.s.master=t.s.id,s.show(t.getInputNode()||t.getNode(),null,!0))}t.callEvent("onItemClick",[t.s.id,e])}}),webix.protoUI({name:"button",touchable:!0,$skin:function(){this.defaults.height=webix.skin.$active.buttonHeight||webix.skin.$active.inputHeight,this.le=webix.skin.$active.labelTopHeight||15,this.ZE=webix.skin.$active.borderWidth},defaults:{template:function(e,t){var i=t.$renderInput(e,t);return e.badge&&(i=i.replace("</button>","<span class='webix_badge'>"+e.badge+"</span></button>")),"<div class='webix_el_box' style='width:"+e.awidth+"px; height:"+e.aheight+"px'>"+i+"</div>"},label:"",borderless:!0},$renderInput:function(e){var t="class='webixtype_"+(e.type||"base")+"' ";return"<button type='button' "+(e.popup?"aria-haspopup='true'":"")+t+">"+webix.template.escape(e.label||e.value)+"</button>"},$init:function(e){this.x.className+=" webix_control webix_el_"+(this.$cssName||this.name),this.data=this.s,this.y=this.x,this.$B(e)},hotkey_setter:function(e){var t=this;this.Bt(e,function(e,i){var n=t.$view.firstChild;webix.html.triggerEvent(n,"MouseEvents","click"),webix.html.preventEvent(i)})},Bt:function(e,t,i){var n=webix.UIManager.addHotKey(e,t,i);this.attachEvent("onDestruct",function(){webix.UIManager.removeHotKey(n,t,i)})},tooltip_setter:function(e){var t=this.re()||this.$view.firstChild;return t&&(t.title=e),e},type_setter:function(e){return this.ne[e]&&(this.$renderInput=webix.template(this.ne[e])),this.oe=("prev"==e||"next"==e)&&this.pe,e},ne:{htmlbutton:"<button type='button' class='webix_el_htmlbutton webixtype_base'>#label#</button>",prev:"<input type='button' class='webixtype_prev' value='#label#' /><div class='webix_el_arrow webixtype_prev_arrow'></div>",next:"<input type='button' class='webixtype_next' value='#label#' /><div class='webix_el_arrow webixtype_next_arrow'></div>",imageButton:"<button type='button' class='webix_img_btn_abs webixtype_base' style='width:100%; line-height:#cheight#px'><div class='webix_image' style='width:#dheight#px;height:#dheight#px;background-image:url(#image#);'> </div> #label#</button>",imageButtonTop:"<button type='button' class='webix_img_btn_abs webix_img_btn_abs_top webixtype_base'><div class='webix_image' style='width:100%;height:100%;background-image:url(#image#);'> </div> <div class='webix_img_btn_text'>#label#</div></button>",image:"<button type='button' class='webix_img_btn' style='line-height:#cheight#px;'><div class='webix_image' style='width:#cheight#px;height:#cheight#px;background-image:url(#image#);'> </div> #label#</button>",imageTop:"<button type='button' class='webix_img_btn_top'><div class='webix_image' style='width:100%;height:100%;background-image:url(#image#);'></div> <div class='webix_img_btn_text'>#label#</div></button>",icon:"<button type='button' class='webix_img_btn' style='line-height:#cheight#px;'><span class='webix_icon_btn fa-#icon#' style='max-width:#cheight#px;'></span>#label#</button>",iconButton:"<button type='button' class='webix_img_btn_abs webixtype_base' style='width:100%;'><span class='webix_icon fa-#icon#'></span> #label#</button>",iconTop:"<button type='button' class='webix_img_btn_top' style='width:100%;top:4px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#label#</div></button>",iconButtonTop:"<button type='button' class='webix_img_btn_abs webix_img_btn_abs_top webixtype_base' style='width:100%;top:0px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#label#</div></button>"},qe:function(){for(var e=[],t=["input","select","textarea","button"],i=0;i<4;i++)for(var n=this.$view.getElementsByTagName(t[i]),r=0;r<n.length;r++)e.push(n[r]);return e},disable:function(){var e,t,i=this.re();if(webix.ui.baseview.prototype.disable.apply(this,arguments),i&&-1==i.className.indexOf(" webix_disabled_box")){i.className+=" webix_disabled_box";var n=this.qe();for(e=0;e<n.length;e++)n[e].setAttribute("disabled",!0);if(t=this.getInputNode(),t&&"div"==t.tagName.toLowerCase()&&(this.KD=t.getAttribute("tabIndex"),t.removeAttribute("tabIndex")),"top"==this.s.labelPosition){var r=this.y.firstChild;r&&(r.className+=" webix_disabled_top_label")}}},enable:function(){webix.ui.baseview.prototype.enable.apply(this,arguments);var e,t=this.re();if(t){t.className=t.className.replace(" webix_disabled_box","");for(var i=this.qe(),n=0;n<i.length;n++)i[n].removeAttribute("disabled");if(e=this.getInputNode(),e&&!webix.isUndefined(this.KD)&&e.setAttribute("tabIndex",this.KD),"top"==this.s.labelPosition){var r=this.y.firstChild;r&&(r.className=r.className.replace(" webix_disabled_top_label",""))}}},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&this.render()},setValue:function(e){e=this.$prepareValue(e);var t=this.s.value;return!this.$compareValue(t,e)&&(this.s.value=e,this.se&&this.$setValue(e),void this.callEvent("onChange",[e,t]))},$compareValue:function(e,t){return"number"==typeof t&&(t=""+t),"number"==typeof e&&(e=""+e),e==t},$prepareValue:function(e){return this.VC(e,!1)},VC:function(e){return e},$setValue:function(e){var t=this.getInputNode();t&&("BUTTON"==t.tagName?t.innerHTML=e:t.value=e)},getValue:function(){var e=this.se?this.$getValue():this.s.value;return void 0===e?"":e},$getValue:function(){return this.s.value||""},focus:function(){if(!this.s.disabled){var e=this.getInputNode();e&&e.focus&&e.focus()}},blur:function(){var e=this.getInputNode();e&&e.blur&&e.blur()},getInputNode:function(){return this.y.getElementsByTagName("input")[0]||this.y.getElementsByTagName("button")[0]},re:function(){for(var e=0;e<this.y.childNodes.length;e++)if(this.y.childNodes[e].className.indexOf("webix_el_box")>=0)return this.y.childNodes[e];return null},ue:Math.sqrt(2),pe:function(){var e=this.s,t=this.re().childNodes[1],i=t.previousSibling,n="next"==e.type?"right":"left",r=e.aheight-2*webix.skin.$active.inputPadding-2*this.ZE,o=r*this.ue/2;t.style.width=o+"px",t.style.height=o+"px",t.style.top=(r-o)/2+webix.skin.$active.inputPadding+"px",t.style[n]=(r-o)/2+this.ue/2+"px",i.style.width=e.awidth-r/2-2+"px",i.style.height=r+2+"px",i.style[n]=r/2+2+"px",i.style.top=webix.skin.$active.inputPadding+"px"},$B:function(e){e=e||this.s,e.autowidth&&(e.width=webix.html.getTextSize(e.value||e.label,"webixbutton").width+(e.badge?15:0)+("iconButton"===e.type?30:0)+("icon"===e.type?20:0))},ve:function(){this.we=this.s.inputWidth||(this.bc-this.s.width>2?this.s.width:0)||this.bc,this.xe=this.s.inputHeight||this.zy||0},resize:function(){return this.$B(),webix.ui.view.prototype.resize.apply(this,arguments)},render:function(){if(this.ve(),this.s.awidth=this.we||this.bc,this.s.aheight=this.xe||this.dc,this.s.bheight=this.s.aheight+2,this.s.cheight=this.s.aheight-2*webix.skin.$active.inputPadding,this.s.dheight=this.s.cheight-2,webix.AtomRender.render.call(this)){if(this.se=!0,this.oe&&this.oe(),this.s.align){var e=this.y.firstChild;switch("top"==this.s.labelPosition&&e.nextSibling&&(e=e.nextSibling),this.s.align){case"right":e.style.cssFloat="right";break;case"center":e.style.display="inline-block",e.parentNode.style.textAlign="center";break;case"middle":e.style.marginTop=Math.round((this.dc-this.xe)/2)+"px";break;case"bottom":e.style.marginTop=this.dc-this.xe+"px";break;case"left":e.style.cssFloat="left"}}this.$render&&this.$render(this.data),this.s.disabled&&this.disable(),this.s.tooltip&&this.define("tooltip",this.s.tooltip),this.ze&&(this.ze(this.data),this.ze=0)}},refresh:function(){this.render()},on_click:{Ae:function(e,t){var i=webix.html.locate(e,"button_id");i&&this.callEvent("onBeforeTabClick",[i,e])&&(this.setValue(i),this.callEvent("onAfterTabClick",[i,e]))},webix_all_segments:function(e,t){this.on_click.Ae.call(this,e,t)},webix_all_tabs:function(e,t){this.on_click.Ae.call(this,e,t)},webix_inp_counter_next:function(e,t,i){this.s.readonly||this.next()},webix_inp_counter_prev:function(e,t,i){this.s.readonly||this.prev()},webix_input_icon:function(e,t,i){this.getInputNode().focus()},webix_inp_checkbox_border:function(e,t,i){this.s.disabled||"DIV"==(e.target||e.srcElement).tagName||this.s.readonly||this.toggle()},webix_inp_checkbox_label:function(e,t,i){this.s.readonly||this.toggle()},webix_inp_radio_border:function(e,t,i){var n=webix.html.locate(e,"radio_id");this.setValue(n)},webix_inp_radio_label:function(e,t,i){return i=i.parentNode.getElementsByTagName("input")[0],this.on_click.webix_inp_radio_border.call(this,i,t,i)},webix_tab_more_icon:function(e,t,i){this.getPopup().resize(),this.getPopup().show(i,null,!0)},webix_tab_close:function(e,t,i){var n=webix.html.locate(e,"button_id");n&&this.callEvent("onBeforeTabClose",[n,e])&&this.removeOption(n)}},Be:function(e){for(var t=0;t<e.length;t++)"string"==typeof e[t]?e[t]={id:e[t],value:e[t]}:(webix.isUndefined(e[t].id)&&(e[t].id=e[t].value),webix.isUndefined(e[t].value)&&(e[t].value=e[t].id));return e},Yx:function(e){var t=e?e.placeholder:this.s.placeholder;return t?"<span class='webix_placeholder'>"+t+"</span>":""}},webix.ui.view,webix.AtomRender,webix.Settings,webix.EventSystem),webix.protoUI({name:"label",defaults:{template:"<div style='height:100%;line-height:#cheight#px'>#label#</div>"},$skin:function(){this.defaults.height=webix.skin.$active.inputHeight},focus:function(){return!1},re:function(){return this.y.firstChild},setHTML:function(e){this.s.template=function(){return e},this.refresh()},setValue:function(e){this.s.label=e,webix.ui.button.prototype.setValue.apply(this,arguments)},$setValue:function(e){this.y.firstChild.innerHTML=e},oe:function(){},$B:function(e){e=e||this.s,e.autowidth&&(e.width=webix.html.getTextSize(e.value||e.label,"webix_el_label").width)}},webix.ui.button),webix.protoUI({name:"icon",$skin:function(){this.defaults.height=webix.skin.$active.inputHeight},defaults:{template:function(e){return"<button type='button'  style='height:100%;width:100%;' class='webix_icon_button'><span class='webix_icon fa-"+e.icon+" '></span>"+(e.badge?"<span class='webix_badge'>"+e.badge+"</span>":"")+"</button>"},width:33},oe:function(){},$setValue:function(){}},webix.ui.button),webix.protoUI({name:"text",Ce:!0,De:function(){this.Ce&&(this._E||webix.UE(this.getInputNode(),"change",this.Xy,{bind:this}),this.s.suggest&&webix.$$(this.s.suggest).linkInput(this))},Xy:function(){var e=this.getValue();e!=this.s.value?this.setValue(e,!0):this.nH&&this.$setValue(e)},$skin:function(){this.defaults.height=webix.skin.$active.inputHeight,this.defaults.inputPadding=webix.skin.$active.inputPadding,this.$E=webix.skin.$active.inputSpacing},$init:function(e){"top"==e.labelPosition&&webix.isUndefined(e.height)&&this.defaults.height&&(e.height=this.defaults.height+this.le),this.Ns=[],this.attachEvent("onAfterRender",this.De),this.attachEvent("onBlur",function(){this._E&&this._E()})},$renderIcon:function(){var e=this.s;if(e.icon){var t=e.aheight-2*e.inputPadding,i=(t-18)/2-1,n=this.addSection?"role='button' tabindex='0' aria-label='"+webix.i18n.aria["multitext"+(e.mode||"")+"Section"]+"'":"";return"<span style='height:"+(t-i)+"px;padding-top:"+i+"px;' class='webix_input_icon fa-"+e.icon+"' "+n+"></span>"}return""},relatedView_setter:function(e){return this.attachEvent("onChange",function(){var e=this.getValue(),t=this.s.relatedAction,i=this.s.relatedView,n=webix.$$(i);if(!n){var r=this.getTopParentView();r&&r.$$&&(n=r.$$(i))}"enable"==t?e?n.enable():n.disable():e?n.show():n.hide()}),e},validateEvent_setter:function(e){return"blur"==e&&this.attachEvent("onBlur",this.validate),"key"==e&&this.attachEvent("onTimedKeyPress",this.validate),e},validate:function(){var e=this.s.validate;!e&&this.s.required&&(e=webix.rules.isNotEmpty);var t=this.getFormView(),i=this.s.name,n=this.getValue(),r={};return r[i]=n,!(e&&!t.Se(e,n,r,i))},bottomLabel_setter:function(e){return this.s.bottomPadding||(this.s.bottomPadding=18),e},py:function(){var e=this.s.invalidMessage;return"function"==typeof e&&e.call(this),e},setBottomText:function(e,t){var i=this.s;if(void 0!==e){if(i.bottomLabel==e)return;i.bottomLabel=e}var n=(i.invalid?i.invalidMessage:"")||i.bottomLabel;n||i.bottomPadding||(i.inputHeight=0),n&&!i.bottomPadding?(this.ry=1,i.bottomPadding=i.bottomPadding||t||18,this.render(),this.resize()):!n&&this.ry?(i.bottomPadding=this.ry=0,i.height||this.render(),this.resize()):this.render()},$getSize:function(){var e=webix.ui.view.prototype.$getSize.apply(this,arguments),t=this.config.bottomPadding;return t&&(e[2]+=t,e[3]+=t),e},$setSize:function(e,t){var i=this.s;if(webix.ui.view.prototype.$setSize.call(this,e,t)){if(!e||!t)return;"top"==i.labelPosition?(i.inputHeight||(this.zy=this.dc-this.le-(this.config.bottomPadding||0)),i.labelWidth=0):i.bottomPadding&&(i.inputHeight=this.dc-this.config.bottomPadding),this.render()}},Ee:function(e){var t=(this.we||0)-(e.label?this.s.labelWidth:0)-this.$E-(e.iconWidth||0);return 0>t?0:t},Fe:function(e,t){var i="x"+webix.uid(),n=t.Ee(e),r=e.inputAlign||"left",o=(this.$renderIcon&&this.$renderIcon(e),this.s.aheight-2*webix.skin.$active.inputPadding-2*this.ZE),a=e.text||e.value||this.Yx(e),s="<div class='webix_inp_static' role='combobox' aria-label='"+webix.template.escape(e.label)+"' tabindex='0'"+(e.readonly?" aria-readonly='true'":"")+(e.invalid?"aria-invalid='true'":"")+" onclick='' style='line-height:"+o+"px;width: "+n+"px; text-align: "+r+";' >"+a+"</div>";return t.$renderInput(e,s,i)},qt:function(e){var t="<"+e+(this.s.placeholder?" placeholder='"+this.s.placeholder+"' ":" ");this.s.readonly&&(t+="readonly='true' aria-readonly=''"),this.s.required&&(t+="aria-required='true'"),this.s.invalid&&(t+="aria-invalid='true'");var i=this.s.attributes;if(i)for(var n in i)t+=n+"='"+i[n]+"' ";return t},$renderLabel:function(e,t){var i=e.labelAlign||"left",n="top"==this.s.labelPosition,r=n?"display:block;":"width: "+this.s.labelWidth+"px;",o="",a=n?this.le-2*this.ZE:this.s.aheight-2*this.s.inputPadding;return e.label&&(o="<label style='"+r+"text-align: "+i+";line-height:"+a+"px;' onclick='' for='"+t+"' class='webix_inp_"+(n?"top_":"")+"label "+(e.required?"webix_required":"")+"'>"+(e.label||"")+"</label>"),o},$renderInput:function(e,t,i){var n=e.inputAlign||"left",r="top"==e.labelPosition,o=this.Ee(e);i=i||webix.uid();var a=this.$renderLabel(e,i),s="";if(t)s+=t;else{var l=webix.template.escape(e.text||this.VC(e.value)||(0===e.value?"0":""));s+=this.qt("input")+"id='"+i+"' type='"+(e.type||this.name)+"'"+(e.editable?" role='combobox'":"")+" value='"+l+"' style='width: "+o+"px; text-align: "+n+";'";var h=e.attributes;if(h)for(var c in h)s+=" "+c+"='"+h[c]+"'";s+=" />"}s+=this.$renderIcon?this.$renderIcon(e):"";var u="";u=r?a+"<div class='webix_el_box' style='width:"+e.awidth+"px; height:"+e.aheight+"px'>"+s+"</div>":"<div class='webix_el_box' style='width:"+e.awidth+"px; height:"+e.aheight+"px'>"+a+s+"</div>";var d=e.awidth-o-2*webix.skin.$active.inputPadding,f=(e.invalid?e.invalidMessage:"")||e.bottomLabel;return f&&(u+="<div class='webix_inp_bottom_label'"+(e.invalid?"role='alert' aria-relevant='all'":"")+" style='width:"+(o||e.awidth)+"px;margin-left:"+Math.max(d,webix.skin.$active.inputPadding)+"px;'>"+f+"</div>"),u},defaults:{template:function(e,t){return t.$renderInput(e)},label:"",labelWidth:80},type_setter:function(e){return e},oe:!1,$setValue:function(e){this.getInputNode().value=this.VC(e)},$getValue:function(){return this.VC(this.getInputNode().value,!1)},suggest_setter:function(e){if(e){if("string"==typeof e){if(webix.$$(e))return webix.$$(e).s.id;e={body:{url:e,dataFeed:e}}}else webix.isArray(e)?e={body:{data:this.Be(e)}}:e.body||(e.body={});webix.extend(e,{view:"suggest"});var t=webix.ui(e);return this.Ns.push(t),t.s.id}return!1}},webix.ui.button),webix.protoUI({name:"segmented",Ce:!1,$init:function(){this.attachEvent("onChange",function(e){this.s.multiview&&this.aF(e)}),this.attachEvent("onAfterRender",webix.once(function(){this.s.multiview&&this.s.value&&this.aF(this.s.value)}))},aF:function(e){var t=this.getTopParentView(),i=null;t&&t.$$&&(i=t.$$(e)),i||(i=webix.$$(e)),i&&i.show&&i.show()},defaults:{template:function(e,t){e.options;var i=e.options;t.Be(i),i=t.yC(i);var n=t.Ee(e),r=webix.uid(),o="<div style='width:"+n+"px' class='webix_all_segments' role='tablist' aria-label='"+webix.template.escape(e.label)+"'>",a=e.optionWidth||Math.floor(n/i.length);e.value||(e.value=i[0].id);for(var s=0;s<i.length;s++)o+="<button type='button' style='width:"+(i[s].width||a)+"px' role='tab' aria-selected='"+(e.value==i[s].id?"true":"false")+"' tabindex='"+(e.value==i[s].id?"0":"-1")+"'",o+="class='webix_segment_"+(s==i.length-1?"N":s>0?1:0)+(e.value==i[s].id?" webix_selected ":"")+"' button_id='"+i[s].id+"' "+(i[s].tooltip?"title='"+i[s].tooltip+"'":"")+">",o+=i[s].value+"</button>";return t.$renderInput(e,o+"</div>",r)}},Ie:function(){return this.$view.getElementsByTagName("BUTTON")},focus:function(){this.ub()},blur:function(){this.JD()},$setValue:function(e){for(var t=this.Ie(),i=0;i<t.length;i++){var n=t[i].getAttribute("button_id");t[i].setAttribute("aria-selected",e==n?"true":"false"),t[i].setAttribute("tabindex",e==n?"0":"-1"),e==n?webix.html.addCss(t[i],"webix_selected"):webix.html.removeCss(t[i],"webix_selected")}var r=this.config.tabbarPopup;r&&webix.$$(r)&&webix.$$(r).getBody().exists(e)&&this.refresh()},getValue:function(){return this.s.value},getInputNode:function(){return null},optionIndex:function(e){for(var t=this.s.options,i=0;i<t.length;i++)if(t[i].id==e)return i;return-1},addOption:function(e,t,i,n){var r=e;"object"!=typeof e?(t=t||e,r={id:e,value:t}):(e=r.id,n=i,i=t),this.optionIndex(e)<0&&webix.PowerArray.insertAt.call(this.s.options,r,n),this.refresh(),i&&this.setValue(e)},removeOption:function(e,t){var i=this.optionIndex(e),n=this.s.options;i>=0&&webix.PowerArray.removeAt.call(n,i),this.s.value==e&&this.zC(n,i),this.refresh(),this.callEvent("onOptionRemove",[e,this.s.value])},zC:function(e,t){var i=e.length;if(i){t=Math.min(t,i-1);for(var n=t;i>n;n++)if(!e[n].hidden)return this.setValue(e[n].id);for(var n=t;n>=0;n--)if(!e[n].hidden)return this.setValue(e[n].id)}this.setValue("")},yC:function(e){for(var t=[],i=0;i<e.length;i++)e[i].hidden||t.push(e[i]);return t},AC:function(e,t){var i=this.s.options,n=this.optionIndex(e),r=i[n];r&&t==!!r.hidden&&(r.hidden=!t,t||this.s.value!=e?this.refresh():this.zC(i,n))},hideOption:function(e){this.AC(e,!1)},showOption:function(e){this.AC(e,!0)},oe:!1},webix.HTMLOptions,webix.ui.text),webix.protoUI({name:"search",on_click:{webix_input_icon:function(e){this.getInputNode().focus(),this.callEvent("onSearchIconClick",[e])}},$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},defaults:{type:"text",icon:"search"}},webix.ui.text),webix.protoUI({name:"toggle",Ce:!0,$init:function(){this.attachEvent("onItemClick",function(){this.toggle()})},$setValue:function(e){var t=this.getInputNode(),i=this.s,n=e&&"0"!=e,r=(n?i.onLabel:i.offLabel)||i.label,o=t.lastChild;t.setAttribute("aria-pressed",!!n&&"true"),t.value=r,o&&((o.firstChild||o).nodeValue=" "+r),t.firstChild&&"SPAN"===t.firstChild.nodeName&&i.onIcon&&i.offIcon&&i.onIcon!==i.offIcon&&(t.firstChild.className=t.firstChild.className.replace(n?i.offIcon:i.onIcon,n?i.onIcon:i.offIcon));var a=t.parentNode;n?webix.html.addCss(a,"webix_pressed"):webix.html.removeCss(a,"webix_pressed")},toggle:function(){this.setValue(!this.getValue())},getValue:function(){var e=this.s.value;return e&&"0"!=e?1:0},defaults:{template:function(e,t){var i=e.value&&"0"!=e.value,n=i?" webix_pressed":"";e.label=(i?e.onLabel:e.offLabel)||e.label,e.icon=(i?e.onIcon:e.offIcon)||e.icon;var r="<div class='webix_el_box"+n+"' style='width:"+e.awidth+"px; height:"+e.aheight+"px'>"+t.$renderInput(e,t)+"</div>";return r=r.replace(/(button)\s*(?=\w)/,"$1 aria-pressed='"+(i?"true":"false")+"' ")}},oe:!1},webix.ui.button),webix.protoUI({name:"select",defaults:{template:function(e,t){var i=t.Be(e.options),n="x"+webix.uid(),r=t.qt("select")+"id='"+n+"' style='width:"+t.Ee(e)+"px;'>",o=webix.$$(i);if(o&&o.data&&o.data.each)o.data.each(function(t){r+="<option"+(t.id==e.value?" selected='true'":"")+" value='"+t.id+"'>"+t.value+"</option>"});else for(var a=0;a<i.length;a++)r+="<option"+(i[a].id==e.value?" selected='true'":"")+" value='"+i[a].id+"'>"+i[a].value+"</option>";return r+="</select>",t.$renderInput(e,r,n)}},options_setter:function(e){if(e){if("string"==typeof e){var t=new webix.DataCollection({url:e});return t.data.attachEvent("onStoreLoad",webix.bind(this.refresh,this)),t}return e}},getInputNode:function(){return this.y.getElementsByTagName("select")[0]}},webix.ui.text),webix.protoUI({name:"textarea",defaults:{template:function(e,t){var i=e.name||e.id,n="x"+webix.uid(),r=t.qt("textarea")+"style='width:"+t.Ee(e)+"px;'";return r+=" id='"+n+"' name='"+i+"' class='webix_inp_textarea'>"+t.VC(e.value||(0===e.value?"0":""))+"</textarea>",t.$renderInput(e,r,n)},height:0,minHeight:60},$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding,this.$E=webix.skin.$active.inputSpacing},Dt:!0,$renderLabel:function(e,t){var i=e.labelAlign||"left",n="top"==this.s.labelPosition,r=n?"display:block;":"width: "+this.s.labelWidth+"px;",o="";return n?(this.le,this.ZE):(webix.skin.$active.inputHeight||this.s.aheight,this.s.inputPadding),e.label&&(o="<label style='"+r+"text-align: "+i+";' onclick='' for='"+t+"' class='webix_inp_"+(n?"top_":"")+"label "+(e.required?"webix_required":"")+"'>"+(e.label||"")+"</label>"),o},getInputNode:function(){return this.y.getElementsByTagName("textarea")[0]}},webix.ui.text),webix.protoUI({name:"counter",defaults:{template:function(e,t){var i=e.value||0,n="x"+webix.uid(),r="<div role='spinbutton' aria-label='"+webix.template.escape(e.label)+"' aria-valuemin='"+e.min+"' aria-valuemax='"+e.max+"' aria-valuenow='"+e.value+"' class='webix_el_group' style='width:"+t.Ee(e)+"px'>";return r+="<button type='button' class='webix_inp_counter_prev' tabindex='-1' aria-label='"+webix.i18n.aria.decreaseValue+"'>-</button>",r+=t.qt("input")+" id='"+n+"' type='text' class='webix_inp_counter_value' aria-live='assertive' value='"+i+"'></input>",r+="<button type='button' class='webix_inp_counter_next' tabindex='-1' aria-label='"+webix.i18n.aria.increaseValue+"'>+</button></div>",t.$renderInput(e,r,n)},min:0,max:1/0,step:1},$init:function(){webix.UE(this.$view,"keydown",this.LD,{bind:this})},LD:function(e){var t=e.which||e.keyCode,i=this.s,n=i.value||i.min;t>32&&41>t&&(35===t?n=i.min:36===t?n=i.max===1/0?1e6:i.max:33===t?this.next():34===t?this.prev():n+=37===t||40===t?-1:1,t>34&&n>=i.min&&n<=i.max&&this.setValue(n))},$setValue:function(e){this.getInputNode().value=e},getInputNode:function(){return this.y.getElementsByTagName("input")[0]},getValue:function(e){return 1*webix.ui.button.prototype.getValue.apply(this,arguments)},next:function(e){e=this.s.step,this.shift(e)},prev:function(e){e=-1*this.s.step,this.shift(e)},shift:function(e){var t=this.s.min,i=this.s.max,n=this.getValue()+e;n>=t&&i>=n&&this.setValue(n)}},webix.ui.text),webix.protoUI({name:"checkbox",defaults:{checkValue:1,uncheckValue:0,template:function(e,t){var i="x"+webix.uid(),n="";e.labelRight&&(n="<label class='webix_label_right'>"+e.labelRight+"</label>",e.labelWidth&&(e.label=e.label||"&nbsp;"));var r=e.checkValue==e.value,o=Math.floor((t.s.aheight-16)/2),a=t.qt("input")+"style='margin-top:"+o+"px;"+(e.customCheckbox?"display:none":"")+"' id='"+i+"' type='checkbox' "+(r?"checked='1'":"")+(e.labelRight?" aria-label='"+webix.template.escape(e.labelRight)+"'":"")+"/>",s="webix_inp_checkbox_border webix_el_group webix_checkbox_"+(r?"1":"0"),l=e.customCheckbox||"";l&&(l=l.replace(/(aria-checked=')\w*(?=')/,"$1"+(e.value==e.checkValue?"true":"false")),l=l.replace(/(aria-label=')\w*(?=')/,"$1"+webix.template.escape(e.labelRight||e.label)),l=l.replace(/(aria-invalid=')\w*(?=')/,"$1"+(e.invalid?"true":"false")));var h="<div style='line-height:"+t.s.cheight+"px' class='"+s+"'>"+a+l+n+"</div>";return t.$renderInput(e,h,i)}},customCheckbox_setter:function(e){return!0===e&&webix.skin.$active.customCheckbox&&(e="<a role='presentation' onclick='javascript:void(0)'><button role='checkbox' aria-checked='false' aria-label='' type='button' aria-invalid='' class='webix_custom_checkbox'></button></a>"),e},focus:function(){var e=this.getInputNode();e&&e.focus()},blur:function(){var e=this.getInputNode();e&&e.blur()},De:function(){},$setValue:function(e){var t=e==this.s.checkValue,i=this.$view.getElementsByTagName("input")[0],n=i?i.parentNode:null;if(n&&this.s.customCheckbox){var r=n.getElementsByTagName("BUTTON");r[0]&&r[0].setAttribute("aria-checked",t?"true":"false")}n&&(n.className=n.className.replace(/(webix_checkbox_)\d/,"$1"+(t?1:0))),i.checked=t},toggle:function(){var e=this.getValue()!=this.s.checkValue?this.s.checkValue:this.s.uncheckValue;this.setValue(e)},getValue:function(){return this.s.value==this.s.checkValue?this.s.checkValue:this.s.uncheckValue},getInputNode:function(){return this.$view.getElementsByTagName(this.s.customCheckbox?"button":"input")[0]},$skin:function(){this.defaults.customCheckbox=!!webix.skin.$active.customCheckbox}},webix.ui.text),webix.protoUI({name:"radio",defaults:{template:function(e,t){for(var i,n=t.Be(e.options),r=[],o=0;o<n.length;o++){var a="x"+webix.uid();i=i||a,o&&(n[o].newline||e.vertical)&&r.push("<div class='webix_line_break'></div>");var s=n[o].id==e.value,l=n[o].value||"",h=e.customRadio||"";if(h){var c=(0===o?e.label+" ":"")+l;h=h.replace(/(aria-label=')\w*(?=')/,"$1"+webix.template.escape(c)),h=h.replace(/(aria-checked=')\w*(?=')/,"$1"+(s?"true":"false")),h=h.replace(/(tabindex=')\w*(?=')/,"$1"+(s||0===o&&!e.value?"0":"-1")),h=h.replace(/(aria-invalid=')\w*(?=')/,"$1"+(e.invalid?"true":"false"))}var u=t.qt("input")+" name='"+(e.name||e.id)+"' type='radio' "+(s?"checked='1'":"")+"tabindex="+(s||0===o&&!e.value?"0":"-1")+" value='"+n[o].id+"' id='"+a+"' style='"+(h?"display:none":"")+"' />",d="<div radio_id='"+n[o].id+"' class='webix_inp_radio_border webix_radio_"+(s?"1":"0")+"' role='presentation'>"+u+h+"</div>";l&&(l="<label for='"+a+"' class='webix_label_right'>"+l+"</label>"),r.push("<div class='webix_radio_option' role='presentation'>"+d+l+"</div>")}return r="<div class='webix_el_group' role='radiogroup' style='margin-left:"+(e.label?e.labelWidth:0)+"px;'>"+r.join("")+"</div>",t.$renderInput(e,r,i)}},refresh:function(){this.render(),this.ac&&this.$getSize(0,0)[2]!=this.ac[1]&&this.resize()},$getSize:function(e,t){var i=webix.ui.button.prototype.$getSize.call(this,e,t);if(this.s.options){for(var n=this.s.vertical?0:1,r=0;r<this.s.options.length;r++)(this.s.vertical||this.s.options[r].newline)&&n++;i[3]=i[2]=Math.max(i[2],(this.s.optionHeight||25)*n+2*this.s.inputPadding+("top"==this.s.labelPosition?this.le:0))}var o=this.config.bottomPadding;return o&&(i[2]+=o,i[3]+=o),i},Ie:function(){return this.y.getElementsByTagName("input")},$setValue:function(e){for(var t=this.Ie(),i=0;i<t.length;i++){t[i].parentNode.getAttribute("radio_id")==e?(t[i].className="webix_inp_radio_on",t[i].checked=!0,t[i].setAttribute("tabindex","0")):(t[i].className="webix_inp_radio_on webix_hidden",t[i].checked=!1,t[i].setAttribute("tabindex","-1"));var n=t[i]?t[i].parentNode:null;if(n&&(n.className=n.className.replace(/(webix_radio_)\d/,"$1"+(t[i].checked?1:0)),this.s.customRadio)){var r=n.getElementsByTagName("BUTTON");r[0]&&(r[0].setAttribute("aria-checked",t[i].checked?"true":"false"),r[0].setAttribute("tabindex",t[i].checked?"0":"-1"))}}},getValue:function(e){return this.s.value},focus:function(){this.ub()},blur:function(){this.JD()},customRadio_setter:function(e){return!0===e&&webix.skin.$active.customRadio&&(e="<a role='presentation' onclick='javascript:void(0)'><button type='button' class='webix_custom_radio' role='radio' aria-checked='false' aria-label='' aria-invalid='' tabindex=''></button></a>"),e},$skin:function(){this.defaults.customRadio=!!webix.skin.$active.customRadio,webix.skin.$active.optionHeight&&(this.defaults.optionHeight=webix.skin.$active.optionHeight)}},webix.HTMLOptions,webix.ui.text),webix.protoUI({name:"richselect",defaults:{template:function(e,t){return t.Fe(e,t)},popupWidth:200,icon:"angle-down"},_E:function(){if(this.s.text!=this.getText()&&(!webix.isUndefined(this.s.text)||this.getText())){var e=this.getPopup(),t=e.getSuggestion(),i=this.getValue(),n=this.getInputNode().value,r=e.getList().getItem(t);t&&t!=i&&(""!==n||""===e.getItemText(t))&&e.config.filter(r,n)?this.setValue(t):""===n?this.setValue(""):this.bF&&this.bF()}},suggest_setter:function(e){return this.options_setter(e)},options_setter:function(e){e=this.Kt?this.Kt(e):e;var t=this.s.popup=this.s.suggest=webix.ui.text.prototype.suggest_setter.call(this,e),i=webix.$$(t).getList();return i&&i.attachEvent("onAfterLoad",webix.bind(this.Ss,this)),t},getList:function(){return webix.$$(this.s.suggest).getList()},Ss:function(){var e=this.s.value;webix.isUndefined(e)||this.getPopup().isVisible()||this.s.text||!this.y.firstChild||this.$setValue(e)},$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},$render:function(e){webix.isUndefined(e.value)||this.$setValue(e.value)},getInputNode:function(){return this.y.getElementsByTagName("DIV")[1]},getPopup:function(){return webix.$$(this.s.popup)},getText:function(){var e=this.s.value,t=this.getInputNode();return t?void 0===t.value?t.firstChild&&"webix_placeholder"===t.firstChild.className?"":t.innerHTML:t.value:e?this.getPopup().getItemText(e):""},$setValue:function(e){if(this.se){var t=e;if(this.getPopup())var t=this.getPopup().getItemText(e);!t&&e&&e.id&&(this.getPopup().getList().add(e),t=this.getPopup().getItemText(e.id),this.s.value=e.id);var i=this.getInputNode();webix.isUndefined(i.value)?i.innerHTML=t||this.Yx():i.value=t=t.replace(/<[^>]*>/g,""),this.s.text=t}},getValue:function(){return this.s.value||""}},webix.ui.text),webix.protoUI({name:"combo",getInputNode:function(){return this.y.getElementsByTagName("input")[0]},$render:function(e){webix.isUndefined(e.value)||this.$setValue(e.value)},bF:function(){if(!this.s.editable){var e=this.getValue();this.$setValue(webix.isUndefined(e)?"":e)}},Xy:function(){var e=this.getInputNode(),t="",i=this.getPopup();e.value&&(t=this.s.value,i.getItemText(t)!=this.getText()&&(t=i.getSuggestion()||t)),t!=this.s.value?this.setValue(t,!0):this.$setValue(t)},defaults:{template:function(e,t){return t.$renderInput(e).replace(/(<input)\s*(?=\w)/,"$1 role='combobox'")},icon:"angle-down"}},webix.ui.richselect),webix.protoUI({name:"datepicker",$init:function(){this.$ready.push(this.Je)},defaults:{template:function(e,t){"time"==t.s.type&&(t.s.icon=t.s.timeIcon);var i=e.type;e.type="";var n=e.editable?t.$renderInput(e):t.Fe(e,t);return e.type=i,n},stringResult:!1,timepicker:!1,icon:"calendar",icons:!0,timeIcon:"clock-o",separator:", "},_E:function(){if(this.s.text!=this.getText()&&(!webix.isUndefined(this.s.text)||this.getText())){var e=this.getPopup().getValue();e&&this.setValue(e)}},$skin:function(){this.defaults.inputPadding=webix.skin.$active.inputPadding},getPopup:function(){return webix.$$(this.s.popup)},Je:function(){var e=this.s;if(e.suggest)e.popup=e.suggest;else if(!e.popup){var t=this.s.timepicker;e.popup=e.suggest=this.suggest_setter({type:"calendar",point:!1!==this.s.point,height:240+(t?30:0),width:250,padding:0,body:{multiselect:this.s.multiselect,timepicker:t,type:this.s.type,icons:this.s.icons}})}this.ze=function(){}},$render:function(e){webix.isUndefined(e.value)||(e.value=this.$prepareValue(e.value),this.$setValue(e.value))},$prepareValue:function(e){if(this.s.multiselect){"string"==typeof e?e=e.split(this.s.separator):e instanceof Date?e=[e]:e||(e=[]);for(var t=0;t<e.length;t++)e[t]=this.RG(e[t]);return e}return this.RG(e)},RG:function(e){var t=this.s.type,i="time"==t;if(isNaN(parseFloat(e))||(e=""+e),"string"==typeof e&&e){var n=null;n="month"!=t&&"year"!=t||!this.Gx?i?webix.i18n.parseTimeFormatDate:webix.i18n.parseFormatDate:this.Gx,e=n(e)}if(e){if(i&&webix.isArray(e)){var r=new Date;r.setHours(e[0]),r.setMinutes(e[1]),e=r}isNaN(e.getTime())&&(e="")}return e},YE:function(e){return this.s.multiselect?[].concat(e).map(function(e){return this.SG(e)}.bind(this)).join(this.config.separator):this.SG(e)},SG:function(e){var t="time"==this.s.type,i=this.config.timepicker;return(this.Hx||(t?webix.i18n.timeFormatStr:i?webix.i18n.fullDateFormatStr:webix.i18n.dateFormatStr))(e)},ND:function(){var e=this.getInputNode();e.value==webix.undefined?e.innerHTML=this.s.text||this.Yx():e.value=this.s.text||""},$compareValue:function(e,t){return!e&&!t||webix.Date.equal(e,t)},$setValue:function(e){this.s.text=e?this.YE(e):"",this.ND()},format_setter:function(e){return e?"function"==typeof e?this.Hx=e:(this.Hx=webix.Date.dateToStr(e),this.Gx=webix.Date.strToDate(e)):this.Hx=this.Gx=null,e},getInputNode:function(){return this.s.editable?this.y.getElementsByTagName("input")[0]:this.y.getElementsByTagName("DIV")[1]},getValue:function(){if(this.s.multiselect){var e=[].concat(this.s.value).map(function(e){return this.TG(e)}.bind(this));return this.s.stringResult?e.join(this.s.separator):e}return this.TG(this.s.value)},TG:function(e){var t=this.s.type,i="time"==t,n=this.config.timepicker;if(this.se){if(this.s.editable){var r=this.Gx||(i?webix.i18n.timeFormatDate:n?webix.i18n.fullDateFormatDate:webix.i18n.dateFormatDate);e=r(this.getInputNode().value)}}else e=this.$prepareValue(e)||null;if(this.s.stringResult){var o=webix.i18n.parseFormatStr;return i&&(o=webix.i18n.parseTimeFormatStr),!this.Hx||"month"!=t&&"year"!=t||(o=this.Hx),this.s.multiselect?[].concat(e).map(function(e){return e?o(e):""}):e?o(e):""}return e||null},getText:function(){var e=this.getInputNode();return e?void 0===e.value?this.getValue()?e.innerHTML:"":e.value:""}},webix.ui.text),webix.protoUI({name:"colorpicker",$init:function(){this.$ready.push(this.Je)},defaults:{icon:!0},Je:function(){var e=this.s;e.suggest?e.popup=e.suggest:e.popup||(e.popup=e.suggest=this.suggest_setter({type:"colorboard",height:200})),this.ze=function(){}},$render:function(e){webix.isUndefined(e.value)||(e.value=this.$prepareValue(e.value),this.$setValue(e.value))},getValue:function(){return this.se&&this.s.editable?this.getInputNode().value:this.s.value},$prepareValue:function(e){return e&&e.charAt&&"#"!=e.charAt(0)&&(e="#"+e),e||""},pz:function(){return this.$view.getElementsByTagName("DIV")[this.s.editable?1:2]},YE:function(e){return e},$setValue:function(e){this.pz().style.backgroundColor=e,this.s.text=e;var t=this.getInputNode();t.value==webix.undefined?t.innerHTML=e:t.value=e},$renderIcon:function(){return'<div class="webix_input_icon" style="background-color:'+this.config.value+';"> </div>'}},webix.ui.datepicker),webix.RenderStack={$init:function(){this.v=document.createElement("DIV"),this.data.attachEvent("onIdChange",webix.bind(this.Ke,this)),this.attachEvent("onItemClick",this.Le),this.types||(this.types={default:this.type},this.type.name="default"),this.type=webix.clone(this.type)},customize:function(e){webix.type(this,e)},item_setter:function(e){return this.type_setter(e)},type_setter:function(e){return this.types[e]?(this.type=webix.clone(this.types[e]),this.type.css&&(this.w.className+=" "+this.type.css)):this.customize(e),this.type.on_click&&webix.extend(this.on_click,this.type.on_click),e},template_setter:function(e){this.type.template=webix.template(e)},jb:function(e){var t=this.data.Me[e.id];return this.callEvent("onItemRender",[e]),this.type.templateStart(e,this.type,t)+(e.$template?this.type["template"+e.$template]:this.type.template)(e,this.type,t)+this.type.templateEnd(e,this.type,t)},Ne:function(e){return this.v.innerHTML=this.jb(e),this.v.firstChild},Ke:function(e,t){var i=this.getItemNode(e);i&&(i.setAttribute(this.ad,t),this.t[t]=this.t[e],delete this.t[e])},Le:function(){if(this.s.click){var e=webix.toFunctor(this.s.click,this.$scope);e&&e.call&&e.apply(this,arguments)}},getItemNode:function(e){if(this.t)return this.t[e];this.t={};for(var t=this.y.childNodes,i=0;i<t.length;i++){var n=t[i].getAttribute(this.ad);n&&(this.t[n]=t[i])}return this.getItemNode(e)},locate:function(e){return webix.html.locate(e,this.ad)},showItem:function(e){var t=this.getItemNode(e);if(t&&this.scrollTo){var i=Math.abs(this.w.offsetLeft-t.offsetLeft),n=i+t.offsetWidth,r=Math.abs(this.w.offsetTop-t.offsetTop),o=r+t.offsetHeight,a=this.getScrollState(),s=a.x;(s>i||s+this.bc<n)&&(s=i);var l=a.y;(l>r||l+this.dc<o)&&(l=r-5),this.scrollTo(s,l),this.Oe&&this.Oe(e)}},render:function(e,t,i){if(this.isVisible(this.s.id)&&!this.$blockRender)if(e){var n=this.getItemNode(e);switch(i){case"paint":case"update":if(!n)return;var r=this.t[e]=this.Ne(t);webix.html.insertBefore(r,n),webix.html.remove(n);break;case"delete":if(!n)return;webix.html.remove(n),delete this.t[e];break;case"add":var r=this.t[e]=this.Ne(t);webix.html.insertBefore(r,this.getItemNode(this.data.getNextId(e)),this.y);break;case"move":webix.html.insertBefore(this.getItemNode(e),this.getItemNode(this.data.getNextId(e)),this.y)}}else if(this.callEvent("onBeforeRender",[this.data])){(this.Pe||this.y).innerHTML=this.data.getRange().map(this.jb,this).join(""),this.t=null,this.callEvent("onAfterRender",[]);var r=this.y.offsetHeight}}},webix.ValidateData={$init:function(){this.h&&this.attachEvent("onChange",this.clearValidation)},clearValidation:function(){if(this.elements)for(var e in this.elements)this.Qe(e)},validate:function(e,t){this.callEvent("onBeforeValidate",[]);var i=this.Re={},n=!0,r=this.s.rules,o=this.isVisible&&!this.isVisible(),a=e&&e.hidden,s=e&&e.disabled,l={},h={};for(var c in this.elements){var u=this.elements[c].config.name;(o||this.elements[c].isVisible()||a)&&(this.elements[c].isEnabled()||s)?l[u]=this.elements[c]:h[u]=!0}if((r||l)&&!t&&this.getValues&&(t=this.getValues()),r){r.$obj&&(n=this.Se(r.$obj,t,t,"")&&n);var d=r.$all,f=t;if(this.s.complexData&&(f=webix.CodeParser.collapseNames(t)),d)for(var p in t)if(!h[p]){var m=this.Se(d,f[p],t,p);m||(i[p]=!0),n=m&&n}for(var p in r)if(!h[p]&&0!==p.indexOf("$")&&!i[p]){var m=this.Se(r[p],f[p],t,p);m||(i[p]=!0),n=m&&n}}if(l)for(var p in l)if(!i[p]){var g=l[p];if(g.validate){var m=g.validate();n=m&&n,m||(i[p]=!0)}else{var v=g.s;if(v){var b=v.validate;if(!b&&v.required&&(b=webix.rules.isNotEmpty),b){var m=this.Se(b,t[p],t,p);m||(i[p]=!0),n=m&&n}}}}return this.callEvent("onAfterValidation",[n,this.Re]),n},Se:function(e,t,i,n){return"string"==typeof e&&(e=webix.rules[e]),e.call(this,t,i,n)?(this.callEvent("onValidationSuccess",[n,i])&&this.Qe&&this.Qe(n),!0):(this.callEvent("onValidationError",[n,i])&&this.Te&&this.Te(n),!1)}},webix.ValidateCollection={Ue:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(e,t,i){!e||"add"!=i&&"update"!=i||this.validate(e)},this)),this.data.attachEvent("onClearAll",webix.bind(this.clearValidation,this)),this.Ue=function(){}},rules_setter:function(e){return e&&this.Ue(),e},clearValidation:function(){this.data.clearMark("webix_invalid",!0)},validate:function(e){var t=!0;if(e){this.Re={};var i=this.getItem(e);t=webix.ValidateData.validate.call(this,null,i),t?this.callEvent("onValidationSuccess",[e,i])&&this.Qe(e):this.callEvent("onValidationError",[e,i,this.Re])&&this.Te(e,this.Re)}else for(var n in this.data.pull)var t=this.validate(n)&&t;return t},Se:function(e,t,i,n){"string"==typeof e&&(e=webix.rules[e]);var r=e.call(this,t,i,n);return r||(this.Re[n]=!0),r},Qe:function(e){this.data.removeMark(e,"webix_invalid",!0)},Te:function(e,t){this.data.addMark(e,"webix_invalid",!0)}},webix.rules={isEmail:function(e){return/\S+@[^@\s]+\.[^@\s]+$/.test(""+(e||""))},isNumber:function(e){return parseFloat(e)==e},isChecked:function(e){return!!e||"0"===e},isNotEmpty:function(e){return 0===e||e}},webix.MapCollection={$init:function(){this.$ready.push(this.cz),this.attachEvent("onStructureUpdate",this.cz),this.attachEvent("onStructureLoad",function(){this.dz.length||this.cz()})},cz:function(e){var e=this.dz=[],t=this.s;if(t.columns&&this.zj(t.columns),this.s.map&&this.ez(t.map),this.dz.length)try{this.data.qf=Function("obj",e.join("\n"))}catch(e){}},ez:function(e){for(var t in e)this.dz.push(this.fz(t,e[t]))},fz:function(e,t,i){var n="",r="";return 0===t.indexOf("(date)")?(n="webix.i18n.parseFormatDate(",r=")",i&&!i.format&&(i.format=webix.i18n.dateFormatStr),t=t.replace("(date)","")):0===t.indexOf("(number)")&&(n="(",r=")*1",t=t.replace("(number)","")),""!==t?(t=t.replace(/\{obj\.([^}]*)\}/g,"\"+(obj.$1||'')+\""),t=t.replace(/#([^#'";, ]+)#/gi,"\"+(obj.$1||'')+\"")):t='"+(obj.'+e+"||'')+\"","obj."+e+" = "+n+'"'+t+'"'+r+";"},zj:function(e){for(var t=0;t<e.length;t++){var i=e[t].map,n=e[t].id;n||(n=e[t].id="i"+webix.uid(),e[t].header||(e[t].header="")),i&&this.dz.push(this.fz(n,i,e[t])),this.Et(e[t])}},Et:function(e){var t=e.options||e.collection;if(t)if("string"==typeof t){var i=webix.$$(t);i||(i=new webix.DataCollection({url:t}),this.Ns.push(i)),i.getBody&&(i=i.getBody()),this.Bj(i,e)}else if(t.loadNext)this.Bj(t,e);else if(t[0]&&"object"==typeof t[0])t=new webix.DataCollection({data:t}),this.Bj(t,e),this.Ns.push(t);else{if(webix.isArray(t)){for(var n={},r=0;r<t.length;r++)n[t[r]]=t[r];e.options=t=n}e.template=e.template||this.Ej(t,e.id,e.optionslist)}},Bj:function(e,t){if(t){delete t.options,t.collection=e,t.template=t.template||this.Dj(e,t.id,t.optionslist);var i=e.data.attachEvent("onStoreUpdated",webix.bind(function(){this.refresh(),this.refreshFilter&&this.refreshFilter(t.id)},this));this.attachEvent("onDestruct",function(){e.$destructed||e.data.detachEvent(i)})}},Ej:function(e,t,i){if(i){var n="string"==typeof i?i:",";return function(i,r){var o=i[t]||i.value;if(!o)return"";for(var a=o.split(n),s=0;s<a.length;s++)a[s]=e[a[s]]||"";return a.join(", ")}}return function(i,n){return e[i[t]]||i.value||""}},Dj:function(e,t,i){if(i){var n="string"==typeof i?i:",";return function(i,r){var o=i[t]||i.value;if(!o)return"";for(var a=o.split(n),s=0;s<a.length;s++){var l=e.data.pull[a[s]];a[s]=l?l.value||"":""}return a.join(", ")}}return function(i,n){var r=i[t]||i.value,o=e.data.pull[r];return o&&(o.value||0===o.value)?o.value:""}}},webix.Undo={$init:function(){this.VA=webix.extend([],webix.PowerArray,!0),this.WA=-1},undo_setter:function(e){return e&&(this.XA(),this.XA=function(){}),e},XA:function(){var e=this;this.attachEvent("onBeforeDrop",function(t){if(t.from==t.to){var i=e.YA=webix.copy(this.getItem(t.start));this.data.branch?i.$index=this.getBranchIndex(i.id):i.$index=this.getIndexById(i.id)}}),this.data.attachEvent("onDataMove",function(t){if(e.YA&&e.YA.id==t){var i=e.YA;e.YA=null,e.ZA(t,i,"move")}}),this.data.attachEvent("onBeforeDelete",function(t){if(this.getItem(t)){var i=e._A=webix.copy(this.getItem(t));this.branch?(i.$index=this.getBranchIndex(t),this.branch[t]&&(i.$branch=webix.copy(this.serialize(t)))):i.$index=this.getIndexById(t)}}),this.data.attachEvent("onDataUpdate",function(t,i,n){e.ZA(t+"",n,"update")}),this.data.attachEvent("onStoreUpdated",function(t,i,n){var r=null;t&&("add"==n?r=webix.copy(i):"delete"==n&&(r=e._A),r&&e.ZA(t,r,n))}),this.data.attachEvent("onIdChange",function(t,i){"object"==typeof t&&(t=t.row);for(var n=0;n<e.VA.length;n++)e.VA[n].id==t&&(e.VA[n].id=i)})},ZA:function(e,t,i){!this.aB&&this.s.undo&&(this.VA.push({id:e,action:i,data:t}),20==this.VA.length&&this.VA.splice(0,1),this.bB||(this.WA=this.VA.length-1))},ignoreUndo:function(e,t){this.aB=!0,e.call(t||this),this.aB=!1},removeUndo:function(e){for(var t=this.VA.length-1;t>=0;t--)this.VA[t].id==e&&("id"==this.VA[t].action&&(e=this.VA[t].data),this.VA.removeAt(t));this.WA=this.VA.length-1},undo:function(e){if(e)this.ignoreUndo(function(){var t,i;for(i=this.VA.length-1;!t&&i>=0;i--)this.VA[i].id==e&&(t=this.VA[i]);t&&(this.cB(t),this.VA.removeAt(i+1),this.WA=this.VA.length-1)});else{var t=this.VA[this.WA];t&&(this.ignoreUndo(function(){this.cB(t),this.VA.removeAt(this.WA)}),this.WA--)}},cB:function(e){if("delete"==e.action){var t=null,i=e.data.$parent;e.data.$branch&&(t={parent:e.id,data:webix.copy(e.data.$branch)},delete e.data.$branch,i&&!this.data.branch[i]&&(i=0)),this.add(e.data,e.data.$index,i),t&&this.parse(t)}else"add"==e.action?this.remove(e.id):"update"==e.action?this.updateItem(e.id,e.data):"move"==e.action&&(e.data.$parent?this.getItem(e.data.$parent)&&this.move(e.id,e.data.$index,null,{parent:e.data.$parent}):this.move(e.id,e.data.$index))}},webix.DataLoader=webix.proto({$init:function(e){e=e||"",this.Ve=webix.toArray(),this.$e={},this.data=new webix.DataStore,this.data.attachEvent("onClearAll",webix.bind(this.We,this)),this.data.attachEvent("onServerConfig",webix.bind(this.Xe,this)),this.attachEvent("onDestruct",this.We),this.data.feed=this.Ye,this.data.owner=e.id},Ye:function(e,t,i){return this.Ze?this.Ze=[e,t,i]:(this.Ze=!0,this.$e.from=e,this.$e.count=t,void this._e.call(this,e,t,i))},_e:function(e,t,i,n,r){var o=null,n=n||this.data.url,a=[{success:this.af,error:this.af},i];if(0>e&&(e=0),r||(r={start:e,count:t}),this.count()&&(r.continue="true"),this.getState&&(o=this.getState()),n&&"string"!=typeof n)o&&(o.sort&&(r.sort=o.sort),o.filter&&(r.filter=o.filter)),this.load(n,a,r);else{n+=-1==n.indexOf("?")?"?":"&";var s=[];for(var l in r)s.push(l+"="+r[l]);if(o&&(o.sort&&s.push("sort["+o.sort.id+"]="+encodeURIComponent(o.sort.dir)),o.filter))for(var h in o.filter){var c=o.filter[h];"object"==typeof c&&(c=webix.ajax().stringify(c)),s.push("filter["+h+"]="+encodeURIComponent(c))}n+=s.join("&"),this.$e.url!==n?(this.$e.url=n,this.load(n,a)):this.Ze=!1}},af:function(){var e=this.Ze;this.Ze=!1,"object"==typeof e&&this.data.feed.apply(this,e)},load:function(e,t){var e=webix.proxy.$parse(e),i=webix.AtomDataLoader.load.apply(this,arguments);return this.data.url||(this.data.url=e),i},loadNext:function(e,t,i,n,r){var o=this.s;return o.datathrottle&&!r?(this.bf&&window.clearTimeout(this.bf),void(this.bf=webix.delay(function(){this.loadNext(e,t,i,n,!0)},this,0,o.datathrottle))):(t||0===t||(t=this.count()),e||(e=o.datafetch||this.count()),this.data.url=this.data.url||n,void(this.callEvent("onDataRequest",[t,e,i,n])&&this.data.url&&this.data.feed.call(this,t,e,i)))},cf:function(e,t){var i=this.$e;return!!(this.Ze&&i.url&&i.from<=t&&i.count+i.from>=e+t)},removeMissed_setter:function(e){return this.data.ff=e},gf:function(){var e=this.s.save;!0===e&&(e=this.s.save=this.s.url);var t={master:this};e&&e.url?webix.extend(t,e):t.url=e,webix.dp(t)},save_setter:function(e){return e&&this.$ready.push(this.gf),e},scheme_setter:function(e){this.data.scheme(e)},dataFeed_setter:function(e){return e=webix.proxy.$parse(e),this.data.attachEvent("onBeforeFilter",webix.bind(function(e,t){if("function"==typeof e)return!0;if(this.s.dataFeed&&(e||t)){e=e||"id",t&&"object"==typeof t&&(t=t.id),this.clearAll();var i=this.s.dataFeed;if("function"==typeof i){var n={};n[e]=t,i.call(this,t,n)}else if(i.$proxy){if(i.load){var r={};r[e]=t,i.load(this,{success:this.M,error:this.N},{filter:r})}}else{var o="filter["+e+"]="+encodeURIComponent(t);this.load(i+(i.indexOf("?")<0?"?":"&")+o,this.s.datatype)}return!1}},this)),e},ef:function(){if(this.s.ready&&!this.hf){var e=webix.toFunctor(this.s.ready,this.$scope);e&&webix.delay(e,this,arguments),this.callEvent&&webix.delay(this.callEvent,this,["onReady",[]]),this.hf=!0}},We:function(e){for(var t=0;t<this.Ve.length;t++){var i=this.Ve[t];try{i.aborted=!0}catch(e){webix.ly.push(i)}i.abort()}e||(this.Ze=!1,this.$e={},this.Ve=webix.toArray(),this.waitData=webix.promise.defer())},Xe:function(e){this.C(e)}},webix.AtomDataLoader),webix.ly=webix.toArray(),webix.DataMarks={addCss:function(e,t,i){if(!this.addRowCss&&!i&&!this.hasCss(e,t)){var n=this.getItemNode(e);n&&(n.className+=" "+t,i=!0)}return this.data.addMark(e,t,1,1,i)},removeCss:function(e,t,i){if(!this.addRowCss&&!i&&this.hasCss(e,t)){var n=this.getItemNode(e);n&&(n.className=n.className.replace(t,"").replace("  "," "),i=!0)}return this.data.removeMark(e,t,1,i)},hasCss:function(e,t){return this.data.getMark(e,t)},clearCss:function(e,t){return this.data.clearMark(e,1,t)}},webix.DataStore=function(){this.name="DataStore",webix.extend(this,webix.EventSystem),this.setDriver("json"),this.pull={},this.order=webix.toArray(),this.Me={}},webix.DataStore.prototype={setDriver:function(e){this.driver=webix.DataDriver[e]},df:function(e,t){this.callEvent("onParse",[this.driver,e]),this.jf&&this.filter();var i=this.driver.getInfo(e);i.key&&(webix.securityKey=i.key),i.config&&this.callEvent("onServerConfig",[i.config]);var n=this.driver.getOptions(e);n&&this.callEvent("onServerOptions",[n]);var r=this.driver.getRecords(e);this.kf(i,r),this.lf&&this.mf&&!this.nf&&this.mf(this.lf),this.of&&(this.blockEvent(),this.sort(this.of),this.unblockEvent()),this.callEvent("onStoreLoad",[this.driver,e]),this.refresh()},kf:function(e,t){var i=e.from,n=!0,r=!1;if(!i&&0!==i&&this.order[0]){if(this.ff){r={};for(var o=0;o<this.order.length;o++)r[this.order[o]]=!0}n=!1,i=this.order.length}else i=1*(i||0);for(var a=0,o=0;o<t.length;o++){var s=this.driver.getDetails(t[o]),l=this.id(s);this.pull[l]?n&&this.order[a+i]&&a++:(this.order[a+i]=l,a++),this.pull[l]?(webix.extend(this.pull[l],s,!0),this.pf&&this.pf(this.pull[l]),r&&delete r[l]):(this.pull[l]=s,this.qf&&this.qf(s))}if(r){this.blockEvent();for(var h in r)this.remove(h);this.unblockEvent()}this.order[e.size-1]||(this.order[e.size-1]=webix.undefined)},id:function(e){return e.id||(e.id=webix.uid())},changeId:function(e,t){e!=t&&(this.pull[e]&&(this.pull[t]=this.pull[e]),this.pull[t].id=t,this.order[this.order.find(e)]=t,this.jf&&(this.jf[this.jf.find(e)]=t),this.Me[e]&&(this.Me[t]=this.Me[e],delete this.Me[e]),this.callEvent("onIdChange",[e,t]),this.Ke&&this.Ke(e,t),delete this.pull[e])},getItem:function(e){return this.pull[e]},updateItem:function(e,t,i){"object"==typeof e&&(e=""+e);var n=this.getItem(e),r=null,o=this.hasEvent("onDataUpdate");webix.isUndefined(t)||n===t||(o&&(r=webix.copy(n)),e=n.id,webix.extend(n,t,!0),n.id=e),this.pf&&this.pf(n),this.callEvent("onStoreUpdated",[e,n,i||"update"]),o&&this.callEvent("onDataUpdate",[e,n,r])},refresh:function(e){this.rf||(e?this.exists(e)&&this.callEvent("onStoreUpdated",[e,this.pull[e],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(e,t){this.rf=!0,e.call(t||this),this.rf=!1},getRange:function(e,t){if(e=e?this.getIndexById(e):this.$min||this.startOffset||0,t?t=this.getIndexById(t):0>(t=0===this.$max?0:Math.min(this.$max?this.$max-1:this.endOffset||1/0,this.count()-1))&&(t=0),e>t){var i=t;t=e,e=i}return this.getIndexRange(e,t)},getIndexRange:function(e,t){t=Math.min(0===t?0:t||1/0,this.count()-1);for(var i=webix.toArray(),n=e||0;t>=n;n++)i.push(this.getItem(this.order[n]));return i},count:function(){return this.order.length},exists:function(e){return!!this.pull[e]},move:function(e,t){if(e!=t){var i=this.getIdByIndex(e),n=this.getItem(i);this.jf&&this.sf(this.jf,0,0,this.getIdByIndex(e),this.getIdByIndex(t)),this.sf(this.order,e,t),this.callEvent("onStoreUpdated",[i,n,"move"])}},sf:function(e,t,i,n,r){if(n||r){t=i=-1;for(var o=0;o<e.length;o++)e[o]==n&&0>t&&(t=o),e[o]==r&&0>i&&(i=o)}var a=e[t];e.removeAt(t),e.insertAt(a,Math.min(e.length,i))},scheme:function(e){this.tf={},this.uf=e.$save,this.qf=e.$init||e.$change,this.pf=e.$update||e.$change,this.vf=e.$serialize,this.lf=e.$group,this.of=e.$sort;for(var t in e)"$"!=t.substr(0,1)&&(this.tf[t]=e[t])},importData:function(e,t){var i=e?e.data||e:[];if(this.jf=null,"function"==typeof i.serialize){if(this.order=webix.toArray([].concat(i.order)),this.OF){this.OF=!1;var n=this.pull;this.pull={};for(var r in i.pull){var o=n[r];this.pull[r]=webix.copy(i.pull[r]),o&&o.open&&(this.pull[r].open=!0)}}else this.pull=i.pull;i.branch&&this.branch&&(this.branch=webix.copy(i.branch),this.Mg=null)}else{this.order=webix.toArray(),this.pull={};var a,s;if(webix.isArray(e))for(var r=0;r<e.length;r++)s=a=e[r],"object"==typeof s?s.id=s.id||webix.uid():s={id:a,value:a},this.order.push(s.id),this.qf&&this.qf(s),this.pull[s.id]=s;else for(var r in i)this.order.push(r),this.pull[r]={id:r,value:i[r]}}if(this.Pg&&!i.branch){this.branch={0:[]},this.Og||this.Lg("data");for(var l=0;l<this.order.length;l++){var r=this.order[l];this.Pg(this.pull[r],0,0,!1)}}this.callEvent("onStoreLoad",[]),t||this.callEvent("onStoreUpdated",[])},sync:function(e,t,i){this.unsync();var n=typeof e;if("string"==n&&(e=webix.$$(e)),"function"!=n&&"object"!=n&&(i=t,t=null),"DataStore"!=e.name){if(!e.data||"DataStore"!==e.data.name&&"TreeStore"!==e.data.name)return this.Ts=e,webix.callEvent("onSyncUnknown",[this,e,t]);e=e.data}var r=webix.bind(function(n,r,o){this.wf||(t&&this.branch&&(this.OF=!0),this.importData(e,!0),t&&this.silent(t),this.Y&&this.Y(),this.OF,n&&r&&o||(this.Me={}),"delete"==o&&this.Me[n]&&delete this.Me[n],this.callEvent("onSyncApply",[]),i?i=!1:this.refresh())},this);this.ab=[e.attachEvent("onStoreUpdated",r),e.attachEvent("onIdChange",webix.bind(function(e,t){this.changeId(e,t),this.refresh(t)},this))],this.Ts=e,this.Us=this.attachEvent("onStoreUpdated",function(t,i,n){("update"==n||"save"==n)&&(this.wf=1,e.updateItem(t,i),this.wf=0)}),r()},unsync:function(){if(this.Ts){var e=this.Ts;if("DataStore"==e.name||e.data&&"DataStore"==e.data.name){for(var t=0;t<this.ab.length;t++)e.detachEvent(this.ab[t]);this.detachEvent(this.Us)}else webix.callEvent("onUnSyncUnknown",[this,e]);this.Ts=null}},destructor:function(){this.unsync(),this.pull=this.order=this.Me=null,this.i=this.j={}},add:function(e,t){if(this.tf)for(var i in this.tf)webix.isUndefined(e[i])&&(e[i]=this.tf[i]);this.qf&&this.qf(e);var n=this.id(e),r=arguments[2]||this.order,o=r.length;if((webix.isUndefined(t)||0>t)&&(t=o),t>o&&(t=Math.min(r.length,t)),!1===this.callEvent("onBeforeAdd",[n,e,t]))return!1;if(this.pull[n]=e,r.insertAt(n,t),this.jf){var a=this.jf.length;this.order.length&&(a=Math.min(t||0,a)),this.jf.insertAt(n,a)}return this.callEvent("onStoreUpdated",[n,e,"add"]),this.callEvent("onAfterAdd",[n,t]),e.id},remove:function(e){if(webix.isArray(e))for(var t=0;t<e.length;t++)this.remove(e[t]);else{if(!1===this.callEvent("onBeforeDelete",[e]))return!1;var i=this.getItem(e);this.order.remove(e),this.jf&&this.jf.remove(e),delete this.pull[e],this.Me[e]&&delete this.Me[e],this.callEvent("onStoreUpdated",[e,i,"delete"]),this.callEvent("onAfterDelete",[e])}},clearAll:function(e){this.pull={},this.Me={},this.order=webix.toArray(),this.jf=null,e||(this.url=null),this.callEvent("onClearAll",[e]),this.refresh()},getIdByIndex:function(e){return this.order[e]},getIndexById:function(e){var t=this.order.find(e);return this.pull[e]?t:-1},getNextId:function(e,t){return this.order[this.getIndexById(e)+(t||1)]},getFirstId:function(){return this.order[0]},getLastId:function(){return this.order[this.order.length-1]},getPrevId:function(e,t){return this.order[this.getIndexById(e)-(t||1)]},sort:function(e,t,i){var n=e;"function"==typeof e?n={as:e,dir:t}:"string"==typeof e&&(n={by:e.replace(/#/g,""),dir:t,as:i});var r=[n.by,n.dir,n.as,n];this.callEvent("onBeforeSort",r)&&(this.order=this.xf(n,this.order),this.jf&&this.jf.length!=this.order.length&&(this.jf=this.xf(n,this.jf)),this.refresh(),this.callEvent("onAfterSort",r))},xf:function(e,t){var i=this.sorting.create(e);if(this.order.length){for(var n=t.splice(0,this.$freeze),r=webix.toArray(),o=t.length-1;o>=0;o--)r[o]=this.pull[t[o]];return r.sort(i),webix.toArray(n.concat(r.map(function(e){return this.id(e)},this)))}return t},Af:function(e){this.jf&&!e&&(this.order=this.jf,delete this.jf)},Bf:function(e,t,i){for(var n=webix.toArray(),r=this.$freeze||0,o=0;o<this.order.length;o++){var a=this.order[o];(r>o||e(this.getItem(a),t))&&n.push(a)}i&&this.jf||(this.jf=this.order),this.order=n},find:function(e,t){var i=[];for(var n in this.pull){var r=this.pull[n],o=!0;if("object"==typeof e){for(var a in e)if(r[a]!=e[a]){o=!1;break}}else e(r)||(o=!1);if(o&&i.push(r),t&&i.length)return i[0]}return i},filter:function(e,t,i){if((e||this.jf||this.Mg)&&this.callEvent("onBeforeFilter",[e,t])&&(this.Af(i),this.order.length)){if(e){var n=e;t=t||"","string"==typeof e&&(e=e.replace(/#/g,""),"function"==typeof t?n=function(i){return t(i[e])}:(t=(""+t).toLowerCase(),n=function(t,i){return-1!=(""+(t[e]||"")).toLowerCase().indexOf(i)})),this.Bf(n,t,i,this.Cf)}this.refresh(),this.callEvent("onAfterFilter",[])}},Df:function(){for(var e=[],t=this.order.length-1;t>=0;t--)e[t]=this.pull[this.order[t]];return e},each:function(e,t,i){var n=this.order;i&&(n=this.jf||n);for(var r=0;r<n.length;r++)n[r]&&e.call(t||this,this.getItem(n[r]),r)},Ef:function(e,t){return function(){return e[t].apply(e,arguments)}},provideApi:function(e,t){t&&this.mapEvent({onbeforesort:e,onaftersort:e,onbeforeadd:e,onafteradd:e,onbeforedelete:e,onafterdelete:e,ondataupdate:e});for(var i=["sort","add","remove","exists","getIdByIndex","getIndexById","getItem","updateItem","refresh","count","filter","find","getNextId","getPrevId","clearAll","getFirstId","getLastId","serialize","sync"],n=0;n<19;n++)e[i[n]]=this.Ef(this,i[n])},addMark:function(e,t,i,n,r){var o=this.Me[e]||{};if(this.Me[e]=o,!o[t]){if(o[t]=n||!0,i){var a=o.$css||"";o.$css=a+" "+t}r||this.refresh(e)}return o[t]},removeMark:function(e,t,i,n){var r=this.Me[e];if(r){if(r[t]&&delete r[t],i){var o=r.$css;o&&(r.$css=o.replace(t,"").replace("  "," "))}n||this.refresh(e)}},getMark:function(e,t){var i=this.Me[e];return!!i&&i[t]},clearMark:function(e,t,i){for(var n in this.Me){var r=this.Me[n];r[e]&&(delete r[e],t&&r.$css&&(r.$css=r.$css.replace(e,"").replace("  "," ")),i||this.refresh(n))}},serialize:function(e){var t=this.order;e&&this.jf&&(t=this.jf);for(var i=[],n=0;n<t.length;n++){var r=this.pull[t[n]];this.vf&&!1===(r=this.vf(r))||i.push(r)}return i},sorting:{create:function(e){return this.Ff(e.dir,this.Gf(e.by,e.as))},as:{server:function(){return!1},date:function(e,t){return e-=0,t-=0,e>t?1:t>e?-1:0},int:function(e,t){return e*=1,t*=1,e>t?1:t>e?-1:0},string_strict:function(e,t){return e=""+e,t=""+t,e>t?1:t>e?-1:0},string:function(e,t){return t?e?(e=(""+e).toLowerCase(),t=(""+t).toLowerCase(),e>t?1:t>e?-1:0):-1:1},raw:function(e,t){return e>t?1:t>e?-1:0}},Gf:function(e,t){return e?("function"!=typeof t&&(t=this.as[t||"string"]),function(i,n){return t(i[e],n[e])}):t},Ff:function(e,t){return"asc"!=e&&e?function(e,i){return-1*t(e,i)}:t}}},webix.DataCollection=webix.proto({name:"DataCollection",isVisible:function(){return!!(this.data.order.length||this.data.jf||this.s.dataFeed)},$init:function(e){this.data.provideApi(this,!0);var t=e&&e.id?e.id:webix.uid();this.s.id=t,webix.ui.views[t]=this,this.data.attachEvent("onStoreLoad",webix.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},webix.DataMove,webix.CollectionBind,webix.BindSource,webix.ValidateCollection,webix.DataLoader,webix.MapCollection,webix.EventSystem,webix.BaseBind,webix.Destruction,webix.Settings),webix.Scrollable={$init:function(e){return e&&!e.scroll&&this.If?this.y=this.y||this.w:((this.y||this.w).appendChild(webix.html.create("DIV",{class:"webix_scroll_cont"},"")),this.y=(this.y||this.w).firstChild,void(webix.env.touch&&"native"!==webix.env.touch||webix.UE(this.x,"scroll",webix.bind(function(e){this.callEvent&&webix.delay(function(){this.callEvent("onAfterScroll",[])},this)},this))))},scroll_setter:function(e){if(!e)return!1;var t="x"==e?"x":"xy"==e?"xy":"a"==e?"xy":"y";if(webix.Touch&&webix.Touch.$active&&"native"!=webix.env.touch)this.y.setAttribute("touch_scroll",t),this.attachEvent&&this.attachEvent("onAfterRender",webix.bind(this.Jf,this)),this.Kf=!0;else if(webix.env.$customScroll)webix.CustomScroll.enable(this,t);else{var i=this.y.parentNode.style;-1!=(""+e).indexOf("a")?i.overflowX=i.overflowY="auto":(-1!=t.indexOf("x")&&(this.ec=!0,i.overflowX="scroll"),-1!=t.indexOf("y")&&(this.cc=!0,i.overflowY="scroll"))}return t},Lf:function(e){if(!!this.s.scroll!=!!e){if(!webix.env.$customScroll){var t=this.y.parentNode.style;t.overflowX=t.overflowY=e?"auto":"hidden"}this.ec=this.cc=!!e,this.s.scroll=!!e}},getScrollState:function(){if(webix.Touch&&webix.Touch.$active){var e=webix.Touch.Mf(this.y);return{x:-e.e,y:-e.f}}return{x:this.y.parentNode.scrollLeft,y:this.y.parentNode.scrollTop}},scrollTo:function(e,t){webix.Touch&&webix.Touch.$active&&"native"!=webix.env.touch?(t=Math.max(0,Math.min(t,this.y.offsetHeight-this.dc)),e=Math.max(0,Math.min(e,this.y.offsetWidth-this.bc)),webix.Touch.Nf(this.y,-e,-t,this.s.scrollSpeed||"100ms")):(this.y.parentNode.scrollLeft=e,this.y.parentNode.scrollTop=t)},Jf:function(){if(-1!=(""+this.s.scroll).indexOf("x")){var e=this.y.scrollWidth;e&&(this.y.style.width="100%",this.y.style.width=this.y.scrollWidth+"px")}if(webix.Touch&&webix.Touch.$active&&this.Kf){webix.Touch.Of(),webix.Touch.Pf();var t=this.getScrollState(),i=this.y.offsetWidth-this.$width-t.x,n=this.y.offsetHeight-this.$height-t.y;if(0>i||0>n){var e=0>i?Math.min(-i-t.x,0):-t.x,r=0>n?Math.min(-n-t.y,0):-t.y;webix.Touch.Nf(this.y,e,r,0)}}}},webix.protoUI({defaults:{size:10,page:0,group:5,template:"{common.pages()}",maxWidth:1e5,height:30,borderless:!0},name:"pager",on_click:{webix_pager_item:function(e,t){this.select(t)}},$init:function(e){this.data=this.s,this.y=this.x,this.x.className+=" webix_pager"+(e.autowidth?" webix_pager_auto":""),(!1===e.master||0===e.master)&&this.$ready.push(this.wt)},wt:function(){this.refresh(),this.$master={refresh:function(){},select:function(){}}},select:function(e){if(this.$master&&"pager"==this.$master.name)return this.$master.select(e);switch(e){case"next":e=this.s.page+1;break;case"prev":e=this.s.page-1;break;case"first":e=0;break;case"last":e=this.s.limit-1}0>e&&(e=0),e>=this.data.limit&&(e=this.data.limit-1);var t=this.data.page;this.callEvent("onBeforePageChange",[e,t])&&(this.data.page=1*e,this.refresh()&&(this.s.animate&&this.Qf(t,1*e,this.s.animate)||this.$master.refresh()),this.callEvent("onAfterPageChange",[e]))},ad:"webix_p_id",template_setter:webix.template,type:{template:function(e,t){return e.template.call(this,e,t)},pages:function(e){var t="";if(-1==e.page)return"";e.$min=e.page-Math.round((e.group-1)/2),e.$max=e.$min+1*e.group-1,e.$min<0&&(e.$max+=-1*e.$min,e.$min=0),e.$max>=e.limit&&(e.$min-=Math.min(e.$min,e.$max-e.limit+1),e.$max=e.limit-1);for(var i=e.$min||0;i<=e.$max;i++)t+=this.button({id:i,index:i+1,selected:i==e.page?"_selected":"",label:webix.i18n.aria.page+" "+(i+1)});return t},page:function(e){return e.page+1},first:function(){return this.button({id:"first",index:webix.locale.pager.first,selected:"",label:webix.i18n.aria.pages[0]})},last:function(){return this.button({id:"last",index:webix.locale.pager.last,selected:"",label:webix.i18n.aria.pages[3]})},prev:function(){return this.button({id:"prev",index:webix.locale.pager.prev,selected:"",label:webix.i18n.aria.pages[1]})},next:function(){return this.button({id:"next",index:webix.locale.pager.next,selected:"",label:webix.i18n.aria.pages[2]})},button:webix.template("<button type='button' webix_p_id='{obj.id}' class='webix_pager_item{obj.selected}' aria-label='{obj.label}'>{obj.index}</button>")},clone:function(e){e.$view||(e.view="pager",e=webix.ui(e)),this.Rf=e,e.$master=this,this.Sf()},refresh:function(){var e=this.s;if(e.count){e.limit=Math.ceil(e.count/e.size);var t=Math.min(e.limit-1,e.page);return t!=e.page?this.$master.setPage(t):(e.page=t,t>=0&&t!=e.old_page||e.limit!=e.old_limit||e.old_count!=e.count?(this.render(),this.Sf(),e.old_limit=e.limit,e.old_page=e.page,e.old_count=e.count,!0):void 0)}},apiOnly_setter:function(e){return this.$apiOnly=e},Sf:function(){this.Rf&&(this.Rf.s.count=this.s.count,this.Rf.s.page=this.s.page,this.Rf.refresh())},Qf:function(e,t,i){if(e==t)return!1;if(this.Tf)return this.Uf&&window.clearTimeout(this.Uf),this.Uf=webix.delay(this.Qf,this,[e,t,i],100);var n=t>e?"left":"right";("top"==i.direction||"bottom"==i.direction)&&(n=t>e?"top":"bottom"),i.flip&&(n="");var r=0,o=this.$master.y,a=!!this.$master.Vf;a&&(o=this.$master.Vf,r=o.offsetTop,webix.html.addCss(this.$master.$view,"webix_animation"));var s=o.cloneNode(!0);s.style.width=o.style.width="100%",this.$master.refresh(),webix.html.insertBefore(s,o.nextSibling,o.parentNode),a&&(s.childNodes[1].scrollLeft=o.childNodes[1].scrollLeft);var l,h=!0!==i?i:{},c=webix.extend({direction:n,callback:webix.bind(function(){c.callback=null,webix.animate.breakLine(l),this.Tf=!1,this.$master.Vf&&webix.html.removeCss(this.$master.$view,"webix_animation")},this),top:r,keepViews:a},h);l=webix.animate.formLine(o,s,c),webix.animate([o,s],c),this.Tf=!0}},webix.MouseEvents,webix.SingleRender,webix.ui.view,webix.EventSystem),webix.locale.pager={first:" &lt;&lt; ",last:" &gt;&gt; ",next:" &gt; ",prev:" &lt; "},webix.PagingAbility={pager_setter:function(e){function t(i){if(e.config.autosize&&this.getVisibleCount){var n=this.getVisibleCount();isNaN(n)?(e.config.size=1,webix.delay(t,this,[!0])):n!=e.config.size&&(e.config.size=n,e.refresh(),!0===i&&this.refresh())}var r=this.s.pager;return-1!=r.page&&(this.data.$min=this.sy(0,r.page*r.size),this.data.$max=this.sy(this.data.$min,r.size),this.data.$pagesize=this.data.$max-this.data.$min,!0)}if("string"==typeof e){var i=webix.$$(e);if(!i)return this.$blockRender=!0,webix.delay(function(){var t=webix.$$(e);this.s.pager=this.pager_setter(t);var i=t.s;i.count=this.data.ty(i.level),t.refresh(),this.$blockRender=!1,this.render()},this),null;e=i}return this.attachEvent("onBeforeRender",t),e.$view||(e.view="pager",e=webix.ui(e)),this.Wf=e,e.$master=this,this.data.attachEvent("onStoreUpdated",function(){var t=e.s;t.count=this.ty(t.level),e.refresh()}),this.data.ty=this.ty,e.s},ty:function(e){if(e&&0!==e){var t=0;return this.each(function(i){i.$level==e&&t++}),t}return this.count()},sy:function(e,t){var i=this.s.pager;if(i.level&&0!==i.level){var n=e,r=this.data.order.length;if(t)for(;r>n;){if(this.data.order[n]&&this.data.getItem(this.data.order[n]).$level==i.level){if(0===t)break;t--}n++}return n}return e+t},setPage:function(e){this.Wf&&this.Wf.select(e)},getPage:function(){return this.Wf.s.page},getPager:function(){return this.Wf}},webix.protoUI({name:"tooltip",defaults:{dy:0,dx:20},$init:function(e){"string"==typeof e&&(e={template:e}),this.type=webix.extend({},this.type),this.$view=this.x=this.w=this.y=webix.html.create("DIV",{role:"alert","aria-atomic":"true"}),this.w.className="webix_tooltip",webix.html.insertBefore(this.w,document.body.firstChild,document.body),this.PF=webix.attachEvent("onClick",webix.bind(function(e){this.gz&&webix.$$(e)!=this&&this.hide()},this)),this.attachEvent("onDestruct",function(){webix.detachEvent(this.PF)})},adjust:function(){},isVisible:function(){return!0},show:function(e,t){if(!this.Xf){if(this.data!=e&&(this.data=webix.extend({},e),this.render(e)),this.y.firstChild){var i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=i-t.x,o=n-t.y;this.w.style.display="block",r-this.s.dx>this.w.offsetWidth?r=t.x:0>=(r=t.x-2*this.s.dx-this.w.offsetWidth)&&(r=0),o=o-this.s.dy>this.w.offsetHeight?t.y:t.y-this.s.dy-this.w.offsetHeight,this.w.style.left=r+this.s.dx+"px",this.w.style.top=o+this.s.dy+"px"}this.gz=!0}},hide:function(){this.data=null,this.w.style.display="none",this.gz=!1},disable:function(){this.Xf=!0},enable:function(){this.Xf=!1},type:{template:webix.template("{obj.id}"),templateStart:webix.template.empty,templateEnd:webix.template.empty}},webix.SingleRender,webix.Settings,webix.EventSystem,webix.ui.view),webix.AutoTooltip={tooltip_setter:function(e){if(e){"function"==typeof e&&(e={template:e});var t=!e.template,i=new webix.ui.tooltip(e);this.Vc();var n=this.attachEvent("onMouseMove",function(e,n){if(this.DA=n.clientX,this.EA=n.clientY,this.getColumnConfig){var r=i.type.column=this.getColumnConfig(e.column);if(t){if(!r.tooltip&&r.tooltip!=webix.undefined)return;var o=n.target||n.srcElements;if(o.getAttribute("webix_area")&&r.tooltip){var a=o.getAttribute("webix_area");i.type.template=function(e,t){var i=e[t.column.id];return webix.template(r.tooltip).call(this,e,t,i[a],a)}}else if(r.tooltip)i.type.template=r.tooltip=webix.template(r.tooltip);else{var s=this.getText(e.row,e.column);i.type.template=function(){return s}}}}webix.DragControl.active||i.show(this.getItem(e.row||e),webix.html.pos(n))}),r=webix.event(document.body,"mousemove",webix.bind(function(e){e=e||event,(this.DA!=e.clientX||this.EA!=e.clientY)&&i.hide()},this));return this.attachEvent("onDestruct",function(){this.config.tooltip&&this.config.tooltip.destructor()}),this.attachEvent("onAfterScroll",function(){i.hide()}),i.attachEvent("onDestruct",webix.bind(function(){this.detachEvent(n),webix.eventRemove(r)},this)),i}}},webix.protoUI({name:"proto",$init:function(){this.data.provideApi(this,!0),this.y=this.y||this.w,this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.render.apply(this,arguments)},this))},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)&&this.render()},ad:"webix_item",on_mouse_move:{},type:{}},webix.PagingAbility,webix.DataMarks,webix.AutoTooltip,webix.ValidateCollection,webix.RenderStack,webix.DataLoader,webix.ui.view,webix.EventSystem,webix.Settings),webix.CodeParser={collapseNames:function(e,t,i){if(i=i||{},t=t||"",!e||"object"!=typeof e)return null;for(var n in e)!e[n]||"object"!=typeof e[n]||webix.isDate(e[n])||webix.isArray(e[n])?i[t+n]=e[n]:webix.CodeParser.collapseNames(e[n],t+n+".",i);return i},expandNames:function(e){var t,i,n,r,o,a={};for(o in e){for(n=o.split("."),i=n.length-1,r=a,t=0;i>t;t++)r[n[t]]||(r[n[t]]={}),r=r[n[t]];r[n[i]]=e[o]}return a}},webix.Values={$init:function(){this.elements={}},focus:function(e){if(e)this.ub(this.elements[e]);else for(var t in this.elements)if(this.ub(this.elements[t]))return!0},ub:function(e){return e&&e.focus?(e.focus(),!0):void 0},setValues:function(e,t){this.s.complexData&&(e=webix.CodeParser.collapseNames(e)),this.Zf(e,t)},Zf:function(e,t){this.Yf=t,this.blockEvent(),t&&this.$f||(this.$f={});for(var i in e)this.elements[i]||(this.$f[i]=e[i]);for(var i in this.elements){var n=this.elements[i];n&&(webix.isUndefined(e[i])?!t&&n.Ce&&n.setValue(""):n.setValue(e[i]),this.$f[i]=n.getValue())}this.unblockEvent(),this.callEvent("onValues",[])},isDirty:function(){return!!this.Yf||1===this.getDirtyValues(1)},setDirty:function(e){this.Yf=e,e||(this.$f=this.hz())},getDirtyValues:function(){var e={};if(this.$f)for(var t in this.elements){var i=this.elements[t].getValue();if(this.$f[t]!=i&&(e[t]=i,arguments[0]))return 1}return e},getCleanValues:function(){return this.$f},getValues:function(e){var t=this.hz(e);return this.s.complexData&&(t=webix.CodeParser.expandNames(t)),t},hz:function(e){var t,i=null,n=this.$f?webix.copy(this.$f):{};for(var r in this.elements)i=this.elements[r],t=!0,e&&("object"==typeof e?(!1===e.hidden&&(t=i.isVisible()),t&&!1===e.disabled&&(t=i.isEnabled())):t=e.call(this,i)),t?n[r]=i.getValue():delete n[r];return n},clear:function(){this.Yf=!1;var e={};for(var t in this.elements)this.elements[t].Ce&&(e[t]=this.elements[t].s.defaultValue||"");this.Zf(e)},markInvalid:function(e,t){if(!1===t)this.Qe(e);else{if("string"==typeof t){var i=this.elements[e];i&&(i.s.invalidMessage=t)}this.Te(e)}},Te:function(e){var t=this.elements[e];if(e&&t){this.Qe(e,!0),webix.html.addCss(t.x,"webix_invalid"),t.s.invalid=!0;"string"==typeof t.s.invalidMessage&&t.setBottomText&&t.setBottomText()}},Qe:function(e,t){var i=this.elements[e];if(e&&i&&i.$view&&i.s.invalid){webix.html.removeCss(i.x,"webix_invalid"),i.s.invalid=!1;"string"==typeof i.s.invalidMessage&&!t&&i.setBottomText&&i.setBottomText()}}},webix.protoUI({name:"toolbar",defaults:{type:"toolbar"},Gc:!0,_f:"webix_toolbar",ag:!1,$init:function(e){e.borderless||(this.w.style.borderWidth="1px"),this.w.className+=" "+this._f,this.x.setAttribute("role","toolbar")},Qs:function(){var e=this;e.elements={},webix.ui.each(this,function(t){return t.s.name&&t.getValue&&t.setValue&&(e.elements[t.s.name]=t,t.mapEvent&&t.mapEvent({onbeforetabclick:e,onaftertabclick:e,onitemclick:e,onchange:e})),!t.setValues&&void 0});var t=this.$f;if(this.setDirty(!1),t){var i=this.$f;for(var n in e.elements)t[n]&&i[n]!=t[n]&&(i[n]=t[n],this.setDirty(!0))}},sc:function(){this.Qs()},Bc:function(e){var t=this.s;return t.elements&&!e&&(this.nc=e=t.elements,this.mc=this.ag,delete t.elements),this.s.elementsConfig&&this.eg(this.nc,t.elementsConfig),e},eg:function(e,t){for(var i=0;i<e.length;i++){var n=e[i];webix.extend(n,t);var r=t;n.elementsConfig&&(r=webix.extend(webix.extend({},n.elementsConfig),t));var o;(o=n.body?[n.body]:n.rows||n.cols||n.cells||n.body)&&this.eg(o,r)}},$getSize:function(e,t){var i=webix.ui.layout.prototype.$getSize.call(this,e,t),n=this.getParentView(),r=this.mc?3:1;return n&&this.mc!=n.mc&&(i[r]+=1e5),i},render:function(){},refresh:function(){this.render()}},webix.Scrollable,webix.AtomDataLoader,webix.Values,webix.ui.layout,webix.ValidateData),webix.protoUI({name:"template",$init:function(e){var t=this.fg[e.type];t&&(webix.extend(e,t),e.borderless&&(delete e.Ob,this.hc(e))),this.y==this.x?(this.y=webix.html.create("DIV"),this.y.className=" webix_template",this.x.appendChild(this.y)):this.y.className+=" webix_template",this.attachEvent("onAfterRender",this.hg)},setValues:function(e,t){this.data=t?webix.extend(this.data,e,!0):e,this.render()},getValues:function(){return this.data},$skin:function(){this.fg.header.height=this.fg.section.height=webix.skin.$active.barHeight},fg:{header:{css:"webix_header"},section:{css:"webix_section",borderless:!0},clean:{css:"webix_clean",borderless:!0}},onClick_setter:function(e){return this.on_click=webix.extend(this.on_click||{},e,!0),this.Sc||webix.extend(this,webix.MouseEvents),e},defaults:{template:webix.template.empty},gg:function(){this.ig=!1,this.jg(),this.resize()},jg:function(){this.ig||(this.ig=!0,this.render())},src_setter:function(e){return this.ig=!0,this.callEvent("onBeforeLoad",[])?(webix.ajax(e,webix.bind(function(e){this.s.template=webix.template(e),this.gg(),this.callEvent("onAfterLoad",[])},this)),e):""},hg:function(){this.s.autoheight&&(this.ac=null,this.resize()),this.s.scroll&&-1!=this.s.scroll.indexOf("x")&&(this.y.style.width=this.y.scrollWidth+"px")},content_setter:function(e){e&&(this.ig=!0,this.render=function(){},this.y.appendChild(webix.toNode(e)))},refresh:function(){this.render()},setHTML:function(e){this.s.template=function(){return e},this.refresh()},setContent:function(e){this.y.innerHTML="",this.content_setter(e)},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){if(this.jg(),this.s.autoheight){var i=this.getTopParentView();clearTimeout(i.kg),i.kg=webix.delay(this.resize,this)}return!0}},$getSize:function(e,t){return this.s.autoheight&&!this.s.type&&(this.s.height=this.lg()),webix.ui.view.prototype.$getSize.call(this,e,t)},lg:function(){var e,t=webix.skin.$active.layoutPadding.space;return this.jg(),this.isVisible()?(this.y.style.height="auto",e=this.y.scrollHeight,this.y.style.height=""):e=webix.html.getTextSize(this.jb(this.data)||this.y.innerHTML,"webix_template",(this.$width||(this.getParentView()?this.getParentView().$width:0))-t).height,e},If:!0},webix.Scrollable,webix.AtomDataLoader,webix.AtomRender,webix.EventSystem,webix.ui.view),webix.protoUI({name:"iframe",$init:function(e){this.y=this.w,this.w.innerHTML="<iframe style='width:100%; height:100%' frameborder='0' onload='var t = $$(this.parentNode.getAttribute(\"view_id\")); if (t) t.callEvent(\"onAfterLoad\",[]);' src='about:blank'></iframe>"},load:function(e){this.src_setter(e)},src_setter:function(e){return this.callEvent("onBeforeLoad",[])?(this.getIframe().src=e,e):""},getIframe:function(){return this.w.getElementsByTagName("iframe")[0]},getWindow:function(){return this.getIframe().contentWindow}},webix.ui.view,webix.EventSystem),webix.OverlayBox={showOverlay:function(e){this.mg?this.mg.innerHTML=e:(this.mg=webix.html.create("DIV",{class:"webix_overlay"},e||""),webix.html.insertBefore(this.mg,this.x.firstChild,this.x),this.x.style.position="relative")},hideOverlay:function(){this.mg&&(webix.html.remove(this.mg),this.mg=null)}},webix.protoUI({name:"scrollview",defaults:{scroll:"y",scrollSpeed:"0ms"},$init:function(){this.x.className+=" webix_scrollview"},body_setter:function(e){e.borderless=!0,this.gd=webix.ui.A(e),this.gd.Xb=this,this.y.appendChild(this.gd.x)},getChildViews:function(){return[this.gd]},getBody:function(){return this.gd},resizeChildren:function(){this.ng=this.gd.$getSize(0,0),this.og(),webix.callEvent("onResize",[])},og:function(){var e=(this.Mw||webix.ui.scrollSize,Math.max(this.bc,this.ng[0])),t=Math.max(this.dc,this.ng[2]);if(this.gd.$setSize(e,t),this.y.style.width=this.gd.bc+"px",this.y.style.height=this.gd.dc+"px",webix.env.touch){var i=this.getScrollState(),n=this.gd.dc-this.dc;n<i.y&&this.scrollTo(null,n)}webix.ED&&(webix.ED=!1,this.ng=this.gd.$getSize(0,0),this.og())},$getSize:function(e,t){var i=this.ng=this.gd.$getSize(0,0),n=webix.ui.view.prototype.$getSize.call(this,e,t),r=this.Mw||webix.ui.scrollSize;return"x"==this.s.scroll?(n[2]=Math.max(n[2],i[2])+r,n[3]=Math.min(n[3],i[3])+r):"y"==this.s.scroll&&(n[0]=Math.max(n[0],i[0])+r,n[1]=Math.min(n[1],i[1])+r),n},$setSize:function(e,t){var i=webix.ui.scrollSize;webix.ui.scrollSize=this.Mw||i,(webix.ui.view.prototype.$setSize.call(this,e,t)||webix.ui.QG)&&this.og(),webix.ui.scrollSize=i},scroll_setter:function(e){var t=webix.env.$customScroll;return"string"==typeof e&&0===e.indexOf("native-")&&(this.Mw=17,e=e.replace("native-"),webix.env.$customScroll=!1),e=webix.Scrollable.scroll_setter.call(this,e),webix.env.$customScroll=t,e},Qb:function(e){this.gd.destructor(),this.gd=e,this.gd.Xb=this,this.ed.appendChild(this.gd.x),this.resize()},showView:function(e){var t=webix.$$(e).$view.offsetTop-webix.$$(e).$view.parentNode.offsetTop;this.scrollTo(0,t)}},webix.Scrollable,webix.EventSystem,webix.ui.view),webix.TreeRenderStack={$init:function(){},pg:function(e){var t=this.data.Me[e.id];return this.callEvent("onItemRender",[e]),this.type.templateStart(e,this.type,t)+(e.$template?this.type["template"+e.$template](e,this.type,t):this.type.template(e,this.type,t))+this.type.templateEnd()},qg:function(e){return this.v.innerHTML=this.pg(e),this.v.firstChild},jb:function(e){var t="<div role='presentation' class='webix_tree_branch_"+e.$level+"'>"+this.pg(e);return e.open&&(t+=this.rg(e.id)),t+="</div>"},rg:function(e){var t="",i=this.data.branch[e];if(i){t+="<div role='presentation' class='webix_tree_leaves'>";for(var n=i.length-1,r=0;n>=r;r++){var o=this.getItem(i[r]);this.type.sg[o.$level]=r==n,t+=this.jb(o)}t+="</div>"}return t},render:function(e,t,i){if(webix.TreeRenderStack.tg=this,this.isVisible(this.s.id)&&!this.$blockRender){if(e){var n,r=this.getItem(e);if("add"!=i&&!(n=this.getItemNode(e)))return;switch(i){case"branch":var o=n.parentNode,a=this.Ne(r);webix.html.insertBefore(a,o),webix.html.remove(o),this.t=null;break;case"paint":case"update":var a=this.t[e]=this.qg(r);webix.html.insertBefore(a,n),webix.html.remove(n);break;case"delete":webix.html.remove(n.parentNode);break;case"add":var s;if(0==r.$parent)s=this.y.firstChild;else if(this.getItem(r.$parent).open&&(s=this.getItemNode(r.$parent))){if(!s.nextSibling){var l=webix.html.create("DIV",{class:"webix_tree_leaves"},"");s.parentNode.appendChild(l)}s=s.nextSibling}if(s){var h=this.data.getNextSiblingId(e);(h=this.getItemNode(h))&&(h=h.parentNode);var a=this.Ne(r);this.t[e]=a.firstChild,webix.html.insertBefore(a,h,s)}break;default:return!1}this.callEvent("onPartialRender",[e,t,i])}else this.callEvent("onBeforeRender",[this.data])&&(this.type.sg=[],this.y.innerHTML=this.rg(0),this.t=null,this.callEvent("onAfterRender",[]));return this.type.sg=0,webix.TreeRenderStack.tg=null,!0}},getItemNode:function(e){if(this.t)return this.t[e];this.t={};for(var t=this.y.getElementsByTagName("DIV"),i=0;i<t.length;i++){var n=t[i].getAttribute(this.ad);n&&(this.t[n]=t[i])}return this.getItemNode(e)},vg:1},webix.SelectionModel={$init:function(){this.wg=webix.toArray(),this.data.attachEvent("onStoreUpdated",webix.bind(this.xg,this)),this.data.attachEvent("onStoreLoad",webix.bind(this.yg,this)),this.data.attachEvent("onAfterFilter",webix.bind(this.zg,this)),this.data.attachEvent("onSyncApply",webix.bind(this.qF,this)),this.data.attachEvent("onIdChange",webix.bind(this.Ag,this)),this.$ready.push(this.uy)},uy:function(){("multiselect"==this.s.select||this.s.multiselect)&&webix.UE(this.$view,"mousedown",function(e){(e||event).shiftKey&&(webix.vy=this,webix.html.addCss(this,"webix_noselect",1))})},Ag:function(e,t){for(var i=this.wg.length-1;i>=0;i--)this.wg[i]==e&&(this.wg[i]=t)},zg:function(){for(var e=this.wg.length-1;e>=0;e--)if(this.data.getIndexById(this.wg[e])<0){var t=this.wg[e];this.removeCss(t,"webix_selected",!0),this.wg.splice(e,1),this.callEvent("onSelectChange",[t])}},xg:function(e,t,i){"delete"==i?this.loadBranch?this.qF():this.wg.remove(e):e||this.data.count()||this.data.jf||(this.wg=webix.toArray())},yg:function(){this.s.select&&this.data.each(function(e){e&&e.$selected&&this.select(e.id)},this)},qF:function(){for(var e=this.wg.length-1;e>=0;e--)this.exists(this.wg[e])||this.wg.splice(e,1)},Bg:function(e,t,i,n){var r=t?"onBeforeSelect":"onBeforeUnSelect";if(!this.callEvent(r,[e,t]))return!1;n&&(this.Dg=!0,this.unselectAll(),this.Dg=!1),t?this.addCss(e,"webix_selected",!0):this.removeCss(e,"webix_selected",!0),i?i.push(e):(t?this.wg.push(e):this.wg.remove(e),this.Cg(e));var r=t?"onAfterSelect":"onAfterUnSelect";return this.callEvent(r,[e]),!0},select:function(e,t){var i=arguments[2],n=arguments[3];if(!e)return this.selectAll();if(!webix.isArray(e)){if(n&&this.wg.length)return this.selectAll(this.wg[this.wg.length-1],e);var r=!1;return i||t||1==this.wg.length&&this.wg[0]==e||(r=!0),!r&&this.isSelected(e)?void(i&&this.unselect(e)):void this.Bg(e,!0,null,r)}for(var o=0;o<e.length;o++)this.select(e[o],o?1:t,i,n)},unselect:function(e){return e?void(this.isSelected(e)&&this.Bg(e,!1)):this.unselectAll()},selectAll:function(e,t){var i,n=[];i=e||t?this.data.getRange(e||null,t||null):this.data.getRange(),i.each(function(e){this.data.getMark(e.id,"webix_selected")||(this.wg.push(e.id),this.Bg(e.id,!0,n))},this),this.Cg(n)},unselectAll:function(){var e=[];this.wg.each(function(t){this.Bg(t,!1,e)},this),this.wg=webix.toArray(),this.Cg(e)},isSelected:function(e){return-1!=this.wg.find(e)},getSelectedId:function(e){switch(this.wg.length){case 0:return e?[]:"";case 1:return e?[this.wg[0]]:this.wg[0];default:return[].concat(this.wg)}},getSelectedItem:function(e){var t=this.getSelectedId(!0);if(t.length>1||e){for(var i=t.length-1;i>=0;i--)t[i]=this.getItem(t[i]);return t}return t.length?this.getItem(t[0]):void 0},Eg:function(e){return e.length>100||e.length>this.data.count/2},Cg:function(e){if("object"!=typeof e&&(e=[e]),e.length){if(this.Eg(e))this.data.refresh();else for(var t=0;t<e.length;t++)this.render(e[t],this.data.getItem(e[t]),"update");this.Dg||this.callEvent("onSelectChange",[e])}}},webix.ready(function(){webix.event(document.body,"mouseup",function(e){webix.vy&&(webix.html.removeCss(webix.vy,"webix_noselect"),webix.vy=null)})}),webix.TreeDataMove={$init:function(){},copy:function(e,t,i,n){return n=n||{},n.copy=!0,this.move(e,t,i,n)},Kd:function(e,t,i){if(t&&e){var n=this.getBranchIndex(e);return n+(i==this&&i.getBranchIndex(t)<n?0:1)}},Lt:function(e,t){var i=this.data.branch[e];if(i&&i.length)for(var n=0;n<i.length;n++){if(i[n]==t)return!0;if(this.Lt(i[n],t))return!0}return!1},move:function(e,t,i,n){n=n||{},t=t||0;var r=n.newId||e,o=n.parent||0;if(i=i||this,i.data){if(!webix.isArray(e)){if(this!=i||n.copy){if(r=i.data.add(i.Jd(this.getItem(e),r),t,o||0),this.data.branch[e]&&i.getBranchIndex){var a=this.data.vf;this.data.vf=function(e){var t=webix.copy(e);return delete t.$parent,delete t.$level,delete t.$child,i.data.pull[t.id]&&(t.id=webix.uid()),t};var s={data:this.serialize(e,!0),parent:r};this.data.vf=a,i.parse(s)}n.copy||this.data.remove(e)}else{if(e==o||this.Lt(e,o))return;var l=this.getItem(e),h=this.data.branch[o];h||(h=this.data.branch[o]=[]);var c=this.data.branch[l.$parent],u=webix.PowerArray.find.call(c,e);if(0>t&&(t=h.length),c===h&&t===u)return;if(webix.PowerArray.removeAt.call(c,u),webix.PowerArray.insertAt.call(h,e,Math.min(h.length,t)),c.length||delete this.data.branch[l.$parent],l.$parent&&"0"!=l.$parent&&this.getItem(l.$parent).$count--,o&&"0"!=o){var d=i.getItem(o);d.$count++,this.Fg(l,d.$level+1)}else this.Fg(l,1);l.$parent=o,i.data.callEvent("onDataMove",[e,t,o,h[t+1]])}return this.refresh(),r}for(var f=0;f<e.length;f++){var p=this.move(e[f],t,i,n);t=i.Kd(p,e[f+1],this)}}},Fg:function(e,t){e.$level=t;var i=this.data.branch[e.id];if(i)for(var n=0;n<i.length;n++)this.Fg(this.getItem(i[n]),t+1)},Gg:function(e){e&&!e.header&&this.open(e)},$dropAllow:function(e){if(e.from!=e.to)return!0;for(var t=0;t<e.source.length;t++)if(e.source==e.target||this.Lt(e.source,e.target))return!1;return!0},Jd:function(e,t){var i=webix.DataMove.Jd.call(this,e,t);return delete i.open,i}},webix.TreeDataLoader={$init:function(){this.data.attachEvent("onStoreUpdated",webix.bind(this.Hg,this),null,!0),this._e=this.Ig},Ig:function(e,t,i,n){var r=0===t?{parent:encodeURIComponent(e)}:null;webix.DataLoader.prototype._e.call(this,e,t,i,n,r)},loadBranch:function(e,t,i){e=e||0,this.data.url=i||this.data.url,this.callEvent("onDataRequest",[e,t,this.data.url])&&this.data.url&&this.data.feed.call(this,e,0,t,i)},Hg:function(e,t,i){i&&"add"!=i&&"delete"!=i&&"branch"!=i||this.data.Kg(this)}},webix.TreeStore={name:"TreeStore",$init:function(){this.Cf={showSubItems:!0},this.branch={0:[]},this.attachEvent("onParse",function(e,t){this.Lg(e.child),e.getInfo(t).parent}),this.attachEvent("onClearAll",webix.bind(function(){this.Mg=null},this))},filterMode_setter:function(e){return webix.extend(this.Cf,e,!0)},Af:function(e){if(this.Mg&&!e){this.branch=this.Mg,this.order=webix.toArray(webix.copy(this.branch[0]));for(var t in this.branch)"0"!=t&&(this.getItem(t).$count=this.branch[t].length);delete this.Mg}},Bf:function(e,t,i,n){i&&this.Mg||(this.Mg=this.branch,this.branch=webix.clone(this.branch)),this.branch[0]=this.Ng(e,t,this.branch[0],1,n||{})},Ng:function(e,t,i,n,r){for(var o=[],a=r.level&&r.level!=n,s=0;s<i.length;s++){var l=i[s],h=this.getItem(l),c=!1,u=this.branch[l];if(a)c=!0;else if(e(this.getItem(l),t)){if(o.push(l),!1!==r.openParents)for(var d=this.getParentId(l);d&&"0"!=d;)this.getItem(d).open=1,d=this.getParentId(d);if(r.level||r.showSubItems)continue}else c=!0;if((a||!r.level)&&u){var f=this.branch[l]=this.Ng(e,t,u,n+1,r);h.$count=f.length,c&&f.length&&o.push(l)}}return o},count:function(){if(this.order.length)return this.order.length;var e=0;return this.eachOpen(function(){e++}),e},kG:function(e,t,i,n){if(e[i]){for(var r=e[n]=e[i],o=0;o<r.length;o++)this.getItem(r[o]).$parent=n;delete e[i]}if(e[t]){var a=webix.PowerArray.find.call(e[t],i);a>=0&&(e[t][a]=n)}},changeId:function(e,t){if(e!=t){var i=this.getItem(e).$parent;return this.kG(this.branch,i,e,t),this.Mg&&this.kG(this.Mg,i,e,t),webix.DataStore.prototype.changeId.call(this,e,t)}},clearAll:function(e){this.branch={0:[]},webix.DataStore.prototype.clearAll.call(this,e)},getPrevSiblingId:function(e){var t=this.branch[this.getItem(e).$parent],i=webix.PowerArray.find.call(t,e)-1;return i>=0?t[i]:null},getNextSiblingId:function(e){var t=this.branch[this.getItem(e).$parent],i=webix.PowerArray.find.call(t,e)+1;return i<t.length?t[i]:null},getParentId:function(e){return this.getItem(e).$parent},getFirstChildId:function(e){var t=this.branch[e];return t&&t.length?t[0]:null},isBranch:function(e){return!!this.branch[e]},getBranchIndex:function(e){var t=this.branch[this.pull[e].$parent];return webix.PowerArray.find.call(t,e)},Lg:function(e){this.Og="string"==typeof e?function(t){var i=t[e];return i&&delete t[e],i}:e},kf:function(e,t){for(var i=e.parent||0,n=0;n<t.length;n++){var r=this.driver.getDetails(t[n]),o=this.id(r),a=!!this.pull[o];a?(r=webix.extend(this.pull[o],r,!0),this.pf&&this.pf(r)):(this.qf&&this.qf(r),this.pull[o]=r),this.Pg(r,i,0,a,e.from?1*e.from+n:0)}var s=this.pull[i]||{},l=this.branch[i]||[];s.$count=l.length,delete s.webix_kids,e.size&&e.size!=l.length&&(l[e.size-1]=webix.undefined)},Pg:function(e,t,i,n,r){e.$count=0,e.$parent="0"!=t?t:0,e.$level=i||("0"!=t?this.pull[t].$level+1:1);var o=this.branch[e.$parent];if(o||(o=this.branch[e.$parent]=[]),this.Mg&&(this.Mg[e.$parent]=o),!n){o[r||o.length]=e.id}var a=this.Og(e);if(e.webix_kids)return e.$count=-1;if(!a)return e.$count=0;webix.isArray(a)||(a=[a]);for(var s=0;s<a.length;s++){var l=webix.DataDriver.json.getDetails(a[s]),h=this.id(l);n=!!this.pull[h],n?(l=webix.extend(this.pull[h],l,!0),this.pf&&this.pf(l)):(this.qf&&this.qf(l),this.pull[h]=l),this.Pg(l,e.id,e.$level+1,n)}var c=this.branch[e.id];c&&(e.$count=c.length)},Kg:function(e){this.order=webix.toArray(),this.Qg(0,e)},Qg:function(e,t){for(var i=this.branch[e],n=0;n<i.length;n++){var r=i[n];this.order.push(r);var o=this.pull[r];o&&o.open&&(-1==o.$count?t.loadBranch(r):o.$count&&this.Qg(r,t))}},provideApi:function(e,t){for(var i=["getPrevSiblingId","getNextSiblingId","getParentId","getFirstChildId","isBranch","getBranchIndex","filterMode_setter"],n=0;n<7;n++)e[i[n]]=this.Ef(this,i[n]);e.getIndexById||webix.DataStore.prototype.provideApi.call(this,e,t)},getTopRange:function(){return webix.toArray([].concat(this.branch[0])).map(function(e){return this.getItem(e)},this)},eachChild:function(e,t,i,n){var r=this.branch;n&&this.Mg&&(r=this.Mg);var o=r[e];if(o)for(var a=0;a<o.length;a++)o[a]&&t.call(i||this,this.getItem(o[a]))},each:function(e,t,i,n){this.eachChild(n||0,function(n){var r=this.branch;e.call(t||this,n),i&&this.Mg&&(r=this.Mg),n&&r[n.id]&&this.each(e,t,i,n.id)},this,i)},eachOpen:function(e,t,i){this.eachChild(i||0,function(i){e.call(t||this,i),this.branch[i.id]&&i.open&&this.eachOpen(e,t,i.id)})},eachSubItem:function(e,t){var i=this.branch[e||0];if(i)for(var n=0;n<i.length;n++){var r=i[n];this.branch[r]?(t.call(this,this.getItem(r),!0),this.eachSubItem(r,t)):t.call(this,this.getItem(r),!1)}},eachLeaf:function(e,t){var i=this.branch[e||0];if(i)for(var n=0;n<i.length;n++){var r=i[n];this.branch[r]?this.eachLeaf(r,t):t.call(this,this.getItem(r),!1)}},xf:function(e,t){var i=this.sorting.create(e);for(var n in this.branch){for(var r=this.branch[n],o=[],a=0;a<r.length;a++)o.push(this.pull[r[a]]);o.sort(i);for(var a=0;a<r.length;a++)o[a]=o[a].id;this.branch[n]=o}return t},add:function(e,t,i){var n=!1,r=this.getItem(i||0);if(r&&(this.branch[r.id]||(n=!0),++r.$count||(r.$count=1)),this.branch[i||0]=this.order=webix.toArray(this.branch[i||0]),e.$count=0,e.$level=r?r.$level+1:1,e.$parent=r?r.id:0,this.Mg){var o=this.Mg[i||0];if(o||(o=this.Mg[i]=this.order),this.order!==o){var a=o.length;!t&&this.branch[i||0].length&&(a=0),o=webix.toArray(o),e.id=e.id||webix.uid(),o.insertAt(e.id,a)}}var s=webix.DataStore.prototype.add.call(this,e,t);return n&&this.refresh(i),s},Rg:function(e,t){var i=this.pull[e];if(this.branch[i.id]&&this.branch[i.id].length>0)for(var n=this.branch[e],r=0;r<n.length;r++)this.Rg(n[r],!0);delete this.branch[e],this.Mg&&delete this.Mg[e],delete this.pull[e],this.Me[e]&&delete this.Me[e]},Wy:function(e,t,i){var n=e[t];1==n.length&&n[0]==i&&t?delete e[t]:webix.toArray(n).remove(i)},remove:function(e){if(webix.isArray(e))for(var t=0;t<e.length;t++)this.remove(e[t]);else{var i=this.pull[e],n=i.$parent||0;if(!1===this.callEvent("onBeforeDelete",[e]))return!1;this.Rg(e),this.callEvent("onAfterDelete",[e]);var r=this.pull[n];this.Wy(this.branch,n,e),this.Mg&&this.Wy(this.Mg,n,e);var o=0;r&&--r.$count<=0&&(r.$count=0,r.open=0,o=1),this.callEvent("onStoreUpdated",[e,i,"delete"]),o&&this.refresh(r.id)}},getBranch:function(e){var t=[],i=(this.Mg||this.branch)[e];if(i)for(var n=0;n<i.length;n++)t[n]=this.pull[i[n]];return t},serialize:function(e,t){this.branch;t&&this.Mg&&this.Mg;for(var i=this.branch[e||0],n=[],r=0;r<i.length;r++){var o,a=this.pull[i[r]];if(this.vf){if(!1===(o=this.vf(a)))continue}else o=webix.copy(a);this.branch[a.id]&&(o.data=this.serialize(a.id,t)),n.push(o)}return n}},webix.TreeType={space:function(e,t){for(var i="",n=1;n<e.$level;n++)i+="<div class='webix_tree_none'></div>";return i},icon:function(e,t){return e.$count?e.open?"<div class='webix_tree_open'></div>":"<div class='webix_tree_close'></div>":"<div class='webix_tree_none'></div>"},checkbox:function(e,t){return e.nocheckbox?"":"<input type='checkbox' class='webix_tree_checkbox' "+(e.checked?"checked":"")+(e.disabled?" disabled":"")+">"},folder:function(e,t){return e.icon?"<div class='webix_tree_file webix_tree_"+e.icon+"'></div>":e.$count?e.open?"<div class='webix_tree_folder_open'></div>":"<div class='webix_tree_folder'></div>":"<div class='webix_tree_file'></div>"}},webix.TreeAPI={open:function(e,t){if(e){var i=this.getItem(e);i.$count&&!i.open&&(this.callEvent("onBeforeOpen",[e])&&(i.open=!0,this.data.callEvent("onStoreUpdated",[e,0,"branch"]),this.callEvent("onAfterOpen",[e])),t&&"0"!=e&&this.open(this.getParentId(e),t))}},close:function(e){if(e){var t=this.getItem(e);t.open&&this.callEvent("onBeforeClose",[e])&&(t.open=!1,this.data.callEvent("onStoreUpdated",[e,0,"branch"]),this.callEvent("onAfterClose",[e]))}},openAll:function(e){this.data.eachSubItem(e||0,function(e,t){t&&(e.open=!0)}),this.data.refresh()},closeAll:function(e){this.data.eachSubItem(e||0,function(e,t){t&&(e.open=!1)}),this.data.refresh()},Sg:function(e,t,i){if(this.s.threeState)return this.Tg(e,null!==t?t:"");var n,r=this.getItem(e),o=i?i.target||i.srcElement:null;n=o&&"checkbox"==o.type?!!o.checked:null!==t?t:!r.checked,r.checked=n,this.callEvent("onItemCheck",[e,r.checked,i])},isBranchOpen:function(e){if("0"==e)return!0;var t=this.getItem(e);return!!t.open&&this.isBranchOpen(t.$parent)},getOpenItems:function(){var e=[];for(var t in this.data.branch)this.exists(t)&&this.getItem(t).open&&e.push(t);return e},getState:function(){return{open:this.getOpenItems(),select:this.getSelectedId(!0)}},Ug:function(e,t){var i=this.data.attachEvent("onStoreLoad",function(){e.setState.call(e,t),e.data.detachEvent(i),e=null})},setState:function(e){if(e.open){this.closeAll();for(var t=e.open,i=0;i<t.length;i++){var n=this.getItem(t[i]);if(n&&n.$count&&(n.open=!0,-1==n.$count))return this.Ug(this,e),this.refresh(),0}this.refresh()}if(e.select&&this.select){var r=e.select;this.unselect();for(var i=0;i<r.length;i++)this.exists(r[i])&&this.select(r[i],!0)}return 1}},webix.TreeClick={webix_tree_open:function(e,t){return this.close(t),!1},webix_tree_close:function(e,t){return this.open(t),!1},webix_tree_checkbox:function(e,t){return this.Sg(t,null,e),!1}},webix.TreeCollection=webix.proto({name:"TreeCollection",$init:function(){webix.extend(this.data,webix.TreeStore,!0),this.data.provideApi(this,!0),webix.extend(this,webix.TreeDataMove,!0)}},webix.TreeDataLoader,webix.DataCollection),webix.AutoScroll={ch:function(e,t){var i=1,n=0,r=this.s.dragscroll;"string"==typeof r&&(n=-1!=r.indexOf("x"),i=-1!=r.indexOf("y"));var o=this.Vf||this.$view,a=webix.html.offset(o),s=a.y,l=s+o.offsetHeight,h=a.x,c=h+o.offsetWidth,r=this.getScrollState(),u=!1,d=Math.max(this.type&&!isNaN(parseFloat(this.type.height))?this.type.height+5:0,40);if(i){var f=this.s;if(f.topSplit){var p=this.ug(this.getIdByIndex(f.topSplit-1),this.columnId(0));s+=p.top+p.height}e.y<s+d?(this.WC(r.x,r.y-2*d,e),u=!0):e.y>l-d&&(this.WC(r.x,r.y+2*d,e),u=!0)}n&&(e.x<h+d?(this.WC(r.x-2*d,r.y,e),u=!0):e.x>c-d&&(this.WC(r.x+2*d,r.y,e),u=!0)),u&&(this.bh=webix.delay(this.ch,this,[e],100))},WC:function(e,t,i){this.callEvent("onBeforeAutoScroll",[i])&&this.scrollTo(e,t)}},webix.DragOrder={Vg:!0,$drag:function(e,t){var i=webix.DragItem.$drag.call(this,e,t);if(i){var n=webix.DragControl.getContext();this.getBranchIndex&&(this.Wg=this.Xg?16*this.getItem(n.start).$level:0),n.fragile||this.addCss(n.start,"webix_transparent")}return i},WB:function(e,t){return webix.DragItem.WB(e,t)},$dragPos:function(e,t,i){var n=webix.html.offset(this.$view),r=n.x+(this.Xg?1+this.Wg:1),o=e.y,a=this.s,s="x"==a.layout;s&&(o=n.y+(this.Xg?+n.height-webix.ui.scrollSize-1:1),r=e.x),i.style.display="none";var l=document.elementFromPoint(r,o);if(l!=this.Yg){var h=webix.$$(l);if(h&&h==this){var c=this.locate(l,!0);!c&&webix.DragControl.td&&(c=this.locate(webix.DragControl.td,!0));var u=webix.DragControl.getContext().start;if(this.XC=!0,c){if(c!=this.Yg){if(c!=u){var d,f;this.getBranchIndex?(d={parent:this.getParentId(c)},f=this.getBranchIndex(c)):(d={},f=this.getIndexById(c)),this.callEvent("onBeforeDropOrder",[u,f,t,d])&&(this.move(u,f,this,d),this.Yg=c)}webix.DragControl.Cd=this.w}}else if(c="$webix-last",this.Yg!=c){if(!this.callEvent("onBeforeDropOrder",[u,-1,t,{parent:0}]))return;this.Yg=c}}}if(i.style.display="block",s)if(e.y=n.y,e.x=e.x-18,e.x<n.x)e.x=n.x;else{var p=n.x+this.$view.offsetWidth-60;e.x>p&&(e.x=p)}else if(n.y+=this.$g,e.x=this.Wg||n.x,e.y=e.y-18,e.y<n.y)e.y=n.y;else{var p=n.y+this.$view.offsetHeight-60;e.y>p&&(e.y=p)}this.bh&&(this.bh=window.clearTimeout(this.bh)),this.bh=webix.delay(this.ch,this,[webix.html.pos(t),this.locate(t)||null],250),webix.DragControl.Ed=!0},$dragIn:function(){return!1},$drop:function(e,t,i){this.bh&&(this.XC=null,this.bh=window.clearTimeout(this.bh));var n=webix.DragControl.getContext(),r=n.start;this.removeCss(r,"webix_transparent");var o=this.getIndexById(r);this.callEvent("onAfterDropOrder",[r,o,i]),n.fragile&&this.refresh()}},webix.DragItem={_g:function(e,t,i){t||webix.DragControl.addDrop(e.w,e,!0),i||webix.DragControl.addDrag(e.w,e),this.attachEvent("onDragOut",function(e,t){this.$dragMark(e,t)}),this.attachEvent("onBeforeAutoScroll",function(){var e=webix.DragControl.getContext();return!(!webix.DragControl.sd||!e||e.to!==this&&!this.XC)})},drag_setter:function(e){return e&&(webix.extend(this,webix.AutoScroll,!0),"order"==e&&webix.extend(this,webix.DragOrder,!0),"inner"==e&&(this.ah=!0),this._g(this,"source"==e,"target"==e),delete this.drag_setter),e},$dragIn:function(e,t,i){var n=this.locate(i)||null,r=webix.DragControl.Gd;if((this.ah||r.from.ah)&&r.from!==this)return!1;var o=webix.DragControl.getMaster(t),a=this.getItemNode(n,i)||this.y;return a==webix.DragControl.Dd?a:(r.target=n,r.to=o,this.bh&&(this.bh=window.clearTimeout(this.bh)),this.bh=webix.delay(function(e,t){this.Gg(t),this.ch(e,t)},this,[webix.html.pos(i),n],250),this.$dropAllow(r,i)&&this.callEvent("onBeforeDragIn",[r,i])?(this.$dragMark(r,i),a):(r.to=r.target=null,this.bh&&(this.bh=window.clearTimeout(this.bh)),null))},$dropAllow:function(){return!0},Gg:function(e){},_B:function(e){return e&&"object"==typeof e?""+e:e},$dragOut:function(e,t,i,n){var r=(this.x.contains(i)?this.locate(n):null)||null,o=webix.DragControl.Gd;return""+(o.target||"")==""+(r||"")?null:(this.bh&&(this.XC=null,this.bh=window.clearTimeout(this.bh)),o.target=o.to=null,this.callEvent("onDragOut",[o,n]),null)},$drop:function(e,t,i){this.bh&&(this.bh=window.clearTimeout(this.bh));var n=webix.DragControl.Gd;n.to=this;var r=this._B(n.target);this.getBranchIndex?r&&(n.parent=this.getParentId(r),n.index=this.getBranchIndex(r)):n.index=r?this.getIndexById(r):this.count(),this.$dragMark({},i),n.from&&n.from!=n.to&&n.from.callEvent&&n.from.callEvent("onBeforeDropOut",[n,i]),this.callEvent("onBeforeDrop",[n,i])&&(this.dh(n,i),this.callEvent("onAfterDrop",[n,i]))},dh:function(e,t){if(e.from&&e.from.move){var i={parent:e.parent,mode:e.pos};e.from.move(e.source,e.index,e.to,i)}},WB:function(e,t){if(this.getItemNode){var i=this.locate(t,!0),n=i?this.getItemNode(i):null;return n?webix.html.offset(n):n}},$drag:function(e,t){var i=this.locate(t,!0);if(i){var n=[i];if(this.getSelectedId&&!this.Vg){var r=this.getSelectedId(!0,!0);if(r&&r.length>1&&-1!=webix.PowerArray.find.call(r,i)){for(var o={},n=[],a=0;a<r.length;a++)o[r[a]]=!0;for(var a=0;a<this.data.order.length;a++){var s=this.data.order[a];o[s]&&n.push(s)}}}var l=webix.DragControl.Gd={source:n,start:i};if(l.fragile=this.addRowCss&&webix.env.touch&&(webix.env.isWebKit||webix.env.isFF),l.from=this,this.callEvent("onBeforeDrag",[l,t]))return webix.Touch&&(webix.Touch.km=null),l.html||this.$dragHTML(this.getItem(i),t)}return null},$dragHTML:function(e,t){return this.jb(e)},$dragMark:function(e,t){var i=null;return e.target&&(i=this._B(e.target)),this.eh&&this.eh!=i&&(e.fragile||this.removeCss(this.eh,"webix_drag_over"),this.eh=null),!this.eh&&i?(this.eh=i,e.fragile||this.addCss(i,"webix_drag_over"),i):!!e.to}},webix.Group={$init:function(){webix.extend(this.data,webix.GroupStore),this.data.attachEvent("onClearAll",webix.bind(function(){this.data.nf=this.data.fh=null,this.gh=0},this))},group:function(e){this.data.ungroup(!0),this.data.group(e)},ungroup:function(e){this.data.ungroup(e)}},webix.GroupMethods={sum:function(e,t){t=t||this;for(var i=0,n=0;n<t.length;n++)i+=1*e(t[n]);return i},min:function(e,t){t=t||this;for(var i=1/0,n=0;n<t.length;n++)1*e(t[n])<i&&(i=1*e(t[n]));return 1*i},max:function(e,t){t=t||this;for(var i=-1/0,n=0;n<t.length;n++)1*e(t[n])>i&&(i=1*e(t[n]));return 1*i},count:function(e,t){for(var i=0,n=0;n<t.length;n++){var r=e(t[n]);null!==r&&void 0!==r&&i++}return i},any:function(e,t){return e(t[0])},string:function(e,t){return e.$name}},webix.GroupStore={$init:function(){this.attachEvent("onClearAll",this.oz)},oz:function(){this.nf=this.fh=null,this.gh=0},ungroup:function(e){return this.getBranchIndex?this.hh.apply(this,arguments):void(this.nf&&(this.order=this.nf,this.pull=this.fh,this.fh=this.nf=null,e||this.callEvent("onStoreUpdated",[])))},mf:function(e){this.blockEvent(),this.group(e),this.unblockEvent()},ih:function(e){if("function"==typeof e)return e;var t=function(t){return t[e]};return t.$name=e,t},group:function(e){if(this.getBranchIndex)return this.jh.apply(this,arguments);"string"==typeof e&&(e={by:e,map:{}});var t="function"==typeof e.by?"value":e.by,i=this.ih(e.by);e.map[t]||(e.map[t]=[t,this.kh]);var n={},r=[];this.each(function(t){var o=i(t);n[o]||(r.push({id:o,$group:!0,$row:e.row}),n[o]=webix.toArray()),n[o].push(t)});for(var o in e.map){var a=e.map[o][1]||"any",s=this.ih(e.map[o][0]);"function"!=typeof a&&(a=webix.GroupMethods[a]);for(var l=0;l<r.length;l++)r[l][o]=a.call(this,s,n[r[l].id])}this.nf=this.order,this.fh=this.pull,this.order=webix.toArray(),this.pull={};for(var l=0;l<r.length;l++){var h=this.id(r[l]);this.pull[h]=r[l],this.order.push(h),this.qf&&this.qf(r[l])}this.callEvent("onStoreUpdated",[])},jh:function(e,t){this.gh=(this.gh||0)+1;var i;"string"==typeof e?(i={by:this.ih(e),map:{}},i.map[e]=[e]):i="function"==typeof e?{by:e,map:{}}:e;var n;t?n=this.getItem(t).$level:(t=0,n=0);for(var r=this.branch[t],o=this.ih(i.by),a=[],s=[],l=0;l<r.length;l++){var h=this.getItem(r[l]),c=o(h),u=n+"$"+c,d=this.branch[u];if(!d){var f=this.pull[u]={id:u,value:c,$group:!0,$row:i.row};this.qf&&this.qf(f),s.push(f),d=this.branch[u]=[],d.lh=[],a.push(u)}d.push(h.id),d.lh.push(h)}this.branch[t]=a;for(var p in i.map){var m=i.map[p][1]||"any",g=this.ih(i.map[p][0]);"function"!=typeof m&&(m=webix.GroupMethods[m]);for(var l=0;l<s.length;l++)s[l][p]=m.call(this,g,this.branch[s[l].id].lh)}for(var l=0;l<s.length;l++){var v=s[l];if(this.hasEvent("onGroupCreated")&&this.callEvent("onGroupCreated",[v.id,v.value,this.branch[v.id].lh]),i.footer){var b="footer$"+v.id,w=this.pull[b]={id:b,$footer:!0,value:v.value,$level:n,$count:0,$parent:v.id,$row:i.footer.row};for(var p in i.footer){var m=i.footer[p][1]||"any",g=this.ih(i.footer[p][0]);"function"!=typeof m&&(m=webix.GroupMethods[m]),w[p]=m.call(this,g,this.branch[s[l].id].lh)}this.branch[v.id].push(w.id),this.callEvent("onGroupFooter",[w.id,w.value,this.branch[v.id].lh])}delete this.branch[v.id].lh}this.mh(a,t,n+1),this.callEvent("onStoreUpdated",[])},hh:function(e,t,i){if(i||this.gh){this.gh=Math.max(0,this.gh-1),t=t||0;for(var n=[],r=this.branch[t],o=0;o<r.length;o++){var a=r[o],s=this.branch[a];s&&(n=n.concat(s)),delete this.pull[a],delete this.branch[a]}this.branch[t]=n;for(var o=n.length-1;o>=0;o--)this.pull[n[o]].$footer&&n.splice(o,1);this.mh(n,0,1),e||this.callEvent("onStoreUpdated",[])}},mh:function(e,t,i){t&&(this.getItem(t).$count=e.length);for(var n=0;n<e.length;n++){var r=this.pull[e[n]];r.$level=i,r.$parent=t;var o=this.branch[r.id];o&&this.mh(o,r.id,i+1)}}},webix.clipbuffer={nh:null,oh:null,ph:0,init:function(){return null!==this.nh?this.nh:(webix.destructors.push({obj:this}),this.nh=document.createElement("textarea"),this.nh.className="webix_clipbuffer",this.nh.setAttribute("webixignore",1),this.nh.setAttribute("spellcheck","false"),this.nh.setAttribute("autocapitalize","off"),this.nh.setAttribute("autocorrect","off"),this.nh.setAttribute("autocomplete","off"),document.body.appendChild(this.nh),webix.event(document.body,"keydown",webix.bind(function(e){var t=e.keyCode,i=!(!e.ctrlKey&&!e.metaKey);86===t&&i&&webix.delay(this.rh,this,[e],100)},this)),this.nh)},destructor:function(){this.nh=null},set:function(e){this.init(),this.nh.value=e,this.focus()},focus:function(){this.UA()||(this.init(),this.nh.focus(),this.nh.select())},UA:function(){var e="";return void 0!==window.getSelection?e=""+window.getSelection():void 0!==document.selection&&"Text"==document.selection.type&&(e=document.selection.createRange().text),!!e},rh:function(e){if((e.target||e.srcElement)===this.nh){var t=this.nh.value,i=webix.UIManager.getFocus();!i||i.getEditor&&i.getEditor()||(i.callEvent("onPaste",[t]),this.nh.select())}}},webix.CopyPaste={clipboard_setter:function(e){return(!0===e||1===e)&&(e="modify"),this.attachEvent("onAfterSelect",function(e){if(!this.getEditor||!this.getEditor()){var t=this.getItem(e),i=this.type.templateCopy(t);webix.clipbuffer.set(i,this),webix.clipbuffer.focus(),webix.UIManager.setFocus(this)}}),this.attachEvent("onPaste",function(e){webix.isUndefined(this.rh[this.s.clipboard])||this.rh[this.s.clipboard].call(this,e)}),this.attachEvent("onFocus",function(){webix.clipbuffer.focus()}),this.attachEvent("onItemClick",function(e){this.wg&&-1===this.wg.find(e)||(webix.clipbuffer.focus(),webix.UIManager.setFocus(this))}),e},rh:{insert:function(e){this.add({value:e})},modify:function(e){for(var t=this.getSelectedId(!0),i=0;i<t.length;i++)this.getItem(t[i]).value=e,this.refresh(t[i])},custom:function(e){}},templateCopy_setter:function(e){this.type.templateCopy=webix.template(e)},type:{templateCopy:function(e){return this.template(e)}}},webix.KeysNavigation={$init:function(){this.getSelectedId&&(this.attachEvent("onAfterRender",this.cF),this.attachEvent("onAfterSelect",webix.once(function(){if(this.count()>1&&this.y){var e=this.y.querySelector("["+this.ad+"]");e&&e.setAttribute("tabindex","-1")}})))},cF:function(){var e=this.getSelectedId(!0);if(!e.length||!this.getItemNode(e[0])){var t=this.y.querySelector("["+this.ad+"]");t&&t.setAttribute("tabindex","0")}},sh:function(e){return function(t,i){var n=i.srcElement||i.target;if(!n.getAttribute("webixignore")){var r=n.tagName;if("INPUT"==r||"TEXTAREA"==r||"SELECT"==r)return!0}return!(t&&t.moveSelection&&t.config.navigation&&!t.Eb)||(webix.html.preventEvent(i),t.moveSelection(e,{shift:i.shiftKey,ctrl:i.ctrlKey}))}},moveSelection:function(e,t,i){var n=this.s;if(!n.disabled){var r=this.getSelectedId(!0),o=this.count&&("x"==n.layout||n.xCount>1);if(("right"==e||"left"==e)&&this.ar){var a=webix.$$(this.ar);return a.Uq(!0),void("x"===a.config.layout?a.moveSelection(e):webix.UIManager.setFocus(a))}if(!r.length&&this.count()){if("down"==e||"right"==e&&o)e="top";else{if(!("up"==e||"left"==e&&o))return;e="bottom"}r=[this.getFirstId()]}if(1==r.length){r=r[0];var s=r;if("left"==e&&this.close)return this.close(r);if("right"==e&&this.open)return this.open(r);if("top"==e)r=this.getFirstId();else if("bottom"==e)r=this.getLastId();else if("up"==e||"left"==e||"pgup"==e){var l=this.getIndexById(r),h="pgup"==e?10:1;r=this.getIdByIndex(Math.max(0,l-h))}else{if("down"!=e&&"right"!=e&&"pgdown"!=e)return;var l=this.getIndexById(r),h="pgdown"==e?10:1;r=this.getIdByIndex(Math.min(this.count()-1,l+h))}if(this.OD&&(r=this.OD(r,s,e)),this.showItem(r),this.select(r),this.getSubMenu&&this.getSubMenu(r)&&this.Yq(r,this.getItemNode(r)),!this.config.clipboard&&!1!==i){var c=this.getItemNode(r);c&&c.focus()}}return!1}},navigation_setter:function(e){return e&&!webix.UIManager.th&&(webix.UIManager.th=!0,webix.UIManager.addHotKey("up",this.sh("up")),webix.UIManager.addHotKey("down",this.sh("down")),webix.UIManager.addHotKey("right",this.sh("right")),webix.UIManager.addHotKey("left",this.sh("left")),webix.UIManager.addHotKey("shift+up",this.sh("up")),webix.UIManager.addHotKey("shift+down",this.sh("down")),webix.UIManager.addHotKey("shift+right",this.sh("right")),webix.UIManager.addHotKey("shift+left",this.sh("left")),webix.UIManager.addHotKey("ctrl+shift+up",this.sh("up")),webix.UIManager.addHotKey("ctrl+shift+down",this.sh("down")),webix.UIManager.addHotKey("ctrl+shift+right",this.sh("right")),webix.UIManager.addHotKey("ctrl+shift+left",this.sh("left")),webix.UIManager.addHotKey("pageup",this.sh("pgup")),webix.UIManager.addHotKey("pagedown",this.sh("pgdown")),webix.UIManager.addHotKey("home",this.sh("top")),webix.UIManager.addHotKey("end",this.sh("bottom"))),e}},webix.protoUI({name:"tree",defaults:{scroll:"a",navigation:!0},$init:function(){this.x.className+=" webix_tree",webix.extend(this.data,webix.TreeStore,!0),webix.extend(this.on_click,webix.TreeClick),this.attachEvent("onAfterRender",this.Jf),this.attachEvent("onPartialRender",this.Jf),this.data.provideApi(this,!0),this.x.setAttribute("role","tree")},ad:"webix_tm_id",on_context:{},on_dblclick:{webix_tree_checkbox:function(){return this.on_click.webix_tree_checkbox?this.on_click.webix_tree_checkbox.apply(this,arguments):void 0}},$fixEditor:function(e){var t=this.getItemNode(e.id).querySelector("span");if(t){""===t.innerHTML&&(t.innerHTML="&nbsp;");var i=t.offsetLeft;e.node.style.width=this.$view.scrollWidth-i-10+"px",e.node.style.marginLeft=i+"px",e.node.style.left="0px"}},on_click:{webix_tree_item:function(e,t,i){if(this.s.activeTitle){this.getItem(t).open?this.close(t):this.open(t)}if(this.s.select)if("multiselect"==this.s.select||this.s.multiselect){var n=e.ctrlKey||e.metaKey||"touch"==this.s.multiselect;if("level"==this.s.multiselect&&(n||e.shiftKey)){var r=this.getSelectedId(!0)[0];if(r&&this.getParentId(t)!=this.getParentId(r))return}this.select(t,!1,n,e.shiftKey)}else this.select(t)}},rh:{insert:function(e){var t=this.getSelectedId()||"0";this.add({value:e},null,t)},modify:function(e){for(var t=this.getSelectedId(!0),i=0;i<t.length;i++)this.getItem(t[i]).value=e,this.refresh(t[i])},custom:function(e){}},Xg:!0,$dragHTML:function(e){return"<div class='borderless'>"+this.type.template(e,this.type)+"</div>"},type:webix.extend({template:function(e,t){return(t["template"+e.level]||t.templateCommon).apply(this,arguments)},classname:function(e,t,i){var n="webix_tree_item";return e.$css&&("object"==typeof e.$css&&(e.$css=webix.html.createCss(e.$css)),n+=" "+e.$css),i&&i.$css&&(n+=" "+i.$css),n},aria:function(e,t,i){return'role="treeitem"'+(i&&i.webix_selected?' aria-selected="true" tabindex="0"':' tabindex="-1"')+(e.$count?'aria-expanded="'+(e.open?"true":"false")+'"':"")+'aria-level="'+e.$level+'"'},templateCommon:webix.template("{common.icon()} {common.folder()} <span>#value#</span>"),templateStart:webix.template('<div webix_tm_id="#id#" class="{common.classname()}" {common.aria()}>'),templateEnd:webix.template("</div>"),templateCopy:webix.template("#value#")},webix.TreeType)},webix.AutoTooltip,webix.Group,webix.TreeAPI,webix.DragItem,webix.TreeDataMove,webix.SelectionModel,webix.KeysNavigation,webix.MouseEvents,webix.Scrollable,webix.TreeDataLoader,webix.ui.proto,webix.TreeRenderStack,webix.CopyPaste,webix.EventSystem),webix.TreeStateCheckbox={uh:function(){if(this.vg){var e=this.render;this.render=function(t,i,n){var r=e.apply(this,arguments);this.s.threeState&&r&&"checkbox"!=i&&this.vh.apply(this,arguments)},this.uh=function(){}}},threeState_setter:function(e){return e&&this.uh(),e},vh:function(e){var t,i,n,r,o;if(n=[],o=this,e&&!o.data.pull[e]&&(e=0),!e||o.data.pull[e].$count)for(i=this.wh(e),i.sort(function(e,t){return o.data.pull[t].$level-o.data.pull[e].$level}),t=0;t<i.length;t++)t&&o.data.pull[i[t]].$parent==o.data.pull[i[t-1]].$parent||(n=n.concat(o.xh(i[t])));else n=n.concat(o.xh(e));for(r={},t=0;t<n.length;t++)r[n[t]]||(r[n[t]]=1,this.yh(n[t]));o=null},yh:function(e){var t,i;(i=this.getItemNode(e))&&(this.render(e,"checkbox","update"),this.getItem(e).indeterminate&&(i=this.getItemNode(e),(t=i.getElementsByTagName("input")[0])&&(t.indeterminate=this.getItem(e).indeterminate)))},xh:function(e){var t,i,n,r,o,a,s;for(r=this.getParentId(e),this,o=[];r&&"0"!=r;){a=0,i=0,this.data.eachChild(r,function(e){e.indeterminate?a++:e.checked&&i++}),t=n=s=!1;var l=this.getItem(r);i==l.$count?t=!0:(i>0||a>0)&&(n=!0),(n||n!=l.indeterminate)&&(s=!0),l.indeterminate=n,(t||l.checked!=t)&&(s=!0),l.checked=t,s?(o.push(r),r=this.getParentId(r)):r=0}return o},getChecked:function(){var e=[],t=this;return this.data.eachSubItem(0,function(i){t.isChecked(i.id)&&e.push(i.id)}),e},Tg:function(e,t){var i=this.getItem(e);if(i&&(""===t&&(t=!i.checked),i.checked!=t||i.indeterminate)){i.checked=t,this.zh(e);var n=this.xh(e);if(this.vg&&n.length<5)for(var r=0;r<n.length;r++)this.yh(n[r]);else this.refresh();this.callEvent("onItemCheck",[e,t])}},checkItem:function(e){this.Sg(e,!0),this.updateItem(e)},uncheckItem:function(e){this.Sg(e,!1),this.updateItem(e)},Ah:function(e,t,i){var n=t?"checkItem":"uncheckItem";e?this[n](e):e=0,this.s.threeState?e||this.data.eachChild(0,function(e){this[n](e.id)},this,i):this.data.each(function(e){this[n](e.id)},this,i,e)},checkAll:function(e,t){this.Ah(e,!0,t)},uncheckAll:function(e,t){this.Ah(e,!1,t)},zh:function(e){var t,i=this.getItem(e);i.indeterminate=!1,t=i.checked,this.data.eachSubItem(e,function(e){e.indeterminate=!1,e.checked=t}),this.vg&&this.isBranchOpen(i.$parent)&&this.render(e,0,"branch")},isChecked:function(e){return this.getItem(e).checked},wh:function(e){var t=[];return this.data.eachSubItem(e,function(e,i){i||t.push(e.id)}),t}},webix.ui.tree&&webix.extend(webix.ui.tree,webix.TreeStateCheckbox,!0),webix.type(webix.ui.tree,{name:"lineTree",css:"webixLineTree",icon:function(e,t){for(var i="",n="",r=1;r<=e.$level;r++){if(r==e.$level)var n=e.$count?e.open?"webix_tree_open ":"webix_tree_close ":"webix_tree_none ";var o=this.Bh(e,t,r);o&&(i+="<div class='"+n+"webix_tree_img webix_tree_"+o+"'></div>")}return i},Bh:function(e,t,i){var n=t.sg,r=webix.TreeRenderStack.tg;if(0===n&&r){var o=e.$level,a=e.id;for(n=[];o;){var s=r.getParentId(a),l=r.data.branch[s];l[l.length-1]==a&&(n[o]=!0),a=s,o--}t.sg=n}if(!n)return 0;if(i==e.$level){var h=3;return e.$parent||0===e.$index&&(h=4),n[e.$level]&&(h=2),e.$count?e.open?"minus"+h:"plus"+h:"line"+h}return n[i]?"blank":"line1"}}),webix.NavigationButtons={$init:function(){this.$ready.push(function(){this.attachEvent("onKeyPress",this.DD)})},PD:function(e,t){if(37===e||39===e){webix.html.preventEvent(t),this.Kh(37===e?-1:1);var i=this.Dh.querySelector("[tabindex='0']");i&&i.focus()}},Ch:function(){webix.html.remove(this.Dh),this.Dh=webix.html.create("DIV",{class:"webix_nav_panel webix_nav_panel_"+this.s.navigation.type,role:"tablist"},""),this.x.appendChild(this.Dh),this.Eh(),this.Fh(),this.Gh()},Gh:function(){var e=[];this.Dh&&(e[0]=webix.event(this.Dh,"click",webix.bind(function(e){for(var t=e.srcElement||e.target,i=!1;t!=this.Dh&&!i;){var n=t.getAttribute(this.Hh);n&&(i=!0,this.Ih(n)),t=t.parentNode}},this))),this.Jh&&(e[1]=webix.event(this.Jh,"click",webix.bind(function(e){this.Kh(-1)},this))),this.Lh&&(e[1]=webix.event(this.Lh,"click",webix.bind(function(e){this.Kh(1)},this))),this.attachEvent("onDestruct",function(){for(var t=0;t<e.length;t++)this.detachEvent(e[t]);e=null})},Kh:function(e){if(this.q){var t=this.Mh+e;(t>=this.q.length||0>t)&&(t=0>t?this.q.length-1:0),this.setActiveIndex(t)}},Ih:function(e){this.q&&webix.$$(e).show()},Eh:function(){var e,t;if(t=this.s.navigation,t.items){this.Hh=t.linkAttr||"bind_id",this.Dh?this.Nh():this.Ch();var i=this.q?this.q:this.data.order;if(i.length>1)for(var n=0;n<i.length;n++){e=webix.html.create("DIV",{class:"webix_nav_item webix_nav_"+(n==this.Mh?"active":"inactive"),role:"tab",tabindex:n==this.Mh?"0":"-1"},"<div></div>");var r=this.q?this.q[n].s.id:i[n];r&&e.setAttribute(this.Hh,r),this.Dh.appendChild(e)}}},Nh:function(){if(this.Dh)for(var e=this.Dh.childNodes,t=e.length-1;t>=0;t--)webix.html.remove(e[t])},Fh:function(){var e;e=this.s.navigation,e.buttons&&(this.Jh&&webix.html.remove(this.Jh),this.Jh&&webix.html.remove(this.Lh),this.Jh=webix.html.create("DIV",{class:"webix_nav_button_"+e.type+" webix_nav_button_prev ",role:"button",tabindex:"0","aria-label":webix.i18n.aria.prevTab},'<div class="webix_nav_button_inner"></div>'),this.x.appendChild(this.Jh),this.Lh=webix.html.create("DIV",{class:"webix_nav_button_"+e.type+" webix_nav_button_next ",role:"button",tabindex:"0","aria-label":webix.i18n.aria.nextTab},'<div class="webix_nav_button_inner"></div>'),this.x.appendChild(this.Lh))}},webix.VRenderStack={$init:function(){this.t={},webix.UE(this.x,"scroll",webix.bind(function(){this.render(null,null,"paint")},this))},getItemNode:function(e){return this.t&&this.t[e]},showItem:function(e){var t=this.data.getIndexById(e);if(t>-1){var i=t*this.type.height,n=i+this.type.height,r=this.getScrollState(),o=webix.html.offset(this.$view);i<r.y?this.scrollTo(0,i):n>r.y+o.height&&this.scrollTo(0,n-o.height)}},render:function(e,t,i){if(this.isVisible(this.s.id)&&!this.$blockRender){var n=this.Pe||this.y;if(!e||"paint"!=i&&"update"!=i){if("paint"!=i&&(this.t={},n.innerHTML=""),this.callEvent("onBeforeRender",[this.data])){var r=this.data.count(),o=this.getScrollState(),a=webix.html.offset(this.x),s=Math.floor(o.y/this.type.height)-2,l=Math.ceil((o.y+a.height)/this.type.height)+2;s=Math.max(0,s),l=Math.min(this.data.count()-1,l);for(var h=[],c=s;l>=c;c++){var u=this.data.order[c];if(this.t[u])h.push("<div></div>");else{var d=this.data.getItem(u);if(!d){this.Ik({count:l-c+(this.s.loadahead||0),start:c});break}h.push(this.jb(d))}}this.v.innerHTML=h.join(""),n.style.position="relative",n.style.height=r*this.type.height+"px";for(var f=this.v.childNodes,c=f.length-1;c>=0;c--){var p=f[c],e=p.getAttribute(this.ad);e&&(p.style.position="absolute",p.style.top=(s+c)*this.type.height+"px",p.style.left=0,p.style.width="100%",n.appendChild(p),this.t[e]=p)}this.callEvent("onAfterRender",[])}}else{var m=this.getItemNode(e);if(m){var g=this.t[e]=this.Ne(t);return g.style.top=m.style.top,g.style.position="absolute",g.style.left=0,g.style.width="100%",webix.html.insertBefore(g,m),void webix.html.remove(m)}}}},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)&&this.render(null,null,"paint")},Ik:function(e){var t=Math.max(e.count,this.s.datafetch||this.s.loadahead||0);this.cf(e.count,e.start)||this.loadNext(t,e.start)}},function(){function e(e){return e=e||{},e.paper=a[(e.paper||"").toLowerCase()]||"A4",e.mode=l[e.mode]?e.mode:"portrait",e.fit=s[e.fit]?e.fit:"page",e.scroll=e.scroll||!1,e.size=h[e.paper],e.margin=e.margin||0===e.margin?e.margin:{},o=isNaN(1*e.margin)?o:e.margin,e.margin={top:e.margin.top||0===e.margin.top?e.margin.top:o,bottom:e.margin.bottom||0===e.margin.bottom?e.margin.bottom:o,right:e.margin.right||0===e.margin.right?e.margin.right:o,left:e.margin.left||0===e.margin.left?e.margin.left:o},e}function t(e){webix.html.addCss(document.body,"webix_print"),e.docHeader&&r("Header",e),e.docFooter&&r("Footer",e);var t="@media print { @page{ size:"+e.paper+" "+e.mode+";margin-top:"+e.margin.top+"px;margin-bottom:"+e.margin.bottom+"px;margin-right:"+e.margin.right+"px;margin-left:"+e.margin.left+"px;}}";webix.html.addStyle(t,"print")}function i(e){webix.html.removeCss(document.body,"webix_print"),webix.html.removeStyle("print"),e.docHeader&&webix.html.remove(e.docHeader),e.docFooter&&webix.html.remove(e.docFooter)}function n(e,t){var i=e.$view.cloneNode(!0),n=e.$view.getElementsByTagName("canvas");if(n.length)for(var r=n.length-1;r>=0;r--){var o=i.getElementsByTagName("canvas")[r].getContext("2d");o.drawImage(n[r],0,0)}webix.html.insertBefore(i,t.docFooter,document.body),webix.html.addCss(i,"webix_ui_print"),!t.scroll&&(e.y&&e.data&&e.data.pull||e.getBody)&&webix.html.addCss(i,"webix_print_noscroll"),window.print(),webix.html.remove(i)}function r(e,t){var i=webix.html.create("div",{class:"webix_view webix_print_"+e.toLowerCase(),style:"height:0px;visibility:hidden;"},t["doc"+e]);"Header"===e?webix.html.insertBefore(i,document.body.firstChild):document.body.appendChild(i),t["doc"+e]=i}webix.env.printPPI=96,webix.env.printMargin=.75*webix.env.printPPI;var o=(webix.env.printPPI,webix.env.printMargin),a={a4:"A4",a3:"A3",letter:"letter"},s={page:!0,data:!0},l={portrait:!0,landscape:!0},h={A3:{width:11.7,height:16.5},A4:{width:8.27,height:11.7},letter:{width:8.5,height:11}};webix.print=function(r,o){var a=webix.$$(r);a&&a.$printView&&(a=a.$printView()),a&&(a.callEvent&&a.callEvent("onBeforePrint",[o]),o=e(o),t(o),a.$customPrint&&!0!==a.$customPrint(o)||n(a,o),i(o))}}(),webix.CustomPrint={$customPrint:function(e,t){if(this.UF(e,t))return!0;var i=this.VF(e),n=this.WF(i,e);if(t)return n;var r=webix.html.create("div",{class:"webix_ui_print"});r.appendChild(n),webix.html.insertBefore(r,e.docFooter,document.body),window.print(),webix.html.remove(r)},UF:function(e,t){return!(t||!("y"==this.config.layout||e.scroll||this.config.prerender||this.config.autoheight))||void("x"==this.config.layout&&webix.extend(e||{},{xCount:this.count(),nobreaks:!0},!0))},XF:function(e){if("page"==e.fit)return 1/0;var t=e.size,i=t["portrait"==e.mode?"width":"height"];return Math.min(i*webix.env.printPPI-2*webix.env.printMargin)},VF:function(e,t,i){var n,r,o,a=this.XF(e),s=e.xCount||this.Ci().Di,l=[],h=[],c=0;i=i||0,t=t||[];for(var u=0;u<this.data.order.length;){var d=this.data.pull[this.data.order[u]];if(r=parseInt(u/s),o=u-r*s,d&&o>=i){if((c+=this.type.width)>a&&o>i){n=h.length+i,l.push(h),u+=s-h.length,h=[],c=0;continue}var f=this.type.template(d,this.type),p=this.YF,m={display:"table-cell",height:this.type.height+"px",width:this.type.width+"px"};h.push({txt:f,className:p+" "+(d.$css||""),style:m}),(u+1)%s==0&&(l.push(h),h=[],c=0)}u++}return t.push(l),n&&this.VF(e,t,n),t},WF:function(e,t){var i=webix.html.create("div");return e.forEach(webix.bind(function(n,r){var o=webix.html.create("table",{class:"webix_table_print "+this.$view.className,style:"border-collapse:collapse"});if(n.forEach(function(e){var t=webix.html.create("tr");e.forEach(function(e){var i=webix.html.create("td");if(e.txt&&(i.innerHTML=e.txt),e.className&&(i.className=e.className),e.style){Object.keys(e.style).forEach(function(t){e.style[t]&&(i.style[t]=e.style[t])})}e.span&&(e.span.colspan>1&&(i.colSpan=e.span.colspan),e.span.rowspan>1&&(i.rowSpan=e.span.rowspan)),t.appendChild(i)}),o.appendChild(t)}),i.appendChild(o),!t.nobreaks&&r+1<e.length){var a=webix.html.create("DIV",{class:"webix_print_pagebreak"});i.appendChild(a)}},this)),i}},webix.protoUI({name:"list",Oh:"webix_list",YF:"webix_list_item",$init:function(e){webix.html.addCss(this.x,this.Oh+("x"==(e.layout||this.defaults.layout)?"-x":"")),this.data.provideApi(this,!0),this.Ph=webix.bind(this.Ph,this),this.data.attachEvent("onStoreUpdated",this.Ph),this.data.attachEvent("onSyncApply",this.Ph),this.attachEvent("onAfterRender",this.hg),this.x.setAttribute("role","listbox")},dynamic_setter:function(e){return e&&webix.extend(this,webix.VRenderStack,!0),e},$dragHTML:function(e,t){if("y"==this.s.layout&&"auto"==this.type.width){this.type.width=this.bc;var i=this.jb(e);return this.type.width="auto",i}return this.jb(e)},defaults:{select:!1,scroll:!0,layout:"y",navigation:!0,datafetch:50},ad:"webix_l_id",on_click:{webix_list_item:function(e,t){this.s.select&&(this.Qh=!0,"multiselect"==this.s.select||this.s.multiselect?this.select(t,!1,e.ctrlKey||e.metaKey||"touch"==this.s.multiselect,e.shiftKey):this.select(t),this.Qh=!1)}},on_dblclick:{},getVisibleCount:function(){return Math.floor(this.dc/this.QF())},Ph:function(){(this.s.autoheight||this.s.autowidth)&&this.resize()},Rh:function(e){var t=this.data.$pagesize||this.count();this.Lf(e&&t>e),this.s.autoheight&&(e||1/0)>t&&(e=t);var i=this.QF()*e+(this.type.margin||0);return this.getUnits&&(i+=this.getUnits().length*this.type.headerHeight),Math.max(i,this.s.minHeight||0)},QF:function(){return this.type.height+(this.type.margin||0)},Sh:function(e){var t=this.data.$pagesize||this.count();return this.Lf(e&&t>e),this.s.autowidth&&(e||1/0)>t&&(e=t),this.type.width*e},hg:function(){"x"==this.s.layout&&(this.y.style.width="auto"!=this.type.width?this.type.width*this.count()+"px":"auto")},$getSize:function(e,t){return"y"==this.s.layout?("auto"!=this.type.width&&(this.s.width=this.type.width+(this.cc?webix.ui.scrollSize:0)),(this.s.yCount||this.s.autoheight)&&(this.s.height=this.Rh(this.s.yCount)||1)):("auto"!=this.type.height&&(this.s.height=this.QF()+(this.ec?webix.ui.scrollSize:0)),(this.s.xCount||this.s.autowidth)&&(this.s.width=this.Sh(this.s.xCount)||1)),webix.ui.view.prototype.$getSize.call(this,e,t)},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)},type:{css:"",widthSize:function(e,t){return t.width+(t.width>-1?"px":"")},heightSize:function(e,t){return t.height+(t.height>-1?"px":"")},classname:function(e,t,i){var n="webix_list_item";return e.$css&&("object"==typeof e.$css&&(e.$css=webix.html.createCss(e.$css)),n+=" "+e.$css),i&&i.$css&&(n+=" "+i.$css),n},aria:function(e,t,i){return'role="option"'+(i&&i.webix_selected?' aria-selected="true" tabindex="0"':' tabindex="-1"')+(e.$count&&e.$template?'aria-expanded="true"':"")},template:function(e){return(e.icon?"<span class='webix_icon fa-"+e.icon+"'></span> ":"")+e.value+(e.badge?"<div class='webix_badge'>"+e.badge+"</div>":"")},width:"auto",templateStart:webix.template('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;" {common.aria()}>'),templateEnd:webix.template("</div>")},$skin:function(){this.type.height=webix.skin.$active.listItemHeight}},webix.CustomPrint,webix.KeysNavigation,webix.DataMove,webix.DragItem,webix.MouseEvents,webix.SelectionModel,webix.Scrollable,webix.ui.proto,webix.CopyPaste),webix.protoUI({name:"grouplist",defaults:{animate:{}},Oh:"webix_grouplist",$init:function(){webix.extend(this.data,webix.TreeStore,!0),this.data.count=function(){return this.order.length},this.data.provideApi(this,!0),this.data.attachEvent("onClearAll",webix.bind(this.Th,this)),this.Th()},Th:function(){this.Uh=[],this.Vh=[]},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments)&&(this.y.style.width=this.bc)},on_click:{webix_list_item:function(e,t){if(this.Wh)return!1;for(var i=0;i<this.Vh.length;i++)if(this.Vh[i]==t){for(var n=i;n<this.Vh.length;n++)this.data.getItem(this.Vh[n]).$template="";return i?(this.Uh=this.data.branch[this.Vh[i-1]],this.Vh.splice(i)):(this.Uh=this.data.branch[0],this.Vh=[]),this.Xh=!1,this.render()}var r=this.getItem(t);return r.$count?(this.Xh=!0,this.Vh.push(t),r.$template="Back",this.Uh=this.data.branch[r.id],this.render()):void(this.s.select&&(this.Qh=!0,"multiselect"==this.s.select||this.s.multiselect?this.select(t,!1,"touch"==this.s.multiselect||e.ctrlKey||e.metaKey,e.shiftKey):this.select(t),this.Qh=!1))}},getOpenState:function(){return{parents:this.Vh,branch:this.Uh}},render:function(e,t,i,n){var r,o;if(this.Vh=webix.copy(this.Vh),this.Uh=webix.copy(this.Uh),this.Vh.length)for(r=0;r<this.Vh.length;r++)this.data.branch[this.Vh[r]]||(this.Vh.splice(r,1),r--);if(o=this.Vh.length?this.Vh[this.Vh.length-1]:0,this.Uh=webix.copy(this.data.branch[o]),!this.Uh.length&&this.Vh.length&&(this.Uh=[o],this.Vh.pop()),this.Wh)return webix.delay(this.render,this,arguments,100);for(r=0;r<this.Uh.length;r++)this.data.getItem(this.Uh[r]).$template="";if(this.Uh.length||(this.Uh=this.data.branch[0]),this.data.order=webix.toArray([].concat(this.Vh).concat(this.Uh)),this.callEvent("onBeforeRender",[this.data])){if(!this.Qh&&this.y.innerHTML&&webix.animate.isSupported()&&this.s.animate&&this.Yh!=this.Vh.length){if(this.callEvent("onBeforeRender",[this.data])){this.Zh||(this.Zh=[]);var a=this.y.cloneNode(!1);a.innerHTML=this.data.getRange().map(this.jb,this).join("");var s=webix.extend({},this.s.animate);s.direction=this.Xh?"left":"right";var l=[webix.clone(s),webix.clone(s)];if(this.Xh)this.Zh.push(this.getScrollState()),webix.Touch&&webix.Touch.$active&&(l[0].y=0,l[1].y=-this.getScrollState().y);else{var h=this.Zh.pop();webix.Touch&&webix.Touch.$active&&(l[0].y=-h.y,l[1].y=-this.getScrollState().y)}var c=webix.animate.formLine(a,this.y,s);webix.Touch&&webix.Touch.$active&&webix.Touch.Nf(a,0,this.Xh?0:l[0].y,"0ms"),s.master=this,s.callback=function(){this.y=a,this.Xh?webix.Touch&&webix.Touch.$active||this.scrollTo(0,0):webix.Touch&&webix.Touch.$active?webix.delay(function(){webix.Touch.Nf(a,0,l[0].y,"0ms")},this):h&&this.scrollTo(0,h.y),webix.animate.breakLine(c),s.master=s.callback=null,this.t=null,this.Wh=!1,this.callEvent("onAfterRender",[])},this.Wh=!0,webix.animate(c,l)}}else webix.RenderStack.render.apply(this,arguments);this.Yh=this.Vh.length}},templateBack_setter:function(e){this.type.templateBack=webix.template(e)},templateItem_setter:function(e){this.type.templateItem=webix.template(e)},templateGroup_setter:function(e){this.type.templateGroup=webix.template(e)},type:{template:function(e,t){return e.$count?t.templateGroup(e,t):t.templateItem(e,t)},css:"group",classname:function(e,t,i){return"webix_list_item webix_"+(e.$count?"group":"item")+(e.$template?"_back":"")+(i&&i.webix_selected?" webix_selected ":"")+(e.$css?e.$css:"")},templateStart:webix.template('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()};  overflow:hidden;" {common.aria()}>'),templateBack:webix.template("#value#"),templateItem:webix.template("#value#"),templateGroup:webix.template("#value#"),templateEnd:function(e,t){var i="";return e.$count&&(i+="<div class='webix_arrow_icon'></div>"),i+="</div>"}},showItem:function(e){var t,i;for(e&&(t=this.getItem(e),i=t.$parent,t.$count&&(i=t.id)),this.Uh=this.data.branch[i||0],this.Vh=[];i;)this.getItem(i).$template="Back",this.Vh.unshift(i),i=this.getItem(i).$parent;this.Qh=!0,this.render(),this.Qh=!1,webix.RenderStack.showItem.call(this,e)}},webix.Group,webix.ui.list),webix.type(webix.ui.grouplist,{}),webix.protoUI({name:"unitlist",ad:"webix_item_id",uniteBy_setter:webix.template,render:function(e,t,i,n){var r=this.s;if(this.isVisible(r.id)){if(!r.uniteBy)return!1;if(e){var o=this.getItemNode(e);if(o&&"update"==i&&this.s.uniteBy.call(this,t)==this.getItem(e).$unitValue){var a=this.t[e]=this.Ne(t);return webix.html.insertBefore(a,o),void webix.html.remove(o)}}this.callEvent("onBeforeRender",[this.data])&&(this.units=null,this.$h(),this.units&&(this.y.innerHTML=this._h().map(this.jb,this).join(""),this.t=null),this.callEvent("onAfterRender",[]))}},getUnits:function(){var e=[];if(this.units)for(var t in this.units)e.push(t);return e},getUnitList:function(e){return this.units?this.units[e]:null},jb:function(e){var t=this.data.Me[e.id];return this.callEvent("onItemRender",[e]),e.$unit?this.type.templateStartHeader(e,this.type)+this.type.templateHeader.call(this,e.$unit)+this.type.templateEnd(e,this.type):this.type.templateStart(e,this.type,t)+(e.$template?this.type["template"+e.$template]:this.type.template)(e,this.type)+this.type.templateEnd(e,this.type)},_h:function(){var e,t,i,n;e=[];var r=this.data.$min||0,o=this.data.$max||1/0,a=0;for(i in this.units)for(e.push({$unit:i}),n=this.units[i],t=0;t<n.length;t++){if(a==r&&(e=[{$unit:i}]),e.push(this.getItem(n[t])),a==o)return webix.toArray(e);a++}return webix.toArray(e)},$h:function(){var e=this;this.units={},this.data.each(function(t){var i=e.s.uniteBy.call(this,t);t.$unitValue=i,e.units[i]||(e.units[i]=[]),e.units[i].push(t.id)})},type:{headerHeight:20,templateHeader:function(e){return"<span class='webix_unit_header_inner'>"+e+"</span>"},templateStart:function(e,t,i){if(e.$unit)return t.templateStartHeader.apply(this,arguments);var n="webix_list_item webix_list_"+t.css+"_item"+(i&&i.webix_selected?" webix_selected":"")+(e.$css?e.$css:""),r="width:"+t.widthSize(e,t,i)+"; height:"+t.heightSize(e,t,i)+"; overflow:hidden;"+(t.layout&&"x"==t.layout?"float:left;":"");return'<div webix_item_id="'+e.id+'" class="'+n+'" style="'+r+'" '+t.aria(e,t,i)+">"},templateStartHeader:function(e,t,i){var n="webix_unit_header webix_unit_"+t.css+"_header"+(e.$selected?"_selected":""),r="width:"+t.widthSize(e,t,i)+"; height:"+t.headerHeight+"px; overflow:hidden;";return'<div webix_unit_id="'+e.$unit+'" class="'+n+'" style="'+r+'">'}},$skin:function(){this.type.headerHeight=webix.skin.$active.unitHeaderHeight||20}},webix.ui.list),webix.EditAbility={defaults:{editaction:"click"},$init:function(e){this.ai={},this.Eb=0,this.bi=0,this.w.style.position="relative",e&&(e.onDblClick=e.onDblClick||{}),this.attachEvent("onAfterRender",this.$s),this.s.editable&&this.ci(),webix.extend(this,webix.Undo)},Ux:function(e){try{if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if(void 0!==e.createTextRange){var t=e.createTextRange();t.collapse(!1),t.select()}}catch(e){}},$s:function(){var e=this.getEditor();if(e&&e.$inline&&!e.getPopup){var t=this.mi(e);if(t&&t!=e.node){var i=e.node.value;e.node=t,t.value=i,t.focus(),this.Ux(t)}else this.editStop()}},editable_setter:function(e){return e&&this.ci(),e},ci:function(){webix.attachEvent("onEditEnd",webix.bind(function(){this.Eb&&this.editStop()},this)),webix.attachEvent("onClick",webix.bind(function(e){this.Eb&&new Date-this.bi>200&&(this.di&&!this.di.popupType&&e&&this.di.node&&this.di.node.contains(e.target||e.srcElement)||this.editStop())},this)),this.data.attachEvent&&this.data.attachEvent("onIdChange",webix.bind(function(e,t){this.ei(e,t)},this)),this.attachEvent("onItemClick",function(e){this.s.editable&&"click"==this.s.editaction&&this.edit(e)}),this.attachEvent("onItemDblClick",function(e){this.s.editable&&"dblclick"==this.s.editaction&&this.edit(e)}),this.fi=webix.bind(function(){this.bi=new Date},this),this.ci=function(){},this.gi&&this.gi()},Vs:function(){webix.delay(function(){var e=this.getEditor();if(e&&e.config.liveEdit){var t={value:e.getValue(),old:e.value};if(t.value==t.old)return;e.value=t.value,this.ti(e,t.value,!1),this.callEvent("onLiveEdit",[t,e])}},this)},hi:function(e){var t=this.s.form;"string"!=typeof t&&(this.s.form=t=webix.ui(t).config.id);var t=webix.$$(t),i=t.setValues?t:t.getChildViews()[0];i.setValues(this.getItem(e.row||e)),t.config.master=this.config.id,t.show(this.getItemNode(e));var n=i.getChildViews()[0];n.focus&&n.focus()},edit:function(e,t,i){if(this.s.editable&&this.callEvent("onBeforeEditStart",[e])){if(this.s.form)return this.hi(e);var n=this.ii(e);if(n){if(this.getEditor(e))return;t||this.editStop();var r=webix.extend({},webix.editors[n]),o=this.ji(e,r,i);r.config.liveEdit&&(this.Ws=this.attachEvent("onKeyPress",this.Vs));var a=r.getPopup?r.getPopup(o).x:o;return a&&webix.UE(a,"click",this.fi),o&&webix.UE(o,"change",this.ki,{bind:{view:this,id:e}}),!1!==i&&r.focus(),this.$fixEditor&&this.$fixEditor(r),this.bi=webix.edit_open_time=new Date,webix.UIManager.setFocus(this,!0),this.callEvent("onAfterEditStart",[e]),r}return null}},getEditor:function(e){return e?this.ai[e]:this.di},ei:function(e,t){var i=this.ai[e];i&&(this.ai[t]=i,i.id=t,delete this.ai[e])},ki:function(e){this.view.hasEvent("onEditorChange")&&this.view.callEvent("onEditorChange",[this.id,this.view.getEditorValue(this.id)])},li:function(e){return this.s},ji:function(e,t,i){var n=(t.config=this.li(e),t.render());t.$inline&&(n=this.mi(e)),t.node=n;var r=this.getItem(e),o=r[this.s.editValue||"value"];return webix.isUndefined(o)&&(o=""),t.setValue(o,r),t.value=o,this.ni(e,t),!1!==i&&this.showItem(e),t.$inline||this.oi(e,n,!0),t.afterRender&&t.afterRender(),n},pi:function(e){return this.getItemNode(e)},mi:function(e){var t=this.pi(e);return t&&(t=t.getElementsByTagName("input")[0]||t),t},ii:function(e){return this.s.editor},ni:function(e,t){t.id=e,this.ai[e]=this.di=t,this.Eb++},qi:function(e){this.di==e&&(this.di=0),e.destroy&&e.destroy(),delete e.popup,delete e.node,delete this.ai[e.id],this.Eb--},focusEditor:function(e){var t=this.getEditor.apply(this,arguments);t&&t.focus&&t.focus()},editCancel:function(){this.editStop(null,null,!0)},Xy:function(e){if(e){var t=this.getEditor();if(t&&t.getPopup&&t.getPopup()==e.getTopParentView())return}this.editStop()},editStop:function(e){if(!this.Zx){this.Zx=1;var t=arguments[2],i=1;return e?i=this.ri(this.ai[e],t):this.si(function(e){i*=this.ri(e,t)}),this.Zx=0,i}},ug:function(e){var t=this.getItemNode(e);return{left:t.offsetLeft,top:t.offsetTop,height:t.offsetHeight,width:t.offsetWidth,parent:this.w}},oi:function(e,t,i){if(t.style){var n=this.ug(e);t.style.top=n.top+"px",t.style.left=n.left+"px",t.style.width=n.width-1+"px",t.style.height=n.height-1+"px",t.top=n.top,i&&n.parent.appendChild(t)}},si:function(e){for(var t in this.ai)e.call(this,this.ai[t])},ri:function(e,t){if(e&&!webix.B){var i={value:e.getValue(),old:e.value};if(this.callEvent("onBeforeEditStop",[i,e,t])){if(!t){var n=i.old;if("string"==typeof i.value&&(n+=""),n!=i.value||e.config.liveEdit){var r=this.ti(e,i.value,!0);this.updateItem(e.row||e.id,r)}}e.$inline?e.node=null:webix.html.remove(e.node);var o=e.config.suggest;return o&&"string"==typeof o&&webix.$$(o).hide(),this.qi(e),this.Ws&&this.detachEvent(this.Ws),this.callEvent("onAfterEditStop",[i,e,t]),1}return 0}},validateEditor:function(e){var t=!0;if(this.s.rules){var i=this.getEditor(e),n=i.column||this.s.editValue||"value",r=this.s.rules[n],o=this.s.rules.$all;if(r||o){var a=this.data.getItem(i.row||i.id),s=i.getValue(),l=i.getInputNode();r&&(t=r.call(this,s,a,n)),o&&(t=o.call(this,s,a,n)&&t),t?webix.html.removeCss(l,"webix_invalid"):webix.html.addCss(l,"webix_invalid"),webix.callEvent("onLiveValidation",[i,t,a,s])}}return t},getEditorValue:function(e){var t;return t=0===arguments.length?this.di:this.getEditor(e),t?t.getValue():void 0},getEditState:function(){return this.di||!1},editNext:function(e,t){if(e=!1!==e,1==this.Eb||t){var i=this.ui(this.di||t,function(e){return!!this.ii(e)},e);if(this.editStop())return i&&(this.edit(i),this.vi(i)),!1}},vi:function(){},ui:function(e,t,i){var n=this.getIndexById(e.id),r=this.data.order;if(i){for(var o=n+1;o<r.length;o++)if(t.call(this,r[o]))return r[o]}else for(var o=n-1;o>=0;o--)if(t.call(this,r[o]))return r[o];return null},ti:function(e,t,i){var n=i?{}:this.getItem(e.id);return n[this.s.editValue||"value"]=t,n}},function(){function e(e,i){var n=e.config.suggest;if(n){var r=e.config.suggest=t(n),o=webix.$$(r);o&&i&&o.linkInput(i)}}function t(e){return"string"==typeof e?e:e.linkInput?e.s.id:("object"==typeof e?(webix.isArray(e)&&(e={data:e}),e.view=e.view||"suggest"):!0===e&&(e={view:"suggest"}),webix.ui(e).config.id)}function i(e){return(""+((e.header&&e.header[0]?e.header[0].text:e.editValue||e.label)||"")).replace(/<[^>]*>/g,"")}webix.editors={text:{focus:function(){this.getInputNode(this.node).focus(),this.getInputNode(this.node).select()},getValue:function(){return this.getInputNode(this.node).value},setValue:function(t){var i=this.getInputNode(this.node);i.value=t,e(this,i)},getInputNode:function(){return this.node.firstChild},render:function(){return webix.html.create("div",{class:"webix_dt_editor"},"<input type='text' aria-label='"+i(this.config)+"'>")}},"inline-checkbox":{render:function(){return{}},getValue:function(){return this.node.checked},setValue:function(){},focus:function(){this.node.focus()},getInputNode:function(){},$inline:!0},"inline-text":{render:function(){return{}},getValue:function(){return this.node.value},setValue:function(){},focus:function(){try{this.node.select(),this.node.focus()}catch(e){}},getInputNode:function(){},$inline:!0},checkbox:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().checked},setValue:function(e){this.getInputNode().checked=!!e},getInputNode:function(){return this.node.firstChild.firstChild},render:function(){return webix.html.create("div",{class:"webix_dt_editor"},"<div><input type='checkbox' aria-label='"+i(this.config)+"'></div>")}},select:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().value},setValue:function(e){this.getInputNode().value=e},getInputNode:function(){return this.node.firstChild},render:function(){var e="",t=this.config.options||this.config.collection;if(t.data&&t.data.each)t.data.each(function(t){e+="<option value='"+t.id+"'>"+t.value+"</option>"});else if(webix.isArray(t))for(var n=0;n<t.length;n++){var r=t[n],o=webix.isUndefined(r.id),a=o?r:r.id,s=o?r:r.value;e+="<option value='"+a+"'>"+s+"</option>"}else for(var l in t)e+="<option value='"+l+"'>"+t[l]+"</option>";return webix.html.create("div",{class:"webix_dt_editor"},"<select aria-label='"+i(this.config)+"'>"+e+"</select>")}},popup:{focus:function(){this.getInputNode().focus()},destroy:function(){this.getPopup().hide()},getValue:function(){return this.getInputNode().getValue()||""},setValue:function(e){this.getPopup().show(this.node),this.getInputNode().setValue(e)},getInputNode:function(){return this.getPopup().getChildViews()[0]},getPopup:function(){return this.config.lG||(this.config.lG=this.config.popup=this.createPopup()),webix.$$(this.config.popup)},createPopup:function(){var e=this.config.popup||this.config.suggest;if(e){var t;return"object"!=typeof e||e.name?t=webix.$$(e):(e.view=e.view||"suggest",t=webix.ui(webix.copy(e))),t.mG||(t.linkInput?t.linkInput(document.body):this.linkInput&&this.linkInput(document.body),t.mG=!0),t}var i=webix.editors.$popup[this.popupType];return"string"==typeof i||i.name||(i=webix.editors.$popup[this.popupType]=webix.ui(i),this.popupInit(i),i.linkInput||this.linkInput(document.body)),i.s.id},linkInput:function(e){webix.UE(webix.toNode(e),"keydown",webix.bind(function(e){var t=e.which||e.keyCode,i=this.getInputNode();if(i.isVisible())if(i.moveSelection&&41>t&&t>32){var n;33==t&&(n="pgup"),34==t&&(n="pgdown"),35==t&&(n="bottom"),36==t&&(n="top"),37==t&&(n="left"),38==t&&(n="up"),39==t&&(n="right"),40==t&&(n="down"),i.moveSelection(n)}else 13!==t||"TEXTAREA"===e.target.nodeName&&e.shiftKey||webix.callEvent("onEditEnd",[])},this))},popupInit:function(e){},popupType:"text",render:function(){return{}},$inline:!0}},webix.editors.color=webix.extend({focus:function(){},popupType:"color",popupInit:function(e){e.getChildViews()[0].attachEvent("onItemClick",function(e){webix.callEvent("onEditEnd",[e])})}},webix.editors.popup),webix.editors.date=webix.extend({focus:function(){},popupType:"date",setValue:function(e){this.wi=this.config.stringResult||e&&"string"==typeof e,webix.editors.popup.setValue.call(this,e)},getValue:function(){return this.getInputNode().getValue(this.wi?webix.i18n.parseFormatStr:"")||""},popupInit:function(e){e.getChildViews()[0].attachEvent("onDateSelect",function(e){webix.callEvent("onEditEnd",[e])})}},webix.editors.popup),webix.editors.combo=webix.extend({xi:function(e){return this.config.popup?this.config.popup.config.id:e?t(e):this.rt(e)},rt:function(){var e=webix.editors.combo;return e.st=e.st||this.xi(!0)},render:function(){var e=webix.html.create("div",{class:"webix_dt_editor"},"<input type='text' role='combobox' aria-label='"+i(this.config)+"'>"),t=this.config.suggest=this.xi(this.config.suggest);return t&&(webix.$$(t).linkInput(e.firstChild,!0),webix.UE(e.firstChild,"click",webix.bind(this.showPopup,this))),e},getPopup:function(){return webix.$$(this.config.suggest)},showPopup:function(){var e=this.getPopup(),t=e.getList(),i=this.getInputNode(),n=this.yi;e.show(i),i.setAttribute("aria-expanded","true"),n?t.exists(n)&&(t.select(n),t.showItem(n)):(t.unselect(),t.showItem(t.getFirstId())),e.ae=i},afterRender:function(){this.showPopup()},setValue:function(e){if(this.yi=e,this.config.suggest){var t=webix.$$(this.config.suggest),i=this.config.collection||this.config.options;i&&t.getList().data.importData(i),this.getInputNode(this.node).value=t.getItemText(e)}},getValue:function(){var e=this.getInputNode().value;if(this.config.suggest){var t=webix.$$(this.config.suggest),i=t.getList();(e||i.getSelectedId&&i.getSelectedId())&&(e=t.getSuggestion())}return e}},webix.editors.text),webix.editors.richselect=webix.extend({focus:function(){},getValue:function(){return this.getPopup().getValue()},setValue:function(e){var t=this.config.collection||this.config.options;this.getInputNode(),t&&this.getPopup().getList().data.importData(t),this.getPopup().show(this.node),this.getPopup().setValue(e)},getInputNode:function(){return this.getPopup().getList()},popupInit:function(e){e.linkInput(document.body)},popupType:"richselect"},webix.editors.popup),webix.editors.password=webix.extend({render:function(){return webix.html.create("div",{class:"webix_dt_editor"},"<input type='password' aria-label='"+i(this.config)+"'>")}},webix.editors.text),webix.editors.$popup={text:{view:"popup",width:250,height:150,body:{view:"textarea"}},color:{view:"popup",body:{view:"colorboard"}},date:{view:"popup",width:250,height:250,padding:0,body:{view:"calendar",icons:!0,borderless:!0}},richselect:{view:"suggest",body:{view:"list",select:!0}}}}(),webix.VirtualRenderStack={$init:function(){this.t={},webix.UE(this.x,"scroll",webix.bind(this.Ai,this)),webix.env.touch&&this.attachEvent("onAfterScroll",webix.bind(this.Ai,this)),this.Bi=[]},getItemNode:function(e){return this.t[e]},showItem:function(e){var t=this.Ci(),i=this.data.getIndexById(e),n=Math.floor(i/t.Di)*t.Ei,r=this.getScrollState();(n<r.y||n+this.s.height>=r.y+this.dc)&&this.scrollTo(0,n)},render:function(e,t,i){if(this.isVisible(this.s.id)&&!this.$blockRender)if(e){var n=this.getItemNode(e);switch(i){case"update":if(!n)return;var r=this.t[e]=this.Ne(t);webix.html.insertBefore(r,n),webix.html.remove(n);break;default:this.Fi()}}else this.callEvent("onBeforeRender",[this.data])&&(this.t={},this.Ai(null,!0),this.Gi=!1,this.callEvent("onAfterRender",[]))},Fi:function(){this.Gi||(this.Gi=!0,window.setTimeout(webix.bind(function(){this.render()},this),1))},Hi:function(e){webix.env.maxHTMLElementSize&&(e=Math.min(webix.env.maxHTMLElementSize,e));var t=document.createElement("DIV");return t.style.cssText="height:"+e+"px; width:100%; overflow:hidden;",t},Ai:function(e,t){this.Bi=[];var i=this.Ci();(!this.y.firstChild||t)&&(this.y.innerHTML="",this.y.appendChild(this.Hi(i.Ii)),this.u=[this.y.firstChild]);for(var n=i.R;n<=i.Ji;){for(;this.u[n]&&this.u[n].Ki&&n<=i.Ji;)n++;if(n>i.Ji)break;for(var r=n;!this.u[r];)r--;var o=this.u[r],a=n*i.Di+(this.data.$min||0);if(a>(this.data.$max||1/0))break;var s=Math.min(a+i.Di-1,this.data.$max?this.data.$max-1:1/0),l=this.Hi(i.Ei),h=this.data.getIndexRange(a,s);if(!h.length)break;for(var c={$template:"Loading"},u=0;u<h.length;u++)h[u]||this.Bi.push(a+u),h[u]=this.jb(h[u]||c);l.innerHTML=h.join("");for(var u=0;u<h.length;u++)this.t[this.data.getIdByIndex(a+u)]=l.childNodes[u];var d=parseFloat(o.style.height,10),f=(n-r)*i.Ei,p=d-f-i.Ei;if(webix.html.insertBefore(l,f?o.nextSibling:o,this.y),this.u[n]=l,l.Ki=!0,0>=f&&p>0)o.style.height=p+"px",this.u[n+1]=o;else if(0>f?webix.html.remove(o):o.style.height=f+"px",p>0){var m=this.u[n+1]=this.Hi(p);webix.html.insertBefore(m,l.nextSibling,this.y)}n++}if(this.Bi.length){var g=this.Bi[0],v=this.Bi.pop()+1;if(v>g){var b=v-g;if(this.cf(b,g))return;b=Math.max(b,this.s.datafetch||this.s.loadahead||0),this.loadNext(b,g)}}},Ci:function(){var e=this.getScrollState(),t=Math.max(0,e.y),i=this.bc,n=this.dc,r=this.type,o=Math.floor(i/r.width)||1,a=Math.floor(t/r.height),s=Math.ceil((n+t)/r.height)-1,l=this.data.$max?this.data.$max-this.data.$min:this.data.count();return{R:a,Ji:s,Li:t,Ii:Math.ceil(l/o)*r.height,Ei:r.height,Di:o}},ug:function(e){var t=this.getItemNode(e);return t||(this.showItem(e),this.Ai(),t=this.getItemNode(e)),{left:t.offsetLeft,top:t.offsetTop,height:t.offsetHeight,width:t.offsetWidth,parent:this.w}}},webix.protoUI({name:"dataview",$init:function(e){e.sizeToContent&&this.$ready.unshift(this.Mi);var t=e.prerender||this.defaults.prerender;(!1===t||!0!==t&&"auto"!==e.height&&!e.autoheight)&&webix.extend(this,webix.VirtualRenderStack,!0),e.autoheight&&(e.scroll=!1),this.w.className+=" webix_dataview",this.x.setAttribute("role","listbox")},Mi:function(){var e=webix.html.create("DIV",0,this.type.template({}));e.style.position="absolute",document.body.appendChild(e),this.type.width=e.offsetWidth,this.type.height=e.offsetHeight,webix.html.remove(e)},defaults:{scroll:!0,datafetch:50,navigation:!0},ad:"webix_l_id",YF:"webix_dataview_item",on_click:{webix_dataview_item:function(e,t){this.s.select&&("multiselect"==this.s.select||this.s.multiselect?this.select(t,!1,"touch"==this.s.multiselect||e.ctrlKey||e.metaKey,e.shiftKey):this.select(t))}},on_dblclick:{},on_mouse_move:{},type:{template:webix.template("#value#"),templateLoading:webix.template("Loading..."),width:160,height:50,classname:function(e,t,i){var n="webix_dataview_item ";return t.css&&(n+=t.css+" "),e.$css&&("object"==typeof e.$css&&(e.$css=webix.html.createCss(e.$css)),n+=e.$css+" "),i&&i.$css&&(n+=i.$css+" "),n},aria:function(e,t,i){return'role="option"'+(i&&i.webix_selected?' aria-selected="true" tabindex="0"':' tabindex="-1"')},templateStart:webix.template('<div webix_l_id="#id#" class="{common.classname()}" {common.aria()} style="width:{common.width}px; height:{common.height}px; float:left; overflow:hidden;">'),templateEnd:webix.template("</div>")},Ni:function(e){return this.s.height=this.type.height*Math.ceil(this.data.count()/Math.floor(e/this.type.width))},autoheight_setter:function(e){return e&&(this.data.attachEvent("onStoreLoad",webix.bind(this.resize,this)),this.w.style.overflowY="hidden"),e},$getSize:function(e,t){this.s.xCount>0&&"auto"!=this.type.width&&!this.Nw&&(this.s.width=this.type.width*this.s.xCount+(this.cc?webix.ui.scrollSize:0)),this.s.yCount&&"auto"!=this.type.height&&(this.s.height=this.type.height*this.s.yCount);var i=this.s.width||this.bc;return this.s.autoheight&&i&&(this.Ni(i),this.scroll_setter(!1)),webix.ui.view.prototype.$getSize.call(this,e,t)},iz:function(){var e=!1;return this.s.yCount&&"auto"==this.type.height&&(this.type.height=Math.floor(this.dc/this.s.yCount),e=!0),this.s.xCount&&("auto"==this.type.width||this.Nw)?(this.Nw=!0,this.type.width=Math.floor(this.bc/this.s.xCount),e=!0):this.Nw=!1,e},$setSize:function(e,t){if(webix.ui.view.prototype.$setSize.call(this,e,t)){if(this.s.autoheight&&this.Ni()!=this.dc)return webix.delay(this.resize,this);(this.iz()||this.Ai)&&this.render()}}},webix.DataMove,webix.DragItem,webix.MouseEvents,webix.KeysNavigation,webix.SelectionModel,webix.Scrollable,webix.CustomPrint,webix.ui.proto),webix.DataDriver.htmltable={toObject:function(e){e=webix.toNode(e);var t=e.rows;return webix.html.remove(e),t},getRecords:function(e){for(var t=[],i=e[0]&&e[0].Oi?1:0;i<e.length;i++)t.push(e[i]);return t},getDetails:function(e){var t=e.getElementsByTagName("td");e={};for(var i=0;i<t.length;i++)e["data"+i]=t[i].innerHTML;return e},getInfo:function(e){return{size:0}},getOptions:function(){},getConfig:function(e){var t=[],i=e[0].getElementsByTagName("th");i.length&&(e[0].Oi=!0);for(var n=0;n<i.length;n++){var r={id:"data"+n,header:this.Pi(i[n].innerHTML)},o=this.Qi(i[n]);r=webix.extend(r,o),t.push(r)}return t},Pi:function(e){var t=e.indexOf("json://");return-1!=t&&(e=JSON.parse(e.substr(t+7))),e},Qi:function(e){for(var t=e.attributes,i={},n=0;n<t.length;n++)i[t[n].nodeName]=this.Pi(t[n].nodeValue);return i.width=parseInt(i.width,10),i}},webix.protoUI({name:"vscroll",defaults:{scroll:"x",scrollStep:40,scrollPos:0,scrollSize:18,scrollVisible:1,zoom:1},$init:function(e){var t=e.scroll||"x",i=this.x=webix.toNode(e.container);i.className+=" webix_vscroll_"+t,i.innerHTML="<div class='webix_vscroll_body'></div>",webix.UE(i,"scroll",this.Ri,{bind:this}),this.Si=0,this.Wi=0},reset:function(){this.Wi=this.config.scrollPos=0,this.x["x"==this.config.scroll?"scrollLeft":"scrollTop"]=0},Ti:function(e){return e>15e5?(this.s.zoom=Math.floor(e/15e5)+1,this.Ui=e-this.Si,e=Math.floor(e/this.s.zoom)+this.Si):(this.s.zoom=1,this.Ui=1/0),e},scrollWidth_setter:function(e){return e=this.Ti(e),this.x.firstChild.style.width=e+"px",e},scrollHeight_setter:function(e){return e=this.Ti(e),this.x.firstChild.style.height=e+"px",e},sizeTo:function(e,t,i){e=e-(t||0)-(i||0);var n=this.s.scrollSize;webix.env.isIE&&n&&(n+=1),n||!this.s.scrollVisible||webix.env.$customScroll||(this.x.style.pointerEvents="none",n=14),n?(this.x.style.display="block",t&&(this.x.style.marginTop=t+"px"),this.x.style["x"==this.s.scroll?"width":"height"]=Math.max(0,e)+"px",this.x.style["x"==this.s.scroll?"height":"width"]=n+"px"):this.x.style.display="none",this.Si=e},getScroll:function(){return this.s.scrollPos*this.s.zoom},getSize:function(){return(this.s.scrollWidth||this.s.scrollHeight)*this.s.zoom},scrollTo:function(e){0>e&&(e=0);var t=this.s;0>(e=Math.min(((t.scrollWidth||t.scrollHeight)-this.Si)*t.zoom,e))&&(e=0);var i=e/t.zoom;return this.Wi!=i?(this.x["x"==t.scroll?"scrollLeft":"scrollTop"]=i,this.Vi(i),!0):void 0},Ri:function(){var e=this.x["x"==this.s.scroll?"scrollLeft":"scrollTop"];e!=this.Wi&&this.Vi(e)},Vi:function(e){this.Wi=e,this.s.scrollPos=Math.min(this.Ui,e*this.s.zoom)||0,this.callEvent("onScroll",[this.s.scrollPos])},activeArea:function(e,t){this.Xi=t,webix.UE(e,webix.env.isIE8?"mousewheel":"wheel",this.Yi,{bind:this}),this.uB(e)},uB:function(e){!webix.env.touch&&window.navigator.pointerEnabled&&(webix.html.addCss(e,"webix_scroll_touch_ie",!0),webix.UE(e,"pointerdown",function(e){("touch"==e.pointerType||"pen"==e.pointerType)&&(this.km=webix.Touch.hm(e),this.vB=this.s.scrollPos)},{bind:this}),webix.event(document.body,"pointermove",function(e){var t;this.km&&(this.lm=webix.Touch.hm(e),"x"==this.s.scroll?t=this.lm.x-this.km.x:"y"==this.s.scroll&&(t=this.lm.y-this.km.y),t&&Math.abs(t)>5&&this.scrollTo(this.vB-t))},{bind:this}),webix.event(window,"pointerup",function(e){this.km&&(this.km=this.lm=null)},{bind:this}))},Yi:function(e){var t=0,i=0===e.deltaMode?30:1;return webix.env.isIE8&&(t=e.detail=-e.wheelDelta/30),e.deltaX&&Math.abs(e.deltaX)>Math.abs(e.deltaY)?this.Xi&&this.s.scrollVisible&&(t=e.deltaX/i):!this.Xi&&this.s.scrollVisible&&(t=webix.isUndefined(e.deltaY)?e.detail:e.deltaY/i),webix.env.isSafari&&(this.Yy=e.target||e.srcElement),t&&this.scrollTo(this.s.scrollPos+t*this.s.scrollStep)?webix.html.preventEvent(e):void 0}},webix.EventSystem,webix.Settings),webix.Number={getConfig:function(e){var t={decimalSize:0,groupSize:999},i=e.indexOf("0");i>0&&(t.decimalSize=e.length-i,t.decimalDelimiter=e[i-1],e=e.substr(0,i-1));var n=e.match(/[^0-9]/);return n&&(t.groupSize=e.length-n.index-1,t.groupDelimiter=e[n.index]),t},parse:function(e,t){if(!e||"string"!=typeof e)return e;var i="";if(t.decimalDelimiter){var n=e.indexOf(t.decimalDelimiter);n>-1&&(i=e.substr(n+1).replace(/[^0-9]/g,""),i=i.substr(0,Math.min(i.length,t.decimalSize)),e=e.substr(0,n))}var r="-"===e[0]?-1:1;return e=e.replace(/[^0-9]/g,""),e||(e="0"),i&&(e+="."+i),parseFloat(e)*r},format:function(e,t){if(""===e||void 0===e)return e;t=t||webix.i18n,e=parseFloat(e);var i=0>e?"-":"";e=Math.abs(e),t.decimalOptional||(e=e.toFixed(t.decimalSize));var n=""+e;n=n.split(".");var r="";if(t.groupSize){var o=t.groupSize,a=n[0].length;do{a-=o;r=(a>0?n[0].substr(a,o):n[0].substr(0,o+a))+(r?t.groupDelimiter+r:"")}while(a>0)}else r=n[0];return t.decimalSize?i+r+(n[1]?t.decimalDelimiter+n[1]:""):i+r},numToStr:function(e){return function(t){return webix.Number.format(t,e)}}},webix.Date={startOnMonday:!1,toFixed:function(e){return 10>e?"0"+e:e},weekStart:function(e){e=this.copy(e);var t=e.getDay();return this.startOnMonday&&(0===t?t=6:t--),this.datePart(this.add(e,-1*t,"day"))},monthStart:function(e){return e=this.copy(e),e.setDate(1),this.datePart(e)},yearStart:function(e){return e=this.copy(e),e.setMonth(0),this.monthStart(e)},dayStart:function(e){return this.datePart(e,!0)},dateToStr:function(e,t){return"function"==typeof e?e:webix.env.strict?function(t){var i="",n=0;return e.replace(/%[a-zA-Z]/g,function(r,o){i+=e.slice(n,o);i+=function(e){if("%d"==r)return webix.Date.toFixed(e.getDate());if("%m"==r)return webix.Date.toFixed(e.getMonth()+1);if("%j"==r)return e.getDate();if("%n"==r)return e.getMonth()+1;if("%y"==r)return webix.Date.toFixed(e.getFullYear()%100);if("%Y"==r)return e.getFullYear();if("%D"==r)return webix.i18n.calendar.dayShort[e.getDay()];if("%l"==r)return webix.i18n.calendar.dayFull[e.getDay()];if("%M"==r)return webix.i18n.calendar.monthShort[e.getMonth()];if("%F"==r)return webix.i18n.calendar.monthFull[e.getMonth()];if("%h"==r)return webix.Date.toFixed((e.getHours()+11)%12+1);if("%g"==r)return(e.getHours()+11)%12+1;if("%G"==r)return e.getHours();if("%H"==r)return webix.Date.toFixed(e.getHours());if("%i"==r)return webix.Date.toFixed(e.getMinutes());if("%a"==r)return e.getHours()>11?webix.i18n.pm[0]:webix.i18n.am[0];if("%A"==r)return e.getHours()>11?webix.i18n.pm[1]:webix.i18n.am[1];if("%s"==r)return webix.Date.toFixed(e.getSeconds());if("%S"==r)return webix.Date.toFixed(e.getMilliseconds());if("%W"==r)return webix.Date.toFixed(webix.Date.getISOWeek(e));if("%c"==r){var t=e.getFullYear();return t+="-"+webix.Date.toFixed(e.getMonth()+1),t+="-"+webix.Date.toFixed(e.getDate()),t+="T",t+=webix.Date.toFixed(e.getHours()),t+=":"+webix.Date.toFixed(e.getMinutes()),t+=":"+webix.Date.toFixed(e.getSeconds())}return r}(t),n=o+2}),i+=e.slice(n,e.length)}:(e=e.replace(/%[a-zA-Z]/g,function(e){switch(e){case"%d":return'"+webix.Date.toFixed(date.getDate())+"';case"%m":return'"+webix.Date.toFixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+webix.Date.toFixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+webix.i18n.calendar.dayShort[date.getDay()]+"';case"%l":return'"+webix.i18n.calendar.dayFull[date.getDay()]+"';case"%M":return'"+webix.i18n.calendar.monthShort[date.getMonth()]+"';case"%F":return'"+webix.i18n.calendar.monthFull[date.getMonth()]+"';case"%h":return'"+webix.Date.toFixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+webix.Date.toFixed(date.getHours())+"';case"%i":return'"+webix.Date.toFixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?webix.i18n.pm[0]:webix.i18n.am[0])+"';case"%A":return'"+(date.getHours()>11?webix.i18n.pm[1]:webix.i18n.am[1])+"';case"%s":return'"+webix.Date.toFixed(date.getSeconds())+"';case"%S":return'"+webix.Date.toFixed(date.getMilliseconds())+"';case"%W":return'"+webix.Date.toFixed(webix.Date.getISOWeek(date))+"';case"%c":var i='"+date.getFullYear()+"';return i+='-"+webix.Date.toFixed((date.getMonth()+1))+"',i+='-"+webix.Date.toFixed(date.getDate())+"',i+="T",i+='"+webix.Date.toFixed(date.getHours())+"',i+=':"+webix.Date.toFixed(date.getMinutes())+"',i+=':"+webix.Date.toFixed(date.getSeconds())+"',!0===t&&(i+="Z"),i;default:return e}}),!0===t&&(e=e.replace(/date\.get/g,"date.getUTC")),Function("date","if (!date) return ''; if (!date.getMonth) date=webix.i18n.parseFormatDate(date);  return \""+e+'";'))},strToDate:function(e,t){if("function"==typeof e)return e;var i,n,r,o=e.match(/%[a-zA-Z]/g),a="var temp=date.split(/[^0-9a-zA-Z]+/g);";if(!webix.i18n.calendar.monthShort_hash){for(r=webix.i18n.calendar.monthShort,n=webix.i18n.calendar.monthShort_hash={},i=0;i<r.length;i++)n[r[i]]=i;for(r=webix.i18n.calendar.monthFull,n=webix.i18n.calendar.monthFull_hash={},i=0;i<r.length;i++)n[r[i]]=i}if(webix.env.strict)return function(e){if(!e)return"";if("object"==typeof e)return e;var n=e.split(/[^0-9a-zA-Z]+/g),r=[0,0,1,0,0,0,0];for(i=0;i<o.length;i++){var a=o[i];if("%y"==a)r[0]=1*n[i]+(n[i]>30?1900:2e3);else if("%Y"==a)r[0]=1*(n[i]||0),r[0]<30&&(r[0]+=2e3);else if("%n"==a||"%m"==a)r[1]=(n[i]||1)-1;else if("%M"==a)r[1]=webix.i18n.calendar.monthShort_hash[n[i]]||0;else if("%F"==a)r[1]=webix.i18n.calendar.monthFull_hash[n[i]]||0;else if("%j"==a||"%d"==a)r[2]=n[i]||1;else if("%g"==a||"%G"==a||"%h"==a||"%H"==a)r[3]=n[i]||0;else if("%a"==a)r[3]=r[3]%12+((n[i]||"")==webix.i18n.am[0]?0:12);else if("%A"==a)r[3]=r[3]%12+((n[i]||"")==webix.i18n.am[1]?0:12);else if("%i"==a)r[4]=n[i]||0;else if("%s"==a)r[5]=n[i]||0;else if("%S"==a)r[6]=n[i]||0;else if("%c"==a){var s=/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)(\+.*|)/g,l=s.exec(e);r[0]=1*(l[1]||0),r[0]<30&&(r[0]+=2e3),r[1]=(l[2]||1)-1,r[2]=l[3]||1,r[3]=l[4]||0,r[4]=l[5]||0,r[5]=l[6]||0}}return t?new Date(Date.UTC(r[0],r[1],r[2],r[3],r[4],r[5],r[6])):new Date(r[0],r[1],r[2],r[3],r[4],r[5],r[6])};for(i=0;i<o.length;i++)switch(o[i]){case"%j":case"%d":a+="set[2]=temp["+i+"]||1;";break;case"%n":case"%m":a+="set[1]=(temp["+i+"]||1)-1;";break;case"%y":a+="set[0]=temp["+i+"]*1+(temp["+i+"]>30?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":a+="set[3]=temp["+i+"]||0;";break;case"%i":a+="set[4]=temp["+i+"]||0;";break;case"%Y":a+="set[0]=(temp["+i+"]||0)*1; if (set[0]<30) set[0]+=2000;";break;case"%a":a+="set[3]=set[3]%12+(temp["+i+"]==webix.i18n.am[0]?0:12);";break;case"%A":a+="set[3]=set[3]%12+(temp["+i+"]==webix.i18n.am[1]?0:12);";break;case"%s":a+="set[5]=temp["+i+"]||0;";break;case"%S":a+="set[6]=temp["+i+"]||0;";break;case"%M":a+="set[1]=webix.i18n.calendar.monthShort_hash[temp["+i+"]]||0;";break;case"%F":a+="set[1]=webix.i18n.calendar.monthFull_hash[temp["+i+"]]||0;";break;case"%c":a+="var res = date.split('T');",a+="if(res[0]){ var d = res[0].split('-');",a+="set[0]= (d[0]||0)*1; if (set[0]<30) set[0]+=2000;",a+="set[1]= (d[1]||1)-1;",a+="set[2]= d[2]||1;}",a+="if(res[1]){ var t = res[1].split(':');",a+="set[3]= t[0]||0;",a+="set[4]= t[1]||0;",a+="set[5]= parseInt(t[2])||0;}"}var s="set[0],set[1],set[2],set[3],set[4],set[5], set[6]";return t&&(s=" Date.UTC("+s+")"),Function("date","if (!date) return ''; if (typeof date == 'object') return date; var set=[0,0,1,0,0,0,0]; "+a+" return new Date("+s+");")},getISOWeek:function(e){if(!e)return!1;var t=e.getDay();0===t&&(t=7);var i=new Date(e.valueOf());i.setDate(e.getDate()+(4-t));var n=i.getFullYear(),r=Math.floor((i.getTime()-new Date(n,0,1).getTime())/864e5);return 1+Math.floor(r/7)},getUTCISOWeek:function(e){return this.getISOWeek(e)},Jv:function(e,t,i,n){if(i){var r=n(e,t);if(r)for(var o=i>0?1:-1;r;)e.setHours(e.getHours()+o),r=n(e,t),o+=i>0?1:-1}},add:function(e,t,i,n){n&&(e=this.copy(e));var r=webix.Date.copy(e);switch(i){case"day":e.setDate(e.getDate()+t),this.Jv(e,r,t,function(e,t){return webix.Date.datePart(t,!0).valueOf()==webix.Date.datePart(e,!0).valueOf()});break;case"week":e.setDate(e.getDate()+7*t),this.Jv(e,r,7*t,function(e,t){return webix.Date.datePart(t,!0).valueOf()==webix.Date.datePart(e,!0).valueOf()});break;case"month":e.setMonth(e.getMonth()+t),this.Jv(e,r,t,function(e,t){return t.getMonth()==e.getMonth()&&t.getYear()==e.getYear()});break;case"year":e.setYear(e.getFullYear()+t),this.Jv(e,r,t,function(e,t){return t.getFullYear()==e.getFullYear()});break;case"hour":e.setHours(e.getHours()+t),this.Jv(e,r,t,function(e,t){return t.getHours()==e.getHours()&&webix.Date.datePart(t,!0)==webix.Date.datePart(e,!0)});break;case"minute":e.setMinutes(e.getMinutes()+t);break;default:webix.Date.add[i](e,t,i)}return e},datePart:function(e,t){t&&(e=this.copy(e));var i=this.copy(e);return i.setHours(0),i.getDate()!=e.getDate()?e.setHours(1):e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},timePart:function(e,t){return t&&(e=this.copy(e)),(e.valueOf()/1e3-60*e.getTimezoneOffset())%86400},copy:function(e){return new Date(e.valueOf())},equal:function(e,t){return!(!e||!t)&&e.valueOf()===t.valueOf()},isHoliday:function(e){return e=e.getDay(),0===e||6==e?"webix_cal_event":void 0}},webix.i18n={Zi:["fullDateFormat","timeFormat","dateFormat","longDateFormat","parseFormat","parseTimeFormat"],parseFormat:"%Y-%m-%d %H:%i",parseTimeFormat:"%H:%i",numberFormat:webix.Number.format,priceFormat:function(e){return webix.i18n.$i(webix.i18n.numberFormat(e,webix.i18n._i))},setLocale:function(e){var t=function(e,i){for(var n in i)"object"!=typeof i[n]||webix.isArray(i[n])?e[n]=i[n]:(e[n]||(e[n]={}),t(e[n],i[n]))};"string"==typeof e&&(e=this.locales[e]),e&&t(this,e);for(var i=webix.i18n.Zi,n=0;n<i.length;n++){var r=i[n],o=webix.i18n[r+"UTC"];webix.i18n[r+"Str"]=webix.Date.dateToStr(webix.i18n[r],o),webix.i18n[r+"Date"]=webix.Date.strToDate(webix.i18n[r],o)}this.$i=webix.template(this.price),this._i=this.priceSettings||this,this.intFormat=webix.Number.numToStr({groupSize:this.groupSize,groupDelimiter:this.groupDelimiter,decimalSize:0})}},webix.i18n.locales={},webix.i18n.locales["en-US"]={groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2,dateFormat:"%m/%d/%Y",timeFormat:"%h:%i %A",longDateFormat:"%d %F %Y",fullDateFormat:"%m/%d/%Y %h:%i %A",am:["am","AM"],pm:["pm","PM"],price:"${obj}",priceSettings:{groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2},fileSize:["b","Kb","Mb","Gb","Tb","Pb","Eb"],calendar:{monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hours:"Hours",minutes:"Minutes",done:"Done",clear:"Clear",today:"Today"},dataExport:{page:"Page",of:"of"},PDFviewer:{of:"of",automaticZoom:"Automatic Zoom",actualSize:"Actual Size",pageFit:"Page Fit",pageWidth:"Page Width",pageHeight:"Page Height"},aria:{calendar:"Calendar",increaseValue:"Increase value",decreaseValue:"Decrease value",navMonth:["Previous month","Next month"],navYear:["Previous year","Next year"],navDecade:["Previous decade","Next decade"],dateFormat:"%d %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Hours: %h %A",minuteFormat:"Minutes: %i",removeItem:"Remove item",pages:["First page","Previous page","Next page","Last page"],page:"Page",headermenu:"Header menu",openGroup:"Open column group",closeGroup:"Close column group",closeTab:"Close tab",showTabs:"Show more tabs",resetTreeMap:"Reset tree map",navTreeMap:"Level up",nextTab:"Next tab",prevTab:"Previous tab",multitextSection:"Add section",multitextextraSection:"Remove section",showChart:"Show chart",hideChart:"Hide chart",resizeChart:"Resize chart"},richtext:{underline:"Underline",bold:"Bold",italic:"Italic"},combo:{select:"Select",selectAll:"Select all",unselectAll:"Unselect all"}},webix.i18n.setLocale("en-US"),webix.protoUI({name:"datatable",defaults:{leftSplit:0,rightSplit:0,topSplit:0,columnWidth:100,minColumnWidth:20,minColumnHeight:26,prerender:!1,autoheight:!1,autowidth:!1,header:!0,fixedRowHeight:!0,scrollAlignY:!0,scrollX:!0,scrollY:!0,datafetch:50,navigation:!0},$skin:function(){var e=webix.skin.$active.rowHeight,t=this.defaults;t.rowHeight=e,t.headerRowHeight=webix.skin.$active.barHeight},on_click:{webix_richfilter:function(){return!1},webix_table_checkbox:function(e,t){t=this.locate(e);var i=this.getItem(t.row),n=this.getColumnConfig(t.column),r=e.target||e.srcElement,o="checkbox"==r.type?r.checked:i[t.column]!=n.checkValue,a=o?n.checkValue:n.uncheckValue,s={};return s[t.column]=a,this.updateItem(t.row,s,this.s.checkboxRefresh?"update":"save"),this.callEvent("onCheck",[t.row,t.column,a]),!1},webix_table_radio:function(e){var t=this.locate(e),i=this.getItem(t.row),n=this.getColumnConfig(t.column);return this.eachRow(function(e){var i=this.data.pull[e];i&&i[t.column]==n.checkValue&&(i[t.column]=n.uncheckValue)}),i[t.column]=n.checkValue,this.callEvent("onCheck",[t.row,t.column,!0]),this.refresh(),!1}},on_dblclick:{webix_table_checkbox:function(){return this.on_click.webix_table_checkbox.apply(this,arguments)}},on_context:{},$init:function(e){this.on_click=webix.extend({},this.on_click);var t="<div class='webix_ss_header'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_body'><div class='webix_ss_left'><div class='webix_ss_center_scroll'></div></div>";t+="<div class='webix_ss_center'><div class='webix_ss_center_scroll' role='rowgroup'></div></div>",t+="<div class='webix_ss_right'><div class='webix_ss_center_scroll'></div></div></div>",t+="<div class='webix_ss_hscroll' role='scrollbar' aria-orientation='horizontal'></div><div class='webix_ss_footer'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_vscroll_header'></div><div class='webix_ss_vscroll' role='scrollbar' aria-orientation='vertical'></div><div class='webix_ss_vscroll_footer'></div>",this.w.innerHTML=t,this.bj=this.w.id=this.name+webix.uid(),this.w.className+=" webix_dtable",this.y=this.w,this.I=this.w.firstChild,this.Vf=this.I.nextSibling,this.cj=this.Vf.nextSibling.nextSibling,this.x.setAttribute("role","grid"),e.editable||this.x.setAttribute("aria-readonly","true"),this.data.provideApi(this,!0),this.data.attachEvent("onParse",webix.bind(this.dj,this)),this.$ready.push(this.ej),this.fj=[],this.bm=[],this.Mt=[],this.Nt=[],this.gj=[],this.hj={},this.ij={},this.$g=this.jj=0,this.Ns=[],this.data.attachEvent("onServerConfig",webix.bind(this.kj,this)),this.data.attachEvent("onServerOptions",webix.bind(this.lj,this)),this.attachEvent("onViewShow",function(){this.Ow(),this.nz()}),this.data.attachEvent("onClearAll",webix.bind(function(e){e||(this.bk=this.jk=0,this.Zj&&this.Zj.reset(),this.Wj&&this.Wj.reset(),this.oH(0))},this)),this.attachEvent("onDestruct",this.YC),this.attachEvent("onKeyPress",this.DD),this.attachEvent("onScrollY",this.dF),webix.callEvent("onDataTable",[this,e])},mj:function(){this.nj=this.oj=webix.ui.scrollSize,webix.html.addStyle("#"+this.bj+" .webix_cell { height:"+this.s.rowHeight+"px; line-height:"+(this.s.rowLineHeight||this.s.rowHeight)+"px;"+(this.s.fixedRowHeight?"":"white-space:normal;")+" }"),webix.html.addStyle("#"+this.bj+" .webix_hcell { height:"+this.s.headerRowHeight+"px; line-height:"+this.s.headerRowHeight+"px;}"),this.mj=function(){}},ej:function(){this.data.attachEvent("onStoreLoad",webix.bind(this.nz,this)),this.data.attachEvent("onSyncApply",webix.bind(this.nz,this)),this.data.attachEvent("onStoreUpdated",webix.bind(function(){return this.render.apply(this,arguments)},this)),this.data.attachEvent("onStoreUpdated",webix.bind(this.pj,this)),this.render()},refresh:function(){this.render()},render:function(e,t,i){if("save"!=i){if("move"==i){var n=webix.DragControl.getContext();if(n&&n.fragile)return}if(!this.fj.length){var r=this.s.columns;if(!r||!r.length){if(!this.s.autoConfig||!this.data.order.length||this.bm.length)return;this.tj=0,this.qj()}this.rj()}if(!this.isVisible(this.s.id)||this.$blockRender)return this.mj();var o=this.config.experimental&&!this.s.subview;return!e||-1==t||"paint"!=i&&"update"!=i||o?(this.sj&&(clearTimeout(this.sj),this.sj=0),this.callEvent("onBeforeRender",[this.data])?(this.mj(),this.tj||this.uj(),this.bc&&(o&&("paint"==i||"update"==i)&&e?this.Kv(e):this.vj(!0,!0)),e&&"update"==i||(this.wj=this.xj(),this.yj()),this.x.setAttribute("aria-colcount",Math.max(this.bm.length,this.fj.length)),this.x.setAttribute("aria-rowcount",this.data.count()),this.callEvent("onAfterRender",[this.data]),!0):void 0):(this.sj&&clearTimeout(this.sj),void(this.sj&&this.Lv!=e?(this.Lv=null,this.sj=webix.delay(function(){this.render()},this)):(this.Lv=e,this.sj=webix.delay(function(){this.render(e,-1,i)},this))))}},getColumnConfig:function(e){return this.Aj[e]||this.am[e]},lj:function(e){for(var t in e){var i=this.getColumnConfig(t),n=new webix.DataCollection({data:e[t]});this.Ns.push(n),this.Bj(n,i)}},kj:function(e){e.columns&&this.tj&&this.refreshColumns(null,!0)},rj:function(){if(this.s.columns){this.fj=this.s.columns,this.Aj={};for(var e=0;e<this.fj.length;e++){var t=this.fj[e];this.Aj[t.id]=t;var i=t.cssFormat;if(i&&(t.cssFormat=webix.toFunctor(i,this.$scope)),t.width=t.width||this.s.columnWidth,"string"==typeof t.format&&(t.format=webix.i18n[t.format]||window[t.format]),t.numberFormat){var n=t.numberFormat;"string"==typeof n&&(t.numberFormat=n=webix.Number.getConfig(n)),t.format=webix.Number.numToStr(n),t.editFormat=t.editFormat||function(e){return webix.Number.format(e,n)},t.editParse=t.editParse||function(e){return webix.Number.parse(e,n)}}webix.isUndefined(t.checkValue)&&(t.checkValue=1),webix.isUndefined(t.uncheckValue)&&(t.uncheckValue=0),t.css&&"object"==typeof t.css&&(t.css=webix.html.createCss(t.css));var r=t.template;r&&("string"==typeof r&&(r=r.replace(/#\$value#/g,"#"+t.id+"#")),t.template=webix.template(r))}this.Mj("header",this.Mt),this.Mj("footer",this.Nt),this.callEvent("onStructureLoad",[])}},Cj:function(){this.uj()},YC:function(){for(var e=0;e<this.fj.length;e++)delete this.fj[e].attached,delete this.fj[e].node},uj:function(){this.Fj=this.fj.length-this.s.rightSplit,this.Gj=0;for(var e=0;e<this.fj.length;e++){if(!this.fj[e].node){var t=webix.html.create("DIV");t.style.width=this.fj[e].width+"px",this.fj[e].node=t}e>=this.s.leftSplit&&e<this.Fj&&(this.Gj+=this.fj[e].width)}var i=[];if(this.s.rightSplit){var n=this.fj.length-this.s.rightSplit;i[n]=" webix_first",i[n-1]=" webix_last"}if(this.s.leftSplit){var r=this.s.leftSplit;i[r]=" webix_first",i[r-1]=" webix_last"}i[0]=(i[0]||"")+" webix_first";var o=this.fj.length-1;i[o]=(i[o]||"")+" webix_last";for(var e=0;e<this.fj.length;e++){var a=this.fj[e].node;a.setAttribute("column",e),a.className="webix_column "+(this.fj[e].css||"")+(i[e]||"")}this.Hj(),this.Ij(),this.Jj(),this.Kj(),this.tj=!0},Ij:function(){for(var e=0,t=0;t<this.fj.length;t++){var i=this.fj[t];(t==this.s.leftSplit||t==this.Fj)&&(e=0),i.node&&(i.node.style.left=e+"px",(this.s.leftSplit||this.s.rightSplit)&&(webix.html.remove(i.node),i.attached=!1)),e+=i.width}},Kj:function(){this.Lj||(this.Lj=0),this.$g=this.jj=0,this.s.header&&(this.fk(this.I,0,1),this.Mj("header",this.Mt),this.$g=this.Mt.Ot,this.Nj(this.I,"header",this.Mt)),this.s.footer&&(this.fk(this.cj,0,1),this.Mj("footer",this.Nt),this.jj=this.Nt.Ot,this.Nj(this.cj,"footer",this.Nt)),this.refreshHeaderContent(!1,!1),this.Oj(),this.Nk&&this.markSorting(this.Nk,this.Ok)},RF:function(e,t,i){var n=0,r=e.colspan||1,o="webix_hcell "+(e.css||"");if(e.rotate)o+=" webix_measure_rotate";else for(var a=0;r>a;a++)n+=this.fj[i+a]?this.fj[i+a].width:this.config.columnWidth;var s=webix.html.getTextSize([e.text],o,n);return(e.rotate?s.width:s.height)+1},Mj:function(e,t){for(var i=0,n=0;n<this.fj.length;n++){var r=this.fj[n][e];r&&"object"==typeof r&&r.length||(webix.isUndefined(r)&&(r="header"==e?this.fj[n].id:""),r=[r]);for(var o=0;o<r.length;o++)"object"!=typeof r[o]&&(r[o]={text:r[o]}),r[o]&&r[o].height&&(t[o]=r[o].height),r[o]&&r[o].autoheight&&(t[o]=this.RF(r[o],this.fj[n],n));i=Math.max(i,r.length),this.fj[n][e]=r}t.Ot=i;for(var n=i-1;n>=0;n--)t[n]=t[n]||this.s.headerRowHeight,t.Ot+=1*t[n];for(var n=0;n<this.fj.length;n++)for(var a=this.fj[n][e],o=0;o<a.length;o++){if(a[o]&&a[o].rowspan)for(var s=1;s<a[o].rowspan;s++)a[o+s]=null;if(a[o]&&a[o].colspan)for(var s=1;s<a[o].colspan;s++)this.fj[n+s][e][o]=null}for(var n=0;n<this.fj.length;n++){var r=this.fj[n][e];if(r.length<i){var l=r.length-1;r[l].rowspan=i-r.length+1;for(var o=l+1;i>o;o++)r[o]=null}}return i},Pj:function(e,t){for(var i=e.getElementsByTagName("TD"),n=0;n<i.length;n++)if(i[n].getAttribute("active_id")==t)return i[n]},getHeaderContent:function(e){var t=this.Pj(this.I,e);if(t||(t=this.Pj(this.cj,e)),t){var i=this.hj[e],n=webix.ui.datafilter[i.content];return n.getHelper?n.getHelper(t,i):{type:n,getValue:function(){return n.getValue(t)},setValue:function(e){return n.setValue(t,e)}}}},Pt:function(e,t,i){var n=i?-1:0;for(i+=t,t;i>t;t++)n+=e[t]+1;return n},Qj:function(e,t,i,n,r){if(e==t)return"";for(var o="<table role='presentation' style='width:"+i+"px' cellspacing='0' cellpadding='0'>",a=e;t>a;a++){o+="<tr class='webix_size_row'>";for(var a=e;t>a;a++)o+="<td style='width:"+this.fj[a].width+"px;'></td>";o+="</tr>"}for(var s=this.fj[0][n].length,l=0;s>l;l++){o+="<tr section='"+n+"' role='row'>";for(var a=e;t>a;a++){var h=this.fj[a][n][l];if(null!==h){h.content&&(h.contentId=h.contentId||webix.uid(),h.columnId=this.fj[a].id,h.format=this.fj[a].format,h.text=webix.ui.datafilter[h.content].render(this,h),this.hj[h.contentId]=h,this.Rj=!0),o+="<td  role='presentation' column='"+(h.colspan?h.colspan-1+a:a)+"'";var c="";a==e&&(c+="webix_first");a+(h.colspan?h.colspan-1:0)>=t-1&&(c+=" webix_last"),c&&(o+=' class="'+c+'"');var u=r[l],d="";h.contentId&&(o+=" active_id='"+h.contentId+"'"),h.colspan&&(o+=" colspan='"+h.colspan+"'"),h.rowspan&&(o+=" rowspan='"+h.rowspan+"'",u=this.Pt(this.Mt,l,h.rowspan)),u!=this.s.headerRowHeight&&(d=" style='line-height:"+u+"px; height:"+u+"px;'");var f="webix_hcell",p=h.css;p&&("object"==typeof p&&(h.css=p=webix.html.createCss(p)),f+=" "+p),this.fj[a].$selected&&(f+=" webix_sel_hcell"),o+="><div role='columnheader' class='"+f+"'"+d+">";var m=""===h.text?"&nbsp;":h.text;h.rotate&&(m="<div class='webix_rotate' style='width:"+(u-10)+"px; transform-origin:center "+(u-15)/2+"px;-webkit-transform-origin:center "+(u-15)/2+"px;'>"+m+"</div>"),o+=m+"</div></td>"}}o+="</tr>"}return o+="</tr></table>"},showItemByIndex:function(e,t){var i=this.s.pager;if(i){var n=Math.floor(e/i.size);n!=i.page&&webix.$$(i.id).select(n)}if(-1!=e){var r=this.Sj();if(e<r[0]+1||e>=r[1]-1){var o=this.Tj(i?this.data.$min:0,e);e<r[0]+1?o=Math.max(0,o-1)-this.xD:(o+=this.Uj(e)-this.Vj,e>0&&(o+=this.Uj(e-1)-1)),this.Wj.scrollTo(o)}}if(-1!=t){if(t<this.s.leftSplit)return;if(t>=this.Fj)return;var r=this.Xj();if(t<r[0]+1||t>=r[1]-1){for(var o=0,a=this.s.leftSplit;t>a;a++)o+=this.fj[a].width;t<r[0]+1||(o+=this.fj[t].width-this.Yj),this.Zj.scrollTo(o)}}},showCell:function(e,t){if(!t||!e){var i=this.getSelectedId(!0);1==i.length&&(t=t||i[0].column,e=e||i[0].row)}t=t?this.getColumnIndex(t):-1,e=e?this.getIndexById(e):-1,this.showItemByIndex(e,t)},scrollTo:function(e,t){if(this.Zj){if(this.$j)return this.$j(e,t);null!==e&&this.Zj.scrollTo(e),null!==t&&this.Wj.scrollTo(t)}},getScrollState:function(){if(this._j)return this._j();var e=this.ck?0:this.aC||0;return{x:this.bk||0,y:this.jk+e}},showItem:function(e){this.showItemByIndex(this.getIndexById(e),-1)},Nj:function(e,t,i){e.childNodes[0].innerHTML=this.Qj(0,this.s.leftSplit,this.dk,t,i),e.childNodes[1].innerHTML=this.Qj(this.s.leftSplit,this.Fj,this.Gj,t,i),e.childNodes[1].onscroll=webix.bind(this._s,this),e.childNodes[2].innerHTML=this.Qj(this.Fj,this.fj.length,this.ek,t,i)},_s:function(){var e=this.getScrollState().x,t=this.I.childNodes[1].scrollLeft;t!=e&&this.scrollTo(t,null)},pj:function(){this.refreshHeaderContent(!0,!0)},nz:function(){this.refreshHeaderContent(!1,!0)},refreshHeaderContent:function(e,t,i){this.s.header&&(t&&this.fk(this.I,e,1,i),this.fk(this.I,e,0,i)),this.s.footer&&(t&&this.fk(this.cj,e,1,i),this.fk(this.cj,e,0,i))},refreshFilter:function(e){(!e||this.hj[e])&&this.refreshHeaderContent(!1,!0,e)},fk:function(e,t,i,n){if(this.Rj&&e)for(var r=e.getElementsByTagName("TD"),o=0;o<r.length;o++)if(r[o].getAttribute("active_id")){var a=this.hj[r[o].getAttribute("active_id")];if(n&&n!=a.columnId)continue;var s=webix.ui.datafilter[a.content];i?s.getValue&&(a.value=s.getValue(r[o])):(!t||s.trackCells)&&s.refresh(this,r[o],a)}},headerContent:[],gk:function(e,t,i){this.oj?(e.style.height=Math.max(t,1)-1+"px",e.style.width=(this.Fj?0:i)+this.oj-1+"px",webix.env.isWebKit&&e.offsetWidth):e.style.display="none"},Oj:function(){this.s.header&&this.gk(this.hk,this.$g,this.Lj),this.s.footer&&this.gk(this.ik,this.jj,this.Lj)},sk:function(e,t){var i=!(this.s.autowidth||!1===this.s.scrollX);this.nj=i?webix.ui.scrollSize:0;var n=!(this.s.autoheight||!1===this.s.scrollY);this.oj=n?webix.ui.scrollSize:0,webix.env.touch&&(i=n=!1),this.Zj&&(this.Zj.s.scrollSize=this.nj,this.Zj.s.scrollVisible=i),this.Wj&&(this.Wj.s.scrollSize=this.oj,this.Wj.s.scrollVisible=n)},Hj:function(){this.jk=0,this.bk=0;var e,t;if(e=t=1,(this.s.autoheight||!1===this.s.scrollY)&&(t=this.oj=0),(this.s.autowidth||!1===this.s.scrollX)&&(e=this.nj=0),webix.env.touch&&(e=t=0),this.Zj||(this.Zj=new webix.ui.vscroll({container:this.cj.previousSibling,scrollWidth:this.Gj,scrollSize:this.nj,scrollVisible:e}),!e||this.nj||webix.env.$customScroll||(this.Zj.x.style.position="absolute"),this.Zj.attachEvent("onScroll",webix.bind(this.kk,this))),!this.Wj){this.hk=this.cj.nextSibling;var i=this.hk.nextSibling;this.ik=i.nextSibling,this.Wj=new webix.ui.vscroll({container:i,scrollHeight:100,scroll:"y",scrollSize:this.oj,scrollVisible:t}),this.Wj.activeArea(this.Vf),this.Zj.activeArea(this.Vf,!0),this.Wj.attachEvent("onScroll",webix.bind(this.lk,this))}this.bc&&this.callEvent("onResize",[this.bc,this.dc]),webix.env.$customScroll&&webix.CustomScroll.enable(this),this.Hj=function(){}},columnId:function(e){return this.fj[e].id},getColumnIndex:function(e){for(var t=0;t<this.fj.length;t++)if(this.fj[t].id==e)return t;return-1},nk:function(e,t){var i,n=0,r=0,o=0,a=0,s=0;for(i=0;i<this.fj.length&&((this.Fj==i||this.s.leftSplit==i)&&(n=0,s++),this.fj[i].id!=t);i++)n+=this.fj[i].width;for(r+=this.fj[i].width,i=0;i<this.data.order.length&&this.data.order[i]!=e;i++)a+=this.Uj(i);return o+=this.Uj(i),[n,r,a-this.jk,o,this.Vf.childNodes[s]]},ok:function(){return this.row},locate:function(e,t){if(this.s.subview&&this!=webix.$$(e))return null;for(e=e.target||e.srcElement||e;e&&e.getAttribute&&e!==this.$view;){var i=""+webix.html.TC(e),n=null;if(-1!=i.indexOf("webix_cell")&&(n=this.pk(e))&&(n.row=this.data.order[n.rind]),-1!=i.indexOf("webix_hcell")&&(n=this.pk(e))&&(n.header=!0),n)return t?n.header?null:n.row:(n.column=this.fj[n.cind].id,n.toString=this.ok,n);e=e.parentNode}return null},pk:function(e){var t=e.parentNode;if(!t)return null;var i=1*(e.getAttribute("column")||t.getAttribute("column")),n=e.getAttribute("row")||0,r=1*(e.getAttribute("colspan")||t.getAttribute("colspan"));if(!n)for(var o=0;o<t.childNodes.length;o++)t.childNodes[o]==e&&(n=o>=this.s.topSplit?o+this.fj[i].qk-this.s.topSplit:o);return{rind:n,cind:i,span:r}},ZF:function(){for(var e=-this.Yj,t=0;t<this.fj.length;t++)e+=this.fj[t].width;this.bk=Math.min(this.bk,Math.max(0,e))},rk:function(e){this.tj&&(this.ZF(),this.Ij(),this.Jj(),this.Kj(),e||this.vj(!1,!1))},setColumnWidth:function(e,t,i){return this.Xs(this.getColumnIndex(e),t,i)},Xs:function(e,t,i,n){if(!(isNaN(t)||0>e)){var r=this.fj[e];r.minWidth&&t<r.minWidth?t=r.minWidth:t<this.s.minColumnWidth&&(t=this.s.minColumnWidth);var o=r.width;return o!=t&&(e>=this.s.leftSplit&&e<this.Fj&&(this.Gj+=t-o),r.width=t,!!r.node&&(r.node.style.width=t+"px",i||this.rk(),this.callEvent("onColumnResize",[r.id,t,o,!!n]),!0))}},FA:function(e){return(e.$height||this.s.rowHeight)+(e.$subopen?e.$subHeight:0)},Uj:function(e){var t=this.data.order[e];return t?this.FA(this.data.pull[t]):this.s.rowHeight},Tj:function(e,t){if(this.s.fixedRowHeight)return(t-e)*this.s.rowHeight;for(var i=0;t>e;e++)i+=this.Uj(e);return i},ug:function(e,t){var i;1==arguments.length&&(t=e.column,e=e.row);for(var n=this.getItem(e),r=this.getColumnConfig(t),o=0,a=0,s=0;s<this.fj.length;s++){(s==this.s.leftSplit||s==this.Fj)&&(o=0);var l=this.fj[s];if(l.id==t){var h=s<this.s.leftSplit?0:s>=this.Fj?2:1;a=this.Vf.childNodes[h].firstChild;break}o+=l.width}return i=this.getIndexById(e)<this.s.topSplit?this.Tj(0,this.getIndexById(e)):this.Tj((this.ak||0)-this.s.topSplit,this.getIndexById(e))+(this.ck||0),{parent:a,top:i,left:o,width:r.width,height:n.$height||this.s.rowHeight}},xj:function(){var e=this.s.pager,t=0,i=this.data.order.length;return e&&(t=e.size*e.page,i=Math.min(i,t+e.size),e.level&&(t=this.data.$min,i=this.data.$max)),this.Tj(t,i)},setRowHeight:function(e,t){if(!isNaN(t)){t<this.s.minColumnHeight&&(t=this.s.minColumnHeight);var i=this.getItem(e),n=i.$height||this.s.rowHeight;n!=t&&(i.$height=t,this.config.fixedRowHeight=!1,this.render(),this.callEvent("onRowResize",[e,t,n]))}},lk:function(e){var t=this.jk!==e;if(this.jk=e,this.s.prerender)for(var i=this.Vf.childNodes,n=0;n<i.length;n++)i[n].scrollTop=e;else this.vj();webix.env.$customScroll&&webix.CustomScroll.sk(this.Vf),t&&(this.callEvent("onScrollY",[]),this.callEvent("onAfterScroll",[]))},oH:function(e){this.Vf.childNodes[1].scrollLeft=this.bk=e,this.s.header&&(this.I.childNodes[1].scrollLeft=e),this.s.footer&&(this.cj.childNodes[1].scrollLeft=e)},kk:function(e){var t=this.bk!==e;this.oH(e),!1===this.s.prerender&&this.vj(!this.tk),webix.env.$customScroll&&webix.CustomScroll.sk(this.Vf),t&&(this.callEvent("onScrollX",[]),this.callEvent("onAfterScroll",[]))},Xj:function(e){if(e)return[0,this.fj.length];for(var t=this.bk,i=this.s.leftSplit;t>0&&this.fj.length-1>i;)t-=this.fj[i].width,i++;var n=i;for(t&&i>0&&i--,t+=this.Yj;t>0&&n<this.Fj;)t-=this.fj[n].width,n++;return[i,n]},getVisibleCount:function(){return Math.floor(this.Vj/this.config.rowHeight)},Sj:function(e){var t=this.jk,i=0,n=this.count(),r=this.s.pager;if(r){var i=r.page*r.size,n=Math.min(n,i+r.size);r.level&&(i=this.data.$min,n=this.data.$max)}if(this.s.autoheight)return[i,n,0];if(e)return[i,n,0];var o=i,a=this.s.topSplit||0;a&&(o+=a);var s=this.s.fixedRowHeight?this.s.rowHeight:0;if(s){var l=Math.ceil(t/s);t-=l*s,o+=l}else for(;t>0;)t-=this.Uj(o),o++;var h=o>0&&t?-(this.Uj(o-1)+t):0,c=o;if(t&&o--,t+=(this.Vj||this.dc)-(this.xD||0),s){var l=Math.ceil(t/s);t-=l*s,c+=l}else for(;t>0&&n>c;)t-=this.Uj(c),c++;return c>n&&(c=n),[o,c,h]},Kv:function(e){var t=this.getItem(e),i=this.getIndexById(e),n=this.Sj(),r=this.config.topSplit,o="";if(i>=r){if(i<n[0]||i>=n[1])return;i-=n[0]-r}else o=i==r-1?" webix_topcell webix_last_topcell":" webix_topcell";for(var a=this.Xj(),s=0;s<this.fj.length;s++){var l=this.fj[s];if(s<this.Fj&&s>=this.s.leftSplit&&(s<a[0]||s>a[1])&&(l.qk=-999),l.attached&&l.node){var h=l.node.childNodes[i];if(!h)continue;var c=this.Ek(t,this.fj[s],0);h.innerHTML=c,h.className=this.Mv(this.fj[s],c,t,e)+o}}},vj:function(e,t){if(this.fj.length){t&&this.uk();var i=this.Xj(this.s.prerender),n=this.Sj(!0===this.s.prerender);if(e){for(var r=this.s.leftSplit;r<i[0];r++)this.vk(r,t);for(var r=i[1];r<this.Fj;r++)this.vk(r,t)}this.wk=[];for(var o=0,r=0;r<this.s.leftSplit;r++)o+=this.xk(r,n,t);for(var r=i[0];r<i[1];r++)o+=this.xk(r,n,t,r==i[0]);for(var r=this.Fj;r<this.fj.length;r++)o+=this.xk(r,n,t);this.yk(n[0],n[1],t),this.zk(n)}},Ak:function(e,t){this.Bk=e,this.Ck=t,webix.html.remove(this.gj),this.gj=[]},dF:function(){if(this.s.prerender&&this.GA){var e=this.getScrollState();this.GA.style.top="-"+(e.y||0)+"px"}},yk:function(e,t,i){if(this.GA&&(this.GA.style.top=this.ck+"px"),i||e!=this.Bk||t!=this.Ck){if(this.Ak(e,t),this.Dk){this.Dk=!1;for(var n=0;n<this.wk.length;n++){var r,o=this.wk[n],a=this.getItem(o.id);r="function"==typeof a.$row?a.$row.call(this,a,this.type):this.Ek(a,this.getColumnConfig(a.$row),n);var s=this.gj[n]=webix.html.create("DIV",null,r);s.className="webix_cell "+(a.$sub?"webix_dtable_sub"+(this.s.subview?"view":"row"):"webix_dtable_colrow"+(a.$row?" webix_topcell"+(this.data.getMark(a.id,"webix_selected")?" webix_selected":""):"")),s.setAttribute("column",0),s.setAttribute("row",o.index);var l=a.$height||this.s.rowHeight;a.$subopen?s.style.height=a.$subHeight+"px":s.style.height=l+"px",s.style.paddingRight=webix.ui.scrollSize+"px";var h=this.wk[n].index<this.config.topSplit?-this.ck:0;s.style.top=h+o.top+(a.$subopen?l-1:0)+"px",this.GA||(this.GA=webix.html.create("DIV"),this.GA.style.position="relative",this.GA.style.top=this.ck+"px",this.Vf.appendChild(this.GA)),this.GA.appendChild(s),this.attachEvent("onSyncScroll",function(e,t,i){webix.Touch.Nf(this.GA,0,t,i)}),this.s.subview&&this.callEvent("onSubViewRender",[a,s])}}}else if(this.config.topSplit)for(var n=0;n<this.wk.length;n++){var s=this.gj[n];this.wk[n].index<this.config.topSplit&&(s.style.top=this.wk[n].top-this.ck+"px")}},zk:function(e){var t=this.s.pager,i=this.s.datafetch,n=!this.Fk||e[0]>=this.Fk;if(this.Fk=e[0],this.Gk){if(t&&(!i||i>=t.size)&&this.Hk([0,t.size*t.page],Math.max(i,t.size),!0))return this.Gk=null;this.Ik(this.Gk,n),this.Gk=null}else this.s.loadahead&&this.Hk(e,this.s.loadahead,n)},Hk:function(e,t,i){var n=e[1],r=n+t;i||(n=e[0]-t,r=e[0]),0>n&&(n=0),r=Math.min(r,this.data.order.length-1);for(var o=!1,a=n;r>a;a++)this.data.order[a]||(o?(o.last=a,o.count=a-n):o={start:a,count:r-n});return o?(this.Ik(o,i),!0):void 0},Ik:function(e,t){var i=Math.max(e.count,this.s.datafetch||this.s.loadahead||0),n=t?e.start:e.last-i+1;this.cf(e.count,e.start)||this.loadNext(i,n)},Zy:function(e){if(webix.env.isSafari){var t,i,n,r,o=[this.Zj,this.Wj];for(t=0;2>t;t++)(r=o[t])&&r.Yy&&r.Yy.parentNode==e&&(i=r.Yy);i&&(this.$y&&webix.html.remove(this.$y),this.$y=i,n=i.cloneNode(!0),i.parentNode.insertBefore(n,i),this.$y.style.display="none",this.Vf.appendChild(this.$y))}},vk:function(e){var t=this.fj[e];this.Zy(t.node),webix.html.remove(t.node),t.attached=!1},uk:function(){for(var e=0;e<this.fj.length;e++)this.fj[e].qk=-1;this.gj.length&&(webix.html.remove(this.gj),this.gj=[])},getText:function(e,t){return this.Ek(this.getItem(e),this.getColumnConfig(t),0)},getCss:function(e,t){var i=this.getItem(e);return this.Mv(this.getColumnConfig(t),i[t],i,e)},Mv:function(e,t,i,n){var r="webix_cell";if(e.cssFormat){var o=e.cssFormat(t,i,n,e.id);o&&(r+="object"==typeof o?" "+webix.html.createCss(o):" "+o)}var a=i.$css;a&&("object"==typeof a&&(i.$css=a=webix.html.createCss(a)),r+=" "+a);var s=this.data.Me[n];if(s&&(s.$css&&(r+=" "+s.$css),s.$cellCss)){var l=s.$cellCss[e.id];l&&(r+=" "+l)}if(i.$cellCss){var h=i.$cellCss[e.id];h&&("object"==typeof h&&(h=webix.html.createCss(h)),r+=" "+h)}var c=this.data.getMark(i.id,"webix_selected");return(c&&(c.$row||c[e.id])||e.$selected)&&(r+=this.Lk),r},Ek:function(e,t,i){if(!e)return"";var n;return n=e[t.id],(n===webix.undefined||null===n)&&(n=""),t.format&&(n=t.format(n)),t.template&&(n=t.template(e,this.type,n,t,i)),n},type:{checkbox:function(e,t,i,n){return"<input class='webix_table_checkbox' type='checkbox' "+(i==n.checkValue?'checked="true"':"")+">"},radio:function(e,t,i,n){return"<input class='webix_table_radio' type='radio' "+(i==n.checkValue?'checked="true"':"")+">"},editIcon:function(){return"<span class='webix_icon fa-pencil'></span>"},trashIcon:function(){return"<span class='webix_icon fa-trash'></span>"}},type_setter:function(e){return this.types&&this.types[e]?(this.type=webix.clone(this.types[e]),this.type.css&&(this.w.className+=" "+this.type.css)):webix.type(this,e),this.type.on_click&&webix.extend(this.on_click,this.type.on_click),e},xk:function(e,t,i,n){var r=this.fj[e];if(!r.attached){var o=e<this.s.leftSplit?0:e>=this.Fj?2:1;this.Vf.childNodes[o].firstChild.appendChild(r.node),r.attached=!0,r.split=o}if(this.ak=t[0],this.ck=0,this.aC=t[2],this.s.scrollAlignY?t[1]==this.data.order.length||this.data.$pagesize&&t[1]%this.data.$pagesize==0?r.node.style.top=(this.ck=t[2])+"px":r.Jk&&(r.node.style.top="0px"):(this.ck=t[2],r.node.style.top=t[2]+"px"),!(i||r.qk!=t[0]||r.Kk!=t[1]||this.s.topSplit&&r.ck!=this.ck))return 0;for(var a="",s=this.s.columns[e],l={row:this.s.rowHeight,total:0,single:n},h=0;h<this.s.topSplit;h++)a+=this.yD(h,s,t,l,-this.ck);for(var h=Math.max(t[0],this.s.topSplit);h<t[1];h++)a+=this.yD(h,s,t,l,-1);return this.Zy(r.node),r.node.innerHTML=a,r.qk=t[0],r.Kk=t[1],r.Jk=t[2],r.ck=this.ck,1},yD:function(e,t,i,n,r){var o,a=this.data.order[e],s=this.data.getItem(a),l="";if(s){var h=" role='gridcell' aria-rowindex='"+(e+1)+"' aria-colindex='"+(this.getColumnIndex(t.id)+1)+"'"+(s.$count||s.$sub?" aria-expanded='"+(s.open||s.$subopen?"true":"false")+"'":"")+(s.$level?" aria-level='"+s.$level+"'":"");if(n.single&&s.$row&&(this.Dk=!0,this.wk.push({top:n.total,id:s.id,index:e}),!s.$sub)){var c=s.$height||n.row;return n.total+=c,"<div"+h+" class='webix_cell' style='height:"+c+"px;'></div>"}var o=this.Ek(s,t,e),u=this.Mv(t,o,s,a);-1!==u.indexOf("select")&&(h+=" aria-selected='true' tabindex='0'");var d=!!s.$subopen,f=d?"margin-bottom:"+s.$subHeight+"px;":"";r>=0&&(r>0&&(f+="top:"+r+"px;'"),u="webix_topcell "+u,e==this.s.topSplit-1&&(u="webix_last_topcell "+u)),s.$height?(l="<div"+h+" class='"+u+"' style='height:"+s.$height+"px;"+f+"'>"+o+"</div>",n.total+=s.$height-n.row):l="<div"+h+" class='"+u+"'"+(f?" style='"+f+"'":"")+">"+o+"</div>",d&&(n.total+=s.$subHeight)}else l="<div role='gridcell' class='webix_cell'></div>",this.Gk?this.Gk.last=e:this.Gk={start:e,count:i[1]-e};return n.total+=n.row,l},yj:function(){if(this.fj.length&&!isNaN(1*this.dc)){var e=this.wj+(this.nj?this.nj:0);if(!this.s.autoheight&&!this.s.yCount||!this.resize()){this.Wj.sizeTo(this.dc,this.$g,this.jj),this.Wj.define("scrollHeight",e),this.xD=this.s.topSplit?this.Tj(0,this.s.topSplit):0,this.Vj=Math.max(0,this.dc-this.nj-this.$g-this.jj);for(var t=0;3>t;t++)this.Vf.childNodes[t].style.height=this.Vj+"px",this.s.prerender?this.Vf.childNodes[t].firstChild.style.height=this.wj+"px":this.Vf.childNodes[t].firstChild.style.height=this.Vj+"px";this.I.style.height=this.$g+"px"}}},Jj:function(){if(this.fj.length){var e=0;for(this.dk=0,this.ek=0,this.Yj=0;e<this.s.leftSplit;)this.dk+=this.fj[e].width,e++;for(e=this.fj.length-1;e>=this.Fj;)this.ek+=this.fj[e].width,e--;if(this.bc&&(!this.s.autowidth||!this.resize())){this.Yj=this.bc-this.ek-this.dk-this.oj,this.Vf.childNodes[1].firstChild.style.width=this.Gj+"px",this.Vf.childNodes[0].style.width=this.dk+"px",this.Vf.childNodes[1].style.width=this.Yj+"px",this.Vf.childNodes[2].style.width=this.ek+"px",this.I.childNodes[0].style.width=this.dk+"px",this.I.childNodes[1].style.width=this.Yj+"px",this.I.childNodes[2].style.width=this.ek+"px",this.cj.childNodes[0].style.width=this.dk+"px",this.cj.childNodes[1].style.width=this.Yj+"px",this.cj.childNodes[2].style.width=this.ek+"px";var t=this.Yj-this.Gj;if(0>t&&(t=0),t!=this.Lj&&(this.Lj=t,this.Oj()),webix.env.isWebKit){this.Vf.childNodes[0].offsetWidth;this.Vf.childNodes[1].offsetWidth,this.Vf.childNodes[1].firstChild.offsetWidth,this.Vf.childNodes[2].offsetWidth}this.Zj.sizeTo(this.bc-this.oj),this.Zj.define("scrollWidth",this.Gj+this.dk+this.ek)}}},$getSize:function(e,t){if((this.s.autoheight||this.s.yCount)&&this.s.columns){var i=(this.s.yCount||0)*this.s.rowHeight;i||(i=this.isVisible()?this.wj:this.count()*this.s.rowHeight),this.s.height=Math.max(i+(this.nj?this.nj:0)-1,this.s.minHeight||0)+this.$g+this.jj}this.s.autowidth&&this.s.columns&&(this.s.width=Math.max(this.Gj+this.dk+this.ek+this.oj,this.s.minWidth||0));var n=this.dk+this.ek+this.oj,r=webix.ui.view.prototype.$getSize.call(this,e,t);return r[0]=Math.max(r[0]||n),r},Ow:function(){if(this.Zj&&!webix.env.touch){var e=this.getScrollState();this.Zj.Wi=this.Wj.Wi=-1,this.scrollTo(e.x,e.y)}},$setSize:function(e,t){var i=this.bc,n=this.dc;webix.ui.view.prototype.$setSize.apply(this,arguments)&&(this.tj&&(this.callEvent("onResize",[this.bc,this.dc,i,n]),this.Jj(),this.yj()),this.render())},Mk:function(e){var t=this.getColumnConfig(e);if(t.sort){var i="asc";t.id==this.Nk&&(i="asc"==this.Ok?"desc":"asc"),this.zf(t.id,i,t.sort)}},markSorting:function(e,t){this.Pk||(this.Pk=webix.html.create("DIV"));var i=this.Pk.parentNode;if(i&&(i.removeAttribute("aria-sort"),i.removeAttribute("tabindex")),webix.html.remove(this.Pk),t){var n=this.Qk(this.getColumnIndex(e));n&&(this.Pk.className="webix_ss_sort_"+t,n.style.position="relative",n.appendChild(this.Pk),n.setAttribute("aria-sort",t+"ending"),n.setAttribute("tabindex","0")),this.Nk=e,this.Ok=t}else this.Nk=this.Ok=null},scroll_setter:function(e){return"string"==typeof e?(this.s.scrollX=-1!=e.indexOf("x"),this.s.scrollY=-1!=e.indexOf("y"),e):this.s.scrollX=this.s.scrollY=e},Qk:function(e){for(var t=this.I.getElementsByTagName("TD"),i=null,n=0;n<t.length;n++)if(t[n].getAttribute("column")==e&&!t[n].getAttribute("active_id")&&(i=t[n].firstChild,(t[n].colSpan||0)<2))return i;return i},zf:function(e,t,i){t=t||"asc",this.markSorting(e,t),"server"==i?(this.callEvent("onBeforeSort",[e,t,i]),this.loadNext(0,0,{before:function(){this.clearAll(!0)},success:function(){this.callEvent("onAfterSort",[e,t,i])}},0,1)):("text"==i&&(this.data.each(function(t){t.$text=this.getText(t.id,e)},this),i="string",e="$text"),"function"==typeof i?this.data.sort(i,t):this.data.sort(e,t,i||"string"))},iA:function(e,t,i,n){var r,o;if(e.length)for(o=0;o<e.length;o++)if(r=webix.toFunctor(e[o],this.$scope),!1===r.call(this,t,i,n))return!1},Yc:function(e,t,i,n){e=e||event;var r=e.target||e.srcElement;if(!this.s.subview||this==webix.$$(r)){for(var o="",a=[],s=!1,l=null,r=e.target||e.srcElement;r&&r.parentNode&&r!=this.x.parentNode;){if(o=webix.html.TC(r)){o=(""+o).split(" ");for(var h=o.length-1;h>=0;h--)t[o[h]]&&a.push(t[o[h]])}if(r.parentNode.getAttribute&&!l){var c=r.parentNode.getAttribute("column")||r.getAttribute("column");if(c){var u="DIV"==r.parentNode.tagName;if(!this.fj[c])return;if(s=!0,u){var d=r.parentNode.getAttribute("row")||r.getAttribute("row");if(!d){if(r.getAttribute("column"))return;(d=webix.html.index(r))>=this.s.topSplit&&(d+=this.fj[c].qk-this.s.topSplit)}this.Qc=l={row:this.data.order[d],column:this.fj[c].id},l.toString=this.ok}else this.Qc=l={column:this.fj[c].id};if(!1===this.iA(a,e,l,r))return;if(u)this.callEvent("on"+i,[l,e,r])&&n&&this.callEvent("on"+n,[l,e,r]);else if("ItemClick"==i){var f="header"==r.parentNode.parentNode.getAttribute("section");f&&this.callEvent("onHeaderClick",[l,e,r])&&this.Mk(l.column)}a=[]}}r=r.parentNode}return this.iA(a,e,l,this.$view),s}},showOverlay:function(e){if(!this.Rk){var t=webix.html.create("DIV",{class:"webix_overlay"},"");this.Vf.appendChild(t),this.Rk=t}this.Rk.innerHTML=e},hideOverlay:function(){this.Rk&&(webix.html.remove(this.Rk),this.Rk=null)},mapCells:function(e,t,i,n,r,o){if(null===e&&this.data.order.length>0&&(e=this.data.order[0]),null===t&&(t=this.columnId(0)),null===i&&(i=this.data.order.length),null===n&&(n=this.s.columns.length),this.exists(e)&&(e=this.getIndexById(e),null!==(t=this.getColumnIndex(t))))for(var a=0;i>a&&e+a<this.data.order.length;a++){var s=e+a,l=this.data.order[s];if(l)for(var h=this.getItem(l),c=0;n>c&&t+c<this.s.columns.length;c++){var u=t+c,d=this.columnId(u),f=r(h[d],l,d,a,c);o||(h[d]=f)}}},dj:function(e,t){!this.s.columns&&e.getConfig&&this.define("columns",e.getConfig(t))},qj:function(){var e=this.getItem(this.getFirstId()),t=this.s.columns=[];for(var i in e)"id"!=i&&"$"!=i[0]&&t.push({id:i,header:i[0].toUpperCase()+i.substr(1),sort:"string",editor:"text"});t.length&&(t[0].fillspace=!0),void 0===this.s.select&&this.define("select","row")}},webix.AutoTooltip,webix.Group,webix.DataMarks,webix.DataLoader,webix.MouseEvents,webix.MapCollection,webix.ui.view,webix.EventSystem,webix.Settings),webix.ui.datafilter={textWaitDelay:500,summColumn:{getValue:function(e){return e.firstChild.innerHTML},setValue:function(){},refresh:function(e,t,i){var n=0;e.mapCells(null,i.columnId,null,1,function(e){e*=1,isNaN(e)||(n+=e)},!0),i.format&&(n=i.format(n)),i.template&&(n=i.template({value:n})),t.firstChild.innerHTML=n},trackCells:!0,render:function(e,t){return t.template&&(t.template=webix.template(t.template)),""}},masterCheckbox:{getValue:function(){},setValue:function(){},getHelper:function(e,t){return{check:function(){t.checked=!1,e.onclick()},uncheck:function(){t.checked=!0,e.onclick()},isChecked:function(){return t.checked}}},refresh:function(e,t,i){t.onclick=function(){this.getElementsByTagName("input")[0].checked=i.checked=!i.checked;var t=e.getColumnConfig(i.columnId),n=i.checked?t.checkValue:t.uncheckValue;e.data.each(function(t){t[i.columnId]=n,e.callEvent("onCheck",[t.id,i.columnId,n]),this.callEvent("onStoreUpdated",[t.id,t,"save"])}),e.refresh()}},render:function(e,t){return"<input type='checkbox' "+(t.checked?"checked='1'":"")+">"}},textFilter:{getInputNode:function(e){return e.firstChild?e.firstChild.firstChild:{value:null}},getValue:function(e){return this.getInputNode(e).value},setValue:function(e,t){this.getInputNode(e).value=t},refresh:function(e,t,i){t.component=e.s.id,e.registerFilter(t,i,this),t.Sk=e.s.id,i.value&&this.getValue(t)!=i.value&&this.setValue(t,i.value),t.onclick=webix.html.preventEvent,webix.UE(t,"keydown",this.Tk)},render:function(e,t){return this.init&&this.init(t),t.css="webix_ss_filter","<input "+(t.placeholder?'placeholder="'+t.placeholder+'" ':"")+"type='text'>"},Tk:function(e,t,i){var n=this.Sk;9!=(e.which||e.keyCode)&&(this.Uk&&window.clearTimeout(this.Uk),this.Uk=window.setTimeout(function(){var e=webix.$$(n);e&&e.filterByAll()},webix.ui.datafilter.textWaitDelay))}},selectFilter:{getInputNode:function(e){return e.firstChild?e.firstChild.firstChild:{value:null}},getValue:function(e){return this.getInputNode(e).value},setValue:function(e,t){this.getInputNode(e).value=t},refresh:function(e,t,i){i.compare=i.compare||function(e,t){return e==t},t.component=e.s.id,e.registerFilter(t,i,this);var n,r=i.options;r?"string"==typeof r?(n=i.options=[],webix.ajax(r).then(webix.bind(function(n){i.options=n.json(),this.refresh(e,t,i)},this))):n=r:(n=e.collectValues(i.columnId),n.unshift({id:"",value:""}));var o=webix.$$(r);o&&o.data&&o.data.getRange&&(n=o.data.getRange());for(var a=document.createElement("select"),s=0;s<n.length;s++){var l=document.createElement("option");l.value=n[s].id,l.text=n[s].value,a.add(l)}t.firstChild.innerHTML="",t.firstChild.appendChild(a),i.value&&this.setValue(t,i.value),t.onclick=webix.html.preventEvent,a.Sk=e.s.id,webix.UE(a,"change",this.Vk)},render:function(e,t){return this.init&&this.init(t),t.css="webix_ss_filter",""},Vk:function(e,t,i){webix.$$(this.Sk).filterByAll()}}},webix.ui.datafilter.serverFilter=webix.extend({$server:!0,Tk:function(e,t,i){var n=this.Sk,r=e.which||e.keyCode;e.target||e.srcElement,9==r||r>=33&&40>=r||(this.Uk&&window.clearTimeout(this.Uk),this.Uk=window.setTimeout(function(){webix.$$(n).filterByAll()},webix.ui.datafilter.textWaitDelay))}},webix.ui.datafilter.textFilter),webix.ui.datafilter.serverSelectFilter=webix.extend({$server:!0,Vk:function(e,t,i){var n=this.Sk;webix.$$(n).filterByAll()}},webix.ui.datafilter.selectFilter),webix.ui.datafilter.numberFilter=webix.extend({init:function(e){e.prepare=function(t,i){var n=-1!=t.indexOf("=")?1:0,r=this.format(t);return""===r?"":(-1!=t.indexOf(">")?e.compare=this.Wk:-1!=t.indexOf("<")?(e.compare=this.Xk,n*=-1):(e.compare=this.Yk,n=0),r-n)}},format:function(e){return e.replace(/[^\-\.0-9]/g,"")},Wk:function(e,t){return 1*e>t},Xk:function(e,t){return""!==e&&t>1*e},Yk:function(e,t){return 1*e==t}},webix.ui.datafilter.textFilter),webix.ui.datafilter.dateFilter=webix.extend({format:function(e){if(""===e)return"";var t=new Date;if(-1!=e.indexOf("today"))t=webix.Date.dayStart(t);else if(-1==e.indexOf("now")){var i=e.match(/[0-9]+/g);if(!i||!i.length)return"";i.length<3?(i.reverse(),t=new Date(i[0],(i[1]||1)-1,1)):t=webix.i18n.dateFormatDate(e.replace(/^[>< =]+/,""))}return t.valueOf()}},webix.ui.datafilter.numberFilter),webix.extend(webix.ui.datatable,{filterByAll:function(){var e=!1;this.data.silent(function(){this.filter();var t=!1;for(var i in this.ij)if(this.isColumnVisible(i)){var n=this.ij[i],r=n[2].getValue(n[0]),o=r;n[1].prepare&&(o=n[1].prepare.call(n[2],o,n[1],this)),n[1].value=r;var a=n[1].compare;if(this.callEvent("onBeforeFilter",[i,o,n[1]]))if(n[2].$server||e)e=!0;else{if(""===o)continue;a?(a=this.fC(i,a),this.filter(webix.bind(function(e,t){return!!e&&a(e[i],t,e)},this),o,t)):this.filter(i,o,t),t=!0}}e&&this.jA()},this),e||(this.refresh(),this.callEvent("onAfterFilter",[]))},fC:function(e,t){var i=this.getColumnConfig(e),n=i?i.optionslist:null;return n?("string"!=typeof n&&(n=","),function(e,i,r){if(!e)return!0;for(var o=e.split(n),a=0;a<o.length;a++)if(t(o[a],i,r))return!0}):t},filterMode_setter:function(e){return webix.extend(this.data.Cf,e,!0)},getFilter:function(e){var t=this.ij[e];return t&&t[2].getInputNode?t[2].getInputNode(t[0]):null},registerFilter:function(e,t,i){this.ij[t.columnId]=[e,t,i]},collectValues:function(e){var t=[],i={"":!0},n=this.getColumnConfig(e),r=n.options||n.collection;if(r){if("object"==typeof r&&!r.loadNext){if(webix.isArray(r))for(var o=0;o<r.length;o++)t.push({id:r[o],value:r[o]});else for(var a in r)t.push({id:a,value:r[a]});return t}"string"==typeof r&&(r=webix.$$(r)),r.getBody&&(r=r.getBody()),this.Zk.call(r,"id","value",t,i)}else this.Zk(n.id,n.id,t,i);var n={values:t};return this.callEvent("onCollectValues",[e,n]),n.values},Zk:function(e,t,i,n){if(this.data.each(function(r){var o=r?r[e]:"";if(o!==webix.undefined&&!n[o]){n[o]=!0;var a=r[e];0===a&&(a="0"),i.push({id:a,value:r[t]})}},this,!0),i.length){var r="string"==typeof i[0].value?"string":"raw";i.sort(this.data.sorting.create({as:r,by:"value",dir:"asc"}))}},jA:function(e){this.loadNext(0,0,{before:function(){this.editStop&&this.editStop(),this.clearAll(!0)},success:function(){this.callEvent("onAfterFilter",[])}},0,1)}}),webix.extend(webix.ui.datatable,{hover_setter:function(e){return e&&!this.Yw&&(this.Vc(),this.config.experimental=!0,this.attachEvent("onMouseMoving",function(e){var t=this.locate(arguments[0]);t=t?t.row:null,this.Zw!=t&&(this.Zw&&this.removeRowCss(this.Zw,this.s.hover),this.Zw=t,this.Zw&&this.addRowCss(this.Zw,this.s.hover))}),webix.event(this.$view,"mouseout",webix.bind(function(e){this.Zw&&document.body.contains(e.target)&&(this.removeRowCss(this.Zw,this.s.hover),this.Zw=null)},this)),this.Yw=1),e},select_setter:function(e){return!this.select&&e&&(webix.extend(this,this._k.$k,!0),!0===e?e="row":"multiselect"==e&&(e="row",this.s.multiselect=!0),webix.extend(this,this._k[e],!0)),e},getSelectedId:function(e){return e?[]:""},getSelectedItem:function(e){return webix.SelectionModel.getSelectedItem.call(this,e)},_k:{$k:{Lk:" webix_cell_select",$init:function(){this.al(),this.on_click.webix_cell=webix.bind(this.bl,this),this.cl=this.zg=function(){this.unselect()},this.data.attachEvent("onStoreUpdated",webix.bind(this.xg,this)),this.data.attachEvent("onSyncApply",webix.bind(this.rF,this)),this.data.attachEvent("onClearAll",webix.bind(this.cl,this)),this.data.attachEvent("onAfterFilter",webix.bind(this.zg,this)),this.data.attachEvent("onIdChange",webix.bind(this.Ag,this)),this.$ready.push(webix.SelectionModel.uy)},Ag:function(e,t){for(var i=0;i<this.dl.length;i++)this.dl[i]==e&&(this.dl[i]=t);for(var i=0;i<this.el.length;i++){var n=this.el[i];n.row==e&&(e=this.fl(n),n.row=t,t=this.fl(n),n.id=t,delete this.gl[e],this.gl[t]=!0)}},xg:function(e,t,i){"delete"==i&&this.unselect(e)},rF:function(){for(var e=this.el.length-1;e>=0;e--){var t=this.el[e].row;this.exists(t)||(this.el.splice(e,1),delete this.gl[t])}},al:function(){this.el=[],this.gl={},this.dl=[]},isSelected:function(e,t){var i;return i=webix.isUndefined(t)?"object"==typeof e?this.fl(e):e:this.fl({row:e,column:t}),this.gl[i]},getSelectedId:function(e,t){var i;if(this.el.length>1||e){if(i=[].concat(this.el),t)for(var n=0;n<i.length;n++)i[n]=i[n].id}else if(i=this.el[0],t&&i)return i.id;return i},ok:function(){return this.row},hl:function(e,t){var i=this.fl(e);if(null!==i){if(-1===t)return this.ll(e);if(e.id=i,e.toString=this.ok,!this.callEvent("onBeforeSelect",[e,t]))return!1;if(!this.gl[i]||!t&&1!=this.el.length)return t||this.il(),this.el.push(e),this.gl[i]=!0,this.callEvent("onAfterSelect",[e,t]),this.jl(this.kl(e)),!0}},il:function(){if(!this.el.length)return!1;for(var e=0;e<this.el.length;e++)if(!this.callEvent("onBeforeUnSelect",[this.el[e]]))return!1;for(var e=0;e<this.dl.length;e++)this.data.removeMark(this.dl[e],"webix_selected");var t=this.s.columns;if(t)for(var e=0;e<t.length;e++)t[e].$selected=null;var i=this.el;this.al();for(var e=0;e<i.length;e++)this.callEvent("onAfterUnSelect",[i[e]]);return!0},unselectAll:function(){this.clearSelection()},selectAll:function(){this.selectRange()},clearSelection:function(){this.il()&&(this.callEvent("onSelectChange",[]),this.render())},ll:function(e){var t=this.fl(e);if(!t&&this.el.length&&(this.clearSelection(),this.callEvent("onSelectChange",[])),this.gl[t]){if(!this.callEvent("onBeforeUnSelect",[e]))return!1;for(var i=0;i<this.el.length;i++)if(this.el[i].id==t){this.el.splice(i,1);break}delete this.gl[t],this.callEvent("onAfterUnSelect",[e]),this.jl(0,this.ml(e))}},nl:function(e){var t=this.getItem(e);return this.data.addMark(t.id,"webix_selected",0,{$count:0},!0)},jl:function(e){e&&this.dl.push(e),this.Dg||(this.render(),this.callEvent("onSelectChange",[]))},bl:function(e,t){var i=e.ctrlKey||e.metaKey||"touch"==this.s.multiselect,n=e.shiftKey;if(this.s.multiselect||"multiselect"==this.s.select||(i=n=!1),n&&this.el.length){var r=this.el[this.el.length-1];this.ol(t,r)}else i&&this.gl[this.fl(t)]?this.ll(t):this.hl({row:t.row,column:t.column},i)},pl:function(e,t,i){var n=this.s.columns;if(t){for(var r=[],o=0;o<n.length;o++)n[o].$selected&&r.push(n[o]);n=r}for(var a=this.data.order,s=0,o=0;o<a.length;o++){var l=this.getItem(a[o]);if(l){var h=this.data.getMark(l.id,"webix_selected");if(h||t){for(var c=0,u=0;u<n.length;u++){var d=n[u].id;if(i||t||h[d]){if(!e)return{row:a[o],column:d};l[d]=e(l[d],a[o],d,s,c),c++}}s++}}}}},row:{Lk:" webix_row_select",fl:function(e){return e.row},select:function(e,t){e&&(e=""+e),this.hl({row:e},t)},kl:function(e){return this.nl(e.row).$row=!0,e.row},unselect:function(e){this.ll({row:e})},ml:function(e){return this.data.removeMark(e.row,"webix_selected",0,1),e.row},mapSelection:function(e){return this.pl(e,!1,!0)},ol:function(e,t){return this.selectRange(e.row,t.row)},selectRange:function(e,t,i){webix.isUndefined(i)&&(i=!0);var n=e?this.getIndexById(e):0,r=t?this.getIndexById(t):this.data.order.length-1;if(n>r){var o=n;n=r,r=o}this.Dg=!0;for(var a=n;r>=a;a++){var s=this.getIdByIndex(a);if(!s){e&&this.select(e);break}this.select(s,i)}this.Dg=!1,this.jl()}},cell:{fl:function(e){return e.column?e.row+"_"+e.column:null},select:function(e,t,i){this.hl({row:e,column:t},i)},kl:function(e){var t=this.nl(e.row);return t.$count++,t[e.column]=!0,e.row},unselect:function(e,t){this.ll({row:e,column:t})},ml:function(e){var t=this.nl(e.row);return t.$count--,t[e.column]=!1,t.$count<=0&&this.data.removeMark(e.row,"webix_selected"),e.row},mapSelection:function(e){return this.pl(e,!1,!1)},ol:function(e,t){return this.selectRange(e.row,e.column,t.row,t.column)},selectRange:function(e,t,i,n,r){webix.isUndefined(r)&&(r=!0);var o=e?this.getIndexById(e):0,a=i?this.getIndexById(i):this.data.order.length-1,s=t?this.getColumnIndex(t):0,l=n?this.getColumnIndex(n):this.fj.length-1;if(o>a){var h=o;o=a,a=h}if(s>l){var h=s;s=l,l=h}this.Dg=!0;for(var c=o;a>=c;c++)for(var u=s;l>=u;u++)this.select(this.getIdByIndex(c),this.columnId(u),r);this.Dg=!1,this.jl()}},column:{Lk:" webix_column_select",fl:function(e){return e.column},ok:function(){return this.column},select:function(e,t){this.hl({column:e},t)},kl:function(e){this.s.columns[this.getColumnIndex(e.column)].$selected=!0,this.Dg||this.Kj()},unselect:function(e){this.ll({column:e})},ml:function(e){this.s.columns[this.getColumnIndex(e.column)].$selected=null,this.Kj()},mapSelection:function(e){return this.pl(e,!0,!1)},ol:function(e,t){return this.selectRange(e.column,t.column)},selectRange:function(e,t,i){webix.isUndefined(i)&&(i=!0);var n=e?this.getColumnIndex(e):0,r=t?this.getColumnIndex(t):this.fj.length-1;if(n>r){var o=n;n=r,r=o}this.Dg=!0;for(var a=n;r>=a;a++)this.select(this.columnId(a),i);this.Dg=!1,this.Kj(),this.jl()},rF:function(){}},area:{fl:function(e){return e.row+"_"+e.column},getSelectedId:function(e){var t=this.getSelectArea(),i=[];if(t)if(!e||t.start.row==t.end.row&&t.start.column==t.end.column)i.push(t.end);else{var n=this.getIndexById(t.start.row),r=this.getIndexById(t.end.row);if(-1==n||-1==r)return i;for(var o=this.getColumnIndex(t.start.column),a=this.getColumnIndex(t.end.column),s=n;r>=s;s++)for(var l=o;a>=l;l++)i.push({row:this.getIdByIndex(s),column:this.columnId(l)})}return e?i:i[0]},unselect:function(e){this.ll()},ll:function(){this.removeSelectArea(),this.callEvent("onSelectChange",[])},mapSelection:function(e){var t=this.getSelectArea();if(t)for(var i=this.getColumnIndex(t.start.column),n=this.getColumnIndex(t.end.column),r=this.getIndexById(t.start.row),o=this.getIndexById(t.end.row),a=r;o>=a;a++)for(var s=this.data.order[a],l=this.getItem(s),h=i;n>=h;h++){var c=this.fj[h].id;if(!e)return{row:s,column:c};l[c]=e(l[c]||"",s,c,a-r,h-i)}},select:function(e,t,i){this.hl({row:e,column:t},i)},ol:function(e,t){this.gC(e,t)},hl:function(e,t){return this.addSelectArea(e,e,!1),!0},rF:function(){this.el.length&&this.refreshSelectArea()}}}}),webix.extend(webix.ui.datatable,{blockselect_setter:function(e){return e&&this.ql&&(webix.UE(this.x,webix.env.mouse.move,this.rl,{bind:this}),webix.UE(this.x,webix.env.mouse.down,this.sl,{bind:this}),webix.event(document.body,webix.env.mouse.up,this.tl,{bind:this}),this.ql=this.ul=this.vl=!1,this.attachEvent("onAfterScroll",function(){this.ZC()}),webix.extend(this,webix.AutoScroll,!0),this.attachEvent("onBeforeAutoScroll",function(){return this.vl})),e},ql:!0,wl:function(e,t){for(var i=e.target||e.srcElement;i;){if(i.getAttribute&&i.getAttribute("webixignore"))return!1;if(i==t)return!0;i=i.parentNode}return!1},sl:function(e){if((!this.s.subview||this==webix.$$(e.target||e.srcElement))&&this.wl(e,this.Vf)){if(e.target&&"INPUT"==e.target.tagName||this.Pl)return;this.xl=webix.html.offset(this.Vf);var t=webix.html.pos(e);this.ul=[t.x-this.xl.x,t.y-this.xl.y]}},tl:function(e){this.yl&&(this.jz("select",!0,e),this.yl=webix.html.remove(this.yl)),webix.html.removeCss(document.body,"webix_noselect"),this.ul=this.vl=!1,this.bh&&(this.bh=window.clearTimeout(this.bh))},ZC:function(){this.vl&&this.jz(!1,!1)},jz:function(e,t,i){var n=null;this.ul[2]||(this.ul[2]=this.zl.apply(this,this.ul)),n=this.ul[2];var r=this.zl.apply(this,this.vl);if(this.callEvent("onBeforeBlockSelect",[n,r,t,i])){if((!this.wB||!1!==this.wB(n,r,t,i))&&n.row&&r.row)if("select"===e)this.il(),this.ol(n,r);else{var o,a,s,l;if("box"===e)o=Math.min(this.ul[0],this.vl[0]),s=Math.max(this.ul[0],this.vl[0]),a=Math.min(this.ul[1],this.vl[1]),l=Math.max(this.ul[1],this.vl[1]);else{var h=this.ug(n.row,n.column),c=this.ug(r.row,r.column),u=this.getScrollState(),d=h.width,f=c.width;this.ek&&this.ul[0]>this.dk+this.Yj?h.left+=this.dk+this.Yj:this.dk?this.ul[0]>this.dk&&(h.left<u.x?(d-=u.x-h.left,h.left=this.dk):h.left+=this.dk-u.x):h.left-=u.x,this.ek&&this.vl[0]>this.dk+this.Yj?c.left+=this.dk+this.Yj:this.dk?this.vl[0]>this.dk&&(c.left<u.x?(f-=u.x-c.left,c.left=this.dk):c.left+=this.dk-u.x):c.left-=u.x,this.s.prerender&&(h.top-=this.jk,c.top-=this.jk),o=Math.min(h.left,c.left),s=Math.max(h.left+d,c.left+f),a=Math.min(h.top,c.top),l=Math.max(h.top+h.height,c.top+c.height),this.s.topSplit&&(a+=this.zD(n)),this.bh&&(this.bh=window.clearTimeout(this.bh)),i&&(this.bh=webix.delay(this.ch,this,[webix.html.pos(i)],250))}var p=this.yl.style;p.left=o+"px",p.top=a+"px",p.width=s-o+"px",p.height=l-a+"px"}t&&this.callEvent("onAfterBlockSelect",[n,r])}},Al:function(e){this.yl=webix.html.create("div",{class:"webix_block_selection"},""),this.Vf.appendChild(this.yl)},rl:function(e){if(!1!==this.ul){this.vl||webix.html.addCss(document.body,"webix_noselect");var t=webix.html.pos(e),i=[t.x-this.xl.x,t.y-this.xl.y];if(Math.abs(this.ul[0]-i[0])<5&&Math.abs(this.ul[1]-i[1])<5)return;!1===this.vl&&this.Al(e),this.vl=i,this.jz(this.config.blockselect,!1,e)}},zl:function(e,t){var i=!1,n=null,r=null;if(this.ek&&e>this.dk+this.Yj?e+=this.Zj.getSize()-this.Yj-this.dk-this.ek:(!this.dk||e>this.dk)&&(e+=this.Zj.getScroll()),this.s.topSplit&&this.ak>this.s.topSplit){var o=this.ug(this.getIdByIndex(this.s.topSplit-1),this.columnId(0));o.top+o.height>t&&(i=!0)}i||(t+=this.getScrollState().y),0>e&&(e=0),0>t&&(t=0);for(var a=this.s.columns,s=this.data.order,l=0,h=0;h<a.length;h++)if((l+=a[h].width)>=e){r=a[h].id;break}r||(r=a[a.length-1].id),l=0;var c=this.data.$min||0;if(this.s.fixedRowHeight)n=s[c+Math.floor(t/this.s.rowHeight)];else for(var h=c;h<s.length;h++)if((l+=this.Uj(h))>=t){n=s[h];break}return n||(n=s[s.length-1]),{row:n,column:r}},zD:function(e,t){var i=0,n=this.getIndexById(e.row);if(n>=this.s.topSplit){var r=this.ug(this.getIdByIndex(n),e.column),o=this.ug(this.getIdByIndex(this.s.topSplit-1),e.column);o.top+o.height-r.top>0&&(i=o.top+o.height-(r.top>0||!t?r.top:0))}return i}}),webix.protoUI({name:"resizearea",defaults:{dir:"x"},$init:function(e){var t=e.dir||"x",i=webix.toNode(e.container),n="x"==t?"width":"height",r=e.margin?e.margin+"px":0;this.Cl="x"==t?"left":"top",this.x=webix.html.create("DIV",{class:"webix_resize_area webix_dir_"+t}),webix.UE(this.x,webix.env.mouse.down,webix.html.stopEvent),r&&(r="x"==t?r+" 0 "+r:"0 "+r+" 0 "+r),this.Dl=webix.html.create("DIV",{class:"webix_resize_handle_"+t,style:r?"padding:"+r:""},"<div class='webix_handle_content'></div>"),this.El=webix.html.create("DIV",{class:"webix_resize_origin_"+t}),e[n]&&(this.El.style[n]=e[n]+(e.border?1:0)+"px",this.Dl.style[n]=e[n]+"px"),e.cursor&&(this.Dl.style.cursor=this.El.style.cursor=this.x.style.cursor=e.cursor),this.Fl=webix.event(i,webix.env.mouse.move,this.Gl,{bind:this}),this.Hl=webix.event(document.body,webix.env.mouse.up,this.Il,{bind:this}),this.Dl.style[this.Cl]=this.El.style[this.Cl]=e.start+"px",i.appendChild(this.x),i.appendChild(this.Dl),i.appendChild(this.El)},Il:function(){this.callEvent("onResizeEnd",[this.Jl]),webix.eventRemove(this.Fl),webix.eventRemove(this.Hl),webix.html.remove(this.x),webix.html.remove(this.Dl),webix.html.remove(this.El),this.x=this.Dl=this.El=null},Gl:function(e){var t=webix.html.pos(e);this.Jl=("x"==this.s.dir?t.x:t.y)+this.s.start-this.s.eventPos,this.Dl.style[this.Cl]=this.Jl+"px",this.callEvent("onResize",[this.Jl])}},webix.EventSystem,webix.Settings),webix.extend(webix.ui.datatable,{resizeRow_setter:function(e){return this.s.scrollAlignY=!1,this.s.fixedRowHeight=!1,this.resizeColumn_setter(e)},resizeColumn_setter:function(e){return e&&this.Kl&&(webix.UE(this.x,"mousemove",this.Ll,{bind:this}),webix.UE(this.x,"mousedown",this.Ml,{bind:this}),webix.UE(this.x,"mouseup",this.Nl,{bind:this}),this.Kl=!1),e},Kl:!0,Ml:function(e){this.s.subview&&this!=webix.$$(e.target||e.srcElement)||this.Ol&&(this.Pl=[webix.html.pos(e),this.Ol[2]],webix.html.addCss(document.body,"webix_noselect"),webix.html.denySelect())},Nl:function(){this.Pl=!1,webix.html.removeCss(document.body,"webix_noselect"),webix.html.allowSelect()},Ql:function(e){if(e=e||event,!this.Rl){var t=this.Ol[0],i=this.Pl[1],n=this.pk(i);if(n){var r,o=this.Pl[0];if("x"==t?(r=webix.html.offset(i).x+this.Ol[1]-webix.html.offset(this.Vf).x,o=o.x,this.Ol[1]||(n.cind-=i.parentNode.colSpan||1)):(r=webix.html.offset(i).y+this.Ol[1]-webix.html.offset(this.Vf).y+this.$g,o=o.y,this.Ol[1]||n.rind--),n.cind>=0&&n.rind>=0){this.Rl=[t,n,r];new webix.ui.resizearea({container:this.x,dir:t,eventPos:o,start:r,cursor:("x"==t?"col":"row")+"-resize"}).attachEvent("onResizeEnd",webix.bind(this.Sl,this))}this.Ml=this.Ol=!1}}},Sl:function(e){if(this.Rl){var t=this.Rl[0],i=this.Rl[1],n=e-this.Rl[2];if("x"==t){this.s.rightSplit&&i.cind+1>=this.Fj&&i.cind!==this.fj.length-1&&(i.cind++,n*=-1);var r=this.fj[i.cind],o=r.width;delete r.fillspace,delete r.adjust,this.Xs(i.cind,o+n,!0,!0),this.rk()}else{var a=this.getIdByIndex(i.rind),s=this.FA(this.getItem(a));this.setRowHeight(a,s+n)}this.Nl()}this.Rl=null},Ll:function(e){var t=null,i=this.s;if(this.Ol&&this.Pl)return this.Ql(e);e=e||event;var n=e.target||e.srcElement,r=!1;if("TD"!=n.tagName&&"TABLE"!=n.tagName){var o=n.className||"",a="string"==typeof o&&-1!=o.indexOf("webix_cell");if(!a||!i.drag){var s="string"==typeof o&&-1!=o.indexOf("webix_hcell");if(this.Ol=!1,a||s){var l=n.offsetWidth,h=n.offsetHeight,c=webix.html.posRelative(e),u=i.resizeRow;"object"==typeof u&&u.headerOnly&&(t=this.pk(n),t.cind>0&&(u=!1)),a&&u&&(u="object"==typeof u&&u.size?u.size:3,c.y<u?(t||(t=this.pk(n)),t.rind&&(this.Ol=["y",0,n],r="row-resize")):h-c.y<u+1&&(this.Ol=["y",h,n],r="row-resize"));var d=i.resizeColumn;"object"==typeof d&&d.headerOnly&&a&&(d=!1),d&&(d="object"==typeof d&&d.size?d.size:3,c.x<d?(this.Ol=["x",0,n],r="col-resize"):l-c.x<d+1&&(this.Ol=["x",l,n],r="col-resize"))}this.Tl&&window.clearTimeout(this.Tl),this.Tl=webix.delay(this.Ul,this,[r],r?100:0)}}},Ul:function(e){this.Vl!=e&&(this.Vl=e,this.x.style.cursor=e||"default")}}),webix.extend(webix.ui.datatable,webix.PagingAbility),webix.csv={escape:!0,delimiter:{rows:"\n",cols:"\t"},parse:function(e,t){if(t=t||this.delimiter,!this.escape)return this.Wl(e,t);for(var i=e.replace(/\n$/,"").split(t.rows),n=0;n<i.length-1;)this.Xl(i[n],'"')%2==1&&(i[n]+=t.rows+i[n+1],delete i[n+1],n++),n++;var r=[];for(n=0;n<i.length;n++)if(void 0!==i[n]){for(var o=i[n],a=0,s=[],l=!1,h=0;h<=o.length;h++){if(!l&&o[h]===t.cols||h===o.length){var c=o.substr(a,h-a);c[0]===c[c.length-1]&&'"'===c[0]&&(c=c.substr(1,c.length-2).replace('""','"')),s.push(c),a=h+1}'"'!==o[h]||(l=!l)}r.push(s)}return r},Wl:function(e,t){for(var i=e.split(t.rows),n=0;n<i.length;n++)i[n]=i[n].split(t.cols);return i},Xl:function(e,t){return e.split(t).length-1},stringify:function(e,t){if(t=t||this.delimiter,!this.escape){for(var i=0;i<e.length;i++)e[i]=e[i].join(t.cols);return e.join(t.rows)}for(var n=/\n|\"|;|,/,i=0;i<e.length;i++){for(var r=0;r<e[i].length;r++)n.test(e[i][r])&&(e[i][r]=e[i][r].replace(/"/g,'""'),e[i][r]='"'+e[i][r]+'"');e[i]=e[i].join(t.cols)}return e=e.join(t.rows)}},webix.TablePaste={clipboard_setter:function(e){return(!0===e||1===e)&&(e="block"),webix.clipbuffer.init(),this.attachEvent("onSelectChange",this.Yl),this.attachEvent("onItemClick",function(e,t,i){document.activeElement&&this.$view.contains(document.activeElement)&&(webix.clipbuffer.focus(),webix.UIManager.setFocus(this))}),this.attachEvent("onPaste",this.Zl),e},templateCopy_setter:webix.template,Yl:function(){if(!this.getEditor||!this.getEditor()){var e=this.$l();webix.clipbuffer.set(e),webix.UIManager.setFocus(this)}},$l:function(){var e=[],t=this.s.templateCopy;return this.mapSelection(function(i,n,r,o,a){e[o]||(e[o]=[]);var s=t?t(i,n,r):i;return e[o].push(s),i}),webix.csv.stringify(e,this.s.delimiter)},Zl:function(e){if(!webix.isUndefined(this.rh[this.s.clipboard])){var t=webix.csv.parse(e,this.s.delimiter);this.rh[this.s.clipboard].call(this,t)}},rh:{block:function(e){var t=this.mapSelection(null);t&&(this.mapCells(t.row,t.column,e.length,null,function(t,i,n,r,o){return e[r]&&e[r].length>o?e[r][o]:t}),this.render())},selection:function(e){this.mapSelection(function(t,i,n,r,o){return e[r]&&e[r].length>o?e[r][o]:t}),this.render()},repeat:function(e){this.mapSelection(function(t,i,n,r,o){return i=e[r%e.length],i[o%i.length]}),this.render()},custom:function(e){}}},webix.extend(webix.ui.datatable,webix.TablePaste),webix.storage||(webix.storage={}),webix.storage.prefix=function(e,t){return e+=".",{put:function(i,n){return t.put(e+i,n)},get:function(i){return t.get(e+i)},remove:function(i){return t.remove(e+i)}}},webix.storage.local={put:function(e,t){e&&window.JSON&&window.localStorage&&window.localStorage.setItem(e,webix.stringify(t))},get:function(e){if(e&&window.JSON&&window.localStorage){var t=window.localStorage.getItem(e);return t?webix.DataDriver.json.toObject(t):null}return null},remove:function(e){e&&window.JSON&&window.localStorage&&window.localStorage.removeItem(e)},clear:function(){window.localStorage.clear()}},webix.storage.session={put:function(e,t){e&&window.JSON&&window.sessionStorage&&window.sessionStorage.setItem(e,webix.stringify(t))},get:function(e){if(e&&window.JSON&&window.sessionStorage){var t=window.sessionStorage.getItem(e);return t?webix.DataDriver.json.toObject(t):null}return null},remove:function(e){e&&window.JSON&&window.sessionStorage&&window.sessionStorage.removeItem(e)},clear:function(){window.sessionStorage.clear()}},webix.storage.cookie={put:function(e,t,i,n){e&&window.JSON&&(document.cookie=e+"="+escape(webix.stringify(t))+(n&&n instanceof Date?";expires="+n.toUTCString():"")+(i?";domain="+i:"")+(webix.env.https?";secure":""))},getRaw:function(e){for(var t=document.cookie.split(";"),i="",n="",r=0;r<t.length;r++){if(i=t[r].split("="),i[0].replace(/^\s+|\s+$/g,"")==e)return!0,i.length>1&&(n=unescape(i[1].replace(/^\s+|\s+$/g,""))),n;i=null,""}return null},get:function(e){if(e&&window.JSON){var t=this.getRaw(e);return t?webix.DataDriver.json.toObject(unescape(t)):null}return null},remove:function(e,t){e&&this.getRaw(e)&&(document.cookie=e+"="+(t?";domain="+t:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")},clear:function(e){for(var t=document.cookie.split(";"),i=0;i<t.length;i++)document.cookie=/^[^=]+/.exec(t[i])[0]+"="+(e?";domain="+e:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}},webix.DataState={getState:function(){for(var e=this.config.columns.length,t=this.config.columns,i={ids:[],size:[],select:this.getSelectedId(!0),scroll:this.getScrollState()},n=0;e>n;n++){var r=t[n];i.ids.push(r.id),i.size.push(r.fillspace||r.adjust?-1:r.width)}if(i.order=[].concat(this.bm.length?this.bm:i.ids),this.Nk&&(i.sort={id:this.Nk,dir:this.Ok}),this.ij&&this.tj){var o={},a=0;for(var s in this.ij)if(!this.am[s]){var l=this.ij[s];l[1].value=o[s]=l[2].getValue(l[0]),a=1}a&&(i.filter=o)}i.hidden=[];for(var s in this.am)i.hidden.push(s);return i},setState:function(e){var t=this.config.columns;if(e){if(this.Nk=null,this.blockEvent(),e.hidden){for(var i={},n=0;n<e.hidden.length;n++)i[e.hidden[n]]=!0,this.bm.length||this.hideColumn(e.hidden[n]);if(this.bm.length)for(var n=0;n<this.bm.length;n++){var r=this.bm[n];!!i[r]==!this.am[r]&&this.hideColumn(r,{},!1,!!i[r])}}if(e.ids){for(var o=!1,a=this.config.columns,n=0;n<a.length;n++)a[n].id!=e.ids[n]&&(o=!0);if(o){for(var n=0;n<e.ids.length;n++)a[n]=this.getColumnConfig(e.ids[n])||a[n];this.refreshColumns()}}if(e.size)for(var s=Math.min(e.size.length,t.length),n=0;s>n;n++){var l=t[n];l&&e.size[n]>0&&l.width!=e.size[n]&&(delete l.fillspace,delete l.adjust,this.Xs(n,e.size[n],!0))}this.unblockEvent();var h=!(this.s.leftSplit||this.s.rightSplit);if(this.rk(h),this.callEvent("onStructureUpdate",[]),e.sort){var c=t[this.getColumnIndex(e.sort.id)];c&&this.zf(e.sort.id,e.sort.dir,c.sort)}if(e.filter){var u=this.filterByAll;this.filterByAll=function(){};for(var d in e.filter){var f=e.filter[d];if(f&&this.ij[d]){var p=this.ij[d];p[2].setValue(p[0],f);var m=p[1].contentId;m&&(this.hj[m].value=f)}}for(var d in this.ij)if(!e.filter[d]){var p=this.ij[d];p[2].setValue(p[0],"")}this.filterByAll=u,this.filterByAll()}if(e.select&&this.select){var g=e.select;this.unselect();for(var n=0;n<g.length;n++)(!g[n].row||this.exists(g[n].row))&&this.hl(g[n],!0)}e.scroll&&this.scrollTo(e.scroll.x,e.scroll.y)}}},webix.extend(webix.ui.datatable,webix.DataState),function(){function e(){if(webix.env.touch)i.$init(),-1==document.body.className.indexOf("webix_full_screen")&&i.limit(!0),window.MSCSSMatrix&&webix.html.addStyle(".webix_view{ -ms-touch-action: none; }");else var r=webix.event(document.body,"touchstart",function(i){if(i.touches.length&&i.touches[0].radiusX>4){webix.env.touch=!0,t(n),e();for(var o in webix.ui.views){var a=webix.ui.views[o];a&&a.$touch&&a.$touch()}}webix.eventRemove(r)},{capture:!0})}function t(e){e.down="touchstart",e.move="touchmove",e.up="touchend",e.context=i.gm}var i=webix.Touch={config:{longTouchDelay:1e3,scrollDelay:150,gravity:500,deltaStep:30,speed:"0ms",finish:1500,ellastic:!0},limit:function(e){i.cm=!1!==e},disable:function(){i.Xf=!0},enable:function(){i.Xf=!1},$init:function(){i.$init=function(){},webix.event(document.body,n.down,i.dm),webix.event(document.body,n.move,i.em),webix.event(document.body,n.up,i.fm),webix.event(document.body,"dragstart",function(e){return i.Xf||i.cm?void 0:webix.html.preventEvent(e)}),webix.event(document.body,"touchstart",function(e){if(!i.Xf&&!i.cm&&webix.env.isSafari){var t=e.srcElement.tagName.toLowerCase();return"input"==t||"textarea"==t||"select"==t||"label"==t||(i.im=!0,webix.html.preventEvent(e))}}),i.Of(),i.jm=[null,null],i.$active=!0},Of:function(){i.km=i.lm=i.mm=i.bC=null,i.nm=i.om=i.pm=this.qm=null,i.rm={sm:0,tm:0,um:0},i.vm&&(webix.html.removeCss(i.vm,"webix_touch"),i.vm=null),window.clearTimeout(i.wm),i.xm=!0,i.ym=!0,i.zm=!0,i.Am||i.Pf()},fm:function(e){if(i.km){if(i.nm){var t=i.Mf(i.om),n=t.e,r=t.f,o=i.config.finish,a=i.Bm(e,!0),s=webix.$$(i.om),l=s&&s.$scroll?s.$scroll.gravity:i.config.gravity;if(a.um){var h=n+l*a.sm/a.um,c=r+l*a.tm/a.um,u=i.jm[0]?i.Cm(h,!1,!1,i.pm.dx,i.pm.px):n,d=i.jm[1]?i.Cm(c,!1,!1,i.pm.dy,i.pm.py):r,f=Math.max(Math.abs(u-n),Math.abs(d-r));150>f&&(o=o*f/150),(u!=n||d!=r)&&(o=Math.round(o*Math.max((u-n)/(h-n),(d-r)/(c-r))));var p={e:u,f:d},s=webix.$$(i.om);s&&s.adjustScroll&&s.adjustScroll(p),o=Math.max(100,o),n!=p.e||r!=p.f?(i.Nf(i.om,p.e,p.f,o+"ms"),i.Dm&&i.Dm.Em(p.e,p.f,o+"ms"),i.Fm(p.e,p.f,o+"ms")):i.Pf()}else i.Pf()}else if(!this.qm)if(i.zm&&!i.ym)i.Gm("onSwipeX");else if(i.ym&&!i.zm)i.Gm("onSwipeY");else if(webix.env.isSafari&&i.im){i.im=!1;var m=i.km.target;webix.delay(function(){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),m.dispatchEvent(e)})}i.Gm("onTouchEnd"),i.Of()}},em:function(e){if(i.bC&&i.km){var t=i.Bm(e);if(i.Gm("onTouchMove"),i.nm)i.Hm(t);else if(i.ym=i.Im(t.Jm,"x",i.ym),i.zm=i.Im(t.Ei,"y",i.zm),i.nm){var n=i.Km("onBeforeScroll",!0);if(n){var r={};n.callEvent("onBeforeScroll",[r]),r.update&&(i.config.speed=r.speed,i.config.scale=r.scale)}i.Lm(t)}return webix.html.preventEvent(e)}},Hm:function(){if(i.om){var e=i.Mf(i.om),t=(e.e,e.f,i.mm||i.km),n=webix.$$(i.om),r=n&&n.$scroll?n.$scroll.ellastic:i.config.ellastic;i.jm[0]&&(e.e=i.Cm(e.e-t.x+i.lm.x,r,e.e,i.pm.dx,i.pm.px)),i.jm[1]&&(e.f=i.Cm(e.f-t.y+i.lm.y,r,e.f,i.pm.dy,i.pm.py)),i.Nf(i.om,e.e,e.f,"0ms"),i.Dm&&i.Dm.Em(e.e,e.f,"0ms"),i.Fm(e.e,e.f,"0ms")}},Fm:function(e,t,n){var r=i.pm.px/i.pm.dx*-e,o=i.pm.py/i.pm.dy*-t;i.jm[0]&&i.Nf(i.jm[0],r,0,n),i.jm[1]&&i.Nf(i.jm[1],0,o,n)},scrollTo:function(e,t,n,r){i.Nf(e,t,n,r)},Nf:function(e,t,n,r){if(!i.tt&&window.setAnimationFrame&&window.setAnimationFrame(function(){return i.tt=!0,i.Nf(e,t,n,r)}),i.tt=null,i.Am=!0,e){var o=i.config.translate||webix.env.translate;e.style[webix.env.transform]=o+"("+Math.round(t)+"px, "+Math.round(n)+"px"+("translate3d"==o?", 0":"")+")",e.style[webix.env.transitionDuration]=r}},Mf:function(e){var t,n=window.getComputedStyle(e)[webix.env.transform];if("none"==n)t={e:0,f:0};else if(window.WebKitCSSMatrix)t=new WebKitCSSMatrix(n);else if(window.MSCSSMatrix)t=new MSCSSMatrix(n);else{var r=n.replace(/(matrix\()(.*)(\))/gi,"$2");r=r.replace(/\s/gi,""),r=r.split(",");for(var t={},o=["a","b","c","d","e","f"],a=0;a<6;a++)t[o[a]]=parseInt(r[a],10)}return i.Dm&&i.Dm.Mm(t),t},Cm:function(e,t,i,n,r){if(e===i)return e;var o=Math.abs(e-i),a=o/(e-i);if(e>0)return t?i+a*Math.sqrt(o):0;var s=n-r;return 0>s+e?t?i-Math.sqrt(-(e-i)):-s:e},Nm:function(e){if(!e.scroll_enabled){e.scroll_enabled=!0,e.parentNode.style.position="relative";var t=webix.env.cssPrefix;e.style.cssText+=t+"transition: "+t+"transform; "+t+"user-select:none; "+t+"transform-style:flat;",e.addEventListener(webix.env.transitionEnd,i.Pf,!1)}},Lm:function(e){-1!=i.nm.indexOf("x")&&(i.jm[0]=i.Om("x",i.pm.dx,i.pm.px,"width")),-1!=i.nm.indexOf("y")&&(i.jm[1]=i.Om("y",i.pm.dy,i.pm.py,"height")),i.Nm(i.om),window.setTimeout(i.Hm,1)},Om:function(e,t,n,r){if(2>t-n){var o=i.Mf(i.om),a="y"==e?o.e:0,s="y"==e?0:o.f;return i.Dm||i.Nf(i.om,a,s,"0ms"),i.nm=i.nm.replace(e,""),""}var l=webix.html.create("DIV",{class:"webix_scroll_"+e},"");return l.style[r]=Math.max(n*n/t-7,10)+"px",i.pm.left&&("x"===e?l.style.left=i.pm.left+"px":l.style.right=-i.pm.left+"px"),i.pm.hidden&&(l.style.visibility="hidden"),i.om.parentNode.appendChild(l),l},Im:function(e,t,n){return e>i.config.deltaStep?(i.xm&&(i.Pm(t),i.pk(t),-1==(i.nm||"").indexOf(t)&&(i.nm="")),!1):n},Pf:function(){var e,t,n;n=webix.$$(i.om||this),n&&(i.om?e=i.Mf(i.om):n.getScrollState&&(t=n.getScrollState(),e={e:t.x,f:t.y}),webix.callEvent("onAfterScroll",[e]),n.callEvent&&n.callEvent("onAfterScroll",[e])),i.nm||(webix.html.remove(i.jm),i.jm=[null,null]),i.Am=!1},Pm:function(e){window.clearTimeout(i.wm),i.xm=!1},Qm:function(e){return!i.jm[0]&&!i.jm[1]||void i.Rm(e,i.jm[0]?"x":"y")},dm:function(e){var t=e.target||event.srcElement;if(!(i.Xf||t.tagName&&"textarea"==t.tagName.toLowerCase()&&t.offsetHeight<t.scrollHeight)){i.qm=null,i.bC=i.km=n.context(e);var r=webix.$$(e);!i.cm||i.Sm()||r&&r.$touchCapture||(i.bC=null),i.Gm("onTouchStart"),i.Qm(e)&&(i.wm=window.setTimeout(i.Tm,i.config.longTouchDelay)),!r||!r.touchable||t.className&&0===t.className.indexOf("webix_view")||(i.vm=r.getNode(e),webix.html.addCss(i.vm,"webix_touch"))}},Tm:function(e){i.km&&(i.Gm("onLongTouch"),webix.callEvent("onClick",[i.km]),i.qm=!0)},Rm:function(e,t){i.pk(t);var r=i.jm[0]||i.jm[1];if(r){var o=i.Km("onBeforeScroll",!0);o&&o.callEvent("onBeforeScroll",[i.km,i.lm])}!r||i.om&&r.parentNode==i.om.parentNode||(i.Of(),i.Pf(),i.km=n.context(e)),i.em(e)},Bm:function(e,t){return i.mm=i.lm,i.lm=n.context(e),i.rm.Jm=Math.abs(i.km.x-i.lm.x),i.rm.Ei=Math.abs(i.km.y-i.lm.y),i.mm&&(i.lm.time-i.mm.time<i.config.scrollDelay?(i.rm.sm=i.rm.sm/1.3+i.lm.x-i.mm.x,i.rm.tm=i.rm.tm/1.3+i.lm.y-i.mm.y):i.rm.tm=i.rm.sm=0,i.rm.um=i.rm.um/1.3+(i.lm.time-i.mm.time)),i.rm},Um:function(e){i.pm={dx:e.offsetWidth,dy:e.offsetHeight,px:e.parentNode.offsetWidth,py:e.parentNode.offsetHeight}},Sm:function(e){var t=i.km.target;if(!webix.env.touch&&!webix.env.transition&&!webix.env.transform)return null;for(;t&&"BODY"!=t.tagName;){if(t.getAttribute){var n=t.getAttribute("touch_scroll");if(n&&(!e||-1!=n.indexOf(e)))return[t,n]}t=t.parentNode}return null},pk:function(e){var t=this.Sm(e);return t&&(i.nm=t[1],i.om=t[0],i.Um(t[0])),t},Gm:function(e){webix.callEvent(e,[i.km,i.lm]);var t=i.Km(e);t&&t.callEvent(e,[i.km,i.lm])},Km:function(e,t){var n=webix.$$(t?i.om:i.km);if(!n)return null;for(;n;){if(n.hasEvent&&n.hasEvent(e))return n;n=n.getParentView()}return null},gm:function(e){if(!e.touches[0]){var t=i.lm;return t.time=new Date,t}return{target:e.target,x:e.touches[0].pageX,y:e.touches[0].pageY,time:new Date}},hm:function(e){return{target:e.target||e.srcElement,x:e.pageX,y:e.pageY,time:new Date}}};webix.ready(e);var n=webix.env.mouse={down:"mousedown",up:"mouseup",move:"mousemove",context:i.hm};window.navigator.pointerEnabled?(n.down="pointerdown",n.move="pointermove",n.up="pointerup"):window.navigator.msPointerEnabled?(n.down="MSPointerDown",n.move="MSPointerMove",n.up="MSPointerUp"):webix.env.touch&&t(n)}(),webix.attachEvent("onDataTable",function(e,t){webix.env.touch&&(webix.Touch.$init(),t.scrollSize=0,webix.Touch.Xf&&webix.Touch.limit(),e.$ready.push(e.$touch))}),webix.extend(webix.ui.datatable,{$touch:function(){var e=this.s;e.scrollAlignY=!1,webix.extend(this,!0===e.prerender?this.Vm:this.Wm);var t="";e.autowidth||!1===e.scrollX||(t+="x"),e.autoheight||!1===e.scrollY||(t+="y"),this.Vf.setAttribute("touch_scroll",t),webix.Touch.Nm(this.Vf.childNodes[1].firstChild),webix.Touch.Nf(this.Vf.childNodes[1].firstChild,0,0,"0ms"),this.Em(0,0,"0ms")},Vm:{$j:function(e,t){webix.Touch.Nf(this.Vf.childNodes[1].firstChild,0,0,"0ms"),this.Em(e,t,"0ms")},_j:function(){var e=webix.Touch.Mf(this.Vf.childNodes[1].firstChild);return{x:-e.e,y:-e.f}},$init:function(){this.attachEvent("onBeforeScroll",function(){webix.Touch.om=this.Vf.childNodes[1].firstChild,webix.Touch.Um(webix.Touch.om),webix.Touch.Dm=this}),this.attachEvent("onTouchEnd",function(){webix.Touch.Dm=null})},Em:function(e,t,i){this.s.leftSplit&&webix.Touch.Nf(this.Vf.childNodes[0].firstChild,0,t,i),this.s.rightSplit&&webix.Touch.Nf(this.Vf.childNodes[2].firstChild,0,t,i),this.s.header&&webix.Touch.Nf(this.I.childNodes[1].firstChild,e,0,i),this.s.footer&&webix.Touch.Nf(this.cj.childNodes[1].firstChild,e,0,i),this.callEvent("onSyncScroll",[e,t,i])},Mm:function(){}},Wm:{$j:function(e,t){webix.delay(function(){this.callEvent("onAfterScroll",[{e:-e,f:-t}])},this)},$scroll:{gravity:0,elastic:!1},$init:function(){this.attachEvent("onAfterColumnHide",function(){this.$j(0,0)}),this.attachEvent("onBeforeScroll",function(){var e=webix.Touch;e.om=this.Vf.childNodes[1].firstChild,e.Um(e.om),e.pm.left=this.bk,e.pm.hidden=this.Zj.s.scrollVisible||this.Wj.s.scrollVisible,e.pm.dy=this.wj,e.Dm=this}),this.attachEvent("onAfterScroll",function(e){if(e){var t=this.bk!=-e.e,i=this.jk!=-e.f;webix.Touch.Dm=null,webix.Touch.$m=null,this.jk=0,this.bk=0;var n=webix.Touch.config.translate;return webix.Touch.config.translate="translate",this.Em(this.Zj?0:e.e,0,"0ms"),webix.Touch.config.translate=n,this.bk=-e.e,this.jk=-e.f,this.ZF(),this.render(),t&&(this.Zj&&this.Zj.scrollTo(this.bk),this.callEvent("onScrollX",[])),i&&(this.Wj&&this.Wj.scrollTo(this.jk),this.callEvent("onScrollY",[])),!1}})},Em:function(e,t,i){t+=this.jk,e+=this.bk,webix.Touch.Nf(this.Vf.childNodes[1].firstChild,e,t,i),this.s.leftSplit&&webix.Touch.Nf(this.Vf.childNodes[0].firstChild,0,t,i),this.s.rightSplit&&webix.Touch.Nf(this.Vf.childNodes[2].firstChild,0,t,i),this.s.header&&webix.Touch.Nf(this.I.childNodes[1].firstChild,e,0,i),this.s.footer&&webix.Touch.Nf(this.cj.childNodes[1].firstChild,e,0,i),this.callEvent("onSyncScroll",[e,t,i])},Mm:function(e){e.f-=this.jk,e.e-=this.bk}}}),webix.extend(webix.ui.datatable,{$init:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(e){e||this._m()},this)),this.attachEvent("onStructureLoad",this._m),this.attachEvent("onStructureUpdate",this.an),this.attachEvent("onColumnResize",function(e,t,i,n){n&&this.an()}),this.attachEvent("onResize",this.an)},_m:function(){for(var e=!1,t=this.fj,i=0;i<t.length;i++)t[i].adjust&&("header"==t[i].adjust||this.count())&&(e=this.bn(i,t[i].adjust,!0)||e);e&&(this.rk(!0),this.an())},an:function(){var e=this.s.columns,t=[],i=0;if(e&&!this.s.autowidth)for(var n=0;n<e.length;n++){var r=e[n].fillspace;r&&(t[n]=r,i+=1*r||1)}i&&this.cn(t,i)},cn:function(e,t){var i=this.s.columns;if(i){var n=this.bc-this.oj,r=!1;if(n>0){for(var o=0;o<i.length;o++)e[o]||(n-=i[o].width||this.config.columnWidth);for(var o=0;o<e.length;o++)if(e[o]){var a=Math.min(n,Math.round(n*e[o]/t));r=this.Xs(o,a,!0)||r,n-=i[o].width,t-=e[o]}r&&this.rk(!0)}}},dn:function(e,t){var i=this.s.columns[e],n=i.minColumnWidth||10;if("header"!=t){var r=this.data.order.length;i.adjustBatch&&i.adjustBatch<r&&(r=i.adjustBatch);for(var o=this.data.order.slice(0,r),a=0;r>a;a++)o[a]=o[a]?this.Ek(this.getItem(o[a]),i,0):"";n=Math.max(n,webix.html.getTextSize(o,"webix_table_cell webix_cell").width)}if("data"!=t)for(var a=0;a<i.header.length;a++){var s=i.header[a];if(s){var l=0;if(s.rotate)for(var h=0;h<(s.rowspan||1);h++)l+=this.Mt[h];var c="webix_table_cell webix_cell "+(s.css||"")+(s.rotate?"webix_measure_rotate":""),u=webix.html.getTextSize([s.text],c,l);n=Math.max(n,s.rotate?u.height:u.width)}}return n+1+(webix.env.isIE?webix.skin.$active.layoutPadding.space:0)},bn:function(e,t,i){if(e>=0){var n=this.dn(e,t);return this.Xs(e,n,i)}},adjustColumn:function(e,t){this.bn(this.getColumnIndex(e),t)},adjustRowHeight:function(e,t){if(e){var i,n=this.getColumnConfig(e),r=webix.html.create("DIV",{class:"webix_table_cell webix_measure_size webix_cell"},"");r.style.cssText="width:"+n.width+"px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;",this.$view.appendChild(r),r.offsetHeight<1&&(i=this.$view.cloneNode(!0),document.body.appendChild(i),i.appendChild(r)),this.data.each(function(e){r.innerHTML=this.Ek(e,n,0),e.$height=Math.max(r.scrollHeight,this.s.rowHeight)},this),r=webix.html.remove(r),i&&webix.html.remove(i)}else{var o=Array(this.data.order.length),a=this.config.columns,s=0;for(var l in this.data.pull)o[s]=0,s++;for(var h=0;h<a.length;h++){this.adjustRowHeight(a[h].id,!0);var s=0;this.data.each(function(e,t){e.$height>o[s]&&(o[s]=e.$height),e.$height=o[s],s++})}}t||this.refresh()}}),webix.extend(webix.ui.datatable,{math_setter:function(e){return e&&this.en(),e},fn:"$",en:function(){webix.env.strict||(this.data.attachEvent("onStoreUpdated",webix.bind(this.gn,this)),this.data.attachEvent("onStoreLoad",webix.bind(this.hn,this)),this.attachEvent("onStructureLoad",this.hn))},gn:function(e,t,i){if(e&&"delete"!=i&&"paint"!=i){"add"==i&&this.pn(t);for(var n=0;n<this.fj.length;n++)this.jn(e,this.fj[n].id,"add"!==i);this.kn={}}},jn:function(e,t,i){var n,r=this.getItem(e);if(!0===i?n=r[this.fn+t]||r[t]:(n=r[t],this.kn={}),void 0!==n&&null!==n&&(n.length>0&&"="===n.substr(0,1)?(r[this.fn+t]&&!0===i||(r[this.fn+t]=r[t]),r[t]=this.ln(n,e,t)):(void 0!==r[this.fn+t]&&delete r[this.fn+t],this.mn(r,t)),void 0!==r.depends&&void 0!==r.depends[t]))for(var o in r.depends[t]){var a=r.depends[t][o][0]+"__"+r.depends[t][o][1];void 0===this.kn[a]&&(this.kn[a]=!0,this.jn(r.depends[t][o][0],r.depends[t][o][1],!0))}},nn:function(e,t){var i=this.getItem(e);void 0!==i[this.fn+t]&&(i[t]=i[this.fn+t])},hn:function(){if(this.fj&&this.count()){this.pn();for(var e=0;e<this.fj.length;e++){var t=this.columnId(e);this.data.each(function(e){this.jn(e.id,t)},this)}this.kn={}}},pn:function(e){for(var t=0;t<this.fj.length;t++)if(this.fj[t].math){var i=this.columnId(t),n="="+this.fj[t].math;n=n.replace(/\$c/g,"#$c#"),e?(e[i]=this.qn(n,e.id,i),delete e[this.fn+i],this.mn(e,i)):this.data.each(function(e){e[i]=this.qn(n,e.id,i),delete e[this.fn+i],this.mn(e,i)},this)}},qn:function(e,t,i){return webix.template(e)({$r:t,$c:i})},rn:function(e,t){var i;if(!this.exists(e))return"#out_of_range";i=this.getItem(e);var n=i[this.fn+t]||i[t]||0;return n=""+n,"="!==n.substring(0,1)?n:(void 0===i[this.fn+t]&&(i[this.fn+t]=i[t]),i[t]=this.ln(n,e,t,!0),i[t])},ln:function(e,t,i,n){if(!0===n){if(this.sn(t,i))return"#selfreference"}else this.tn();this.un(t,i);var r=this.getItem(t);e=e.substring(1);var o=this.vn(e),a=this.wn(e,t);o?(e=this.xn(e,a),e=this.yn(e,o)):e=this.xn(e,a,!0);var s=this.zn(e);if(!1!==s)return s;this.An(t,i),this.mn(r,i);for(var l=0;l<a.length;l++)this.Bn([t,i],a[l]);var s=this.zn(e);if(!1!==s)return s;if(!e)return e;e=this.Cn(e);var s=this.zn(e);return!1!==s?s:e},vn:function(e){var t=/(\+|\-|\*|\/)/g;return e.replace(/\[[^)]*?\]/g,"").match(t)},wn:function(e,t){var i=/\[([^\]]+),([^\]]+)\]/g,n=e.match(i);null===n&&(n=[]);for(var r=0;r<n.length;r++){var o=n[r],a=o;o=o.substr(1,o.length-2),o=o.split(","),o[0]=this.Dn(o[0]),o[1]=this.Dn(o[1]),":"===o[0].substr(0,1)&&(o[0]=this.getIdByIndex(o[0].substr(1))),"$r"===o[0]&&(o[0]=t),":"===o[1].substr(0,1)&&(o[1]=this.columnId(o[1].substr(1))),o[2]=a,n[r]=o}return n},xn:function(e,t,i){var n="(",r=")";i&&(n=r="");for(var o=0;o<t.length;o++){var a=t[o],s=this.rn(a[0],a[1]);isNaN(s)&&(s='"'+s+'"'),e=e.replace(a[2],n+s+r)}return e},yn:function(e,t){for(var i=[],n=0;n<t.length;n++){var r=t[n],o=this.En(e,r);i.push(o[0]),e=o[1]}i.push(e);for(var n=0;n<i.length;n++){var a=this.Dn(i[n]);i[n]=a}for(var s="",n=0;n<i.length-1;n++)s+=i[n]+t[n];return s+=i[i.length-1]},Cn:function(expr){try{webix.temp_value="",expr="webix.temp_value = "+expr,eval(expr)}catch(e){webix.temp_value=""}var result=webix.temp_value;return webix.temp_value=null,""+result},En:function(e,t){var i=e.indexOf(t);return[e.substr(0,i),e.substr(i+1)]},Dn:function(e){return e=e.replace(/^ */g,""),e=e.replace(/ *$/g,"")},tn:function(){this.Fn=[]},un:function(e,t){this.Fn[e+"__"+t]=!0},An:function(e,t){void 0!==this.Fn[e+"__"+t]&&delete this.Fn[e+"__"+t]},sn:function(e,t){return void 0!==this.Fn[e+"__"+t]},Bn:function(e,t){var i=this.getItem(t[0]);void 0===i.depends&&(i.depends={}),void 0===i.depends[t[1]]&&(i.depends[t[1]]={}),i.depends[t[1]][e[0]+"__"+e[1]]=e,i=this.getItem(e[0]),void 0===i.triggers&&(i.triggers={}),void 0===i.triggers[e[1]]&&(i.triggers[e[1]]={}),i.triggers[e[1]][t[0]+"__"+t[1]]=t},mn:function(e,t){if(e&&void 0!==e.triggers)for(var i in e.triggers[t]){var n=e.triggers[t][i];delete this.getItem(n[0]).depends[n[1]][e.id+"__"+t]}},zn:function(e){var t=/#\w+/,i=e.match(t);return null!==i&&i.length>0&&i[0]}}),webix.extend(webix.ui.datatable,{ii:function(e){return this.getColumnConfig(e.column).editor},getEditor:function(e,t){return e?(1==arguments.length&&(t=e.column,e=e.row),(this.ai[e]||{})[t]):this.di},si:function(e){for(var t in this.ai){var i=this.ai[t];for(var n in i)"$count"!=n&&e.call(this,i[n])}},ji:function(e,t,i){var n=e.row,r=e.column,o=t.config=this.getColumnConfig(r);!1!==i&&this.showCell(n,r);var a=t.render();t.$inline&&(a=this.mi(e)),t.node=a;var s,l=this.getItem(n),h=o.editFormat;return this.s.editMath&&(s=l["$"+r]),s=s||l[r],webix.isUndefined(s)&&(s=""),t.setValue(h?h(s):s,l),t.value=l[r],this.ni(e,t),t.$inline||this.oi(e,a,!0),t.afterRender&&t.afterRender(),this.s.liveValidation&&(webix.UE(t.node,"keyup",this.Gn(e,this)),this.validateEditor(e)),a},Gn:function(e,t){return function(){t.validateEditor(e)}},ti:function(e,t,i){var n=this.getColumnConfig(e.column).editParse,r=i?{}:this.getItem(e.row);return r[e.column]=n?n(t):t,this.s.editMath&&(r["$"+e.column]=null),r},ni:function(e,t,i){var n=this.ai[e.row]=this.ai[e.row]||{};n.$count=(n.$count||0)+1,t.row=e.row,t.column=e.column,this.di=n[e.column]=t,this.Eb++,this.Hn=this.getScrollState()},qi:function(e){this.di==e&&(this.di=0),e.destroy&&e.destroy();var t=this.ai[e.row];delete t[e.column],t.$count--,t.$count||delete this.ai[e.row],this.Eb--},ei:function(e,t){var i=this.ai[e];if(i){this.ai[t]=i,delete this.ai[e];for(var n in i)i[n].row=t}},pi:function(e){var t,i,n,r,o,a=this.getColumnConfig(e.column),s=0;if(a&&a.node&&a.attached){if(n=this.getIndexById(e.row),this.Rt&&this.getSpan(e.row,e.column))for(i=0;3>i;i++)for(t=this.St[i],r=0;!s&&r<t.childNodes.length;r++)o=t.childNodes[r],o.getAttribute("row")==n&&o.getAttribute("column")==this.getColumnIndex(e.column)&&(s=o);!s&&n>=a.qk-this.s.topSplit&&n<a.Kk&&(s=a.node.childNodes[n-a.qk+this.s.topSplit])}return s},editCell:function(e,t,i,n){return t=t||this.s.columns[0].id,webix.EditAbility.edit.call(this,{row:e,column:t},i,n)},editRow:function(e,t){e&&e.row&&(e=e.row);var i=!1;this.eachColumn(function(t){this.edit({row:e,column:t},i,!i),i=!0})},editColumn:function(e,t){e&&e.column&&(e=e.column);var i=!1;this.eachRow(function(t){this.edit({row:t,column:e},i,!i),i=!0})},eachRow:function(e,t){var i=this.data.order;t&&(i=this.data.jf||i);for(var n=0;n<i.length;n++)e.call(this,i[n])},eachColumn:function(e,t){for(var i in this.Aj){var n=this.Aj[i];e.call(this,n.id,n)}if(t)for(var i in this.am){var n=this.am[i];e.call(this,n.id,n)}},vi:function(e){if(this.getSelectedId){if(1==this.getSelectedId(!0).length)return this.hl(e),!1}},Gb:function(e,t){if(this.s.editable&&!this.Eb){if(t.target&&"INPUT"==t.target.tagName)return!0;var i=this.getSelectedId(!0);if(1==i.length){var n=i[0];return"row"==this.s.select&&(n.column=this.s.columns[t.shiftKey?0:this.s.columns.length-1].id),this.editNext(e,n),!1}}return!0},ui:function(e,t,i){var n=this.getIndexById(e.row),r=this.getColumnIndex(e.column),o=this.data.order,a=this.fj;if(i)for(var s=n;s<o.length;s++){for(var l=r+1;l<a.length;l++){var h={row:o[s],column:a[l].id};if(t.call(this,h)&&(!this.QD||!this.QD(e,h)))return h}r=-1}else for(var s=n;s>=0;s--){for(var l=r-1;l>=0;l--){var h={row:o[s],column:a[l].id};if(t.call(this,h))return h}r=a.length}return null},In:function(){this.Eb&&(this.Jn?this.Jn=!1:(this.Wj.scrollTo(this.getScrollState().y+this.Vf.childNodes[1].firstChild.scrollTop),this.Vf.childNodes[1].firstChild.scrollTop=0,this.Jn=!0))},Kn:function(){this.Eb&&this.Zj.scrollTo(this.Vf.childNodes[1].scrollLeft)},gi:function(){this.attachEvent("onScrollY",this.Ln),this.attachEvent("onScrollX",this.Ln),this.attachEvent("onScrollY",this.$s),this.attachEvent("onColumnResize",function(){this.editStop()}),this.attachEvent("onAfterFilter",function(){this.editStop()}),this.attachEvent("onRowResize",function(){this.editStop()}),this.attachEvent("onAfterScroll",function(){this.s.topSplit&&this.editStop()}),this.Vf.childNodes[1].firstChild.onscroll=webix.bind(this.In,this),this.Vf.childNodes[1].onscroll=webix.bind(this.Kn,this)},Ln:function(){if(this.Eb){var e=this.Hn;this.Hn=this.getScrollState();var t=this.Hn.y-e.y;this.si(function(e){if(e.getPopup){var i=this.getItemNode(e);i?e.getPopup().show(i):e.getPopup().show({x:-1e4,y:-1e4})}else e.$inline||(e.node.top-=t,e.node.style.top=e.node.top+"px")})}}}),webix.extend(webix.ui.datatable,webix.EditAbility),webix.extend(webix.ui.datatable,{$init:function(){this.kz(),this.attachEvent("onStructureLoad",this.Nn)},kz:function(){this.am={},this.bm=webix.toArray(),this.Mn=[0,0]},Nn:function(){for(var e=this.fj,t=0;t<e.length;t++)e[t].header&&this.xB(e,e[t].header),e[t].footer&&this.xB(e,e[t].footer);for(var t=e.length-1;t>=0;t--)e[t].hidden?this.hideColumn(e[t].id,{},!0,!0):e[t].batch&&this.config.visibleBatch&&e[t].batch!=this.config.visibleBatch&&this.hideColumn(e[t].id,{},!0,!0)},xB:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];n&&n.colspan&&!n.$colspan&&(n.$colspan=n.colspan)}},moveColumn:function(e,t){var i=this.getColumnIndex(e);if(i!=t){var n=this.s.columns,r=n.splice(i,1),o=t-(t>i?1:0);webix.PowerArray.insertAt.call(n,r[0],o),this.On()}},rz:function(){var e=this.bm,t=this.s.columns;if(!e.length){for(var i=0;i<t.length;i++)e[i]=t[i].id;this.Mn=[this.s.leftSplit,this.Fj]}},isColumnVisible:function(e){return!this.am[e]},hideColumn:function(e,t,i,n){var r,o=this.s.columns,a=this.bm,s=this.am,l=1;if(t=t||{},!1!==n){var h=this.getColumnIndex(e);if(-1===h||!this.callEvent("onBeforeColumnHide",[e]))return;if(-1==h)return;if(this.rz(),t.spans)for(var c=o[h].header,u=0;u<c.length;u++)c[u]&&(c[u].$groupSpan=c[u].colspan||1,l=Math.max(l,c[u].$groupSpan));h<this.s.leftSplit&&(this.s.leftSplit-=l),h>=this.Fj?this.s.rightSplit-=l:this.Fj-=l;for(var u=h+l-1;u>=h;u--)this.vk(h),r=o.splice(h,1)[0],s[r.id]=r,r.qk=-1,delete this.Aj[r.id];this.callEvent("onAfterColumnHide",[e])}else{if(!(r=s[e])||!this.callEvent("onBeforeColumnShow",[e]))return;for(var d=null,u=0,f=0;u<a.length;u++){if(a[u]==e){f=u;break}s[a[u]]||(d=a[u])}var h=d?this.getColumnIndex(d)+1:0;if(t.spans)for(var c=r.header,u=0;u<c.length;u++)c[u]&&(c[u].colspan=c[u].$groupSpan||c[u].colspan,delete c[u].$groupSpan,l=Math.max(l,c[u].colspan||1));for(var u=f+l-1;u>=f;u--){var r=s[a[u]];r?(webix.PowerArray.insertAt.call(o,r,h),delete r.hidden,delete s[r.id],this.Aj[r.id]=r):l--}f<this.Mn[0]&&(this.s.leftSplit+=l),f>=this.Mn[1]?this.s.rightSplit+=l:this.Fj+=l,this.callEvent("onAfterColumnShow",[e])}r.header&&this.xt(r,!1!==n?0:1,"header"),r.footer&&this.xt(r,!1!==n?0:1,"footer"),i||this.On()},xt:function(e,t,i){for(var n=e[i].length-1;n>=0;n--)for(var r,o=this.bm,a=!1,s=0,l=0;l<o.length;l++){var e=this.getColumnConfig(o[l]),h=e[i][n];this.isColumnVisible(o[l])?(a&&s>0&&r&&r.colspan>0?(h=e[i][n]=r,r=h):h&&h.$colspan&&0>=s&&(s=h.colspan=h.$colspan,r=h),a=null):(h&&h.$colspan&&0>=s&&(s=h.colspan=h.$colspan,a=r=h),r&&s>0&&r.colspan--),s--}},refreshColumns:function(e,t){(e&&e!=this.config.columns||t)&&(this.kz(),this.ij={},e&&(this.Fj=e.length-(this.config.rightSplit||0))),this.Aj={};for(var i=0;i<this.fj.length;i++){var n=this.fj[i];this.Aj[n.id]=n,n.attached=n.node=null}for(var i=0;3>i;i++)this.I.childNodes[i].innerHTML="",this.Vf.childNodes[i].firstChild.innerHTML="";this.fj=this.config.columns=e||this.config.columns,this.Fj=this.fj.length-this.s.rightSplit,this.tj=0,this.rj(),this.callEvent("onStructureUpdate"),this.sk(),this.render()},On:function(){this.tj=0,this.callEvent("onStructureUpdate"),this.uj(),this.render()},showColumn:function(e,t,i){return this.hideColumn(e,t,i,!1)},showColumnBatch:function(e,t){var i=void 0!==t;t=!1!==t,this.eachColumn(function(n,r){if(r.batch){var o=this.am[r.id];t||(o=!o),r.batch==e&&o?this.hideColumn(r.id,{spans:!0},!0,!t):i||r.batch==e||o||this.hideColumn(r.id,{spans:!0},!0,t)}},!0),this.On()}}),webix.extend(webix.ui.datatable,{$init:function(){this.attachEvent("onAfterScroll",this.cF)},cF:function(){if(!this.eF()){var e=this.y.querySelector(".webix_cell");e&&e.setAttribute("tabindex","0")}},eF:function(){for(var e=this.getSelectedId(!0),t=0;t<e.length;t++)if(this.isColumnVisible(e[t].column))return this.getItemNode(e[t]);return null},moveSelection:function(e,t,i){if(!this.s.disabled){t=t||{};var n=this.getSelectedId(!0),r=n.length-1,o=!(!this.s.multiselect&&!this.s.areaselect)&&t.shift;if(n.length>1&&"cell"!==this.s.select&&(n=n.sort(webix.bind(function(e,t){return this.getIndexById(e.row)>this.getIndexById(t.row)||this.getColumnIndex(e.column)>this.getColumnIndex(t.column)?1:-1},this)),("up"==e||"left"==e||"top"==e||"pgup"==e)&&(r=0)),0>r&&this.count()){if("down"==e||"right"==e)e="top";else{if("up"!=e&&"left"!=e)return;e="bottom"}r=0,n=[{row:1,column:1}]}if(r>=0){var a=n[r].row,s=n[r].column;if("top"==e||"bottom"==e)a&&("top"==e?a=this.data.getFirstId():"bottom"==e&&(a=this.data.getLastId())),s&&(r=0,"bottom"==e&&(r=this.config.columns.length-1),s=this.columnId(r));else if("up"==e||"down"==e||"pgup"==e||"pgdown"==e){if(a){var r=this.getIndexById(a),l="pgup"==e||"pgdown"==e?Math.round(this.Vj/this.s.rowHeight):1;"up"==e||"pgup"==e?r-=l:("down"==e||"pgdown"==e)&&(r+=l),0>r&&(r=0),r>=this.data.order.length&&(r=this.data.order.length-1),!(a=this.getIdByIndex(r))&&this.s.pager&&this.showItemByIndex(r)}}else{if("right"!=e&&"left"!=e)return;if(s&&"row"!=this.config.select){var r=this.getColumnIndex(s);"right"==e?r++:"left"==e&&r--,0>r&&(r=0),r>=this.config.columns.length&&(r=this.config.columns.length-1),s=this.columnId(r)}else{if((this.open||this.oA)&&"right"==e)return this.open?this.open(a):this.openSub(a);if((this.close||this.oA)&&"left"==e)return this.close?this.close(a):this.closeSub(a)}}if(a){this.showCell(a,s),this.select||(webix.extend(this,this._k.$k,!0),this.s.select=this.open||this.oA?"row":"cell",webix.extend(this,this._k[this.s.select],!0));var h={row:a,column:s};if(o&&"area"==this.s.select){var c=this.el[this.el.length-1];this.gC(h,c,e,t)}else this.hl(h,o);if(!this.s.clipboard&&!1!==i){var u=this.getItemNode(h);u&&u.focus()}}}return!1}}}),webix.extend(webix.ui.datatable,webix.KeysNavigation),webix.extend(webix.ui.datatable,webix.DataMove),webix.extend(webix.ui.datatable,{drag_setter:function(e){return this.attachEvent("onBeforeDrag",function(e){return this.RD(e.source)}),this.attachEvent("onBeforeDragIn",function(e){return this.RD(e.target)}),this.attachEvent("onBeforeDropOrder",function(e,t){return 0>t||t>=this.s.topSplit}),webix.DragItem.drag_setter.call(this,e)},RD:function(e){var t,i,n=!1;if(this.s.topSplit&&e)for(webix.isArray(e)||(e=[e]),t=0;!n&&t<e.length;t++)i=this.getIndexById(e[t]),n=i<this.s.topSplit;return!n},$dragHTML:function(e,t){for(var i=this.bc-this.oj,n="<div class='webix_dd_drag' style='width:"+(i-2)+"px;'>",r=this.s.columns,o=0;o<r.length;o++){var a=this.Ek(e,r[o]);n+="<div style='width:"+r[o].width+"px;'>"+a+"</div>"}return n+"</div>"},getHeaderNode:function(e,t){return this.nG(e,t,this.I)},getFooterNode:function(e,t){return this.nG(e,t,this.cj)},nG:function(e,t,i){if(this.isColumnVisible(e)){var n=this.getColumnIndex(e),r=this.s.leftSplit>n?0:this.Fj<=n?2:1;t=t||0;var o=i.childNodes[r].getElementsByTagName("TR");if(o.length)for(var a=o[t+1].childNodes,s=0;s<a.length;s++)if(a[s].getAttribute("column")==n)return a[s].firstChild}return null},getItemNode:function(e,t){if(e&&!e.header){var i=e.row||e,n=this.getIndexById(i),r=this.Sj(),o=r[0]-this.s.topSplit;if(o>n&&n>r[1])return;var a=this.Xj(),s=this.s.leftSplit?0:a[0];if(e.column&&(s=this.getColumnIndex(e.column))<this.Fj&&s>=this.s.leftSplit&&(s<a[0]||s>a[1]))return;var l=this.s.columns[s];if(l.attached&&l.node){var h=n<this.s.topSplit?n:n-o;return l.node.childNodes[h]}}},dragColumn_setter:function(e){var t;"order"==e?t={$drag:webix.bind(function(e,i){var n=this.locate(i);if(this.Pl||!n||!this.callEvent("onBeforeColumnDrag",[n.column,i]))return!1;webix.DragControl.Gd={from:t,start:n,custom:"column_dnd"};var r=this.getColumnConfig(n.column);return this.Qn=webix.html.posRelative(i),this.Rn=r.width,"<div class='webix_dd_drag_column' style='width:"+r.width+"px'>"+(r.header[0].text||"&nbsp;")+"</div>"},this),$dragPos:webix.bind(function(e,t,i){var n=webix.DragControl.getContext(),r=webix.html.offset(this.$view);i.style.display="none";var o=document.elementFromPoint(e.x,r.y+1),a=o?this.locate(o):null,s=webix.DragControl.getContext().start.column;if(a&&a.column!=s&&(!this.Sn||a.column!=this.Yg)&&"column_dnd"==n.custom&&webix.$$(o)==this){if(!this.callEvent("onBeforeColumnDropOrder",[s,a.column,t]))return;var l=this.getColumnIndex(s),h=this.getColumnIndex(a.column);t.touches&&(this.wy=t.target,this.wy.style.display="none",this.$view.parentNode.appendChild(this.wy)),this.moveColumn(s,h+(h>l?1:0)),this.Yg=a.column,this.Sn=!0}if(a&&a.column==s&&(this.Sn=!1),i.style.display="block",e.x=e.x-this.Qn.x,e.y=r.y,e.x<r.x)e.x=r.x;else{var c=r.x+this.$view.offsetWidth-this.oj-this.Rn;e.x>c&&(e.x=c)}webix.DragControl.Ed=!0},this),$dragDestroy:webix.bind(function(e,t){webix.html.remove(t),this.wy&&webix.html.remove(this.wy);var i=webix.DragControl.getContext().start;this.callEvent("onAfterColumnDropOrder",[i.column,this.Yg,e])},this),$drop:function(){}}:e&&(t={ah:!0,$drag:webix.bind(function(e,i){var n=this.locate(i);if(this.Pl||!n||!this.callEvent("onBeforeColumnDrag",[n.column,i]))return!1;webix.DragControl.Gd={from:t,start:n,custom:"column_dnd"};for(var r=this.getColumnConfig(n.column).header,o="&nbsp;",a=0;a<r.length;a++)if(r[a]){o=r[a].text;break}return"<div class='webix_dd_drag_column'>"+o+"</div>"},this),$drop:webix.bind(function(e,t,i){var n=i;i.touches&&this.Tn&&(n=this.Tn);var r=this.locate(n);if(!r)return!1;var o=webix.DragControl.getContext().start.column;if(o!=r.column){if(!this.callEvent("onBeforeColumnDrop",[o,r.column,i]))return;var a=this.getColumnIndex(o),s=this.getColumnIndex(r.column);this.moveColumn(o,s+(s>a?1:0)),this.callEvent("onAfterColumnDrop",[o,r.column,i])}},this),$dragIn:webix.bind(function(e,i,n){var r=webix.DragControl.getContext();if("column_dnd"!=r.custom||r.from!=t)return!1;for(var o=n.target||n.srcElement;-1==(o.className||"").indexOf("webix_hcell");)if(!(o=o.parentNode))return;return o!=this.Tn&&(this.Tn&&webix.html.removeCss(this.Tn,"webix_dd_over_column"),webix.html.addCss(o,"webix_dd_over_column")),this.Tn=o},this),$dragDestroy:webix.bind(function(e,t){this.Tn&&webix.html.removeCss(this.Tn,"webix_dd_over_column"),webix.html.remove(t)},this)}),e&&(webix.DragControl.addDrag(this.I,t),webix.DragControl.addDrop(this.I,t,!0))}}),webix.extend(webix.ui.datatable,webix.DragItem),webix.extend(webix.ui.datatable,{clearValidation:function(){for(var e in this.data.Me)this.Un(e);this.data.clearMark("webix_invalid",!0)},Te:function(e,t){this.Un(e);for(var i in t)this.addCellCss(e,i,"webix_invalid_cell");this.addCss(e,"webix_invalid")},Qe:function(e){this.Un(e),this.removeCss(e,"webix_invalid")},Un:function(e){var t=(this.getItem(e),this.data.getMark(e,"$cellCss"));if(t)for(var i in t)t[i]=t[i].replace("webix_invalid_cell","").replace("  "," ")},addRowCss:function(e,t,i){this.addCss(e,t,i)},removeRowCss:function(e,t,i){this.removeCss(e,t,i)},addCellCss:function(e,t,i,n){var r=this.data.getMark(e,"$cellCss"),o=r||{},a=o[t]||"";o[t]=a.replace(i,"").replace("  "," ")+" "+i,r||this.data.addMark(e,"$cellCss",!1,o,!0),n||this.refresh(e)},removeCellCss:function(e,t,i,n){var r=this.data.getMark(e,"$cellCss");if(r){var o=r[t]||"";o&&(r[t]=o.replace(i,"").replace("  "," ")),n||this.refresh(e)}}}),webix.extend(webix.ui.datatable,webix.ValidateCollection),function(){function e(e){for(var t=[],i=e.length-1;i>=0;i--){var n=e[i];t[i]="object"==typeof n?n.value:n}return t}var t=webix.Sparklines=function(){};t.types={},t.getTemplate=function(e){var t=e||{};"string"==typeof e&&(t={type:e}),webix.extend(t,{type:"line"});var i=this.types[t.type];return webix.bind(this.BC,new i(t))},t.BC=function(t,i,n,r){return r?this.draw(e(n),r.width,33):this.draw(t.data||t,i.width,i.height)}}(),webix.attachEvent("onDataTable",function(e){e.type.sparklines=webix.Sparklines.getTemplate()}),function(){function e(e){var t=" ";if(e)for(var i in e)t+=i+'="'+e[i]+'" ';return t}var t={};t.draw=function(t,i,n,r){return"<svg "+e({xmlns:"http://www.w3.org/2000/svg",version:"1.1",height:"100%",width:"100%",viewBox:"0 0 "+i+" "+n,class:r||""})+">"+t+"</svg>"},t.styleMap={lineColor:"stroke",color:"fill"},t.group=function(e){return"<g>"+e+"</g>"},t.z={M:function(e){return" M "+e.x+" "+e.y},L:function(e){return" L "+e.x+" "+e.y},C:function(e,t,i){return" C "+e.x+" "+e.y+" "+t.x+" "+t.y+" "+i.x+" "+i.y},A:function(e,t,i,n){var r=e.x+Math.cos(n)*t,o=e.y+Math.sin(n)*t;return" A "+t+" "+t+" 0 "+(n-i>=Math.PI?1:0)+" 1 "+r+" "+o}},t.definePath=function(e,t){for(var i="",n=0;n<e.length;n++){var r=e[n][0].toUpperCase();i+=this.z[r].apply(this,e[n].slice(1))}return t&&(i+=" Z"),i},t.CC=function(e){for(var t=[],i=0;i<e.length;i++)t.push([i?"L":"M",e[i]]);return t},t.setOpacity=function(e,t){return e=webix.color.toRgb(e),e.push(t),"rgba("+e.join(",")+")"},t.DC=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];i||t.push(["M",n[0]]),t.push(["C",n[1],n[2],n[3]])}return t},t.getPath=function(t,i,n){return n=e(n),'<path class="'+i+'" vector-effect="non-scaling-stroke" d="'+t+'" '+n+"/>"},t.getSector=function(i,n,r,o,a,s){s=e(s);var l=i.x+Math.cos(r)*n,h=i.y+Math.sin(r)*n,c=[["M",i],["L",{x:l,y:h}],["A",i,n,r,o],["L",i]];return'<path class="'+a+'" vector-effect="non-scaling-stroke" d="'+t.definePath(c,!0)+'" '+s+"/>"},t.getCurve=function(t,i,n){return n=e(n),'<path fill="none" class="'+i+'" vector-effect="non-scaling-stroke" d="'+this.definePath(this.DC(t))+'" '+n+"/>"},t.getLine=function(e,t,i,n){return this.getPath(this.definePath(this.CC([e,t]),!0),i,n)},t.getCircle=function(t,i,n,r){return r=e(r),'<circle class="'+n+'" cx="'+t.x+'" cy="'+t.y+'" r="'+i+'" '+r+"/>"},t.getRect=function(t,i,n,r,o,a){return a=e(a),'<rect class="'+o+'" rx="0" ry="0" x="'+t+'" y="'+i+'" width="'+n+'" height="'+r+'" '+a+"/>"},webix.EC=t}(),function(){function e(e){this.config=webix.extend(webix.copy(t),e||{},!0)}var t={paddingX:3,paddingY:4,radius:1,minHeight:4,eventRadius:8};e.prototype.draw=function(e,t,i){var n,r,o,a,s,l=this.config,h=webix.Sparklines.types.line.prototype,c=webix.EC;return a=this.getPoints(e,t,i),o=c.definePath(h.FC(a),!0),l.color&&(s=this.GC(c,l.color)),r=c.group(c.getPath(o,"webix_sparklines_area"+(s?" "+s.area:""))),a.splice(a.length-3,3),o=c.definePath(h.FC(a)),r+=c.group(c.getPath(o,"webix_sparklines_line"+(s?" "+s.line:""))),r+=h.HC(c,a,l.radius,"webix_sparklines_item"+(s?" "+s.item:"")),n=Math.min(e.length?(t-2*(l.paddingX||0))/e.length:0,l.eventRadius),r+=h.IC(c,a,n),c.draw(r,t,i,"webix_sparklines_area_chart"+(l.css?" "+l.css:""))},e.prototype.GC=function(e,t){var i={area:{},line:{},item:{}},n=e.styleMap;if(t){i.area[n.color]=e.setOpacity(t,.2),i.line[n.lineColor]=t,i.item[n.color]=t;for(var r in i)i[r]=webix.html.createCss(i[r])}return i},e.prototype.getPoints=function(e,t,i){var n=webix.Sparklines.types.line.prototype,r=n.getPoints.call(this,e,t,i),o=this.config.paddingX||0,a=this.config.paddingY||0;return r.push({x:t-o,y:i-a},{x:o,y:i-a},{x:o,y:r[0].y}),r},webix.Sparklines.types.area=e}(),function(){function e(e){this.config=webix.extend(webix.copy(t),e||{},!0)}var t={paddingX:3,paddingY:4,width:20,margin:4,minHeight:4,eventRadius:8,origin:0,itemCss:function(e){return e<(this.config.origin||0)?" webix_sparklines_bar_negative":""}};e.prototype.draw=function(e,t,i){var n,r,o,a,s,l=this.config,h="",c=[],u=this.getPoints(e,t,i),d=webix.EC;for(n=0;n<u.length;n++)r="function"==typeof l.itemCss?l.itemCss.call(this,e[n]):l.itemCss||"",l.negativeColor&&e[n]<l.origin?r+=" "+this.GC(d,l.negativeColor):l.color&&(r+=" "+this.GC(d,l.color)),o=u[n],c.push(d.getRect(o.x,o.y,o.width,o.height,"webix_sparklines_bar "+r));h+=d.group(c.join("")),a=parseInt(this.JC(e,t,i),10)+.5,s=l.paddingX||0,h+=d.group(d.getLine({x:s,y:a},{x:t-s,y:a},"webix_sparklines_origin"));var f=this.KC(e,t,i),p=[];for(n=0;n<f.length;n++)o=f[n],p.push(d.getRect(o.x,o.y,o.width,o.height,"webix_sparklines_event_area ",{webix_area:n}));return h+=d.group(p.join("")),d.draw(h,t,i,"webix_sparklines_bar_chart"+(l.css?" "+l.css:""))},e.prototype.GC=function(e,t){var i={},n=e.styleMap;return t&&(i[n.color]=t),webix.html.createCss(i)},e.prototype.JC=function(e,t,i){var n=this.config,r=n.paddingY||0;i=(i||100)-2*r;var o=r+i;if(!1!==n.origin){var a=Math.min.apply(null,e),s=Math.max.apply(null,e),l=n.origin||-1e-6;if(l>=s)o=r;else if(l>a){var h=i/(s-a);o-=h*(l-a)}}return o},e.prototype.KC=function(e,t,i){var n=[],r=this.config.paddingX||0,o=this.config.paddingY||0;if(t=(t||100)-2*r,i=(i||100)-2*o,e.length)for(var a=t/e.length,s=0;s<e.length;s++)n.push({x:Math.ceil(a*s)+r,y:o,height:i,width:a});return n},e.prototype.getPoints=function(e,t,i){var n=this.config,r=Math.min.apply(null,e);n.origin<r&&(r=n.origin);var o=Math.max.apply(null,e),a=[],s=n.paddingX,l=n.paddingY,h=n.margin,c=n.width||20,u=this.JC(e,t,i);if(t=(t||100)-2*s,i=(i||100)-2*l,e.length){var d=t/e.length,f=n.scale||o-r;c=Math.min(d-h,c),h=d-c;var p=0,m=r;!1!==n.origin&&n.origin>r?m=n.origin||0:p=n.minHeight;for(var g=(i-p)/(f||1),v=0;v<e.length;v++){var b=Math.ceil(g*(e[v]-m));a.push({x:Math.ceil(d*v)+s+h/2,y:u-(e[v]>=m?b:0)-p,height:Math.abs(b)+p,width:c})}}return a},webix.Sparklines.types.bar=e}(),function(){function e(e){this.config=webix.extend(webix.copy(t),e||{},!0)}var t={paddingX:6,paddingY:6,radius:2,minHeight:4,eventRadius:8};e.prototype.draw=function(e,t,i){var n=this.getPoints(e,t,i),r=this.config,o=webix.EC,a=r.color?this.GC(o,r.color):null,s=o.definePath(this.FC(n)),l=o.group(o.getPath(s,"webix_sparklines_line"+(a?" "+a.line:"")));l+=this.HC(o,n,r.radius,"webix_sparklines_item"+(a?" "+a.item:""));var h=Math.min(e.length?(t-2*(r.paddingX||0))/e.length:0,r.eventRadius);return l+=this.IC(o,n,h),o.draw(l,t,i,"webix_sparklines_line_chart"+(r.css?" "+r.css:""))},e.prototype.GC=function(e,t){var i={line:{},item:{}},n=e.styleMap;if(t){i.line[n.lineColor]=t,i.item[n.color]=t;for(var r in i)i[r]=webix.html.createCss(i[r])}return i},e.prototype.HC=function(e,t,i,n,r){for(var o=[],a=0;a<t.length;a++)o.push(e.getCircle(t[a],i,n,r));return e.group(o.join(""))},e.prototype.IC=function(e,t,i){for(var n=[],r=0;r<t.length;r++)n.push(e.getCircle(t[r],i,"webix_sparklines_event_area",{webix_area:r}));return e.group(n.join(""))},e.prototype.FC=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=t?"L":"M",n.push([i,e[t]]);return n},e.prototype.getPoints=function(e,t,i){var n=this.config,r=Math.min.apply(null,e);void 0!==n.origin&&(r=Math.min(n.origin,r));var o=Math.max.apply(null,e),a=[],s=n.paddingX||0,l=n.paddingY||0;t=(t||100)-2*s;var h=n.minHeight||0;if(i=(i||100)-2*l,e.length)if(1==e.length)a.push({x:t/2+s,y:i/2+s});else{var c=t/(e.length-1),u=n.scale||o-r,d=(i-h)/(u||1);u||(i/=2);for(var f=0;f<e.length;f++)a.push({x:Math.ceil(c*f)+s,y:i-Math.ceil(d*(e[f]-r))+l-h})}return a},webix.Sparklines.types.line=e}(),function(){function e(e){this.config=webix.extend(t,e||{},!0)}var t={paddingY:2};e.prototype.rC=0,e.prototype.qC=["#f55b50","#ff6d3f","#ffa521","#ffc927","#ffee54","#d3e153","#9acb61","#63b967","#21a497","#21c5da","#3ea4f5","#5868bf","#7b53c0","#a943ba","#ec3b77","#9eb0b8"],e.prototype.xv=function(e,t){var i=t.length,n=this.qC.length;return n>i?(e&&(e=n-i>e?this.rC+2:this.rC+1),this.rC=e):e%=n,this.qC[e]},e.prototype.draw=function(e,t,i){var n,r,o,a,s=this.config,l=s.color||this.xv,h=this.getAngles(e),c=webix.EC,u=s.paddingY||0,d=i/2-u,f=t/2,p=i/2;for("function"!=typeof l&&(l=function(){return l}),a="",o=0;o<h.length;o++)n={},n[c.styleMap.color]=l.call(this,o,e,this.LC),a+=c.getSector({x:f,y:p},d,h[o][0],h[o][1],"webix_sparklines_sector",n);for(r=c.group(a),a="",o=0;o<h.length;o++)a+=c.getSector({x:f,y:p},d,h[o][0],h[o][1],"webix_sparklines_event_area",{webix_area:o});return r+=c.group(a),c.draw(r,t,i,"webix_sparklines_pie_chart"+(s.css?" "+s.css:""))},e.prototype.getAngles=function(e){var t,i,n=-Math.PI/2,r=[],o=this.Wo(e);for(i=0;i<e.length;i++)t=-Math.PI/2+o[i]-1e-4,r.push([n,t]),n=t;return r},e.prototype.Vo=function(e){for(var t=0,i=0;i<e.length;i++)t+=1*e[i];return t},e.prototype.Wo=function(e){var t,i,n=[],r=0,o=this.Vo(e);for(t=0;t<e.length;t++)i=1*e[t],n[t]=2*Math.PI*(o?(i+r)/o:1/e.length),r+=i;return n},webix.Sparklines.types.pie=e}(),function(){function e(e){this.config=webix.extend(webix.copy(i),e||{},!0)}function t(e){this.config=webix.extend(webix.copy(n),e||{},!0)}var i={paddingX:3,paddingY:6,radius:2,minHeight:4,eventRadius:8};e.prototype.draw=function(e,t,i){var n=this.config,r="",o=webix.Sparklines.types.line.prototype,a=this.getPoints(e,t,i),s=webix.EC,l=n.color?this.GC(s,n.color):null;r+=s.group(s.getCurve(a,"webix_sparklines_line"+(l?" "+l.line:"")));var h=o.getPoints.call(this,e,t,i);r+=o.HC(s,h,n.radius,"webix_sparklines_item"+(l?" "+l.item:""));var c=Math.min(e.length?(t-2*(n.paddingX||0))/e.length:0,n.eventRadius);return r+=o.IC(s,h,c),s.draw(r,t,i,"webix_sparklines_line_chart"+(n.css?" "+n.css:""))},e.prototype.GC=function(e,t){var i={line:{},item:{}},n=e.styleMap;if(t){i.line[n.lineColor]=t,i.item[n.color]=t;for(var r in i)i[r]=webix.html.createCss(i[r])}return i},e.prototype.getPoints=function(e,t,i){var n,r,o,a,s=[],l=[],h=[],c=webix.Sparklines.types.line.prototype;for(r=c.getPoints.call(this,e,t,i),n=0;n<r.length;n++)l.push(r[n].x),h.push(r[n].y);for(o=this.MC(l),a=this.MC(h),n=0;n<r.length-1;n++)s.push([r[n],{x:o[0][n],y:a[0][n]},{x:o[1][n],y:a[1][n]},r[n+1]]);return s},e.prototype.MC=function(e){var t,i,n=[],r=[],o=[],a=[],s=[],l=[],h=e.length-1;for(n[0]=0,r[0]=2,o[0]=1,a[0]=e[0]+2*e[1],t=1;h-1>t;t++)n[t]=1,r[t]=4,o[t]=1,a[t]=4*e[t]+2*e[t+1];for(n[h-1]=2,r[h-1]=7,o[h-1]=0,a[h-1]=8*e[h-1]+e[h],t=1;h>t;t++)i=n[t]/r[t-1],r[t]=r[t]-i*o[t-1],a[t]=a[t]-i*a[t-1];for(s[h-1]=a[h-1]/r[h-1],t=h-2;t>=0;--t)s[t]=(a[t]-o[t]*s[t+1])/r[t];for(t=0;h-1>t;t++)l[t]=2*e[t+1]-s[t+1];return l[h-1]=.5*(e[h]+s[h-1]),[s,l]},webix.Sparklines.types.spline=e;var n={paddingX:3,paddingY:6,radius:1,minHeight:4,eventRadius:8};t.prototype=webix.copy(e.prototype),t.prototype.draw=function(e,t,i){var n=this.config,r=webix.Sparklines.types.line.prototype,o=webix.EC,a=n.color?this.GC(o,n.color):null,s=this.getPoints(e,t,i),l=s.splice(s.length-3,3),h=o.CC(l);h[0][0]="L";var c=o.DC(s).concat(h),u=o.group(o.getPath(o.definePath(c),"webix_sparklines_area"+(a?" "+a.area:""),!0));u+=o.group(o.getPath(o.definePath(o.DC(s)),"webix_sparklines_line"+(a?" "+a.line:"")));var d=r.getPoints.call(this,e,t,i);u+=r.HC(o,d,n.radius,"webix_sparklines_item"+(a?" "+a.item:""));var f=Math.min(e.length?(t-2*(n.paddingX||0))/e.length:0,n.eventRadius);return u+=r.IC(o,d,f),o.draw(u,t,i,"webix_sparklines_splinearea_chart"+(n.css?" "+n.css:""))},t.prototype.GC=function(e,t){var i={area:{},line:{},item:{}},n=e.styleMap;if(t){i.area[n.color]=e.setOpacity(t,.2),i.line[n.lineColor]=t,i.item[n.color]=t;for(var r in i)i[r]=webix.html.createCss(i[r])}return i},t.prototype.getPoints=function(t,i,n){var r=e.prototype.getPoints.call(this,t,i,n),o=this.config.paddingX||0,a=this.config.paddingY||0;return r.push({x:i-o,y:n-a},{x:o,y:n-a},{x:o,y:r[0][0].y}),r},webix.Sparklines.types.splineArea=t}(),webix.extend(webix.ui.datatable,{UF:function(e,t){return!(!e.scroll||t)||(e.header=webix.isUndefined(e.header)?!!this.config.header:e.header,e.footer=webix.isUndefined(e.footer)?!!this.config.footer:e.footer,void(e.xCorrection=e.xCorrection||0))},sq:function(e,t){for(var i=-1,n=0;0>i&&n<e.length;n++)t(e[n])&&(i=n);return i},$F:function(e,t,i){var n={},r=0;return e.forEach(webix.bind(function(o,a){var s=o[0],l=[],h=s.length;s.forEach(webix.bind(function(e,o){for(var s=t[o+r],c=0;c<s[i].length;c++){var u=s[i][c];if(u||n[a]&&n[a][c]){if(u=webix.copy(u||{text:""}),n[a]&&n[a][c]&&0===o&&(u.colspan=n[a][c],n[a][c]=0),u.colspan){var d=Math.min(u.colspan,h-o);n[a+1]=n[a+1]||{},n[a+1][c]=u.colspan-d,u.colspan=d}u.rowspan&&1===h&&(u.height=(u.height||this.config.headerRowHeight)*u.rowspan,u.rowspan=null);var f={txt:u.rotate?this.getHeaderNode(s.id,c).innerHTML:u.text||(u.contentId?this.getHeaderContent(u.contentId).getValue():""),className:"webix_hcell webix_"+i+"_cell "+(u.css||""),style:{height:(u.height||this.config.headerRowHeight)+"px",width:u.colspan?"auto":s.width+"px"},span:u.colspan||u.rowspan?{colspan:u.colspan||1,rowspan:u.rowspan||1}:null};l[c]=l[c]||[],l[c][o]=f}}},this)),e[a]="header"==i?l.concat(o):o.concat(l),r+=h},this)),e},VF:function(e,t,i){var n=this.config.columns,r=this.getSelectedId(!0),o=this.XF(e),a=0,s=0,l=[],h=0;return i=i||0+e.xCorrection,t=t||[],this.eachRow(webix.bind(function(t){for(var c=0,u=this.getItem(t),d=this.getIndexById(t),f=[],p=!1,m=i;m<n.length;m++){var g=n[m].id,v=this.getColumnIndex(g)-i;if(n[m]){if((c+=n[m].width)>o&&m>i){h=m;break}if("selection"!==e.data||"selection"==e.data&&-1!==this.sq(r,function(e){return e.column==g&&e.row==t})){var b;if(this.getSpan&&(b=this.getSpan(t,g)),b&&this.getColumnIndex(g)===i){var w=this.getColumnIndex(b[1]);i>w&&(b[2]=b[2]-(i-w),b[4]=b[4]?b[4]:u[b[1]]?this.getText(t,b[1]):null,b[1]=g)}if(!b||b&&b[0]==t&&b[1]==g){var x=b&&b[4]?b[4]:this.Aj[g]?this.getText(t,g):"",y=this.getCss(t,g)+" "+(n[m].css||"")+(b?" webix_dtable_span "+(b[5]||""):""),_={height:b&&b[3]>1?"auto":(u.$height||this.config.rowHeight)+"px",width:b&&b[2]>1?"auto":n[m].width+"px"};f.push({txt:x,className:y,style:_,span:b?{colspan:b[2],spanStart:this.getColumnIndex(b[1]),rowspan:b[3]}:null}),x&&(a=Math.max(v+1,a),s=Math.max(d+1,s)),p=p||!!x}else b&&(f.push({$inspan:!0}),a=Math.max(v+1,a),s=Math.max(d+1,s))}}}(!e.skiprows||p)&&l.push(f)},this)),s&&a&&(e.trim&&(l.length=s,l=l.map(function(e){for(var t=e.length-1;t>=0;t--)if(e[t].span&&e[t].span.colspan){e[t].span.colspan=Math.min(e[t].span.colspan,e.length-t);break}return e.length=a,e})),t.push(l)),h?this.VF(e,t,h):(e.footer&&(t=this.$F(t,n,"footer")),e.header&&(t=this.$F(t,n,"header"))),t},WF:function(e,t){var i=webix.html.create("div");return e.forEach(webix.bind(function(n,r){var o=webix.html.create("table",{class:"webix_table_print "+this.$view.className+(t.borderless?" borderless":""),style:"border-collapse:collapse"});if(n.forEach(function(e){var t=webix.html.create("tr");e.forEach(function(e,i){if(!e.$inspan){var n=webix.html.create("td");n.innerHTML=e.txt,n.className=e.className;for(var r in e.style)n.style[r]=e.style[r];e.span&&(n.colSpan=e.span.colspan,n.rowSpan=e.span.rowspan),t.appendChild(n)}}),o.appendChild(t)}),i.appendChild(o),r+1<e.length){var a=webix.html.create("DIV",{class:"webix_print_pagebreak"});i.appendChild(a)}},this)),i}}),webix.extend(webix.ui.datatable,webix.CustomPrint),webix.extend(webix.ui.datatable,{$exportView:function(e){if(this.isBranchOpen&&webix.extend(e,{filterHTML:!0}),"excel"!==e.export_mode||e.dataOnly||!e.styles)return this;e.dataOnly=!0,e.heights=webix.isUndefined(e.heights)?"all":e.heights;var t=webix.toExcel(this,e);return t[0].styles=this.oG(e),delete e.dataOnly,t},oG:function(e){var t=this.config.columns,i=[];return this.pG=this.pG||{},e.docHeader&&(i=[{0:this.qG(e.docHeader.css)},{0:{}}]),!1!==e.header&&(i=this.rG(e,"header",i)),this.data.each(function(e){for(var n={},r=0;r<t.length;r++){var o=this.getCss(e.id,t[r].id),a=t[r].node.className,s="",l=this.getIndexById(e.id)%2?"even":"odd",h=null,c=null;if(this.Rt&&(h=this.getSpan(e.id,t[r].id))?(c=this.getSpanNode({row:h[0],column:h[1]}),s="webix_dtable_span "+(h[5]||"")):c=this.getItemNode({row:e.id,column:t[r].id}),!c){c=webix.html.create("div",{class:o,style:"visibility:hidden"});var u=t[r].node;t[r].attached||(u=webix.html.create("div",{class:a,style:"visibility:hidden"}),this.Vf.appendChild(u)),u.appendChild(c)}n[r]=this.sG(c,[o,a,s,l].join(":"))}i[i.length]=n},this),!1!==e.footer&&this.config.footer&&(i=this.rG(e,"footer",i)),e.docFooter&&(i=i.concat([{0:{}},{0:this.qG(e.docFooter.css)}])),i},rG:function(e,t,i){for(var n=this.config.columns,r=[],o=0;o<n[0][t].length;o++){for(var a={},s=0;s<n.length;s++){var l=n[s][t][o];if(l){var h=l.colspan?n[s+l.colspan-1].id:n[s].id,c="header"==t?this.getHeaderNode(h,o):this.getFooterNode(h,o);if(c){var u=[c.parentNode.className,l.css||"","webix_hcell",t];a[s]=this.sG(c,u.join(":")),(l.colspan||l.rowspan)&&r.push([o,s,{colspan:l.colspan-1||0,rowspan:l.rowspan-1||0},a[s]])}}else for(var d=0;d<r.length;d++){var f=r[d][2],p=r[d][1],m=r[d][0];p+f.colspan>=s&&m+f.rowspan>=o&&(a[s]=r[d][3])}}i[i.length]=a}return i},sG:function(e,t){if(this.pG[t])return this.pG[t];var i=this.tG(e),n={font:{},alignment:{},border:{}};n.font.name=i["font-family"].replace(/,.*$/,""),n.font.sz=.75*i["font-size"].replace("px",""),n.font.color={rgb:webix.color.rgbToHex(i.color)},"normal"!==i["font-weight"]&&(n.font.bold=!0),"underline"===i["text-decoration-line"]&&(n.font.underline=!0),"italic"===i["font-style"]&&(n.font.italic=!0),"line-through"===i["text-decoration-line"]&&(n.font.strike=!0),n.alignment.horizontal=i["text-align"],n.alignment.vertical=i.height==i["line-height"]?"center":"top","normal"==i["white-space"]&&(n.alignment.wrapText=!0),e.firstChild&&e.firstChild.className&&-1!==e.firstChild.className.indexOf("webix_rotate")&&(n.alignment.textRotation=90);var r=webix.color.rgbToHex(i["background-color"]);return r&&(n.fill={fgColor:{rgb:r}}),-1!==i["background-image"].indexOf("gradient")&&(n.fill={fgColor:{rgb:webix.color.rgbToHex(i["background-image"].substring(i["background-image"].lastIndexOf("(")))}}),e.parentNode&&"TD"==e.parentNode.nodeName&&(i=this.tG(e.parentNode)),"0px"!==i["border-right-width"]&&(n.border.right={style:"thin",color:{rgb:webix.color.rgbToHex(i["border-right-color"])}}),"0px"!==i["border-bottom-width"]&&(n.border.bottom={style:"thin",color:{rgb:webix.color.rgbToHex(i["border-bottom-color"])}}),"0px"!==i["border-left-width"]&&(n.border.left={style:"thin",color:{rgb:webix.color.rgbToHex(i["border-left-color"])}}),"0px"!==i["border-top-width"]&&(n.border.top={style:"thin",color:{rgb:webix.color.rgbToHex(i["border-top-color"])}}),this.pG[t]=n,n},qG:function(e){e=webix.extend(e||{},{visibility:"hidden","white-space":"nowrap","text-align":"left"});var t="";for(var i in e)t+=i+":"+e[i]+";";var n=webix.html.create("div",{style:t});this.Vf.appendChild(n);var r=this.sG(n,t);return webix.html.remove(n),r},tG:function(e){return window.getComputedStyle?window.getComputedStyle(e):e.currentStyle}}),webix.extend(webix.ui.datatable,{topSplit_setter:function(e){return this.data&&(this.data.$freeze=e),e},freezeRow:function(e,t){function i(e,t,i,n,o){var a;if(i&&e>=r){for(o||r++,a=e;a>=r;a--)n[a]=n[a-1];n[r-1]=t}if(!i&&r>e){for(o||r--,a=e;r>a;a++)n[a]=n[a+1];n[r]=t}}var n,r=this.s.topSplit,o=this.data.order,a=this.data.jf;e?(n=this.getIndexById(e),e=""+e,i(n,e,t,o),a&&i(a.find(e),e,t,a,!0)):t||(r=0),this.define("topSplit",r),this.refresh()}}),webix.TreeTableClick={},webix.TreeTablePaste={insert:function(e){for(var t=this.getSelectedId(!0,!0),i=0;i<e.length;i++){for(var n={},r=0;r<this.s.columns.length;r++)n[this.s.columns[r].id]=e[i][r]||"";!webix.isUndefined(n.id)&&this.exists(n.id)&&(n.id=webix.uid()),this.add(n,null,t[0])}}},webix.protoUI({name:"treetable",$init:function(){webix.extend(this.data,webix.TreeStore,!0),webix.extend(this.type,webix.TreeType),webix.extend(this,webix.TreeDataMove,!0);for(var e in webix.TreeClick)this.on_click[e]||(this.on_click[e]=this.Vn(webix.TreeClick[e]));this.type.treetable=webix.template("{common.space()}{common.icon()} {common.folder()}"),this.type.treecheckbox=function(e,t){return e.indeterminate&&!e.nocheckbox?"<div class='webix_tree_checkbox webix_indeterminate'></div>":webix.TreeType.checkbox.apply(this,arguments)},this.data.provideApi(this,!0),this.x.setAttribute("role","treegrid")},Xg:!1,Vn:function(e){return function(t,i){return i=i.row,e.call(this,t,i)}},getState:function(){var e=webix.DataState.getState.call(this);return webix.extend(e,webix.TreeAPI.getState.call(this)),e},setState:function(e){webix.TreeAPI.setState.call(this,e)&&webix.DataState.setState.call(this,e)},clipboard_setter:function(e){return webix.extend(this.rh,webix.TreeTablePaste),webix.TablePaste.clipboard_setter.call(this,e)},Ik:function(e,t){for(var i=0;i<e.start;i++){var n=this.data.order[i];n&&1!=this.getItem(n).$level&&e.start--}return webix.ui.datatable.prototype.Ik.call(this,e,t)}},webix.TreeAPI,webix.TreeStateCheckbox,webix.TreeDataLoader,webix.ui.datatable),webix.extend(webix.ui.datatable,{spans_setter:function(e){return e&&!this.Rt&&this.Qt(),e},Qt:function(){this.Rt={},this.St=[],this.data.attachEvent("onStoreLoad",webix.bind(function(e,t){t&&t.spans&&this.addSpan(t.spans)},this)),this.data.attachEvent("onClearAll",webix.bind(function(){this.Rt={}},this)),this.attachEvent("onScrollY",this.Tt),this.attachEvent("onScrollX",this.Tt),this.attachEvent("onAfterRender",this.Ut),this.attachEvent("onSelectChange",this.Vt)},addSpan:function(e,t,i,n,r,o){if("object"!=typeof e)n=n||1,i=i||1,this.Rt[e]||(this.Rt[e]={}),this.Rt[e][t]=[i,n,r,o];else for(var a=0;a<e.length;a++)this.addSpan.apply(this,e[a])},removeSpan:function(e,t){arguments.length||(this.Rt={});var i=this.Rt[e];i&&delete i[t]},getSpan:function(e,t){if(!e)return this.Rt;var i,n,r,o,a,t,e,s=this.Rt;i=this.getIndexById(e),r=this.getColumnIndex(t);for(e in s)for(t in s[e])if(a=s[e][t],n=this.getIndexById(e),o=this.getColumnIndex(t),!(i>n+a[1]-1||n>i||r>o+a[0]-1||o>r))return[e,t].concat(a);return null},Ut:function(){var e,t,i=this.fj.length-this.s.rightSplit;for(webix.html.remove(this.St),t=0;3>t;t++)e=this.St[t]=webix.html.create("DIV",{class:"webix_span_layer"}),this.Vf.childNodes[t].appendChild(e);this.attachEvent("onSyncScroll",function(e,t,i){for(var n=0;3>n;n++)webix.Touch.Nf(this.St[n],1==n?e:0,t,i)}),this.Tt(),this.s.leftSplit&&this.Wt(this.St[0],0,this.s.leftSplit),this.s.rightSplit&&this.Wt(this.St[2],i,this.fj.length),this.Wt(this.St[1],this.s.leftSplit,i),this.s.topSplit&&!webix.env.touch&&this.DG()},EG:function(){for(var e,t=0,i=0,n=0,r=0;t<this.s.leftSplit;)i+=this.fj[t].width,t++;for(t=this.fj.length-1,e=t-this.s.rightSplit;t>=e;)r+=this.fj[t].width,t--;for(t=this.s.leftSplit;t<this.fj.length-this.s.rightSplit;t++)n+=this.fj[t].width;return[i,n,r]},DG:function(){var e,t,i,n=this.fj.length-this.s.rightSplit;for(t=3;6>t;t++)e=this.St[t]=webix.html.create("DIV",{class:"webix_span_layer_top"}),this.Vf.childNodes[t-3].appendChild(e);i=this.EG(),this.s.leftSplit&&(this.St[3].style.width=i[0]+"px",this.Wt(this.St[3],0,this.s.leftSplit,!0)),this.s.rightSplit&&(this.St[5].style.width=i[2]+"px",this.Wt(this.St[5],n,this.fj.length,!0)),this.St[4].style.width=i[1]+"px",this.Wt(this.St[4],this.s.leftSplit,n,!0)},Wt:function(e,t,i,n){for(var r=0,o=this.data.$min||0,a=this.data.$max||this.data.order.length,s=o;a>s;s++){var l=this.data.order[s];if(l){var h=this.Rt[l];if(h&&(!n||s<this.s.topSplit))for(var c=t;i>c;c++){var u=this.fj[c].id;h[u]&&this.Xt(e,s,c,h,r,t,l,u)}r+=this.FA(this.getItem(l))}}},Vt:function(){for(var e=this.config.select,t="cell"==e||"column"==e,i=this.getSelectedId(!0),n=[],r=this.Yt||[],o=webix.uid()+"",a=!1,s=0;s<i.length;s++){var l=this.Rt[i[s]];!l||t&&!l[i[s].column]||(l.$selected&&l.$selected.id==i[s].id||(a=!0),l.$selected=i[s],l.$time=o,n.push(i[s].id))}for(var s=0;s<r.length;s++){var l=this.Rt[r[s]];l&&l.$time!==o&&(delete l.$selected,a=!0)}this.Yt=[].concat(i),a&&this.Ut()},Zt:function(e,t){for(var i=0,n=e;t>n;n++){var r=this.fj[n];i+=r?r.width:0}return i},$t:function(e,t){for(var i=0,n=e;t>n;n++){var r=this.getItem(this.data.order[n]);i+=r?this.FA(r):this.s.rowHeight}return i},Xt:function(e,t,i,n,r,o,a,s){var l=n[s],h=l[2]||this.getText(a,s),c="";!n.$selected||"row"!==this.s.select&&n.$selected.column!==s||(c="webix_selected ");var u={column:i,row:t,class:c+"webix_cell webix_table_cell webix_dtable_span "+(l[3]||""),"aria-colindex":i+1,"aria-rowindex":t+1};l[0]>1&&(u["aria-colspan"]=l[0]),l[1]>1&&(u["aria-rowspan"]=l[1]);var d=webix.html.create("DIV",u,""+h);d.style.top=r+"px",d.style.left=this.Zt(o,i)+"px",d.style.width=this.Zt(i,i+l[0])+"px",d.style.height=this.$t(t,t+l[1])+"px",e.appendChild(d)},Tt:function(){if(!this.s.prerender)for(var e=this.getScrollState(),t=0;3>t;t++)this.St[t].style.top="-"+(e.y||0)+"px"},QD:function(e,t){var i,n,r=!1;return this.Rt&&(i=this.getSpan(e.row,e.column),n=this.getSpan(t.row,t.column),i&&n&&i[0]==n[0]&&i[1]==n[1]&&(r=!0)),r},getSpanNode:function(e){for(var t=this.St,i=this.getIndexById(e.row),n=this.getColumnIndex(e.column),r=0;r<t.length;r++)for(var o=t[r].childNodes,a=0;a<o.length;a++)if(o[a].getAttribute("row")==i&&o[a].getAttribute("column")==n)return o[a];return null}}),webix.extend(webix.ui.datatable,{subrow_setter:function(e){return!!e&&(this.kA(),this.s.fixedRowHeight=!1,webix.template(e))},subview_setter:function(e){return e&&(this.s.subrow=this.subrow_setter("<div></div>")),e},defaults:{subRowHeight:35},lA:function(){this.data.each(function(e){e&&(e.$sub=this.s.subrow(e,this.type))},this),this.pC()},pC:function(e){if("auto"===this.s.subRowHeight&&this.bc&&this.mA(),e&&this.s.subview)for(var t in this.oA){var i=webix.$$(this.oA[t]);i.s.hidden||i.adjust()}},nA:function(e){var t=this.getItem(e);t.$sub=this.s.subrow(t,this.type),"auto"===this.s.subRowHeight&&this.mA(t.id,t.$sub)},$init:function(){this.kA=webix.once(function(){var e="#"+this.bj+" .webix_cell.webix_dtable_subview { line-height:normal;}";this.s.fixedRowHeight&&(e+="#"+this.bj+" .webix_column .webix_cell { white-space: nowrap;}"),webix.html.addStyle(e),this.oA={},this.attachEvent("onSubViewRender",this.pA),this.data.attachEvent("onStoreUpdated",webix.bind(function(e,t,i){e?("update"==i||"add"==i)&&this.nA(e):this.lA()},this)),this.attachEvent("onResize",function(e,t,i){i!=e&&this.pC(!0)})}),this.type.subrow=function(e){return e.$sub?e.$subopen?"<div class='webix_tree_open webix_sub_open'></div>":"<div class='webix_tree_close webix_sub_close'></div>":"<div class='webix_tree_none'></div>"},this.on_click.webix_sub_open=function(e,t){return this.closeSub(t),!1},this.on_click.webix_sub_close=function(e,t){return this.openSub(t),!1}},openSub:function(e){var t=this.getItem(e);if(!t.$subopen){t.$row=this.s.subrow,t.$subHeight=t.$subHeight||this.s.subRowHeight,t.$subopen=!0;var i=this.oA[t.$subContent];i&&(i.repaintMe=!0),this.refresh(e),this.callEvent("onSubViewOpen",[e])}},getSubView:function(e){var t=this.getItem(e);if(t){var i=this.oA[t.$subContent];if(i)return webix.$$(i)}return null},resizeSubView:function(e){var t=this.getSubView(e);t&&this.qA(this.getItem(e),t)},qA:function(e,t){var i=t.$getSize(0,0)[2],n=e.$subHeight||this.s.subRowHeight;Math.abs(i-(n||0))>2&&(e.$subHeight=i,this.refresh(e.id))},wC:function(e){var t=e.$width;if(e.lc){var i=e.q.length-e.qc;t-=e.mc?2*e.Dc+2:e.Cc*(i-1)+2*e.Dc+2*i}return t>0},pA:function(e,t){var i,n=this.oA[e.$subContent];if(n)t.firstChild.appendChild(n),i=webix.$$(e.$subContent),this.wC(i)||i.adjust(),n.repaintMe&&(delete n.repaintMe,i.config.hidden=!1,i.Qd());else{var r=webix.copy(this.s.subview);r.$scope=this.$scope,i=webix.ui(r,t.firstChild),i.getMasterView=webix.bind(function(){return this},this),e.$subContent=i.config.id,this.oA[e.$subContent]=i.$view,i.attachEvent("onResize",webix.bind(function(t,i,n,r){i&&i!=r&&this.refresh(e.id)},this)),this.callEvent("onSubViewCreate",[i,e])}this.qA(e,i||webix.$$(n))},rA:function(e){var t=this.getItem(e),i=this.oA[t.$subContent];if(i){delete t.$subContent;var n=webix.$$(i);n&&n!=this&&n.destructor()}},mA:function(e,t){var i=webix.html.create("DIV",{class:"webix_measure_size webix_cell webix_dtable_subrow"},"");i.style.cssText="width:"+this.bc+"px; height:auto; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;",this.$view.appendChild(i),this.data.each(function(n){(n&&!e||n.id==e&&n.$sub)&&(i.innerHTML=t||this.s.subrow(n,this.type),n.$subHeight=i.offsetHeight)},this),i=webix.html.remove(i)},closeSub:function(e){var t=this.getItem(e);if(t.$subopen){t.$row=!1,t.$subopen=!1;var i=this.oA[t.$subContent];i&&(webix.$$(i).config.hidden=!0),this.refresh(e),this.callEvent("onSubViewClose",[e])}}}),webix.extend(webix.ui.datatable,{headermenu_setter:function(e){return e&&(e.data&&(this.Xw=!0),e=this._t(e)),e},_t:function(e){var t={view:"contextmenu",template:"<span class='webix_icon {common.hidden()}'></span> &nbsp; #value#",type:{hidden:function(e){return e.hidden?"fa-empty":"fa-eye"}},on:{onMenuItemClick:webix.bind(function(t,i){var n=webix.$$(this.s.headermenu),r=n.getItem(t).hidden;n.getItem(t).hidden=!r,n.refresh(t),n.$blockRender=!0;var o={spans:"object"==typeof e&&e.spans};return r?this.showColumn(t,o):this.hideColumn(t,o),n.$blockRender=!1,!1},this)},data:[]};"object"==typeof e&&webix.extend(t,e,!0);var i=webix.ui(t);return i.attachTo(this.I),this.Ns.push(i),this.attachEvent("onStructureLoad",this.au),this.attachEvent("onStructureUpdate",this.au),this._t=function(e){return e},i.s.id},au:function(){var e=webix.$$(this.s.headermenu),t=this.am;if(!e.$blockRender){if(this.Xw)return e.data.each(function(e){e.hidden=!!t[e.id]}),void e.refresh();var i=[],n=this.bm;n.length||(n=this.fj);for(var r=0;r<n.length;r++){var o=this.getColumnConfig(n[r].id||n[r]),a=o.header[0],s=!!t[o.id];!1!==o.headermenu&&a&&i.push({id:o.id,value:s?a.text:a.groupText||a.text,hidden:s})}i.length&&e.data.importData(i)}}}),webix.ui.datafilter.headerMenu={getValue:function(){},setValue:function(){},refresh:function(e,t,i){e.s.headermenu||(e.define("headermenu",!0),e.au()),t.onclick=function(){webix.$$(e.config.headermenu).show(t)}},render:function(e,t){return"<span class='webix_icon fa-columns' role='button' tabindex='0' aria-label='"+webix.i18n.aria.headermenu+"'>"}},webix.ui.datafilter.richSelectFilter={getInputNode:function(e){return webix.$$(e.$webix)||null},getValue:function(e){var t=this.getInputNode(e);return t?t.getValue():""},setValue:function(e,t){var i=this.getInputNode(e);return i?i.setValue(t):""},compare:function(e,t){return e==t},refresh:function(e,t,i){if(!e.$destructed){var n=webix.$$(i.richselect);if(!n.$view.parentNode){webix.html.create("div",{class:"webix_richfilter"}).appendChild(n.$view)}t.$webix=i.richselect,t.style.marginLeft="-10px",i.compare=i.compare||this.compare,i.prepare=i.prepare||this.prepare,e.registerFilter(t,i,this);var r,o=i.options;o?"string"==typeof o?(r=i.options=[],webix.ajax(o).then(webix.bind(function(t){i.options=t.json();var n=document.body.contains(n)?n:document.body.querySelector('[active_id="'+i.contentId+'"]');this.refresh(e,n,i)},this))):r=o:r=e.collectValues(i.columnId);var a=n.getPopup().getList(),s=webix.$$(o);if(s&&s.data&&s.data.getRange&&(r=s.data.getRange()),t.firstChild.appendChild(n.$view.parentNode),a.parse&&(a.clearAll(),a.parse(r),!this.$noEmptyOption&&!1!==i.emptyOption||i.emptyOption)){var l={id:"",value:i.emptyOption||"",$empty:!0};a.add(l,0)}i.value&&this.setValue(t,i.value),n.render(),webix.delay(n.resize,n)}},render:function(e,t){if(!t.richselect){var i=webix.html.create("div",{class:"webix_richfilter"}),n={container:i,view:this.inputtype,options:[]},r=webix.extend(this.inputConfig||{},t.inputConfig||{},!0);webix.extend(n,r),t.separator&&(n.separator=t.separator),t.suggest&&(n.suggest=t.suggest);var o=webix.ui(n);o.attachEvent("onChange",function(){e.filterByAll()}),t.richselect=o.s.id,e.Ns.push(o)}return t.css="webix_div_filter"," "},inputtype:"richselect"},webix.ui.datafilter.serverRichSelectFilter=webix.extend({$server:!0},webix.ui.datafilter.richSelectFilter),webix.ui.datafilter.multiSelectFilter=webix.extend({$noEmptyOption:!0,inputtype:"multiselect",prepare:function(e,t){if(!e)return e;for(var i={},n=(""+e).split(t.separator||","),r=0;r<n.length;r++)i[n[r]]=1;return i},compare:function(e,t){return!t||t[e]}},webix.ui.datafilter.richSelectFilter),webix.ui.datafilter.serverMultiSelectFilter=webix.extend({$server:!0,Vk:function(e,t,i){var n=this.Sk;webix.$$(n).filterByAll()}},webix.ui.datafilter.multiSelectFilter),webix.ui.datafilter.multiComboFilter=webix.extend({inputtype:"multicombo",inputConfig:{tagMode:!1}},webix.ui.datafilter.multiSelectFilter),webix.ui.datafilter.serverMultiComboFilter=webix.extend({inputtype:"multicombo",inputConfig:{tagMode:!1}},webix.ui.datafilter.serverMultiSelectFilter),webix.ui.datafilter.datepickerFilter=webix.extend({prepare:function(e){return e||""},compare:function(e,t){return 1*e==1*t},inputtype:"datepicker"},webix.ui.datafilter.richSelectFilter),webix.ui.datafilter.columnGroup={getValue:function(){},setValue:function(){},getHelper:function(e,t){return{open:function(){t.closed=!0,e.onclick()},close:function(){t.closed=!1,e.onclick()},isOpened:function(){return t.closed}}},refresh:function(e,t,i){t.onclick=function(t){webix.html.stopEvent(t);var n=this.firstChild.firstChild;i.closed?(i.closed=!1,n.className="webix_tree_open"):(i.closed=!0,n.className="webix_tree_close"),webix.delay(function(){e.callEvent("onColumnGroupCollapse",[i.columnId,i.batch,!i.closed]),e.showColumnBatch(i.batch,!i.closed)})},i.firstRun||(i.firstRun=1,i.closed&&e.showColumnBatch(i.batch,!1))},render:function(e,t){return"<div role='button' tabindex='0' aria-label='"+webix.i18n.aria[t.closed?"openGroup":"closeGroup"]+"' class='"+(t.closed?"webix_tree_close":"webix_tree_open")+"'></div>&nbsp;"+(t.groupText||"")}},webix.ui.datafilter.dateRangeFilter=webix.extend({prepare:function(e){return e.start||e.end?webix.ui.daterange.prototype.SD(e):""},compare:function(e,t){return(!t.start||e>=t.start)&&(!t.end||e<=t.end)},inputtype:"daterangepicker"},webix.ui.datafilter.richSelectFilter),webix.ui.datafilter.serverDateRangeFilter=webix.extend({$server:!0},webix.ui.datafilter.dateRangeFilter),webix.editors.$popup.multiselect={view:"multisuggest",suggest:{button:!0}},webix.Canvas=webix.proto({$init:function(e){this.Wn=[],this.AE=webix.isUndefined(e.series)?e.name:e.series,this.tg=webix.toNode(e.container||e);var t=e.width*(window.devicePixelRatio||1),i=e.height*(window.devicePixelRatio||1),n=e.style||"";n+=";width:"+e.width+"px;height:"+e.height+"px;",this.Yn(e.name,n,t,i,e.title)},Yn:function(e,t,i,n,r){return this.Zn=webix.html.create("canvas",{title:r,width:i,height:n,canvas_id:e,style:t||""}),this.tg.appendChild(this.Zn),this.Zn.getContext||webix.env.isIE&&(webix.require("legacy/excanvas/excanvas.js",!0),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this.Zn)),this.Zn},getCanvas:function(e){var t=(this.Zn||this.Yn(this.w)).getContext(e||"2d");return this.$n||(this.$n=!0,t.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)),t},_n:function(e,t){this.Zn&&(this.Zn.setAttribute("width",e*(window.devicePixelRatio||1)),this.Zn.setAttribute("height",t*(window.devicePixelRatio||1)),this.Zn.style.width=e+"px",this.Zn.style.height=t+"px",this.$n=!1)},renderText:function(e,t,i,n,r){if(i){r&&(r=Math.max(r,0)),t&&(t=Math.max(t,0));var o=webix.html.create("DIV",{class:"webix_canvas_text"+(n?" "+n:""),style:"left:"+e+"px; top:"+t+"px;","aria-hidden":"true"},i);return this.tg.appendChild(o),this.Wn.push(o),r&&(o.style.width=r+"px"),o}},renderTextAt:function(e,t,i,n,r,o,a){var s=this.renderText.call(this,i,n,r,o,a);return s&&(e&&(s.style.top="middle"==e?parseInt(n-s.offsetHeight/2,10)+"px":n-s.offsetHeight+"px"),t&&(s.style.left="left"==t?i-s.offsetWidth+"px":parseInt(i-s.offsetWidth/2,10)+"px")),s},clearCanvas:function(e){var t=[];if(webix.html.remove(this.Wn),this.Wn=[],!e&&this.tg.t){for(t=this.ao();t.length;)t[0].parentNode.removeChild(t[0]),t.splice(0,1);t=null,this.tg.t.getElementsByTagName("AREA").length||(this.tg.t.parentNode.removeChild(this.tg.t),this.tg.t=null)}this.getCanvas().clearRect(0,0,this.Zn.offsetWidth||Math.floor(this.Zn.width/(window.devicePixelRatio||1)),this.Zn.offsetHeight||Math.floor(this.Zn.height/(window.devicePixelRatio||1)))},toggleCanvas:function(){this.bo("none"==this.Zn.style.display)},showCanvas:function(){this.bo(!0)},hideCanvas:function(){this.bo(!1)},bo:function(e){var t,i;for(i=0;i<this.Wn.length;i++)this.Wn[i].style.display=e?"":"none";if(this.tg.t)for(t=this.ao(),i=0;i<t.length;i++)e?t[i].removeAttribute("disabled"):t[i].setAttribute("disabled","true");this.Zn.style.display=e?"":"none"},ao:function(){var e,t,i=[];for(e=this.tg.t.getElementsByTagName("AREA"),t=0;t<e.length;t++)e[t].getAttribute("userdata")==this.AE&&i.push(e[t]);return i}}),webix.color={co:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],toHex:function(e,t){e=parseInt(e,10);for(var i="";e>0;)i=this.co[e%16]+i,e=Math.floor(e/16);for(;i.length<t;)i="0"+i;return i},rgbToHex:function(e){var t=[];return"string"==typeof e?e.replace(/[\d+\.]+/g,function(e){t.push(parseFloat(e))}):webix.isArray(e)&&(t=e),0===t[3]?"":t.slice(0,3).map(function(e){return webix.color.toHex(Math.floor(e),2)}).join("")},hexToDec:function(e){return parseInt(e,16)},toRgb:function(e){var t,i,n,r;return"string"!=typeof e?(t=e[0],i=e[1],n=e[2]):-1!=e.indexOf("rgb")?(r=e.substr(e.indexOf("(")+1,e.lastIndexOf(")")-e.indexOf("(")-1).split(","),t=r[0],i=r[1],n=r[2]):("#"==e.substr(0,1)&&(e=e.substr(1)),t=this.hexToDec(e.substr(0,2)),i=this.hexToDec(e.substr(2,2)),n=this.hexToDec(e.substr(4,2))),t=parseInt(t,10)||0,i=parseInt(i,10)||0,n=parseInt(n,10)||0,(0>t||t>255)&&(t=0),(0>i||i>255)&&(i=0),(0>n||n>255)&&(n=0),[t,i,n]},hsvToRgb:function(e,t,i){var n,r,o,a,s,l,h,c;switch(n=Math.floor(e/60)%6,r=e/60-n,o=i*(1-t),a=i*(1-r*t),s=i*(1-(1-r)*t),l=0,h=0,c=0,n){case 0:l=i,h=s,c=o;break;case 1:l=a,h=i,c=o;break;case 2:l=o,h=i,c=s;break;case 3:l=o,h=a,c=i;break;case 4:l=s,h=o,c=i;break;case 5:l=i,h=o,c=a}return l=Math.floor(255*l),h=Math.floor(255*h),c=Math.floor(255*c),[l,h,c]},rgbToHsv:function(e,t,i){var n,r,o,a,s,l,h,c;return n=e/255,r=t/255,o=i/255,a=Math.min(n,r,o),s=Math.max(n,r,o),h=0,l=0===s?0:1-a/s,c=s,s==a?h=0:s==n&&r>=o?h=60*(r-o)/(s-a)+0:s==n&&o>r?h=60*(r-o)/(s-a)+360:s==r?h=60*(o-n)/(s-a)+120:s==o&&(h=60*(n-r)/(s-a)+240),[h,l,c]}},webix.HtmlMap=webix.proto({$init:function(e){this.ad="map_"+webix.uid(),this.U=e,this.eo=[],this.sA=[]},addRect:function(e,t,i){this.fo(e,"RECT",t,i)},addPoly:function(e,t,i){this.fo(e,"POLY",t,i)},fo:function(e,t,i,n){var r="";4==arguments.length&&(r="userdata='"+n+"'"),this.eo.push("<area "+this.U+"='"+e+"' shape='"+t+"' coords='"+i.join()+"' "+r+"></area>"),this.sA.push({index:n,points:i})},addSector:function(e,t,i,n,r,o,a,s){var l=[];l.push(n),l.push(Math.floor(r*a));for(var h=t;i>h;h+=Math.PI/18)l.push(Math.floor(n+o*Math.cos(h))),l.push(Math.floor((r+o*Math.sin(h))*a));return l.push(Math.floor(n+o*Math.cos(i))),l.push(Math.floor((r+o*Math.sin(i))*a)),l.push(n),l.push(Math.floor(r*a)),this.addPoly(e,l,s)},hide:function(e,t,i){if(e.querySelectorAll)for(var n=e.querySelectorAll('area[userdata="'+t+'"]'),r=0;r<n.length;r++){var o=n[r];i?o.getAttribute("coords")&&(o.coordsdis=o.getAttribute("coords"),o.setAttribute("coords",""),o.coords=""):i||o.coordsdis&&(o.setAttribute("coords",o.coordsdis),o.coords=o.coordsdis,o.coordsdis=""),n[r].style.display=i?"none":""}},render:function(e){var t=webix.html.create("DIV");t.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;",e.appendChild(t);var i=webix.env.isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";t.innerHTML="<map id='"+this.ad+"' name='"+this.ad+"'>"+this.eo.join("\n")+"</map><img "+i+" class='webix_map_img' usemap='#"+this.ad+"'>",e.t=t,this.eo=[]}}),webix.protoUI({name:"chart",$init:function(e){if(this.go=[this.s],this.ho=[],this.w.className+=" webix_chart",this.$ready.push(this.Mi),e.preset&&this.io(e),e.series){var t=e.series;delete e.series,e.series=t}this.attachEvent("onMouseMove",this.tA),this.data.provideApi(this,!0)},Mi:function(){this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.render.apply(this,arguments)},this))},defaults:{ariaLabel:"chart",color:"default",alpha:"1",label:!1,value:"{obj.value}",padding:{},type:"pie",lineColor:"#ffffff",cant:.5,barWidth:30,line:{width:2,color:"#1293f8"},item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto",scale:"linear"},ad:"webix_area_id",on_click:{webix_chart_legend_item:function(e,t,i){var n=i.getAttribute("series_id");if(this.callEvent("onLegendClick",[e,n,i])&&void 0!==n&&this.go.length>1){var r=this.s,o=r.legend.values;(o&&o[n].toggle||r.legend.toggle)&&(-1!=i.className.indexOf("hidden")?this.showSeries(n):this.hideSeries(n))}}},on_dblclick:{},on_mouse_move:{},locate:function(e){return webix.html.locate(e,this.ad)},$setSize:function(e,t){var i=webix.ui.view.prototype.$setSize.call(this,e,t);if(i){for(var n in this.canvases)this.canvases[n]._n(this.bc,this.dc);this.render()}return i},type_setter:function(e){return void 0===this.s.offset&&(this.s.offset=!(-1!=e.toLowerCase().indexOf("area"))),"radar"!=e||this.s.yAxis||this.define("yAxis",{}),"scatter"==e&&(this.s.yAxis||this.define("yAxis",{}),this.s.xAxis||this.define("xAxis",{})),e},destructor:function(){this.removeAllSeries(),webix.Destruction.destructor.apply(this,arguments)},removeAllSeries:function(){this.clearCanvas(),this.ko&&(this.ko.innerHTML="",this.ko.parentNode.removeChild(this.ko),this.ko=null),this.canvases&&(this.canvases={}),this.w.innerHTML="";for(var e=0;e<this.go.length;e++)this.go[e].tooltip&&this.go[e].tooltip.destructor();this.go=[]},clearCanvas:function(){if(this.canvases&&"object"==typeof this.canvases)for(var e in this.canvases)this.canvases[e].clearCanvas()},render:function(e,t,i){var n,r,t,o,a;if(this.isVisible(this.s.id)&&(t=this.oo(),this.callEvent("onBeforeRender",[t,i]))){if(this.canvases&&"object"==typeof this.canvases)for(r in this.canvases)this.canvases[r].clearCanvas();else this.canvases={};if(this.s.legend&&(this.canvases.legend||(this.canvases.legend=this.lo("legend")),this.mo(this.data.getRange(),this.bc,this.dc)),this.eo=o=new webix.HtmlMap(this.ad),a=this.s,n=this.no(this.bc,this.dc),this.go)for(r=0;r<this.go.length;r++)this.s=this.go[r],this.canvases[r]||(this.canvases[r]=this.lo(this.name+" "+r,"z-index:"+(2+r),null,r,this.s.ariaLabel)),this["$render_"+this.s.type](this.canvases[r].getCanvas(),t,n.start,n.end,r,o);if(o.render(this.w),this.w.lastChild.style.zIndex=100,this.po(this.w.lastChild,n),this.callEvent("onAfterRender",[t]),this.s=a,this.s.legend&&this.s.legend.values)for(var s=this.s.legend.values,r=0;r<s.length;r++)s[r].$hidden&&this.hideSeries(r)}},po:function(e,t){var i={};i.left=t.start.x,i.top=t.start.y,i.width=t.end.x-t.start.x,i.height=t.end.y-t.start.y;for(var n in i)e.style[n]=i[n]+"px"},oo:function(){var e,t,i,n,r,o,a,s,l,h;if(n=this.data.getRange(),e=-1!=this.s.type.toLowerCase().indexOf("barh")?"yAxis":"xAxis",(t=this.s[e])&&t.units&&"object"==typeof t.units){if(i=t.units,s=[],void 0!==i.start&&void 0!==i.end&&void 0!==i.next)for(a=i.start;a<=i.end;)s.push(a),a=i.next.call(this,a);else"[object Array]"===Object.prototype.toString.call(i)&&(s=i);if(o=[],s.length){for(l=t.value,h={},r=0;r<n.length;r++)h[l(n[r])]=r;for(r=0;r<s.length;r++)void 0!==h[s[r]]?(n[h[s[r]]].$unit=s[r],o.push(n[h[s[r]]])):o.push({$unit:s[r]})}return o}return n},series_setter:function(e){if("object"!=typeof e);else{this.e(e.length?e[0]:e),this.go=[this.s];for(var t=1;t<e.length;t++)this.addSeries(e[t])}return e},value_setter:webix.template,xValue_setter:webix.template,yValue_setter:function(e){this.define("value",e)},alpha_setter:webix.template,label_setter:webix.template,lineColor_setter:webix.template,borderColor_setter:webix.template,pieInnerText_setter:webix.template,gradient_setter:function(e){return"function"!=typeof e&&e&&!0===e&&(e="light"),e},colormap:{RAINBOW:function(e){var t=Math.floor(this.getIndexById(e.id)/this.count()*1536);return 1536==t&&(t-=1),this.qo[Math.floor(t/256)](t%256)},default:function(e){var t=this.count(),i=this.qC.length,n=this.getIndexById(e.id);return i>t?(n&&(n=i-t>n?this.rC+2:this.rC+1),this.rC=n):n%=i,this.qC[n]}},color_setter:function(e){return this.colormap[e]||webix.template(e)},fill_setter:function(e){return!(!e||"0"==e)&&webix.template(e)},io:function(e){this.define("preset",e.preset),delete e.preset},preset_setter:function(e){var t,i,n;if(this.defaults=webix.extend({},this.defaults),"object"==typeof(n=this.presets[e])){for(t in n)if("object"==typeof n[t])if(this.defaults[t]&&"object"==typeof this.defaults[t]){this.defaults[t]=webix.extend({},this.defaults[t]);for(i in n[t])this.defaults[t][i]=n[t][i]}else this.defaults[t]=webix.extend({},n[t]);else this.defaults[t]=n[t];return e}return!1},legend_setter:function(e){return e?("object"!=typeof e&&(e={template:e}),this.E(e,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=this.s.type.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3}),e.template=webix.template(e.template),e):(this.ko&&(this.ko.innerHTML="",this.ko=null),!1)},item_setter:function(e){"object"!=typeof e&&(e={color:e,borderColor:e}),this.E(e,webix.extend({},this.defaults.item));var t=["alpha","borderColor","color","radius"];return this.ro(t,e),e},line_setter:function(e){return"object"!=typeof e&&(e={color:e}),e=webix.extend(e,this.defaults.line),e.color=webix.template(e.color),e},padding_setter:function(e){return"object"!=typeof e&&(e={left:e,right:e,top:e,bottom:e}),this.E(e,{left:50,right:20,top:35,bottom:40}),e},xAxis_setter:function(e){if(!e)return!1;"object"!=typeof e&&(e={template:e}),this.E(e,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0});var t=["lineColor","template","lines"];return this.ro(t,e),this.so=webix.extend({},e),e},yAxis_setter:function(e){this.E(e,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});var t=["lineColor","template","lines","bg"];return this.ro(t,e),this.to=webix.extend({},e),e},ro:function(e,t){for(var i=0;i<e.length;i++)t[e[i]]=webix.template(t[e[i]])},lo:function(e,t,i,n,r){var o={container:i||this.w,name:e,title:webix.isUndefined(r)?e:r||"",series:n,style:t||"",width:this.bc,height:this.dc};return new webix.Canvas(o)},uo:function(e,t,i,n,r,o){var a,s=0;return this.s.yAxis&&(this.canvases.y||(this.canvases.y=this.lo("axis_y")),s=this.vo(this.canvases.y.getCanvas(),e,t,i,n,r)),this.s.xAxis&&(this.canvases.x||(this.canvases.x=this.lo("axis_x")),a=this.canvases.x.getCanvas(),this.callEvent("onBeforeXAxis",[a,e,t,i,o,s])&&this.wo(a,e,t,i,o,s)),s},wo:function(e,t,i,n,r,o){var a,s,l=this.s,h=i.x-.5,c=parseInt(o||n.y,10)+.5,u=n.x,d=!0,f="stackedBar"==l.type?n.y+.5:c;for(a=0;a<t.length;a++){!0===l.offset?s=h+r/2+a*r:(s=a!=t.length-1||l.cellWidth?h+a*r:n.x,d=!!a),s=Math.ceil(s)-.5;var p="auto"!=l.origin&&"bar"==l.type&&parseFloat(l.value(t[a]))<l.origin;this.xo(s,f,t[a],d,p),(l.offset||a||l.cellWidth)&&l.xAxis.lines.call(this,t[a])&&this.yo(e,s,n.y,i.y,t[a])}this.canvases.x.renderTextAt(!0,!1,h,n.y+l.padding.bottom-3,l.xAxis.title,"webix_axis_title_x",n.x-i.x),this.zo(e,h,c,u,c,l.xAxis.color,1),l.xAxis.lines.call(this,{})&&l.offset&&this.zo(e,u+.5,n.y,u+.5,i.y+.5,l.xAxis.color,.2)},vo:function(e,t,i,n,r,o){var a,s={};if(this.s.yAxis){var l=i.x-.5,h=n.y,c=i.y,u=n.y+.5;if(this.s.yAxis.step&&(a=parseFloat(this.s.yAxis.step)),void 0===this.to.step||void 0===this.to.start||void 0===this.to.end?(s=this.Ao(r,o),r=s.start,o=s.end,a=s.step,this.s.yAxis.end=o,this.s.yAxis.start=r):"logarithmic"==this.config.scale&&(this.Bo=!0),this.Co(i,n),0!==a){if(o==r)return h;for(var d=(h-c)*a/(o-r),f=0,p=r;o>=p;p+=a){var m=this.Bo?Math.pow(10,p):p;s.fixNum&&(m=parseFloat(m).toFixed(s.fixNum));var g=Math.floor(h-f*d)+.5;if(p==r&&"auto"==this.s.origin||!this.s.yAxis.lines.call(this,p)||this.zo(e,l,g,n.x,g,this.s.yAxis.lineColor.call(this,p),1),p==this.s.origin&&(u=g),1>a&&!this.Bo){var v=Math.min(Math.floor(this.Do(a)),0>=r?0:Math.floor(this.Do(r))),b=Math.pow(10,-v);m=Math.round(m*b)/b,p=m}this.canvases.y.renderText(0,g-5,this.s.yAxis.template(""+m),"webix_axis_item_y",i.x-5),f++}return this.zo(e,l,h+1,l,c,this.s.yAxis.color,1),u}}},Co:function(e,t){var i="webix_axis_title_y"+(webix.Eo&&9!=webix.Eo?" webix_ie_filter":""),n=this.canvases.y.renderTextAt("middle",!1,0,parseInt((t.y-e.y)/2+e.y,10),this.s.yAxis.title,i);n&&(n.style.left=(webix.env.transform?(n.offsetHeight-n.offsetWidth)/2:0)+"px")},Fo:function(e,t){return{start:Math.floor(this.Do(e)),step:1,end:Math.ceil(this.Do(t))}},uG:function(e){var t=Math.floor(this.Do(e)),i=Math.pow(10,t),n=e/i;return n=n>5?10:5,parseInt(n,10)*i},Ao:function(e,t){if(this.Bo=!1,"logarithmic"==this.s.scale){var i=Math.floor(this.Do(e)),n=Math.ceil(this.Do(t));if(e>0&&t>0&&n-i>1)return this.Bo=!0,this.Fo(e,t)}"auto"!=this.s.origin&&this.s.origin<e&&(e=this.s.origin);var r,o,a;if((r=this.uG((t-e)/8||1))>Math.abs(e))o=0>e?-r:0;else{var s=Math.abs(e),l=Math.floor(this.Do(s)),h=s/Math.pow(10,l);for(o=Math.ceil(10*h)/10*Math.pow(10,l)-r,s>1&&r>.1&&(o=Math.ceil(o));0>e?e>=o:o>=e;)o-=r;0>e&&(o=-o-2*r)}t-o>10&&(r=this.uG((t-o)/8||1)),a=o;for(var c=Math.floor(this.Do(r));t>a;)a+=r,a=parseFloat((1*a).toFixed(Math.abs(c)));return{start:o,end:a,step:r,fixNum:0>c?Math.abs(c):0}},Go:function(e,t){var i,n,r=this.data.Df(),o=arguments.length&&"h"==e?this.so:this.to;if(t=t||"value",o&&void 0!==o.end&&void 0!==o.start&&o.step)i=parseFloat(o.end),n=parseFloat(o.start);else if(i=webix.GroupMethods.max(this.go[0][t],r),n=o&&void 0!==o.start?parseFloat(o.start):webix.GroupMethods.min(this.go[0][t],r),this.go.length>1)for(var a=1;a<this.go.length;a++){var s=webix.GroupMethods.max(this.go[a][t],r),l=webix.GroupMethods.min(this.go[a][t],r);s>i&&(i=s),n>l&&(n=l)}return{max:i,min:n}},Do:function(e){return Math.log(e)/Math.LN10},xo:function(e,t,i,n,r){if(this.s.xAxis){var o=this.canvases.x.renderTextAt(r,n,e,t-(r?2:0),this.s.xAxis.template(i));o&&(o.className+=" webix_axis_item_x")}},yo:function(e,t,i,n,r){this.s.xAxis&&this.s.xAxis.lines&&this.zo(e,t,i,t,n,this.s.xAxis.lineColor.call(this,r),1)},zo:function(e,t,i,n,r,o,a){e.strokeStyle=o,e.lineWidth=a,e.beginPath(),e.moveTo(t,i),e.lineTo(n,r),e.stroke(),e.lineWidth=1},Ho:function(e,t){var i;return i=t!=e?t-e:e,[i,1]},qo:[function(e){return"#FF"+webix.color.toHex(e/2,2)+"00"},function(e){return"#FF"+webix.color.toHex(e/2+128,2)+"00"},function(e){return"#"+webix.color.toHex(255-e,2)+"FF00"},function(e){return"#00FF"+webix.color.toHex(e,2)},function(e){return"#00"+webix.color.toHex(255-e,2)+"FF"},function(e){return"#"+webix.color.toHex(e,2)+"00FF"}],qC:["#f55b50","#ff6d3f","#ffa521","#ffc927","#ffee54","#d3e153","#9acb61","#63b967","#21a497","#21c5da","#3ea4f5","#5868bf","#7b53c0","#a943ba","#ec3b77","#9eb0b8"],rC:0,addSeries:function(e){var t=webix.extend({},this.s);this.s=webix.extend({},t),this.e(e,{}),this.go.push(this.s),this.s=t},tA:function(e,t,i){var n;if(i.getAttribute("userdata")&&(this.Io=1==this.go.length?this.uA(t):i.getAttribute("userdata"),this.go[this.Io])){for(var r=0;r<this.go.length;r++)(n=this.go[r].tooltip)&&n.disable();i.getAttribute("disabled")||(n=this.go[this.Io].tooltip)&&n.enable()}},uA:function(e){var t,i,n,r,o,a,s,l;for(i=this.eo.sA,r=webix.html.offset(this.w.t),o=webix.html.pos(e),s=o.x-r.x,l=o.y-r.y,n=0;n<i.length;n++)t=i[n].points,s<=t[2]&&s>=t[0]&&l<=t[3]&&l>=t[1]&&(a?i[n].index>a.index&&(a=i[n]):a=i[n]);return a?a.index:0},hideSeries:function(e){this.canvases[e].hideCanvas();var t=this.s.legend;t&&t.values&&t.values[e]&&(t.values[e].$hidden=!0,this.mo()),this.eo.hide(this.w,e,!0)},showSeries:function(e){this.canvases[e].showCanvas();var t=this.s.legend;t&&t.values&&t.values[e]&&(delete t.values[e].$hidden,this.mo()),this.eo.hide(this.w,e,!1)},mo:function(e,t){var i,n,r,o,a,s,l,h,c,u,d,f=0,p=0;if(e=e||[],t=t||this.bc,h=this.canvases.legend.getCanvas(),n=this.s.legend,l="x"!=this.s.legend.layout?"width:"+n.width+"px":"",this.ko&&(this.ko.innerHTML="",this.ko.parentNode.removeChild(this.ko)),this.canvases.legend.clearCanvas(!0),r=webix.html.create("DIV",{class:"webix_chart_legend",style:"left:"+f+"px; top:"+p+"px;"+l},""),n.padding&&(r.style.padding=n.padding+"px"),this.ko=r,this.w.appendChild(r),a=[],n.values)for(i=0;i<n.values.length;i++)a.push(this.Jo(r,n.values[i].text,void 0!==n.values[i].id?typeof n.values[i].id:i,n.values[i].$hidden));else for(i=0;i<e.length;i++)a.push(this.Jo(r,n.template(e[i]),e[i].id));for(0===r.offsetWidth&&(r.style.width="auto"),s=r.offsetWidth,o=r.offsetHeight,t>s&&("x"==n.layout&&"center"==n.align&&(f=(t-s)/2),"right"==n.align&&(f=t-s),n.margin&&"center"!=n.align&&(f+=("left"==n.align?1:-1)*n.margin)),o<this.dc&&("middle"==n.valign&&"center"!=n.align&&"x"!=n.layout?p=(this.dc-o)/2:"bottom"==n.valign&&(p=this.dc-o),n.margin&&"middle"!=n.valign&&(p+=("top"==n.valign?1:-1)*n.margin)),r.style.left=f+"px",r.style.top=p+"px",h.save(),i=0;i<a.length;i++)d=a[i],n.values&&n.values[i].$hidden?(u=!0,c=n.values[i].disableColor?n.values[i].disableColor:"#d9d9d9"):(u=!1,c=n.values?n.values[i].color:this.s.color.call(this,e[i])),this.Ko(h,d.offsetLeft+f,d.offsetTop+p,c,d.offsetHeight,u,i);h.restore(),a=null},Jo:function(e,t,i,n){var r="";"x"==this.s.legend.layout&&(r="float:left;");var o=webix.html.create("DIV",{style:r+"padding-left:"+(10+this.s.legend.marker.width)+"px",class:"webix_chart_legend_item"+(n?" hidden":""),role:"button",tabindex:"0","aria-label":webix.i18n.aria[(n?"show":"hide")+"Chart"]+" "+t},t);return arguments.length>2&&o.setAttribute("series_id",i),e.appendChild(o),o},Ko:function(e,t,i,n,r,o,a){var s=[],l=this.s.legend.marker,h=this.s.legend.values,c=h&&h[a].markerType?h[a].markerType:l.type;if(n&&(e.strokeStyle=e.fillStyle=n),"round"!=c&&l.radius)if("item"==c){if(this.s.line&&"scatter"!=this.s.type&&!this.s.disableLines){e.beginPath(),e.lineWidth=this.go[a].line.width,e.strokeStyle=o?n:this.go[a].line.color.call(this,{});var u=t+5,d=i+r/2;e.moveTo(u,d);var f=u+l.width;e.lineTo(f,d),e.stroke()}var p=this.go[a].item,m=parseInt(p.radius.call(this,{}),10)||0;m&&(e.beginPath(),o?(e.lineWidth=p.borderWidth,e.strokeStyle=n,e.fillStyle=n):(e.lineWidth=p.borderWidth,e.fillStyle=p.color.call(this,{}),e.strokeStyle=p.borderColor.call(this,{}),e.globalAlpha=p.alpha.call(this,{})),e.beginPath(),t+=l.width/2+5,i+=r/2,this.Lo(e,t,i,m+1,p.type),e.fill(),e.stroke()),e.globalAlpha=1}else e.beginPath(),e.lineWidth=1,t+=5,i+=r/2-l.height/2,s=[[t+l.radius,i+l.radius,l.radius,Math.PI,3*Math.PI/2,!1],[t+l.width-l.radius,i],[t+l.width-l.radius,i+l.radius,l.radius,-Math.PI/2,0,!1],[t+l.width,i+l.height-l.radius],[t+l.width-l.radius,i+l.height-l.radius,l.radius,0,Math.PI/2,!1],[t+l.radius,i+l.height],[t+l.radius,i+l.height-l.radius,l.radius,Math.PI/2,Math.PI,!1],[t,i+l.radius]],this.Mo(e,s),e.stroke(),e.fill();else{e.beginPath(),e.lineWidth=l.height,e.lineCap=l.type,t+=e.lineWidth/2+5,i+=r/2,e.moveTo(t,i);var f=t+l.width-l.height+1;e.lineTo(f,i),e.stroke(),e.fill()}},no:function(e,t){var i,n,r,o;if(i=this.s.padding.left,n=this.s.padding.top,r=e-this.s.padding.right,o=t-this.s.padding.bottom,this.s.legend){var a=this.s.legend,s=this.s.legend.width,l=this.s.legend.height;"x"==a.layout?"center"==a.valign?"right"==a.align?r-=s:"left"==a.align&&(i+=s):"bottom"==a.valign?o-=l:n+=l:"right"==a.align?r-=s:"left"==a.align&&(i+=s)}return{start:{x:i,y:n},end:{x:r,y:o}}},No:function(e){var t,i,n,r,o;if(this.s.yAxis&&void 0!==this.s.yAxis.end&&void 0!==this.s.yAxis.start&&this.s.yAxis.step)n=parseFloat(this.s.yAxis.end),r=parseFloat(this.s.yAxis.start);else{for(t=0;t<e.length;t++)for(e[t].$sum=0,e[t].$min=1/0,i=0;i<this.go.length;i++)o=Math.abs(parseFloat(this.go[i].value(e[t])||0)),isNaN(o)||(-1!=this.go[i].type.toLowerCase().indexOf("stacked")&&(e[t].$sum+=o),o<e[t].$min&&(e[t].$min=o));for(n=-1/0,r=1/0,t=0;t<e.length;t++)e[t].$sum>n&&(n=e[t].$sum),e[t].$min<r&&(r=e[t].$min);r>0&&(r=0)}return{max:n,min:r}},Oo:function(e,t,i,n,r,o,a,s){var l,h,c,u,d,f;return"light"==o?(l="x"==s?e.createLinearGradient(t,i,n,i):e.createLinearGradient(t,i,t,r),f=[[0,"#FFFFFF"],[.9,a],[1,a]],h=2):"falling"==o||"rising"==o?(l="x"==s?e.createLinearGradient(t,i,n,i):e.createLinearGradient(t,i,t,r),c=webix.color.toRgb(a),u=webix.color.rgbToHsv(c[0],c[1],c[2]),u[1]*=.5,d="rgb("+webix.color.hsvToRgb(u[0],u[1],u[2])+")","falling"==o?f=[[0,d],[.7,a],[1,a]]:"rising"==o&&(f=[[0,a],[.3,a],[1,d]]),h=0):(e.globalAlpha=.37,h=0,l="x"==s?e.createLinearGradient(t,r,t,i):e.createLinearGradient(t,i,n,i),f=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]),this.Po(l,f),{gradient:l,offset:h}},Qo:function(e,t,i,n){return e*=-1,t+=Math.cos(e)*n,i-=Math.sin(e)*n,{x:t,y:i}},Po:function(e,t){for(var i=0;i<t.length;i++)e.addColorStop(t[i][0],t[i][1])},Mo:function(e,t){var i,n;for(i=0;i<t.length;i++)n=i?"lineTo":"moveTo",t[i].length>2&&(n="arc"),e[n].apply(e,t[i])},Ro:function(e,t,i,n,r){e.addRect(t,[i[0].x-n.x,i[0].y-n.y,i[1].x-n.x,i[1].y-n.y],r)}},webix.Group,webix.AutoTooltip,webix.DataLoader,webix.MouseEvents,webix.EventSystem,webix.ui.view),webix.extend(webix.ui.chart,{$render_pie:function(e,t,i,n,r,o){this.So(e,t,i,n,1,o,r)},So:function(e,t,i,n,r,o,a){if(t.length){var s=this.To(i,n),l=this.s.radius?this.s.radius:s.radius;if(!(0>l)){var h=this.Uo(t),c=this.Vo(h),u=this.Wo(h,c),d=this.s.x?this.s.x:s.x,f=this.s.y?this.s.y:s.y;1==r&&this.s.shadow&&this.Xo(e,d,f,l),f/=r;var p=-Math.PI/2,m=[];if(e.scale(1,r),this.s.gradient){var g=1!=r?d+l/3:d,v=1!=r?f+l/3:f;this.Yo(e,d,f,l,g,v)}for(var b=0;b<t.length;b++)if(h[b]){e.strokeStyle=this.s.lineColor.call(this,t[b]),e.beginPath(),e.moveTo(d,f),m.push(p);var w=-Math.PI/2+u[b]-1e-4;e.arc(d,f,l,p,w,!1),e.lineTo(d,f);var x=this.s.color.call(this,t[b]);e.fillStyle=x,e.fill(),this.s.pieInnerText&&this.Zo(d,f,5*l/6,p,w,r,this.s.pieInnerText(t[b],c),!0),this.s.label&&this.Zo(d,f,l+this.s.labelOffset,p,w,r,this.s.label(t[b])),1!=r&&(this.$o(e,d,f,p,w,l,!0),e.fillStyle="#000000",e.globalAlpha=.2,this.$o(e,d,f,p,w,l,!1),e.globalAlpha=1,e.fillStyle=x),o.addSector(t[b].id,p,w,d-i.x,f-i.y/r,l,r,a),p=w}e.globalAlpha=.8;var y;for(b=0;b<m.length;b++)y=this.Qo(m[b],d,f,l),this.zo(e,d,f,y.x,y.y,this.s.lineColor.call(this,t[b]),2);1==r&&(e.lineWidth=2,e.strokeStyle="#ffffff",e.beginPath(),e.arc(d,f,l+1,0,2*Math.PI,!1),e.stroke()),e.globalAlpha=1,e.scale(1,1/r)}}},Uo:function(e){for(var t=[],i=0;i<e.length;i++)t.push(Math.abs(parseFloat(this.s.value(e[i])||0)));return t},Vo:function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i];return t},Wo:function(e,t){var i,n=[],r=0;t=t||this.Vo(e);for(var o=0;o<e.length;o++)i=e[o],n[o]=2*Math.PI*(t?(i+r)/t:1/e.length),r+=i;return n},To:function(e,t){var i=t.x-e.x,n=t.y-e.y;return{x:e.x+i/2,y:e.y+n/2,radius:Math.min(i/2,n/2)}},$o:function(e,t,i,n,r,o,a){if(e.lineWidth=1,0>=n&&r>=0||n>=0&&r<=Math.PI||Math.abs(n-Math.PI)>.003&&n<=Math.PI&&r>=Math.PI){0>=n&&r>=0&&(n=0,a=!1,this._o(e,t,i,o,n,r)),n<=Math.PI&&r>=Math.PI&&(r=Math.PI,a=!1,this._o(e,t,i,o,n,r));var s=(this.s.pieHeight||Math.floor(o/4))/this.s.cant;e.beginPath(),e.arc(t,i,o,n,r,!1),e.lineTo(t+o*Math.cos(r),i+o*Math.sin(r)+s),e.arc(t,i+s,o,r,n,!0),e.lineTo(t+o*Math.cos(n),i+o*Math.sin(n)),e.fill(),a&&e.stroke()}},_o:function(e,t,i,n,r,o){e.beginPath(),e.arc(t,i,n,r,o,!1),e.stroke()},Xo:function(e,t,i,n){e.globalAlpha=.5;for(var r=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"],o=8;o>-1;o--)e.beginPath(),e.fillStyle=r[o],e.arc(t+1,i+1,n+o,0,2*Math.PI,!0),e.fill();e.globalAlpha=1},ap:function(e){return e.addColorStop(0,"#ffffff"),e.addColorStop(.7,"#7a7a7a"),e.addColorStop(1,"#000000"),e},Yo:function(e,t,i,n,r,o){e.beginPath();var a;"function"!=typeof this.s.gradient?(a=e.createRadialGradient(r,o,n/4,t,i,n),a=this.ap(a)):a=this.s.gradient(a),e.fillStyle=a,e.arc(t,i,n,0,2*Math.PI,!0),e.fill(),e.globalAlpha=.7},Zo:function(e,t,i,n,r,o,a,s){var l=this.canvases[0].renderText(0,0,a,0,1);if(l){var h=l.scrollWidth;l.style.width=h+"px",h>e&&(h=e);var c=.2>r-n?4:8;s&&(c=h/1.8);var u=n+(r-n)/2;i-=(c-8)/2;var d=-c,f="right";(u>=Math.PI/2&&u<Math.PI||u<=3*Math.PI/2&&u>=Math.PI)&&(d=-h-d+1,f="left");var p=0;!s&&1>o&&u>0&&u<Math.PI&&(p=(this.s.height||Math.floor(i/4))/o);var m=(t+Math.floor((i+p)*Math.sin(u)))*o-8,g=e+Math.floor((i+c/2)*Math.cos(u))+d,v=r<Math.PI/2+.01,b=n<Math.PI/2;b&&v?g=Math.max(g,e+3):b||v?!s&&(u>=Math.PI/2&&u<Math.PI||u<=3*Math.PI/2&&u>=Math.PI)&&(g+=h/3):g=Math.min(g,e-h),l.style.top=m+"px",l.style.left=g+"px",l.style.width=h+"px",l.style.textAlign=f,l.style.whiteSpace="nowrap"}},$render_pie3D:function(e,t,i,n,r,o){this.So(e,t,i,n,this.s.cant,o)},$render_donut:function(e,t,i,n,r,o){if(t.length){this.So(e,t,i,n,1,o,r);var a=this.s,s=this.To(i,n),l=a.radius?a.radius:s.radius,h=a.innerRadius&&a.innerRadius<l?a.innerRadius:l/3,c=a.x?a.x:s.x,u=a.y?a.y:s.y;e.fillStyle="#ffffff",e.beginPath(),e.arc(c,u,h,0,2*Math.PI,!0),e.fill()}}}),webix.extend(webix.ui.chart,{$render_bar:function(e,t,i,n,r,o){var a,s,l,h,c,u,d,f,p,m,g,v,b,w=n.y-i.y;b=!!this.s.yAxis,v=!!this.s.xAxis,h=this.Go(),c=h.max,u=h.min,s=(n.x-i.x)/t.length,r||"auto"!=this.s.origin&&!b||this.uo(t,i,n,u,c,s),b&&(c=parseFloat(this.s.yAxis.end),u=parseFloat(this.s.yAxis.start)),p=this.Ho(u,c),d=p[0],f=p[1],g=d?w/d:d,b||"auto"!=this.s.origin&&v||(m=10,g=d?(w-m)/d:m),!r&&"auto"!=this.s.origin&&!b&&this.s.origin>u&&this.wo(e,t,i,n,s,n.y-g*(this.s.origin-u)),a=parseInt(this.s.barWidth,10);var x=0,y=0;for(l=0;l<this.go.length;l++)l==r&&(y=x),"bar"==this.go[l].type&&x++;this.go&&a*x+4>s&&(a=parseInt(s/x-4,10));var _=(s-a*x)/2,k=void 0!==this.s.radius?parseInt(this.s.radius,10):Math.round(a/5),C=!1,S=this.s.gradient;for(S&&"function"!=typeof S?(C=S,S=!1):S&&(S=e.createLinearGradient(0,n.y,0,i.y),this.s.gradient(S)),v||this.zo(e,i.x,n.y+.5,n.x,n.y+.5,"#000000",1),l=0;l<t.length;l++){var $=parseFloat(this.s.value(t[l])||0);this.Bo&&($=this.Do($)),$>c&&($=c),$-=u,$*=f;var T=i.x+_+l*s+(a+1)*y,E=n.y,M=S||this.s.color.call(this,t[l]),I=this.s.border?1:0,A=this.s.label(t[l]);$==this.s.origin||"auto"==this.s.origin&&this.s.value(t[l])==u?(I=0,A=""):0>$||this.s.yAxis&&0===$&&!("auto"!=this.s.origin&&this.s.origin>u)?($=I=0,A=""):b||"auto"!=this.s.origin&&v||($+=m/g),e.globalAlpha=this.s.alpha.call(this,t[l]);var D=this.bp(e,i,T,E,a,u,k,g,$,M,S,C,I);C&&this.cp(e,T,E,a,u,k,g,$,M,C,I),I&&this.dp(e,T,E,a,u,k,g,$,M),e.globalAlpha=1,D[0]!=T?this.canvases[r].renderTextAt(!1,!0,T+Math.floor(a/2),D[1],A):this.canvases[r].renderTextAt(!0,!0,T+Math.floor(a/2),D[3],A),o.addRect(t[l].id,[T-i.x,D[3]-i.y,D[2]-i.x,D[1]-i.y],r)}},ep:function(e,t,i,n,r,o,a){var s=this.s.xAxis,l=i;return s&&"auto"!=this.s.origin&&this.s.origin>a&&(i-=(this.s.origin-a)*r,l=i,n-=this.s.origin-a,0>n&&(n*=-1,e.translate(t+o,i),e.rotate(Math.PI),t=0,i=0),i-=.5),{value:n,x0:t,y0:i,start:l}},bp:function(e,t,i,n,r,o,a,s,l,h,c,u,d){e.save(),e.fillStyle=h;var f=this.ep(e,i,n,l,s,r,o),p=this.fp(e,f.x0,f.y0,r,a,s,f.value,d);c&&!u&&e.lineTo(f.x0+d,t.y),e.fill(),e.restore();var m=f.x0,g=f.x0!=i?i+p[0]:p[0];return[m,f.x0!=i?f.start-p[1]-f.y0:f.y0,g,f.x0!=i?f.start-f.y0:p[1]]},gp:function(e,t){var i,n;n=webix.color.toRgb(t),i=webix.color.rgbToHsv(n[0],n[1],n[2]),i[2]/=1.4,t="rgb("+webix.color.hsvToRgb(i[0],i[1],i[2])+")",e.strokeStyle=t,1==e.globalAlpha&&(e.globalAlpha=.9)},dp:function(e,t,i,n,r,o,a,s,l){var h;e.save(),h=this.ep(e,t,i,s,a,n,r),this.gp(e,l),this.fp(e,h.x0,h.y0,n,o,a,h.value,e.lineWidth/2,1),e.stroke(),e.restore()},cp:function(e,t,i,n,r,o,a,s,l,h,c){e.save();var u=this.ep(e,t,i,s,a,n,r),d=this.Oo(e,u.x0,u.y0,u.x0+n,u.y0-a*u.value+2,h,l,"y");e.fillStyle=d.gradient,this.fp(e,u.x0+d.offset,u.y0,n-2*d.offset,o,a,u.value,d.offset+c),e.fill(),e.restore()},fp:function(e,t,i,n,r,o,a,s,l){e.beginPath();var h=0;if(r>o*a){var c=(r-o*a)/r;1>=c&&c>=-1&&(h=-Math.acos(c)+Math.PI/2)}e.moveTo(t+s,i);var u=i-Math.floor(o*a)+r+(r?0:s);o*a>r&&e.lineTo(t+s,u);var d=t+r;r&&r>0&&e.arc(d,u,Math.max(r-s,0),-Math.PI+h,-Math.PI/2,!1);var f=t+n-r-s,p=u-r+(r?s:0);e.lineTo(f,p),r&&r>0&&e.arc(f+s,u,Math.max(r-s,0),-Math.PI/2,0-h,!1);var m=t+n-s;return e.lineTo(m,i),l||e.lineTo(t+s,i),[m,p]}}),webix.extend(webix.ui.chart,{$render_line:function(e,t,i,n,r,o){var a,s,l,h,c,u,d,f,p,m,g,v;if(h=this.hp(e,t,i,n,r),a=this.s,t.length){for(c=a.offset?i.x+.5*h.cellWidth:i.x,l=[],s=0;s<t.length;s++)if((v=this.ip(t[s],i,n,h))||"0"==v){if(d=s?h.cellWidth*s-.5+c:c,p="object"==typeof v?v.y0:v,s&&this.s.fixOverflow){if(g=this.ip(t[s-1],i,n,h),g.out&&g.out==v.out)continue;u=h.cellWidth*(s-1)-.5+c,f="object"==typeof g?g.y0:g,g.out&&(m="min"==g.out?n.y:i.y,l.push({x:this.jp(u,d,f,p,m),y:m})),v.out&&(m="min"==v.out?n.y:i.y,l.push({x:this.jp(u,d,f,p,m),y:m}))}v.out||l.push({x:d,y:v,index:s})}for(this.kp=i,s=1;s<=l.length;s++)u=l[s-1].x,f=l[s-1].y,s<l.length&&(d=l[s].x,p=l[s].y,this.zo(e,u,f,d,p,a.line.color.call(this,t[s-1]),a.line.width),a.line&&a.line.shadow&&(e.globalAlpha=.3,this.zo(e,u+2,f+a.line.width+8,d+2,p+a.line.width+8,"#eeeeee",a.line.width+3),e.globalAlpha=1)),void 0!==l[s-1].index&&this.lp(e,u,f,t[l[s-1].index],a.label(t[l[s-1].index]),r,o,i)}},jp:function(e,t,i,n,r){return e+(r-i)*(t-e)/(n-i)},lp:function(e,t,i,n,r,o,a){var s=this.s.item,l=parseInt(s.radius.call(this,n),10)||0,h=this.kp;if(l){if(e.save(),s.shadow){e.lineWidth=1,e.strokeStyle="#bdbdbd",e.fillStyle="#bdbdbd";for(var c=[.1,.2,.3],u=2;u>=0;u--)e.globalAlpha=c[u],e.strokeStyle="#d0d0d0",e.beginPath(),this.Lo(e,t,i+2*l/3,l+u+1,s.type),e.stroke();e.beginPath(),e.globalAlpha=.3,e.fillStyle="#bdbdbd",this.Lo(e,t,i+2*l/3,l+1,s.type),e.fill()}e.restore(),e.lineWidth=s.borderWidth,e.fillStyle=s.color.call(this,n),e.strokeStyle=s.borderColor.call(this,n),e.globalAlpha=s.alpha.call(this,n),e.beginPath(),this.Lo(e,t,i,l+1,s.type),e.fill(),e.stroke(),e.globalAlpha=1}if(r&&this.canvases[o].renderTextAt(!1,!0,t,i-l-this.s.labelOffset,this.s.label.call(this,n)),a){var d=this.s.eventRadius||l+1;a.addRect(n.id,[t-d-h.x,i-d-h.y,t+d-h.x,i+d-h.y],o)}},Lo:function(e,t,i,n,r){var o=[];if(!r||"square"!=r&&"s"!=r)if(!r||"diamond"!=r&&"d"!=r)o=!r||"triangle"!=r&&"t"!=r?[[t,i,n,0,2*Math.PI,!0]]:[[t,i-n],[t+Math.sqrt(3)*n/2,i+n/2],[t-Math.sqrt(3)*n/2,i+n/2],[t,i-n]];else{var a=e.lineWidth>1?e.lineWidth*Math.sqrt(2)/4:0;o=[[t,i-n],[t+n,i],[t,i+n],[t-n,i],[t+a,i-n-a]]}else n*=Math.sqrt(2)/2,o=[[t-n-e.lineWidth/2,i-n],[t+n,i-n],[t+n,i+n],[t-n,i+n],[t-n,i-n]];this.Mo(e,o)},ip:function(e,t,i,n){var r=n.minValue,o=n.maxValue,a=n.unit,s=n.valueFactor,l=this.s.value(e);this.Bo&&(l=this.Do(l));var h=(parseFloat(l||0)-r)*s;this.s.yAxis||(h+=n.startValue/a);var c=i.y-a*h;return!this.s.fixOverflow||"line"!=this.s.type&&"area"!=this.s.type?(l>o&&(c=t.y),(0>h||r>l)&&(c=i.y)):l>o?c={y:t.y,y0:c,out:"max"}:(0>h||r>l)&&(c={y:i.y,y0:c,out:"min"}),c},hp:function(e,t,i,n,r){var o,a={};a.totalHeight=n.y-i.y,this.s.cellWidth?a.cellWidth=Math.min(n.x-i.x,this.s.cellWidth):a.cellWidth=(n.x-i.x)/(this.s.offset?t.length:t.length-1);var s=!!this.s.yAxis,l=-1!=this.s.type.indexOf("stacked")?this.No(t):this.Go();a.maxValue=l.max,a.minValue=l.min,r||this.uo(t,i,n,a.minValue,a.maxValue,a.cellWidth),s&&(a.maxValue=parseFloat(this.s.yAxis.end),a.minValue=parseFloat(this.s.yAxis.start));var h=this.Ho(a.minValue,a.maxValue);return o=h[0],a.valueFactor=h[1],a.unit=o?a.totalHeight/o:10,a.startValue=0,s||(a.startValue=10,a.unit!=a.totalHeight&&(a.unit=o?(a.totalHeight-a.startValue)/o:10)),a}}),webix.extend(webix.ui.chart,{$render_barH:function(e,t,i,n,r,o){var a,s,l,h,c,u,d,f,p,m,g,v,b,w,x,y,_,k,C,S,$;for(l=(n.y-i.y)/t.length,d=this.Go("h"),f=d.max,p=d.min,y=n.x-i.x,$=!!this.s.xAxis,r||this.mp(e,t,i,n,p,f,l),$&&(f=parseFloat(this.s.xAxis.end),p=parseFloat(this.s.xAxis.start)),w=this.Ho(p,f),v=w[0],g=w[1],k=v?y/v:10,$||(x=10,k=v?(y-x)/v:10),s=parseInt(this.s.barWidth,10),s*this.go.length+4>l&&(s=l/this.go.length-4),a=Math.floor((l-s*this.go.length)/2),b=void 0!==this.s.radius?parseInt(this.s.radius,10):Math.round(s/5),m=!1,c=this.s.gradient,c&&"function"!=typeof c?(m=c,c=!1):c&&(c=e.createLinearGradient(i.x,i.y,n.x,i.y),this.s.gradient(c)),$||this.zo(e,i.x-.5,i.y,i.x-.5,n.y,"#000000",1),u=0;u<t.length;u++)if(_=parseFloat(this.s.value(t[u]||0)),this.Bo&&(_=this.Do(_)),_&&!isNaN(_))if(_>f&&(_=f),_-=p,_*=g,C=i.x,S=i.y+a+u*l+(s+1)*r,0>_&&"auto"==this.s.origin||this.s.xAxis&&0===_&&!("auto"!=this.s.origin&&this.s.origin>p))this.canvases[r].renderTextAt("middle","right",C+10,S+s/2+a,this.s.label(t[u]));else{0>_&&"auto"!=this.s.origin&&this.s.origin>p&&(_=0),$||(_+=x/k),h=c||this.s.color.call(this,t[u]),this.s.border&&this.np(e,C,S,s,p,b,k,_,h),e.globalAlpha=this.s.alpha.call(this,t[u]);var T=this.op(e,n,C,S,s,p,b,k,_,h,c,m);m&&this.pp(e,C,S,s,p,b,k,_,h,m),e.globalAlpha=1,T[3]==S?(this.canvases[r].renderTextAt("middle","left",T[0]-5,T[3]+Math.floor(s/2),this.s.label(t[u])),o.addRect(t[u].id,[T[0]-i.x,T[3]-i.y,T[2]-i.x,T[3]+s-i.y],r)):(this.canvases[r].renderTextAt("middle",!1,T[2]+5,T[1]+Math.floor(s/2),this.s.label(t[u])),o.addRect(t[u].id,[T[0]-i.x,S-i.y,T[2]-i.x,T[3]-i.y],r))}},qp:function(e,t,i,n,r,o,a,s,l){var h=0;if(r>o*a){var c=(r-o*a)/r;h=-Math.asin(c)+Math.PI/2}e.moveTo(t,i+s);var u=t+o*a-r-(r?0:s);u=Math.max(t,u),o*a>r&&e.lineTo(u,i+s);var d=i+r;r&&r>0&&e.arc(u,d,r-s,-Math.PI/2+h,0,!1);var f=i+n-r-(r?0:s),p=u+r-(r?s:0);e.lineTo(p,f),r&&r>0&&e.arc(u,f,r-s,0,Math.PI/2-h,!1);var m=i+n-s;return e.lineTo(t,m),l||e.lineTo(t,i+s),[p,m]},mp:function(e,t,i,n,r,o,a){var s=0;this.s.xAxis&&(this.canvases.x||(this.canvases.x=this.lo("axis_x")),s=this.rp(this.canvases.x.getCanvas(),t,i,n,r,o)),this.s.yAxis&&(this.canvases.y||(this.canvases.y=this.lo("axis_y")),this.sp(this.canvases.y.getCanvas(),t,i,n,a,s))},sp:function(e,t,i,n,r,o){if(this.s.yAxis){var a,s=parseInt(o||i.x,10)-.5,l=n.y+.5,h=i.y;this.zo(e,s,l,s,h,this.s.yAxis.color,1);for(var c=0;c<t.length;c++){var u="auto"!=this.s.origin&&"barH"==this.s.type&&parseFloat(this.s.value(t[c]))<this.s.origin;a=h+r/2+c*r,this.canvases.y.renderTextAt("middle",!u&&"left",u?s+5:s-5,a,this.s.yAxis.template(t[c]),"webix_axis_item_y",u?0:s-10),this.s.yAxis.lines.call(this,t[c])&&this.zo(e,i.x,a,n.x,a,this.s.yAxis.lineColor.call(this,t[c]),1)}this.s.yAxis.lines.call(this,{})&&this.zo(e,i.x+.5,h+.5,n.x,h+.5,this.s.yAxis.lineColor.call(this,{}),1),this.Co(i,n)}},rp:function(e,t,i,n,r,o){var a,s={},l=this.s.xAxis;if(l){var h=n.y+.5,c=i.x-.5,u=n.x-.5,d=i.x;if(this.zo(e,c,h,u,h,l.color,1),l.step&&(a=parseFloat(l.step)),(void 0===this.so.step||void 0===this.so.start||void 0===this.so.end)&&(s=this.Ao(r,o),r=s.start,o=s.end,a=s.step,this.s.xAxis.end=o,this.s.xAxis.start=r,this.s.xAxis.step=a),0!==a){for(var f=(u-c)*a/(o-r),p=0,m=r;o>=m;m+=a){var g=this.Bo?Math.pow(10,m):m;s.fixNum&&(g=parseFloat(g).toFixed(s.fixNum));var v=Math.floor(c+p*f)+.5;if(m==r&&"auto"==this.s.origin||!l.lines.call(this,m)||this.zo(e,v,h,v,i.y,this.s.xAxis.lineColor.call(this,m),1),m==this.s.origin&&(d=v+1),1>a&&!this.Bo){var b=Math.min(Math.floor(this.Do(a)),0>=r?0:Math.floor(this.Do(r))),w=Math.pow(10,-b);g=Math.round(g*w)/w,m=g}this.canvases.x.renderTextAt(!1,!0,v,h+2,l.template(""+g),"webix_axis_item_x"),p++}return this.canvases.x.renderTextAt(!0,!1,c,n.y+this.s.padding.bottom-3,this.s.xAxis.title,"webix_axis_title_x",n.x-i.x),l.lines.call(this,{})||this.zo(e,c,i.y-.5,u,i.y-.5,this.s.xAxis.color,.2),d}}},tp:function(e,t,i,n,r,o,a){var s=this.s.yAxis,l=t;return s&&"auto"!=this.s.origin&&this.s.origin>a&&(t+=(this.s.origin-a)*r,l=t,n-=this.s.origin-a,0>n&&(n*=-1,e.translate(t,i+o),e.rotate(Math.PI),t=.5,i=0),t+=.5),{value:n,x0:t,y0:i,start:l}},op:function(e,t,i,n,r,o,a,s,l,h,c,u){e.save();var d=this.tp(e,i,n,l,s,r,o);e.fillStyle=h,e.beginPath();var f=this.qp(e,d.x0,d.y0,r,a,s,d.value,this.s.border?1:0);c&&!u&&e.lineTo(t.x,d.y0+(this.s.border?1:0)),e.fill(),e.restore();var p=d.y0,m=d.y0!=n?n:f[1];return[d.y0!=n?d.start-f[0]:d.start,p,d.y0!=n?d.start:f[0],m]},np:function(e,t,i,n,r,o,a,s,l){e.save();var h=this.tp(e,t,i,s,a,n,r);e.beginPath(),this.gp(e,l),e.globalAlpha=.9,this.qp(e,h.x0,h.y0,n,o,a,h.value,e.lineWidth/2,1),e.stroke(),e.restore()},pp:function(e,t,i,n,r,o,a,s,l,h){e.save();var c=this.tp(e,t,i,s,a,n,r),u=this.Oo(e,c.x0,c.y0+n,c.x0+a*c.value,c.y0,h,l,"x");e.fillStyle=u.gradient,e.beginPath(),this.qp(e,c.x0,c.y0+u.offset,n-2*u.offset,o,a,c.value,u.offset),e.fill(),e.globalAlpha=1,e.restore()}}),webix.extend(webix.ui.chart,{$render_stackedBar:function(e,t,i,n,r,o){var a,s,l,h,c,u,d,f=this.s,p=n.y-i.y,m=!!f.yAxis,g=!!f.xAxis,v=this.No(t),b=0===f.origin;a=v.max,s=v.min;var w=Math.floor((n.x-i.x)/t.length);r||(l=this.uo(t,i,n,s,a,w)),m&&(a=parseFloat(f.yAxis.end),s=parseFloat(f.yAxis.start));var x=this.Ho(s,a);d=x[0],u=x[1];var y=d?p/d:10,_=parseInt(f.barWidth,10);_+4>w&&(_=w-4);var k=Math.floor((w-_)/2),C=!!f.gradient&&f.gradient;g||this.zo(e,i.x,n.y+.5,n.x,n.y+.5,"#000000",1);for(var S=0;S<t.length;S++){var $=Math.abs(parseFloat(f.value(t[S]||0)));this.Bo&&($=this.Do($)),h=i.x+k+S*w;var T=b&&0>$;if(r?c=T?t[S].$startYN:t[S].$startY:(c=l-1,t[S].$startY=c,b&&(T&&(c=l+1),t[S].$startYN=l+1)),$&&!isNaN($)&&(r||b||($-=s),$*=u,!(c<i.y+1))){var E=this.s.color.call(this,t[S]),M=Math.abs(c-(b?n.y+s*y:n.y))<3;e.globalAlpha=f.alpha.call(this,t[S]),e.fillStyle=e.strokeStyle=f.color.call(this,t[S]),e.beginPath();var I=c-y*$+(M?T?-1:1:0),A=this.up(e,h-(f.border?.5:0),c,_+(f.border?.5:0),I,0,i.y);if(e.fill(),e.stroke(),C){e.save();var D=this.Oo(e,h,c,h+_,A[1],C,E,"y");e.fillStyle=D.gradient,e.beginPath(),A=this.up(e,h+D.offset,c,_-2*D.offset,I,f.border?1:0,i.y),e.fill(),e.restore()}f.border&&(e.save(),"string"==typeof f.border?e.strokeStyle=f.border:this.gp(e,E),e.beginPath(),this.up(e,h-.5,parseInt(c,10)+.5,_+1,parseInt(I,10)+.5,0,i.y,M),e.stroke(),e.restore()),e.globalAlpha=1,this.canvases[r].renderTextAt(!1,!0,h+Math.floor(_/2),A[1]+(c-A[1])/2-7,this.s.label(t[S])),o.addRect(t[S].id,[h-i.x,A[1]-i.y,A[0]-i.x,t[S][T?"$startYN":"$startY"]-i.y],r),t[S][T?"$startYN":"$startY"]=A[1]}}},up:function(e,t,i,n,r,o,a,s){e.moveTo(t,i),a>r&&(r=a),e.lineTo(t,r);var l=t+n,h=r;e.lineTo(l,h);var c=t+n;return e.lineTo(c,i),s||e.lineTo(t,i),[c,h]}}),webix.extend(webix.ui.chart,{$render_stackedBarH:function(e,t,i,n,r,o){var a,s,l,h,c=n.x-i.x,u=!!this.s.yAxis,d=this.No(t);a=d.max,s=d.min;var f=Math.floor((n.y-i.y)/t.length);r||this.mp(e,t,i,n,s,a,f),u&&(a=parseFloat(this.s.xAxis.end),s=parseFloat(this.s.xAxis.start));var p=this.Ho(s,a);h=p[0],l=p[1];var m=h?c/h:10,g=0;u||(g=10,m=h?(c-g)/h:10);var v=parseInt(this.s.barWidth,10);v+4>f&&(v=f-4);var b=(f-v)/2,w=!1,x=this.s.gradient;x&&(w=!0),u||this.zo(e,i.x-.5,i.y,i.x-.5,n.y,"#000000",1);var y=0,_=0;for(k=0;k<this.go.length;k++)k==r&&(_=y),"stackedBarH"==this.go[k].type&&y++;for(var k=0;k<t.length;k++){_||(t[k].$startX=i.x);var C=Math.abs(parseFloat(this.s.value(t[k]||0)));C>a&&(C=a),C-=s,C*=l;var S=i.x,$=i.y+b+k*f;if(_?S=t[k].$startX:t[k].$startX=S,C&&!isNaN(C)){u||(C+=g/m);var T=this.s.color.call(this,t[k]);e.globalAlpha=this.s.alpha.call(this,t[k]),e.fillStyle=this.s.color.call(this,t[k]),e.beginPath();var E=this.qp(e,S,$,v,0,m,C,0);if(x&&!w&&e.lineTo(i.x+c,$+(this.s.border?1:0)),e.fill(),w){var M=this.Oo(e,S,$+v,S,$,w,T,"x");e.fillStyle=M.gradient,e.beginPath(),E=this.qp(e,S,$,v,0,m,C,0),e.fill()}this.s.border&&this.np(e,S,$,v,s,0,m,C,T),e.globalAlpha=1,this.canvases[r].renderTextAt("middle",!0,t[k].$startX+(E[0]-t[k].$startX)/2-1,$+(E[1]-$)/2,this.s.label(t[k])),o.addRect(t[k].id,[t[k].$startX-i.x,$-i.y,E[0]-i.x,E[1]-i.y],r),t[k].$startX=E[0]}}}}),webix.extend(webix.ui.chart,{$render_spline:function(e,t,i,n,r,o){var a,s,l,h,c,u,d,f,p,m,g,v,b;if(c=this.hp(e,t,i,n,r),a=this.s,this.kp=i,l=[],t.length){for(f=a.offset?i.x+.5*c.cellWidth:i.x,s=0;s<t.length;s++)((g=this.ip(t[s],i,n,c))||"0"==g)&&(d=s?c.cellWidth*s-.5+f:f,l.push({x:d,y:g,v:this.s.value(t[s]),index:s}));for(u=this.vp(l),s=0;s<l.length;s++){if(p=l[s].x,v=l[s].y,s<l.length-1){for(m=l[s+1].x,b=l[s+1].y,h=p;m>h;h++){var w=this.wp(h,p,s,u.a,u.b,u.c,u.d);w<i.y&&(w=i.y),w>n.y&&(w=n.y);var x=this.wp(h+1,p,s,u.a,u.b,u.c,u.d);x<i.y&&(x=i.y),x>n.y&&(x=n.y),this.zo(e,h,w,h+1,x,a.line.color(t[s]),a.line.width)}this.zo(e,m-1,this.wp(h,p,s,u.a,u.b,u.c,u.d),m,b,a.line.color(t[s]),a.line.width)}this.lp(e,p,v,t[l[s].index],a.label(t[l[s].index]),r,o)}}},vp:function(e){var t,i,n,r,o,a,s,l,h=[],c=[],u=e.length;for(o=0;u-1>o;o++)h[o]=e[o+1].x-e[o].x,c[o]=(e[o+1].y-e[o].y)/h[o];for(s=[],l=[],s[0]=0,s[1]=2*(h[0]+h[1]),l[0]=0,l[1]=6*(c[1]-c[0]),o=2;u-1>o;o++)s[o]=2*(h[o-1]+h[o])-h[o-1]*h[o-1]/s[o-1],l[o]=6*(c[o]-c[o-1])-h[o-1]*l[o-1]/s[o-1];for(a=[],a[u-1]=a[0]=0,o=u-2;o>=1;o--)a[o]=(l[o]-h[o]*a[o+1])/s[o];for(t=[],i=[],n=[],r=[],o=0;u-1>o;o++)t[o]=e[o].y,i[o]=-h[o]*a[o+1]/6-h[o]*a[o]/3+(e[o+1].y-e[o].y)/h[o],n[o]=a[o]/2,r[o]=(a[o+1]-a[o])/(6*h[o]);for(o=0;o<e.length-1;o++)0===e[o].v&&0===e[o+1].v&&(t[o]=e[o].y,r[o]=n[o]=i[o]=0);return{a:t,b:i,c:n,d:r}},wp:function(e,t,i,n,r,o,a){return n[i]+(e-t)*(r[i]+(e-t)*(o[i]+(e-t)*a[i]))}}),webix.extend(webix.ui.chart,{$render_area:function(e,t,i,n,r,o){var a,s,l,h,c,u,d,f,p,m,g,v,b,w,x;if(u=this.hp(e,t,i,n,r),s=this.s,h=s.eventRadius||Math.floor(u.cellWidth/2),t.length){for(d=[],m=s.offset?i.x+.5*u.cellWidth:i.x,l=0;l<t.length;l++)if(c=t[l],p=this.ip(c,i,n,u),b=m+u.cellWidth*l,p){if(w="object"==typeof p?p.y0:p,l&&this.s.fixOverflow){if(f=this.ip(t[l-1],i,n,u),f.out&&f.out==p.out)continue;g=u.cellWidth*(l-1)-.5+m,v="object"==typeof f?f.y0:f,f.out&&(x="min"==f.out?n.y:i.y,d.push([this.jp(g,b,v,w,x),x])),p.out&&(x="min"==p.out?n.y:i.y,d.push([this.jp(g,b,v,w,x),x]),l==t.length-1&&x==i.y&&d.push([b,i.y]))}p.out||(d.push([b,w]),o.addRect(c.id,[b-h-i.x,w-h-i.y,b+h-i.x,w+h-i.y],r)),s.yAxis||(a=s.offset||l!=t.length-1?"center":"left",this.canvases[r].renderTextAt(!1,a,b,w-s.labelOffset,s.label(c)))}d.length&&(d.push([b,n.y]),d.push([d[0][0],n.y])),e.globalAlpha=this.s.alpha.call(this,t[0]),e.fillStyle=this.s.color.call(this,t[0]),e.beginPath(),this.Mo(e,d),e.fill(),e.lineWidth=1,e.globalAlpha=1,s.border&&(e.lineWidth=s.borderWidth||1,s.borderColor?e.strokeStyle=s.borderColor.call(this,t[0]):this.gp(e,e.fillStyle),e.beginPath(),this.Mo(e,d),e.stroke())}},$render_stackedArea:function(e,t,i,n,r,o){var a,s,l,h,c,u,d,f,p,m,g,v,b;if(p=this.hp(e,t,i,n,r),h=this.s,d=h.eventRadius||Math.floor(p.cellWidth/2),t.length){m=[],b=[],g=h.offset?i.x+.5*p.cellWidth:i.x;var w=function(e,i){return r?t[e].$startY?i-n.y+t[e].$startY:0:i};for(c=0;c<t.length;c++)f=t[c],c?g+=p.cellWidth:(v=w(c,n.y),m.push([g,v])),v=w(c,this.ip(f,i,n,p)),b.push(isNaN(v)&&!c?t[c].$startY||n.y:v),v&&(m.push([g,v]),o.addRect(f.id,[g-d-i.x,v-d-i.y,g+d-i.x,v+d-i.y],r),h.yAxis||(h.offset,l="center",this.canvases[r].renderTextAt(!1,l,g,v-h.labelOffset,h.label(f))));if(m.push([g,w(c-1,n.y)]),r)for(c=t.length-2;c>0;c--)g-=p.cellWidth,(v=t[c].$startY)&&m.push([g,v]);for(m.push([m[0][0],m[0][1]]),e.globalAlpha=this.s.alpha.call(this,t[0]),e.fillStyle=this.s.color.call(this,t[0]),e.beginPath(),this.Mo(e,m),e.fill(),c=0;c<t.length;c++){if(!(v=b[c]))for(c==t.length-1&&(v=t[c].$startY),u=c+1;u<t.length;u++)if(b[u]){a={x:i.x,y:b[0]},s={x:i.x+p.cellWidth*u,y:b[u]},v=function(e,t,i){var n=(i.y-t.y)/(i.x-t.x);return n*e+t.y-n*t.x}(i.x+p.cellWidth*c,a,s);break}t[c].$startY=v}}}}),webix.extend(webix.ui.chart,{$render_radar:function(e,t,i,n,r,o){this.xp(e,t,i,n,r,o)},xp:function(e,t,i,n,r,o){if(t.length){for(var a=this.To(i,n),s=this.s.radius?this.s.radius:a.radius,l=this.s.x?this.s.x:a.x,h=this.s.y?this.s.y:a.y,c=[],u=0;u<t.length;u++)c.push(1);var d=this.Wo(c,t.length);this.kp=i,r||this.yp(d,l,h,s,t),this.zp(e,d,l,h,s,t,r,o)}},zp:function(e,t,i,n,r,o,a,s){var l,h,c,u,d,f,p,m,g,v,b,w,x,y,_,k,C,S,$;for(c=this.s,d=c.yAxis.start,f=c.yAxis.end,$=this.Ho(d,f),w=$[0],S=w?r/w:r/2,C=$[1],x=-Math.PI/2,l=h=x,g=[],m=0,u=0;u<o.length;u++)k?_=k:(y=c.value(o[u]),this.Bo&&(y=this.Do(y)),_=(parseFloat(y||0)-d)*C),v=Math.floor(S*_),y=c.value(u!=o.length-1?o[u+1]:o[0]),this.Bo&&(y=this.Do(y)),k=(parseFloat(y||0)-d)*C,b=Math.floor(S*k),l=h,h=u!=o.length-1?x+t[u]-1e-4:x,p=m||this.Qo(l,i,n,v),m=this.Qo(h,i,n,b),g.push(p);c.fill&&this.Ap(e,g,o),!c.disableLines&&o.length>2&&this.Bp(e,g,o),(!c.disableItems||o.length<3)&&this.Cp(e,g,o,a,s),g=null},Cp:function(e,t,i,n,r){for(var o=0;o<t.length;o++)this.lp(e,t[o].x,t[o].y,i[o],this.s.label.call(this,i),n,r)},Ap:function(e,t,i){var n,r;e.globalAlpha=this.s.alpha.call(this,{}),e.beginPath();for(var o=0;o<t.length;o++)e.fillStyle=this.s.fill.call(this,i[o]),n=t[o],r=t[o+1]||t[0],o||e.moveTo(n.x,n.y),e.lineTo(r.x,r.y);e.fill(),e.globalAlpha=1},Bp:function(e,t,i){for(var n,r,o=0;o<t.length;o++)n=t[o],r=t[o+1]||t[0],this.zo(e,n.x,n.y,r.x,r.y,this.s.line.color.call(this,i[o]),this.s.line.width)},yp:function(e,t,i,n,r){var o=this.s.yAxis,a=this.s.xAxis,s=o.start,l=o.end,h=o.step,c={},u=this.to;if(void 0===u.step||void 0===u.start||void 0===u.end){var d=this.Go();c=this.Ao(d.min,d.max),s=c.start,l=c.end,h=c.step,o.end=l,o.start=s}var f,p,m,g,v,b=[],w=0,x=n*h/(l-s);1>h&&(g=Math.min(this.Do(h),0>=s?0:this.Do(s)),v=Math.pow(10,-g));var y=[];this.canvases.scale||(this.canvases.scale=this.lo("radar_scale"));var _=this.canvases.scale.getCanvas();for(f=l;f>=s;f-=h){var k=this.Bo?Math.pow(10,f):f;c.fixNum&&(k=parseFloat(f).toFixed(c.fixNum)),b.push(Math.floor(w*x)+.5),v&&!this.Bo&&(k=Math.round(k*v)/v,f=k);var C=i-n+b[b.length-1];if(this.canvases.scale.renderTextAt("middle","left",t,C,o.template(""+k),"webix_axis_item_y webix_radar"),e.length<2)return void this.Dp(_,"arc",t,i,n-b[b.length-1],-Math.PI/2,3*Math.PI/2,f);var S,$=-Math.PI/2,T=$;for(p=0;p<e.length;p++)w||y.push(T),S=$+e[p]-1e-4,this.Dp(_,e.length>2?u.lineShape||"line":"arc",t,i,n-b[b.length-1],T,S,f,p,r[f]),T=S;w++}for(f=0;f<y.length;f++)m=this.Qo(y[f],t,i,n),a.lines.call(this,r[f],f)&&this.zo(_,t,i,m.x,m.y,a?a.lineColor.call(this,r[f]):"#cfcfcf",1),this.Ep(_,t,i,n,y[f],a?a.template.call(this,r[f]):"&nbsp;")},Dp:function(e,t,i,n,r,o,a,s,l){var h,c;if(0>r)return!1;h=this.Qo(o,i,n,r),c=this.Qo(a,i,n,r);var u=this.s.yAxis;u.bg&&(e.beginPath(),e.moveTo(i,n),"arc"==t?e.arc(i,n,r,o,a,!1):(e.lineTo(h.x,h.y),e.lineTo(c.x,c.y)),e.fillStyle=u.bg(s,l),e.moveTo(i,n),e.fill(),e.closePath()),u.lines.call(this,s)&&(e.lineWidth=1,e.beginPath(),"arc"==t?e.arc(i,n,r,o,a,!1):(e.moveTo(h.x,h.y),e.lineTo(c.x,c.y)),e.strokeStyle=u.lineColor.call(this,s),e.stroke())},Ep:function(e,t,i,n,r,o){if(!o)return!1;var a=this.canvases.scale.renderText(0,0,o,"webix_axis_radar_title",1),s=a.scrollWidth,l=a.offsetHeight,h=.001,c=this.Qo(r,t,i,n+5),u=0,d=0;(0>r||r>Math.PI)&&(d=-l),r>Math.PI/2&&(u=-s),Math.abs(r+Math.PI/2)<h||Math.abs(r-Math.PI/2)<h?u=-s/2:(Math.abs(r)<h||Math.abs(r-Math.PI)<h)&&(d=-l/2),a.style.top=c.y+d+"px",a.style.left=c.x+u+"px",a.style.width=s+"px",a.style.whiteSpace="nowrap"}}),webix.extend(webix.ui.chart,{$render_scatter:function(e,t,i,n,r,o){if(!this.s.xValue)return!1;var a=this.Go(),s=this.Go("h","xValue");r||(this.canvases.x||(this.canvases.x=this.lo("axis_x")),this.canvases.y||(this.canvases.y=this.lo("axis_y")),this.vo(this.canvases.y.getCanvas(),t,i,n,a.min,a.max),this.rp(this.canvases.x.getCanvas(),t,i,n,s.min,s.max)),a={min:this.s.yAxis.start,max:this.s.yAxis.end},s={min:this.s.xAxis.start,max:this.s.xAxis.end};var l=this.Fp(e,t,i,n,s,a);this.kp=i;for(var h=0;h<t.length;h++)this.Gp(e,o,i,n,l,s,a,t[h],r)},Fp:function(e,t,i,n,r,o){var a={};return a.totalHeight=n.y-i.y,a.totalWidth=n.x-i.x,this.Hp(a,r.min,r.max,a.totalWidth,"X"),this.Hp(a,o.min,o.max,a.totalHeight,"Y"),a},Gp:function(e,t,i,n,r,o,a,s,l){var h=this.Ip(r,n,i,o,s,"X"),c=this.Ip(r,i,n,a,s,"Y");this.lp(e,h,c,s,this.s.label.call(this,s),l,t)},Ip:function(e,t,i,n,r,o){var a=this.s["X"==o?"xValue":"value"].call(this,r),s=e["valueFactor"+o],l=(parseFloat(a||0)-n.min)*s,h=e["unit"+o],c=i[o.toLowerCase()]-("X"==o?-1:1)*Math.floor(h*l);return 0>l&&(c=i[o.toLowerCase()]),a>n.max&&(c=t[o.toLowerCase()]),a<n.min&&(c=i[o.toLowerCase()]),c},Hp:function(e,t,i,n,r){var o=this.Ho(t,i);r=r||"",e["relValue"+r]=o[0],e["valueFactor"+r]=o[1],e["unit"+r]=e["relValue"+r]?n/e["relValue"+r]:10}}),webix.extend(webix.ui.chart,{presets:{simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",gradient:!1,barWidth:45,radius:0,alpha:1,border:!0},stick:{barWidth:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",barWidth:70,gradient:"falling",radius:0,alpha:.5,border:!0}}}),webix.extend(webix.ui.chart,{$render_splineArea:function(e,t,i,n,r,o){var a,s,l,h,c,u,d,f,p,m,g,v,b,w=this.s,x=[];if(u=this.hp(e,t,i,n,r),c=w.eventRadius||Math.floor(u.cellWidth/2),l=[],t.length){for(p=i.x,s=0;s<t.length;s++)((v=this.ip(t[s],i,n,u))||"0"==v)&&(f=s?u.cellWidth*s-.5+p:p,l.push({x:f,y:v,index:s}),o.addRect(t[s].id,[f-c-i.x,v-c-i.y,f+c-i.x,v+c-i.y],r));for(d=this.vp(l),s=0;s<l.length;s++)if(m=l[s].x,l[s].y,s<l.length-1){for(g=l[s+1].x,b=l[s+1].y,h=m;g>h;h++){var y=this.wp(h,m,s,d.a,d.b,d.c,d.d);y<i.y&&(y=i.y),y>n.y&&(y=n.y);var _=this.wp(h+1,m,s,d.a,d.b,d.c,d.d);_<i.y&&(_=i.y),_>n.y&&(_=n.y),x.push([h,y]),x.push([h+1,_])}x.push([g,b])}a=this.s.color.call(this,t[0]),x.length&&(x.push([g,n.y]),x.push([x[0][0],n.y])),e.globalAlpha=this.s.alpha.call(this,t[0]),e.fillStyle=a,e.beginPath(),this.Mo(e,x),e.fill(),e.lineWidth=1,e.globalAlpha=1,w.border&&(e.lineWidth=w.borderWidth||1,w.borderColor?e.strokeStyle=w.borderColor.call(this,t[0]):this.gp(e,a),e.beginPath(),x.splice(x.length-3),this.Mo(e,x),e.stroke())}}}),function(){function e(e){if(!e.BE){var i=e.s;i.cellWidth||(i.cellWidth=d),i.animateDuration||(i.animateDuration=u),i.offset=!1,e.BE=e.attachEvent("onBeforeRender",function(n,r){var o=e.no(e.bc,e.dc);l(e),a(n,o.start,o.end,i.cellWidth),"add"==r&&t(e)}),e.CE=e.attachEvent("onBeforeXAxis",function(t,i,n,r,o,a){return c(e,t,i,n,r,o,a),!1})}}function t(e){var t=e.s.cellWidth;e.DE!=t&&(e.DE=t,e.render()),e.DE=0,e.EE=null,window.requestAnimationFrame&&!document.hidden&&window.requestAnimationFrame(function(t){i(e,t)}),e.FE||(e.FE=e.attachEvent("onAfterRender",function(t){n(e,t)}))}function i(e,t){var n,r=e.s.animateDuration,o=e.s.cellWidth;o&&e.count()>1&&(e.EE||(e.EE=t),n=t-e.EE,e.DE=Math.min(Math.max(n/r*o,1),o),e.render(),r>n&&window.requestAnimationFrame(function(t){i(e,t)}))}function n(e,t){function i(e,i,a,s){var h=e.getCanvas(),u=e.Zn,d=e.Wn,f=e.AE;if(c&&(t.length<n||(t.length-1)*l>a-i)?(u.style.left=-c+"px",t.length>1&&(o(d,c,f),h.clearRect(0,0,i+c,u.offsetHeight),h.clearRect(a+c,0,u.offsetWidth,u.offsetHeight))):(u.style.left="0px",s||c==l||h.clearRect(i+(t.length-1)*l-l+c,0,u.offsetWidth,u.offsetHeight)),d.length>1&&c&&c!=l){var p=d.length-1;r(f,d[p])&&(p-=1),d[p].style.display="none"}}var n=e.count(),a=e.no(e.bc,e.dc),l=e.s.cellWidth,c=e.DE||0,u=t.length<n||(t.length-1)*l>a.end.x-a.start.x;s(e,function(e,t){i(t,a.start.x,a.end.x,"x"==e)}),h(e,a,u?c:0)}function r(e,t){return"axis_x"===e&&-1!==t.className.indexOf("webix_axis_title_x")}function o(e,t,i){if(e.length){webix.html.remove(e[0]);for(var n=1;n<e.length;n++)r(i,e[n])||(e[n].style.left=e[n].offsetLeft-t+"px")}}function a(e,t,i,n){if(n&&e.length){var r=Math.ceil((i.x-t.x)/n);e.length>r+1&&e.splice(0,e.length-r-1)}}function s(e,t){if(e.canvases){for(var i=0;i<e.go.length;i++)e.canvases[i]&&t(i,e.canvases[i]);e.canvases.x&&t("x",e.canvases.x)}}function l(e){s(e,function(t,i){i._n(e.bc+2*e.s.cellWidth,e.dc)})}function h(e,t,i){e.w.t.style.left=t.start.x-i+"px",e.w.t.style.width=t.end.x-t.start.x+i+"px"}function c(e,t,i,n,r,o,a){var s,l,h,c,u=e.s,d=n.x-.5,f=parseInt(a||r.y,10)+.5,p=r.x;if(!u.dynamic)return!1;for(h=(i.length-1)*o>p-d||i.length<e.count(),l=0;l<i.length;l++)c=d+l*o,s=h?l>1:!!l,c=Math.ceil(c)-.5,e.xo(c,f,i[l],s),l&&u.xAxis.lines.call(e,i[l])&&e.yo(t,c,r.y,n.y,i[l]);e.canvases.x.renderTextAt(!0,!1,d,r.y+u.padding.bottom-3,u.xAxis.title,"webix_axis_title_x",r.x-n.x),e.zo(t,d,f,p+(h?e.DE:0),f,u.xAxis.color,1)}var u=400,d=30;webix.extend(webix.ui.chart,{dynamic_setter:function(t){return t&&e(this),t}})}(),webix.protoUI({name:"calendar",defaults:{date:new Date,select:!1,navigation:!0,monthSelect:!0,weekHeader:!0,weekNumber:!1,skipEmptyWeeks:!1,calendarHeader:"%F %Y",calendarWeekHeader:"W#",events:webix.Date.isHoliday,minuteStep:5,icons:!1,timepickerHeight:30,headerHeight:70,dayTemplate:function(e){return e.getDate()},width:260,height:250},dayTemplate_setter:webix.template,calendarHeader_setter:webix.Date.dateToStr,calendarWeekHeader_setter:webix.Date.dateToStr,calendarTime_setter:function(e){return this._w=e,webix.Date.dateToStr(e)},date_setter:function(e){return this.Jp(e)},maxDate_setter:function(e){return this.Jp(e)},minDate_setter:function(e){return this.Jp(e)},minTime_setter:function(e){return"string"==typeof e&&(e=webix.i18n.parseTimeFormatDate(e),e=[e.getHours(),e.getMinutes()]),e},maxTime_setter:function(e){return"string"==typeof e&&(e=webix.i18n.parseTimeFormatDate(e),e=[e.getHours(),e.getMinutes()]),e},fF:function(){var e="focus"+(webix.env.isIE?"in":"");webix.env.touch||webix.UE(this.$view,e,webix.bind(function(e){var t=e.target.className,i=-1!==t.indexOf("webix_cal_day")?"webix_cal_day":-1!==t.indexOf("webix_cal_block")?"webix_cal_block":"";if(new Date-webix.UIManager.XE>300&&new Date-webix.UIManager.lH>100&&i){var n=e.relatedTarget;if(n&&!webix.isUndefined(n.className)){var r="webix_cal_day"==i?this.gF(e.target):this.hF(e.target);this.ID(r)}}},this),{capture:!webix.env.isIE})},$init:function(){this.x.className+=" webix_calendar",this.x.setAttribute("role","region"),this.x.setAttribute("aria-label",webix.i18n.aria.calendar),this.Kp={},this.UG={},this.Np=0,this.fF(),this.attachEvent("onKeyPress",this.DD),this.attachEvent("onAfterZoom",function(e){e>=0&&this.$view.querySelector(".webix_cal_month_name").blur()})},type_setter:function(e){return"time"==e?(this.jq=!0,this.Np=-1):"year"==e&&(this.NC=!0),e},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&this.render()},$getSize:function(e,t){if(this.s.cellHeight){var i=this.Op(this.s.date);this.s.height=this.s.cellHeight*i.Sp+(webix.skin.$active.calendarHeight||70)}return webix.ui.view.prototype.$getSize.call(this,e,t)},moveSelection:function(e,t,i){if(!this.config.master){var n=this.getSelectedDate();this.config.multiselect&&(n=n[0]);var r=webix.Date.copy(n||this.getVisibleDate());this.ID(r,e,i)}},ID:function(e,t,i){var n=this.aq[this.Np].LD(e,t,this);if(!1!==i){var r=this.x.querySelector("."+n+"[tabindex='0']");r&&r.focus()}},Op:function(e,t){if(!this.Pp||t){var i=e.getMonth(),n=e.getFullYear(),r=new Date(n,i+1,1),o=webix.Date.weekStart(new Date(n,i,1)),a=Math.round((r.valueOf()-o.valueOf())/864e5),s=this.s.skipEmptyWeeks?Math.ceil(a/7):6;this.Pp={Qp:i,Rp:o,zc:r,Sp:s}}return this.Pp},$skin:function(){webix.skin.$active.calendar&&(webix.skin.$active.calendar.width&&(this.defaults.width=webix.skin.$active.calendar.width),webix.skin.$active.calendar.height&&(this.defaults.height=webix.skin.$active.calendar.height),webix.skin.$active.calendar.headerHeight&&(this.defaults.headerHeight=webix.skin.$active.calendar.headerHeight),webix.skin.$active.calendar.timepickerHeight&&(this.defaults.timepickerHeight=webix.skin.$active.calendar.timepickerHeight))},Tp:function(e){for(var t=this.Op(e),i=this.s,n=[],r=[],o=this.bc-36,a=this.dc-this.s.headerHeight-10-(this.s.timepicker||this.ax?this.s.timepickerHeight:0),s=i.weekNumber?8:7,l=0;s>l;l++)r[l]=Math.ceil(o/(s-l)),o-=r[l];for(var h=t.Sp,c=0;h>c;c++)n[c]=Math.ceil(a/(h-c)),a-=n[c];return[r,n]},icons_setter:function(e){this.ax=e?"object"==typeof e?e:this.Sx:null},ax:[],Sx:[{template:function(){return"<span role='button' tabindex='0' class='webix_cal_icon_today webix_cal_icon'>"+webix.i18n.calendar.today+"</span>"},on_click:{webix_cal_icon_today:function(){var e=new Date;this.s.timepicker||(e=webix.Date.datePart(e)),this.setValue(e),this.callEvent("onTodaySet",[this.getSelectedDate()])}}},{template:function(){return"<span role='button' tabindex='0' class='webix_cal_icon_clear webix_cal_icon'>"+webix.i18n.calendar.clear+"</span>"},on_click:{webix_cal_icon_clear:function(){this.setValue(""),this.callEvent("onDateClear",[this.getSelectedDate()])}}}],refresh:function(){this.render()},render:function(){this.Np=0,this.Up=!1;var e=this.s;if(this.isVisible(e.id)){this.Vp=webix.Date.datePart(new Date),this.callEvent("onBeforeRender",[]);var t=this.s.date,i=this.Op(t,!0),n=this.Tp(t),r=n[0],o=n[1],a="<div class='webix_cal_month'><span role='button' tabindex='0' aria-live='assertive' aria-atomic='true' class='webix_cal_month_name"+(this.s.monthSelect?"":" webix_readonly")+"'>"+e.calendarHeader(t)+"</span>";if(e.navigation&&(a+="<div role='button' tabindex='0' aria-label='"+webix.i18n.aria.navMonth[0]+"' class='webix_cal_prev_button'></div><div role='button' tabindex='0' aria-label='"+webix.i18n.aria.navMonth[1]+"' class='webix_cal_next_button'></div>"),a+="</div>",e.weekHeader&&(a+="<div class='webix_cal_header' aria-hidden='true'>"+this.Wp(r)+"</div>"),a+="<div class='webix_cal_body'>"+this.Xp(r,o,i)+"</div>",(this.s.timepicker||this.ax)&&(a+="<div class='webix_cal_footer'>",this.s.timepicker&&(a+=this.Yp(t)),this.ax&&(a+=this.bx()),a+="</div>"),this.w.innerHTML=a,"time"==this.s.type){var s=this.s.date;s&&("string"==typeof s?t=webix.i18n.parseTimeFormatDate(s):webix.isArray(s)&&(t.setHours(s[0]),t.setMinutes(s[1]))),this.yt(-1,t)}else"month"==this.s.type?this.yt(1,t):"year"==this.s.type&&this.yt(2,t);this.callEvent("onAfterRender",[])}},bx:function(e){for(var t="<div class='webix_cal_icons'>",i=this.ax,n=0;n<i.length;n++){if(i[n].template){t+=("function"==typeof i[n].template?i[n].template:webix.template(i[n].template)).call(this,e)}i[n].on_click&&webix.extend(this.on_click,i[n].on_click)}return t+="</div>"},Yp:function(e){var t=this.s.calendarTime||webix.i18n.timeFormatStr,i="";if(this.s.master){var n=webix.copy(webix.$$(this.s.master).s.value);webix.Date.equal(n.end,e)&&(n.start=n.end);for(var r in n)i+="<div role='button' tabindex='0' class='webix_range_time_"+r+" webix_cal_time'><span class='webix_icon fa-clock-o'></span> "+t(n[r])+"</div>"}else i="<div role='button' tabindex='0' class='webix_cal_time"+(this.ax?" webix_cal_time_icons":"")+"'><span class='webix_icon fa-clock-o'></span> "+t(e)+"</div>";return i},Wp:function(e){var t=this.s,i="",n=0;t.weekNumber&&(n=1,i+="<div class='webix_cal_week_header' style='width: "+e[0]+"px;' >"+t.calendarWeekHeader()+"</div>");for(var r=webix.Date.startOnMonday?1:0,o=0;7>o;o++){var a=(r+o)%7,s=webix.i18n.calendar.dayShort[a];i+="<div day='"+a+"' style='width: "+e[o+n]+"px;' >"+s+"</div>"}return i},blockDates_setter:function(e){return webix.toFunctor(e,this.$scope)},Zp:function(e,t){var i="";return webix.Date.equal(e,this.Vp)&&(i+=" webix_cal_today"),this.sz(e)||(i+=" webix_cal_day_disabled"),this.VG(e)&&(i+=" webix_cal_select"),e.getMonth()!=t.Qp&&(i+=" webix_cal_outside"),this.s.events&&(i+=" "+(this.s.events(e)||"")),i+=" webix_cal_day"},Xp:function(e,t,i){for(var n=this.s,r="",o=webix.Date.datePart(webix.Date.copy(i.Rp)),a=n.weekNumber?1:0,s=webix.Date.getISOWeek(webix.Date.add(o,2,"day",!0)),l=(this.s.minDate||new Date(1,1,1),this.s.maxDate||new Date(9999,1,1),0);l<t.length;l++){r+="<div class='webix_cal_row' style='height:"+t[l]+"px;line-height:"+t[l]+"px'>",a&&(!o.getMonth()&&o.getDate()<7&&(s=webix.Date.getISOWeek(webix.Date.add(o,2,"day",!0))),r+="<div class='webix_cal_week_num' aria-hidden='true' style='width:"+e[0]+"px'>"+s+"</div>");for(var h=a;h<e.length;h++){var c=this.Zp(o,i),u=this.s.dayTemplate.call(this,o),d=this.VG(o),f="";"object"==typeof u?(f=u.aria||f,u=u.text):f=webix.Date.dateToStr(webix.i18n.aria.dateFormat)(o),r+="<div day='"+h+"' role='gridcell' "+(o.getMonth()!=i.Qp?"aria-hidden='true'":"")+" aria-label='"+f+"' tabindex='"+(d?"0":"-1")+"' aria-selected='"+(d?"true":"false")+"' class='"+c+"' style='width:"+e[h]+"px'><span aria-hidden='true' class='webix_cal_day_inner'>"+u+"</span></div>",o=webix.Date.add(o,1,"day"),o.getHours()&&(o=webix.Date.datePart(o))}r+="</div>",s++}return r},$p:function(e,t,i){var n=this.s.date;t||(t=this.aq[this.Np]._p),this.Np||(n=webix.Date.copy(n),n.setDate(1));var r=webix.Date.add(n,e*t,"month",!0);this.bq(n,r)},bq:function(e,t){this.callEvent("onBeforeMonthChange",[e,t])&&(this.Np?this.cq(t):this.showCalendar(t),this.callEvent("onAfterMonthChange",[t,e]))},aq:{"-2":{lz:function(e){var t=this.s,i=t.date,n=!1,r=t.minTime?t.minTime[0]:0,o=t.maxTime?t.maxTime[0]+(t.maxTime[1]?1:0):24,a=t.minTime&&i.getHours()==r?t.minTime[1]:0,s=t.maxTime&&t.maxTime[1]&&i.getHours()==o-1?t.maxTime[1]:60;if(this.s.blockTime){var l=webix.Date.copy(i);l.setMinutes(e),n=this.s.blockTime(l)}return a>e||e>=s||n},dq:function(e,t){e.setMinutes(t)},TD:function(e,t,i){if(!this.lz.call(i,e.getMinutes()))return e;var n=i.s.minuteStep,r=webix.Date.add(e,"right"==t?n:-n,"minute",!0);return e.getHours()===r.getHours()?this.TD(r,t,i):void 0}},"-1":{lz:function(e){var t=this.s,i=t.date,n=t.minTime?t.minTime[0]:0,r=t.maxTime?t.maxTime[0]+(t.maxTime[1]?1:0):24;if(n>e||e>=r)return!0;if(t.blockTime){var o=webix.Date.copy(i);o.setHours(e);for(var a=t.minTime&&e==n?t.minTime[1]:0,s=t.maxTime&&t.maxTime[1]&&e==r-1?t.maxTime[1]:60,l=a;s>l;l+=t.minuteStep)if(o.setMinutes(l),!t.blockTime(o))return!1;return!0}},dq:function(e,t){e.setHours(t)},LD:function(e,t,i){var n,r,o=i.s.minuteStep;return"bottom"===t||"top"===t?(e.setHours("bottom"===t?23:0),e.setMinutes("bottom"===t?55:0),e.setSeconds(0),e.setMilliseconds(0),n=e):"left"===t||"right"===t?(r="right"===t?o:-o,"left"===t&&e.getMinutes()<o&&(r=60-o),"right"===t&&e.getMinutes()>=60-o&&(r=o-60),r-=e.getMinutes()%o,n=i.aq[-2].TD(webix.Date.add(e,r,"minute"),t,i)):"up"===t||"down"===t?(r="down"===t?1:-1,"down"===t&&23===e.getHours()&&(r=-23),"up"===t&&0===e.getHours()&&(r=23),n=this.TD(webix.Date.add(e,r,"hour"),t,i)):!1===t&&(n=this.TD(e,t,i)),i.selectDate(n,!1),n&&(i.cq(n),i.selectDate(n,!1)),"webix_cal_block"+("left"===t||"right"===t?"_min":"")},TD:function(e,t,i){if(!this.lz.call(i,e.getHours()))return e;var n=webix.Date.add(e,"down"==t?1:-1,"hour",!0);return e.getDate()===n.getDate()?this.TD(n,t,i):void 0}},0:{_p:1,LD:function(e,t,i){var n=e;return"pgup"===t||"pgdown"===t?n=webix.Date.add(e,"pgdown"===t?1:-1,"month"):"bottom"===t?n=new Date(e.getFullYear(),e.getMonth()+1,0):"top"===t?n=new Date(e.setDate(1)):"left"===t||"right"===t?n=webix.Date.add(e,"right"===t?1:-1,"day"):("up"===t||"down"===t)&&(n=webix.Date.add(e,"down"===t?1:-1,"week")),i.sz(n)||(n=i.TD(e,t)),n&&i.selectDate(n,!0),"webix_cal_day"}},1:{lz:function(e,t){var i,n,r=!1,o=t.s.minDate||null,a=t.s.maxDate||null,s=t.s.date.getFullYear();return o&&a&&(i=o.getFullYear(),n=a.getFullYear(),(i>s||s==i&&o.getMonth()>e||s>n||s==n&&a.getMonth()<e)&&(r=!0)),r},Jv:function(e,t){return e<t.s.minDate?e=webix.Date.copy(t.s.minDate):e>t.s.maxDate&&(e=webix.Date.copy(t.s.maxDate)),e},eq:function(e){return e.getFullYear()},fq:function(e){return webix.i18n.calendar.monthShort[e]},dq:function(e,t){t!=e.getMonth()&&e.setDate(1),e.setMonth(t)},_p:12,LD:function(e,t,i){var n=e;return"pgup"===t||"pgdown"===t?n=webix.Date.add(e,"pgdown"===t?1:-1,"year"):"bottom"===t?n=new Date(e.setMonth(11)):"top"===t?n=new Date(e.setMonth(0)):"left"===t||"right"===t?n=webix.Date.add(e,"right"===t?1:-1,"month"):("up"===t||"down"===t)&&(n=webix.Date.add(e,"down"===t?4:-4,"month")),i.sz(n)||(n=i.TD(e,t)),n&&(i.cq(n),i.selectDate(n,!1)),"webix_cal_block"}},2:{lz:function(e,t){e+=t.gq;var i=!1,n=t.s.minDate,r=t.s.maxDate;return n&&r&&(n.getFullYear()>e||r.getFullYear()<e)&&(i=!0),i},Jv:function(e,t){return e<t.s.minDate?e=webix.Date.copy(t.s.minDate):e>t.s.maxDate&&(e=webix.Date.copy(t.s.maxDate)),e},eq:function(e,t){var i=e.getFullYear();return t.gq=i=i-i%10-1,i+" - "+(i+10+1)},fq:function(e,t){return t.gq+e},dq:function(e,t,i){e.setFullYear(i.gq+t)},_p:120,LD:function(e,t,i){var n=e;return"pgup"===t||"pgdown"===t?n=webix.Date.add(e,"pgdown"===t?10:-10,"year"):"bottom"===t?n=new Date(e.setYear(i.gq+10)):"top"===t?n=new Date(e.setYear(i.gq)):"left"===t||"right"===t?n=webix.Date.add(e,"right"===t?1:-1,"year"):("up"===t||"down"===t)&&(n=webix.Date.add(e,"down"===t?4:-4,"year")),i.sz(n)||(n=i.TD(e,t)),n&&(i.cq(n),i.selectDate(n,!1)),"webix_cal_block"}}},mz:function(){var e;if(this.aq[-1].lz.call(this,this.s.date.getHours()))for(e=0;24>e;e++)if(!this.aq[-1].lz.call(this,e)){this.s.date.setHours(e);break}if(this.aq[-2].lz.call(this,this.s.date.getMinutes()))for(e=0;60>e;e+=this.s.minuteStep)if(!this.aq[-2].lz.call(this,e)){this.s.date.setMinutes(e);break}},cq:function(e){var t,i,n,r,o,a,s,l,h,c,u,d="";if(t=this.s,o=t.weekHeader?2:1,c=this.aq[this.Np],a=this.w.childNodes,e&&(t.date=e),l=t.type,this.Up||(this.hq=this.w.offsetHeight-t.headerHeight,"year"!=l&&"month"!=l?this.hq-=t.timepickerHeight:this.ax&&(this.hq-=10),this.iq=a[o].offsetWidth,this.Up=1),this.jq){n=this.hq/6;var f=6,p=this._w||webix.i18n.timeFormat,m=p.match(/%([a,A])/);for(m&&f++,h=parseInt((this.iq-3)/f,10),d+="<div class='webix_time_header'>"+this.kq(h,m)+"</div>",d+="<div  class='webix_cal_body' style='height:"+this.hq+"px'>",this.mz(),d+="<div class='webix_hours'>",s=t.date.getHours(),u=webix.Date.copy(t.date),r=0;24>r;r++){if(i="",m&&r%4==0){var g=r?12==r?webix.i18n.pm[0]:"":webix.i18n.am[0];d+="<div class='webix_cal_block_empty"+i+"' style='"+this.lq(h,n)+"clear:both;'>"+g+"</div>"}this.aq[-1].lz.call(this,r)?i+=" webix_cal_day_disabled":s==r&&(i+=" webix_selected"),u.setHours(r),d+="<div aria-label='"+webix.Date.dateToStr(webix.i18n.aria.hourFormat)(u)+"' role='gridcell' tabindex='"+(s==r?"0":"-1")+"' aria-selected='"+(s==r?"true":"false")+"' class='webix_cal_block"+i+"' data-value='"+r+"' style='"+this.lq(h,n)+(r%4!=0||m?"":"clear:both;")+"'>"+webix.Date.toFixed(m?r&&12!=r?r%12:12:r)+"</div>"}for(d+="</div>",d+="<div class='webix_minutes'>",s=t.date.getMinutes(),u=webix.Date.copy(t.date),r=0;60>r;r+=t.minuteStep)i="",this.aq[-2].lz.call(this,r)?i=" webix_cal_day_disabled":s==r&&(i=" webix_selected"),u.setMinutes(r),d+="<div aria-label='"+webix.Date.dateToStr(webix.i18n.aria.minuteFormat)(u)+"' role='gridcell' tabindex='"+(s==r?"0":"-1")+"' aria-selected='"+(s==r?"true":"false")+"' class='webix_cal_block webix_cal_block_min"+i+"' data-value='"+r+"' style='"+this.lq(h,n)+(r%2==0?"clear:both;":"")+"'>"+webix.Date.toFixed(r)+"</div>";d+="</div>",d+="</div>",d+="<div  class='webix_time_footer'>"+this.mq()+"</div>",this.w.innerHTML=d}else{var v=a[0].childNodes,b=webix.i18n.aria["nav"+(1==this.Np?"Year":"Decade")];for(v[0].innerHTML=c.eq(t.date,this),v[1].setAttribute("aria-label",b[0]),v[2].setAttribute("aria-label",b[1]),n=this.hq/3,h=this.iq/4,this.sz(t.date)&&(s=1==this.Np?t.date.getMonth():t.date.getFullYear()),r=0;12>r;r++){i=s==(1==this.Np?r:c.fq(r,this))?" webix_selected":"",c.lz(r,this)&&(i+=" webix_cal_day_disabled");var w=webix.i18n.aria[(1==this.Np?"month":"year")+"Format"];d+="<div role='gridcell' aria-label='"+webix.Date.dateToStr(w)(t.date)+"' tabindex='"+(-1!==i.indexOf("selected")?"0":"-1")+"' aria-selected='"+(-1!==i.indexOf("selected")?"true":"false")+"' class='webix_cal_block"+i+"' data-value='"+r+"' style='"+this.lq(h,n)+"'>"+c.fq(r,this)+"</div>"}o-1&&(a[o-1].style.display="none"),a[o].innerHTML=d,"year"!=l&&"month"!=l&&(a[o+1]?a[o+1].innerHTML=this.mq():this.w.innerHTML+="<div  class='webix_time_footer'>"+this.mq()+"</div>"),a[o].style.height=this.hq+"px"}},lq:function(e,t){return"width:"+e+"px; height:"+t+"px; line-height:"+t+"px;"},mq:function(){return"<input type='button' style='width:100%' class='webix_cal_done' value='"+webix.i18n.calendar.done+"'>"},kq:function(e,t){var i=e*(t?5:4),n=2*e;return"<div class='webix_cal_hours' style='width:"+i+"px'>"+webix.i18n.calendar.hours+"</div><div class='webix_cal_minutes' style='width:"+n+"px'>"+webix.i18n.calendar.minutes+"</div>"},yt:function(e,t){var i=this.Np;this.callEvent("onBeforeZoom",[e,i])&&(this.Np=e,e?this.cq(t):this.showCalendar(t),this.callEvent("onAfterZoom",[e,i]))},Jv:function(e){return!this.sz(e)&&this.aq[this.Np].Jv&&(e=this.aq[this.Np].Jv(e,this)),e},nq:function(e){var t=this.hF(e),i=this.Np-(this.NC?0:1);if(t=this.Jv(t),this.sz(t)){this.yt(i,t);var n=this.s.type;("month"==n||"year"==n)&&this.zt(t)}},zt:function(e,t){this.callEvent("onBeforeDateSelect",[e])&&(this.selectDate(e,!0,t),this.callEvent("onDateSelect",[e]),this.callEvent("onAfterDateSelect",[e]))},gF:function(e){var t=webix.html.index(e)-(this.s.weekNumber?1:0),i=webix.html.index(e.parentNode),n=webix.Date.add(this.Op().Rp,t+7*i,"day",!0);return this.s.timepicker&&(n.setHours(this.s.date.getHours()),n.setMinutes(this.s.date.getMinutes())),n},hF:function(e){var t=1*e.getAttribute("data-value"),i=-1!=e.className.indexOf("webix_cal_block_min")?this.Np-1:this.Np,n=this.s.date,r=webix.Date.copy(n);return this.aq[i].dq(r,t,this),r},on_click:{webix_cal_prev_button:function(e,t,i){this.$p(-1)},webix_cal_next_button:function(e,t,i){this.$p(1)},webix_cal_day_disabled:function(){return!1},webix_cal_outside:function(){return!!this.s.navigation&&void 0},webix_cal_day:function(e,t,i){var n=this.gF(i),r="touch"===this.s.multiselect||e.ctrlKey||e.metaKey;this.zt(n,r)},webix_cal_time:function(e){if(this.aq[this.Np-1]){this.jq=!0;var t=this.Np-1;this.yt(t)}},webix_range_time_start:function(){webix.$$(this.s.master).UD="start"},webix_range_time_end:function(){webix.$$(this.s.master).UD="end"},webix_cal_done:function(e){var t=webix.Date.copy(this.s.date);t=this.Jv(t),this.zt(t)},webix_cal_month_name:function(e){if(this.jq=!1,2!=this.Np&&this.s.monthSelect){var t=Math.max(this.Np,0)+1;this.yt(t)}},webix_cal_block:function(e,t,i){if(this.jq){if(-1!==i.className.indexOf("webix_cal_day_disabled"))return!1;var n=this.hF(i);this.cq(n)}else-1==i.className.indexOf("webix_cal_day_disabled")&&this.nq(i)}},Jp:function(e,t){return e?("string"==typeof e&&(e=t?webix.Date.strToDate(t)(e):webix.i18n.parseFormatDate(e)),e):webix.Date.datePart(new Date)},sz:function(e){var t=this.s.blockDates&&this.s.blockDates.call(this,e),i=this.s.minDate,n=this.s.maxDate,r=i>e||e>n;return!t&&!r},TD:function(e,t){var i="top"===t||"left"===t||"pgup"===t||"up"===t?-1:1,n=webix.Date.add(e,i,"day",!0);if(this.sz(n))return n;var r;return 0===this.Np?r=e.getMonth()===n.getMonth():1===this.Np?r=e.getFullYear()===n.getFullYear():2===this.Np&&(r=n.getFullYear()>this.gq&&n.getFullYear()<this.gq+10),r?this.TD(n,t):void 0},showCalendar:function(e){e=this.Jp(e),this.s.date=e,this.render(),this.resize()},VG:function(e){return e&&this.UG[e.valueOf()]},getSelectedDate:function(){var e=[];for(var t in this.UG)e.push(webix.Date.copy(this.UG[t]));return this.config.multiselect?e:e[0]||null},getVisibleDate:function(){return webix.Date.copy(this.s.date)},setValue:function(e,t){this.selectDate(e,!0)},getValue:function(e){var t=this.getSelectedDate();return e&&(t=webix.Date.dateToStr(e)(t)),t},selectDate:function(e,t,i){if(e&&i&&this.config.multiselect||(this.UG={}),e){webix.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var r=this.Jp(e[n]),o=webix.Date.datePart(webix.Date.copy(r)).valueOf();if(this.UG[o]&&i?delete this.UG[o]:this.UG[o]=r,!this.config.multiselect)break}}e&&t&&this.showCalendar(e[0]),!1!==t&&this.render(),this.callEvent("onChange",[e])},locate:function(){return null}},webix.KeysNavigation,webix.MouseEvents,webix.ui.view,webix.EventSystem),webix.protoUI({name:"property",$init:function(){this.w.className+=" webix_property",this.w.setAttribute("role","listbox"),this.Ns=[]},defaults:{nameWidth:100,editable:!0},on_render:{checkbox:function(e,t){return"<input type='checkbox' class='webix_property_check' "+(e?"checked":"")+">"},color:function(e,t){return'<div class="webix_property_col_val"><div class=\'webix_property_col_ind\' style="background-color:'+(e||"#FFFFFF")+';"></div><span>'+e+"</span></div>"}},on_edit:{label:!1},ad:"webix_f_id",on_click:{webix_property_check:function(e){var t=this.locate(e);return this.getItem(t).value=!this.getItem(t).value,this.callEvent("onCheck",[t,this.getItem(t).value]),!1}},on_dblclick:{},registerType:function(e,t){if(t.template&&(this.on_render[e]=t.template),t.editor&&(this.on_edit[e]=t.editor),t.click)for(var i in t.click)this.on_click[i]=t.click[i]},elements_setter:function(e){this.oq={};for(var t=0;t<e.length;t++){var i=e[t];"multiselect"==i.type&&(i.optionslist=!0),i.id=i.id||webix.uid(),i.label=i.label||"",i.value=i.value||"",this.oq[i.id]=t,this.template=this.Et(e[t])}return e},showItem:function(e){webix.RenderStack.showItem.call(this,e)},locate:function(e){return webix.html.locate(arguments[0],this.ad)},getItemNode:function(e){return this.y.childNodes[this.oq[e]]},getItem:function(e){return this.s.elements[this.oq[e]]},ii:function(e){var t=this.getItem(e).type;if("checkbox"==t)return"inline-checkbox";var i=this.on_edit[t];return!1!==i&&(i||t)},li:function(e){return this.getItem(e)},ui:function(e,t,i){var n=this.oq[e.id],r=this.s.elements;if(i){for(var o=n+1;o<r.length;o++)if(t.call(this,r[o].id))return r[o].id}else for(var o=n-1;o>=0;o--)if(t.call(this,r[o].id))return r[o].id;return null},updateItem:function(e,t){t=t||{};var i=this.getItem(e);i&&webix.extend(i,t,!0),this.refresh()},ug:function(e){var t=this.getItemNode(e);return{left:t.offsetLeft+this.s.nameWidth,top:t.offsetTop,height:t.firstChild.offsetHeight,width:this.pq,parent:this.w}},setValues:function(e,t){this.s.complexData&&(e=webix.CodeParser.collapseNames(e)),t||this.qq();for(var i in e){var n=this.getItem(i);n&&(n.value=e[i])}this.rq=e,this.refresh()},qq:function(){for(var e=this.s.elements,t=0;t<e.length;t++)e[t].value=""},getValues:function(){for(var e=webix.clone(this.rq||{}),t=0;t<this.s.elements.length;t++){var i=this.s.elements[t];"label"!=i.type&&(e[i.id]=i.value)}return this.s.complexData&&(e=webix.CodeParser.expandNames(e)),e},refresh:function(){this.render()},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&(this.pq=this.bc-this.s.nameWidth,this.render())},$getSize:function(e,t){if(this.s.autoheight){var i=this.s.elements.length;this.s.height=Math.max(this.type.height*i,this.s.minHeight||0)}return webix.ui.view.prototype.$getSize.call(this,e,t)},jb:function(){var e=[],t=this.s.elements;if(t)for(var i=0;i<t.length;i++){var n=t[i];n.css&&"object"==typeof n.css&&(n.css=webix.html.createCss(n.css));var r='<div webix_f_id="'+n.id+'"'+("label"!==n.type?'role="option" tabindex="0"':"")+' class="webix_property_line '+(n.css||"")+'">';if("label"==n.type)e[i]=r+"<div class='webix_property_label_line'>"+n.label+"</div></div>";else{var o,a=this.on_render[n.type],s="<div class='webix_property_label' style='width:"+this.s.nameWidth+"px'>"+n.label+"</div><div class='webix_property_value' style='width:"+this.pq+"px'>";o=n.collection||n.options?n.template(n,n.value):n.format?n.format(n.value):n.value,a&&(o=a.call(this,n.value,n)),e[i]=r+s+o+"</div></div>"}}return e.join("")},type:{height:24,templateStart:webix.template(""),templateEnd:webix.template("</div>")},$skin:function(){this.type.height=webix.skin.$active.propertyItemHeight||24}},webix.AutoTooltip,webix.EditAbility,webix.MapCollection,webix.MouseEvents,webix.Scrollable,webix.SingleRender,webix.AtomDataLoader,webix.EventSystem,webix.ui.view),webix.protoUI({name:"colorboard",defaults:{template:'<div style="width:100%;height:100%;background-color:{obj.val}"></div>',palette:null,height:220,width:220,cols:12,rows:10,minLightness:.15,maxLightness:1,navigation:!0},$init:function(e){webix.UE(this.x,"click",webix.bind(function(e){var t=webix.html.locate(e,"webix_val");this.setValue(t),this.callEvent("onItemClick",[this.s.value,e]),this.callEvent("onSelect",[this.s.value])},this)),this.$view.setAttribute("role","grid"),this.x.setAttribute("aria-readonly","true")},sq:function(e){var t=this.s.palette;e=(e||"").toUpperCase();for(var i=0,n=t.length;n>i;i++)for(var r=0,o=t[i].length;o>r;r++)if(t[i][r].toUpperCase()==e)return{row:i,col:r};return null},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&this.render()},getValue:function(){return this.s.value},re:function(){return this.x.firstChild},setValue:function(e){e&&"#"!=(""+e)[0]&&(e="#"+e);var t=this.s.value;return this.s.value=e,this.$setValue(e,t),e},uq:null,vq:function(){if(this.uq&&this.uq.parentNode)return this.uq;var e=this.uq=document.createElement("div");return e.className="webix_color_selector",this.x.lastChild.appendChild(e),e},$setValue:function(e,t){if(this.isVisible(this.s.id)){var i,n,r,o,a,s=0,l=0;if(t&&(r=this.sq(t)),r||(r={row:0,col:0}),this.x.lastChild.childNodes[r.row].childNodes[r.col].setAttribute("tabindex","-1"),r=this.sq(e),r&&(i=this.x.lastChild.childNodes[r.row].childNodes[r.col]),!(i&&i.parentNode&&i.parentNode.parentNode))return this.uq&&(this.uq.style.left="-100px"),void this.x.lastChild.childNodes[0].childNodes[0].setAttribute("tabindex","0");o=i.parentNode,s=i.offsetLeft-o.offsetLeft,l=-(this.$height-(i.offsetTop-o.parentNode.offsetTop)),i.setAttribute("tabindex","0"),i.setAttribute("aria-selected","true"),i.setAttribute("tabindex","0"),i.setAttribute("aria-selected","true"),n=this.vq(),a=["left:"+s+"px","top:"+l+"px","width:"+i.style.width,"height:"+i.style.height].join(";"),void 0!==n.style.cssText?n.style.cssText=a:n.setAttribute("style",a)}},wq:function(e){function t(e){return webix.color.toHex(e,2)}function i(e,i,n){return"#"+t(Math.floor(e))+t(Math.floor(i))+t(Math.floor(n))}function n(e,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?e+6*(t-e)*i:.5>=i?t:2/3>i?e+(t-e)*(2/3-i)*6:e}var r=[],o=e.rows-1,a=1/e.cols,s=(e.maxLightness-e.minLightness)/o,l=null;r.push(function(e){for(var t=[],n=255,r=n/e,o=0;e>o;o++)n=Math.round(n>0?n:0),t.push(i(n,n,n)),n-=r;return t[t.length-1]="#000000",t}(e.cols));for(var h=0,c=e.minLightness;o>h;h++){l=[];for(var u=0,d=0;u<e.cols;u++){var f=function(e,t,i){var r,o,a;if(t){var s=.5>i?i*(1+t):i+t-i*t,l=2*i-s;r=n(l,s,e+1/3),o=n(l,s,e),a=n(l,s,e-1/3)}else r=o=a=i;return{r:255*r,g:255*o,b:255*a}}(d,1,c);l.push(i(f.r,f.g,f.b)),d+=a}r.push(l),c+=s}this.s.palette=r},moveSelection:function(e,t,i){var n,r,o=this.getValue();if(o&&(n=this.sq(o)),n||(n={row:0,col:0}),n&&("up"==e||"down"==e?n.row=n.row+("up"==e?-1:1):"right"==e||"left"==e?n.col=n.col+("right"==e?1:-1):"top"==e?n.row=n.col=0:"bottom"==e&&(n.row=this.x.lastChild.querySelectorAll(".webix_color_row").length-1,n.col=this.x.lastChild.childNodes[n.row].childNodes.length-1),n.row>=0&&(r=this.x.lastChild.childNodes[n.row].childNodes[n.col]),r&&(o=r.getAttribute("webix_val"),this.setValue(o),this.callEvent("onSelect",[this.s.value]),!1!==i))){var a=this.x.querySelector("div[tabindex='0']");a&&a.focus()}},render:function(){function e(e,t,i){for(var o='<div class="webix_color_row" role="row">',a=0;a<e.length;a++)r.width=t[a],r.height=i,r.val=e[a],o+=n(r);return o+="</div>"}if(this.isVisible(this.s.id)){this.s.palette||this.wq(this.s);var t=this.s.palette;this.callEvent("onBeforeRender",[]);for(var i=this.s,n=webix.template('<div role=\'gridcell\' tabindex=\'-1\' aria-label="{obj.val}" style="width:{obj.width}px;height:{obj.height}px;" webix_val="{obj.val}">'+(i.template||"")+"</div>"),r={width:0,height:0,val:0},o=this.$width,a=this.$height,s=[],l='<div class="webix_color_palette"role="rowgroup">',h="object"==typeof t[0]?t[0]:t,c=0;c<h.length;c++)s[c]=Math.floor(o/(h.length-c)),o-=s[c];if("object"==typeof t[0])for(var u=0;u<t.length;u++){var d=Math.floor(a/(t.length-u));a-=d;var f=t[u];l+=e(f,s,d)}else l+=e(t,s,a);l+="</div>",this.x.innerHTML=l,this.uq=null,this.s.value?this.$setValue(this.s.value):this.x.lastChild.childNodes[0].childNodes[0].setAttribute("tabindex","0"),this.callEvent("onAfterRender",[])}},refresh:function(){this.render()}},webix.KeysNavigation,webix.ui.view,webix.EventSystem),webix.protoUI({name:"daterange",defaults:{button:!1,icons:!1,calendarCount:2,borderless:!1},$init:function(e){e.calendar=e.calendar||{},e.value=this.SD(e.value),delete e.calendar.type,this.x.className+=" webix_daterange",this.Np=this.ne[e.calendar.type]||0;for(var t=[],i=webix.skin.$active.calendar,n=i&&i.height?i.height:250,r=i&&i.width?i.width:250,o=webix.extend({view:"calendar",width:r,height:n},e.calendar||{},!0),a=e.calendarCount=0===this.Np?e.calendarCount||this.defaults.calendarCount:this.defaults.calendarCount,s=(o.css?o.css+" ":"")+"webix_range_",l=e.value.start||new Date,h=0;a>h;h++){var c=webix.Date.add(l,this.VD[this.Np]*h,"month",!0);webix.extend(o,{events:webix.bind(this.WD,this),css:s+(1===a?"":0===h?"0":h+1==a?"N":"1"),timepicker:0===this.Np&&e.timepicker,borderless:!0,date:c,master:e.id},!0),t.push(webix.copy(o))}e.rows=[{type:"clean",cols:t},this.XD(e,r*a)],e.height=e.height||o.height+(e.icons||e.button?35:0),e.type="line",this.$ready.push(this.av),webix.event(this.$view,"keydown",webix.bind(function(e){this.DD(e.which||e.keyCode,e)},this))},value_setter:function(e){return this.SD(e)},getValue:function(){return this.s.value},setValue:function(e,t){e=this.SD(e),this.s.value=e;var i=e.start||e.end||new Date;if(!t){this.YD[0].showCalendar(e.start);for(var n=1;n<this.YD.length;n++)this.YD[n].s.date=i,this.ZD(this.YD[n],1,n)}this.callEvent("onChange",[e]),this.refresh()},refresh:function(){for(var e=(this.s.value,0);e<this.YD.length;e++)if(this.YD[e].Np===this.Np){webix.html.removeCss(this.YD[e].$view,"webix_cal_timepicker"),webix.html.removeCss(this.YD[e].$view,"webix_range_timepicker");var t=this.$D(this.YD[e].getVisibleDate());if(t.start||t.end){if(this.YD[e].s.date=t.start||t.end,this.s.timepicker){var i="webix_"+(t.start&&t.end?"range":"cal")+"_timepicker";webix.html.addCss(this.YD[e].$view,i)}}else webix.Date.datePart(this.YD[e].s.date);this.YD[e].refresh()}},addToRange:function(e){var t=this._D(this.Jp(e));this.setValue(t)},ax:[{template:function(){return"<span role='button' tabindex='0' class='webix_cal_icon_today webix_cal_icon'>"+webix.i18n.calendar.today+"</span>"},on_click:{webix_cal_icon_today:function(){var e=new Date;this.s.timepicker||(e=webix.Date.datePart(e)),this.addToRange(e),this.callEvent("onTodaySet",[this.getValue()])}}},{template:function(){return"<span role='button' tabindex='0' class='webix_cal_icon_clear webix_cal_icon'>"+webix.i18n.calendar.clear+"</span>"},on_click:{webix_cal_icon_clear:function(){this.setValue(""),this.callEvent("onDateClear",[])}}}],bx:function(e){if(e){e="object"==typeof e?e:this.ax;for(var t={css:"webix_cal_footer ",borderless:!0,height:30,template:"<div class='webix_cal_icons'>",onClick:{}},i=0;i<e.length;i++){if(e[i].template){var n="function"==typeof e[i].template?e[i].template:webix.template(e[i].template);t.template+=n.call(this)}if(e[i].on_click)for(var r in e[i].on_click)t.onClick[r]=webix.bind(e[i].on_click[r],this)}return t.template+="</div>",t.width=webix.html.getTextSize(t.template).width+30,t}return{width:0}},XD:function(e,t){var i={view:"button",value:webix.i18n.calendar.done,minWidth:100,maxWidth:230,align:"center",height:30,click:function(){this.getParentView().getParentView().hide()}},n=this.bx(e.icons),r={css:"webix_range_footer",cols:[{width:n.width}]};return(e.button||e.icons)&&2*n.width+i.minWidth>t&&(r.cols[0].width=0),r.cols.push(e.button?i:{}),r.cols.push(n),r},ne:{time:-1,month:1,year:2},VD:{0:1,1:12,2:120},SD:function(e){return e||(e={start:null,end:null}),e.start||e.end||(e={start:e}),e.end=this.Jp(e.end)||null,e.start=this.Jp(e.start)||null,(e.end&&e.end<e.start||!e.start)&&(e.end=[e.start,e.start=e.end][0]),e},Jp:function(e,t){return"string"==typeof e&&(e=t?webix.Date.strToDate(t)(e):webix.i18n.parseFormatDate(e)),isNaN(1*e)?null:e},WD:function(e){var t=this.s.value,i=t.start?webix.Date.datePart(webix.Date.copy(t.start)):null,n=t.end?webix.Date.datePart(webix.Date.copy(t.end)):null,r=webix.Date.datePart(e),o="";return r>=i&&n&&n>=r&&(o="webix_cal_range"),webix.Date.equal(r,i)&&(o="webix_cal_range_start"),webix.Date.equal(r,n)&&(o="webix_cal_range_end"),o+" "+(webix.Date.isHoliday(e)+" "||"")},av:function(){var e=this.YD=this.getChildViews()[0].getChildViews(),t=this;this.aE={};for(var i=0;i<e.length;i++)this.aE[e[i].config.id]=i,e[i].attachEvent("onBeforeDateSelect",function(e){return t.bE(this,e)}),e[i].attachEvent("onBeforeZoom",function(e){return t.cE(this,e)}),(0===i||i===e.length-1)&&(e[i].attachEvent("onAfterMonthChange",webix.bind(this.dE,this)),e[i].attachEvent("onAfterZoom",function(e,i){t.eE(this,e,i)}));this.s.timepicker&&this.refresh()},cE:function(e,t){var i=this.fE(e.config.id);if(t>=0&&i>0&&i!==this.YD.length-1)return!1;if(-1===t){var n=this.$D(e.getVisibleDate());n.start&&n.end&&(e.s.date=n[this.UD])}return!0},dE:function(e,t){var i=e>t?1:-1,n=e>t?this.YD[this.YD.length-1]:this.YD[0],r=n.aq[n.Np]._p;this.gE(i,r,n),this.refresh()},eE:function(e,t,i){var n=e.aq[e.Np]._p,r=this.fE(e.config.id),o=0===r?1:-1;if(this.YD[r+o]){var a=this.YD[r+o].s.date;if(i>t&&t>=0){var s=0;if(1===t){var l=a.getFullYear();(this.Np||-1===o&&11===a.getMonth()||1===o&&0===a.getMonth())&&(l-=o),s=e.s.date.getFullYear()-l}else if(0===t){var h=a.getMonth()-o;(12===h||-1==h)&&(h=-1===h?11:0),s=e.s.date.getMonth()-h}this.gE(s,n,e),this.refresh()}}},ZD:function(e,t,i){e.blockEvent(),e.Np>=0&&e.$p(t,i),e.unblockEvent()},fE:function(e){return this.aE[e]},gE:function(e,t,i){for(var n=0;n<this.YD.length;n++){var r=this.YD[n];i&&r.config.id===i.config.id||this.ZD(r,e,t)}},$D:function(e){var t=this.s.value,i={};return t.start&&t.start.getYear()===e.getYear()&&t.start.getMonth()===e.getMonth()&&(i.start=t.start),t.end&&t.end.getYear()===e.getYear()&&t.end.getMonth()===e.getMonth()&&(i.end=t.end),i},hE:function(e,t){e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e.setMilliseconds(t.getMilliseconds())},_D:function(e,t){var i=webix.copy(this.s.value);if(0===this.Np||webix.isUndefined(t))i.start&&!i.end?i.end=e:(i.start=e,i.end=null);else{i[t?"end":"start"]=e}return i},bE:function(e,t){if(this.callEvent("onBeforeDateSelect",[t])){var i=this.s.value;if(e.Np<0){var n,r=webix.copy(this.$D(t));n=r.start&&r.end?r[this.UD]:r.start||r.end,n&&this.hE(n,t),e.Np=0,i=webix.extend(webix.copy(i),r,!0)}else{var o=e.getVisibleDate(),a=this.fE(e.config.id);if(t.getMonth()!==o.getMonth()&&(0===a||a===this.YD.length-1)){var s=t>o?1:-1;this.gE(s,1)}i=this._D(t,a)}e.Np!==this.Np&&e.showCalendar(t),this.setValue(i,!0),this.callEvent("onAfterDateSelect",[this.getValue()])}return!1}},webix.ui.layout),webix.protoUI({name:"daterangesuggest",defaults:{type:"daterange",body:{view:"daterange",icons:!0,button:!0,borderless:!0}},getValue:function(){return this.getRange().getValue()},setValue:function(e){this.getRange().setValue(webix.copy(e))},getRange:function(){return this.getBody()},getButton:function(){return this.getBody().getChildViews()[1].getChildViews()[1]},iE:function(e,t){var i=webix.$$(this.s.master);i?(i.setValue(e),t&&this.hide()):this.setValue(e)},_d:function(){var e=this.getRange();e.attachEvent("onAfterDateSelect",webix.bind(function(e){this.iE(e)},this)),e.attachEvent("onDateClear",webix.bind(function(e){this.iE(e)},this)),e.attachEvent("onTodaySet",webix.bind(function(e){this.iE(e)},this))}},webix.ui.suggest),webix.protoUI({$cssName:"datepicker",name:"daterangepicker",$init:function(){this.s.value={}},Je:function(){var e=this.s;e.suggest?e.popup=e.suggest:e.popup||(e.popup=e.suggest=this.suggest_setter({view:"daterangesuggest",body:{timepicker:e.timepicker,calendarCount:e.calendarCount,height:250+(e.button||e.icons?30:0)}})),this.ze=function(){}},$prepareValue:function(e){return e=e||{},e.start=webix.ui.datepicker.prototype.$prepareValue.call(this,e.start?e.start:null),e.end=webix.ui.datepicker.prototype.$prepareValue.call(this,e.end?e.end:null),e},$compareValue:function(e,t){var i=webix.ui.datepicker.prototype.$compareValue,n=i.call(this,e.start,t.start),r=i.call(this,e.end,t.end);return n&&r},$setValue:function(e){e=e||{},webix.$$(""+this.s.popup).getRange(),this.s.text=(e.start?this.YE(e.start):"")+(e.end?" - "+this.YE(e.end):""),this.ND()},$render:function(e){e.value=this.$prepareValue(e.value),this.$setValue(e.value)},getValue:function(){var e=this.s.type,t="time"==e,i=(this.config.timepicker,this.s.value);if(this.s.stringResult){var n=webix.i18n.parseFormatStr;return t&&(n=webix.i18n.parseTimeFormatStr),!this.Hx||"month"!=e&&"year"!=e||(n=this.Hx),this.kE(n,i)}return i||null},kE:function(e,t){var i=webix.$$(""+this.s.popup),n=i.getRange();return t=webix.copy(n.SD(t)),t.start&&(t.start=e(t.start)),t.end&&(t.end=e(t.end)),t}},webix.ui.datepicker),webix.protoUI({name:"resizer",defaults:{width:7,height:7},$init:function(e){this.x.className+=" webix_resizer";var t=this.getParentView().Cc;webix.UE(this.x,webix.env.mouse.down,this.xq,{bind:this}),webix.event(document.body,webix.env.mouse.up,this.yq,{bind:this});var i=this.zq();this.Aq=!1,this.Bq=i,this.Cq="x"==i?"width":"height","x"==i?e.height=0:e.width=0,t>0?(this.x.className+=" webix_resizer_v"+i,this.x.style.marginRight="-"+t+"px","x"==i?e.width=t:e.height=t,this.$nospace=!0):this.x.className+=" webix_resizer_"+i,this.x.innerHTML="<div class='webix_resizer_content'></div>","y"==i&&t>0&&(this.x.style.marginBottom="-"+(e.height||this.defaults.height)+"px"),this.x.setAttribute("tabindex","-1"),this.x.setAttribute("aria-grabbed","false")},xq:function(e){var t=this.Dq();if(t&&!this.s.disabled){e=e||event,this.Aq=!0,this.Pl=webix.html.pos(e),this.Eq=[],this.x.setAttribute("aria-grabbed","true");for(var i=0;2>i;i++)t[i].$view.setAttribute("aria-dropeffect","move");this.x.setAttribute("aria-dropeffect","move"),this.Fq(e,t[0])}},yq:function(){this.Aq=!1,this.Pl=!1},Fq:function(e,t){var i,n,r,o,a;e=e||event,i=this.Bq,this.getParentView().x.style.position="relative",r=webix.html.offset(this.x),o=webix.html.offset(this.getParentView().x),a=r[i]-o[i],n=webix.html.offset(t.$view)[i]-webix.html.offset(this.getParentView().$view)[i],this.Rl=[i,t,a,n],this.Gq=new webix.ui.resizearea({container:this.getParentView().x,dir:i,eventPos:this.Pl[i],start:a-1,height:this.$height,width:this.$width,border:1,margin:this.getParentView()["_padding"+i.toUpperCase()]}),this.Gq.attachEvent("onResizeEnd",webix.bind(this.Hq,this)),this.Gq.attachEvent("onResize",webix.bind(this.Iq,this)),webix.html.addCss(document.body,"webix_noselect",1)},zq:function(){return this.getParentView().mc?"y":"x"},Iq:function(){var e,t,i,n,r,o,a,s,l,h;if(this.Rl)for(e=this.Dq(),r=this.Rl[0],n=this.Gq.Jl-this.Rl[2],l=this.Jq(e,r,n),h=e[0]["$"+this.Cq]+e[1]["$"+this.Cq],a="y"==r?["minHeight","maxHeight"]:["minWidth","maxWidth"],o=0;2>o;o++){t=e[o].s,i=o?-n:n;var c=t[a[0]],u=t[a[1]];if(i>0&&u&&u<=l[o]||0>i&&(c||3)>=l[o])return this.Eq[o]=i>0?u:c||3,s=this.Kq(e,r),void(this.Gq.Dl.style["y"==r?"top":"left"]=this.Rl[3]+s[0]+"px");l[o]<3?this.Gq.Dl.style["y"==r?"top":"left"]=this.Rl[3]+o*h+1+"px":this.Eq[o]=null}},Dq:function(){var e,t;for(e=this.getParentView().q,t=0;t<e.length;t++)if(e[t]==this)return!e[t-1]||e[t-1].s.$noresize?null:!e[t+1]||e[t+1].s.$noresize?null:[e[t-1],e[t+1]]},Hq:function(e){if(void 0!==e){var t,i,n,r,o,a=this.getParentView().mc;if(this.Lq=null,this.Rl){if(i=this.Rl[0],n=e-this.Rl[2],t=this.Dq(),t[0]&&t[1]){o=this.Mq(t,i,n);for(var r=0;2>r;r++){var s=t[r].$getSize(0,0);if(a?s[2]==s[3]:Math.abs(s[1]-s[0])<3)t[r].s[this.Cq]=o[r],t[r].tc&&t[r].tc(this.Cq,o[r],a);else{var l=t[r].$view[a?"offsetHeight":"offsetWidth"];t[r].s.gravity=o[r]/l*t[r].s.gravity}}t[0].resize();for(var r=0;2>r;r++)t[r].callEvent&&t[r].callEvent("onViewResize",[]),t[r].$view.removeAttribute("aria-dropeffect");webix.callEvent("onLayoutResize",[t])}this.Rl=!1}this.Rl=!1,this.Aq=!1,this.Eq=null,webix.html.removeCss(document.body,"webix_noselect"),this.x.setAttribute("aria-grabbed","false"),this.x.removeAttribute("aria-dropeffect")}},Kq:function(e){var t,i,n;return n=e[0]["$"+this.Cq]+e[1]["$"+this.Cq],this.Eq[0]?(t=this.Eq[0],i=n-t):this.Eq[1]&&(i=this.Eq[1],t=n-i),[t,i]},Jq:function(e,t,i){for(var n=[],r="height"==this.Cq?"offsetHeight":"offsetWidth",o=0;2>o;o++)n[o]=e[o].$view[r]+(o?-1:1)*i;return n},Mq:function(e,t,i){var n,r,o;if(this.Eq[0]||this.Eq[1])r=this.Kq(e,t);else for(r=this.Jq(e,t,i),n=0;2>n;n++)r[n]<0&&(o=r[0]+r[1],r[n]=1,r[1-n]=o-1);return r}},webix.MouseEvents,webix.Destruction,webix.ui.view),webix.protoUI({name:"multiview",defaults:{animate:{}},setValue:function(e){webix.$$(e).show()},getValue:function(){return this.getActiveId()},$init:function(){this.Mh=0,this.mc=1,this.x.style.position="relative",this.x.className+=" webix_multiview",this.Nq=[]},Oq:function(e,t){var i=webix.$$(e);i.Pq||(i.Qq=[],i.Pq={}),i.Pq[t]||(i.Pq[t]=!0,i.Qq.push(t))},Rq:function(e){var t=webix.$$(e);if(this.s.keepViews&&(t.x.style.display=""),this.Nq[this.Nq.length-2]!=e?(10==this.Nq.length&&this.Nq.splice(0,1),this.Nq.push(e)):this.Nq.splice(this.Nq.length-1,1),t.Pq){for(var i=0;i<t.Qq.length;i++){var n=webix.$$(t.Qq[i]);n&&n.render()}t.Qq=[],t.Pq={}}},addView:function(){var e=webix.ui.baselayout.prototype.addView.apply(this,arguments);return this.s.keepViews?webix.$$(e).x.style.display="none":webix.html.remove(webix.$$(e).x),e},Vx:function(e,t){if(e==this.Mh){var i=Math.max(e-1,0);this.q[i]&&(this.Wh=!1,this.fc(this.q[i],!1))}e<this.Mh&&this.Mh--},Fb:function(){},kc:function(e){e=e||this.nc;for(var t=0;t<e.length;t++)e[t].Ob=this.s.borderless?{top:1,left:1,right:1,bottom:1}:this.s.Ob||{};webix.ui.baselayout.prototype.kc.call(this,e);for(var t=1;t<this.q.length;t++)this.s.keepViews?this.q[t].x.style.display="none":webix.html.remove(this.q[t].x);for(var t=0;t<e.length;t++){var i=this.q[t];if(!i.q||i.Gc){var n=i.s.Ob;n.top&&(i.x.style.borderTopWidth="0px"),n.left&&(i.x.style.borderLeftWidth="0px"),n.right&&(i.x.style.borderRightWidth="0px"),n.bottom&&(i.x.style.borderBottomWidth="0px"),i.x.setAttribute("role","tabpanel")}}this.Rq(this.getActiveId())},cells_setter:function(e){this.nc=e},Sq:function(e,t){var i=(this.s.animate||{}).direction,n="top"==i||"bottom"==i;return t>e?n?"bottom":"right":n?"top":"left"},fc:function(e,t){var i=this.getParentView();if(i&&i.getTabbar&&i.getTabbar().setValue(e.s.$id||e.s.id),this.Wh)return webix.delay(this.fc,this,[e,t],100);for(var n=-1,r=0;r<this.q.length;r++)if(this.q[r]==e){n=r;break}if(!(0>n||n==this.Mh)){var o=this.q[this.Mh],a=this.q[n];if(o.$getSize(0,0),(t||void 0===t)&&webix.animate.isSupported()&&this.s.animate){var s=webix.extend({},this.s.animate);this.s.keepViews&&(s.keepViews=!0),s.direction=this.Sq(n,this.Mh),s=webix.Settings.E(t||{},s);var l=webix.animate.formLine(a.x,o.x,s);a.$getSize(0,0),a.$setSize(this.bc,this.dc);var h=s.callback;s.callback=function(){webix.animate.breakLine(l,this.s.keepViews),this.Wh=!1,h&&h.call(this),h=s.master=s.callback=null,this.resize()},s.master=this,this.Mh=n,this.Rq(this.getActiveId()),webix.animate(l,s),this.Wh=!0}else this.s.keepViews?o.x.style.display="none":(webix.html.remove(o.x),this.x.appendChild(this.q[r].x)),this.Mh=n,o.resize(),this.Rq(this.getActiveId());a.callEvent&&(a.callEvent("onViewShow",[]),webix.ui.each(a,this.Lw)),this.callEvent("onViewChange",[o.s.id,a.s.id])}},$getSize:function(e,t){if(!this.q.length)return webix.ui.baseview.prototype.$getSize.call(this,0,0);var i=this.q[this.Mh].$getSize(0,0);if(this.s.fitBiggest)for(var n=0;n<this.q.length;n++)if(n!=this.Mh)for(var r=this.q[n].$getSize(0,0),o=0;4>o;o++)i[o]=Math.max(i[o],r[o]);var a=webix.ui.baseview.prototype.$getSize.call(this,0,0);return a[1]>=1e5&&(a[1]=0),a[3]>=1e5&&(a[3]=0),a[0]=(a[0]||i[0])+e,a[1]=(a[1]||i[1])+e,a[2]=(a[2]||i[2])+t,a[3]=(a[3]||i[3])+t,a},$setSize:function(e,t){this.q.length&&(this.lc=[e,t],webix.ui.baseview.prototype.$setSize.call(this,e,t),this.q[this.Mh].$setSize(e,t))},isVisible:function(e,t){return t&&t!=this.getActiveId()?(e&&this.Oq(t,e),!1):webix.ui.view.prototype.isVisible.call(this,e,this.s.id)},getActiveId:function(){return this.q.length?this.q[this.Mh].s.id:null},back:function(e){if(e=e||1,this.callEvent("onBeforeBack",[this.getActiveId(),e])){if(this.Nq.length>e){var t=this.Nq[this.Nq.length-e-1];return webix.$$(t).show(),t}return null}return null}},webix.ui.baselayout),webix.protoUI({name:"form",defaults:{type:"form",autoheight:!0},Tq:-1,_f:"webix_form",ag:!0,$init:function(){this.x.setAttribute("role","form")},$getSize:function(e,t){this.cc&&!this.s.width&&(e+=webix.ui.scrollSize);var i=webix.ui.layout.prototype.$getSize.call(this,e,t);return(this.s.scroll||!this.s.autoheight)&&(i[2]=this.s.height||this.s.minHeight||0,i[3]+=1e5),i}},webix.ui.toolbar),function(){var e={};for(var t in webix.UIManager.nb)e[webix.UIManager.nb[t]]=t;var i={9:"tab",38:"up",40:"down",37:"left",39:"right"};webix.patterns={phone:{mask:"+# (###) ###-####",allow:/[0-9]/g},card:{mask:"#### #### #### ####",allow:/[0-9]/g},date:{mask:"####-##-## ##:##",allow:/[0-9]/g}},webix.extend(webix.ui.text,{$init:function(t){if((t.pattern||t.format&&!this.format_setter)&&(this.attachEvent("onKeyPress",function(t,n){if(!(n.ctrlKey||n.altKey||this.nH)){if(t>105&&112>t&&(t-=64),e[t]&&8!==t&&46!==t)return void(i[t]||webix.html.preventEvent(n));webix.html.preventEvent(n),this.$C(n,t)}}),this.attachEvent("onAfterRender",this.ye),this.getText=function(){return this.getInputNode().value},this.VC=function(e,t){return!1===t?this._C(e):this.aD(e)},t.format)){var n=webix.Number.getConfig(t.format);this.nH=[function(e){return webix.Number.parse(e,n)},function(e){return webix.Number.format(e,n)}]}},pattern_setter:function(e){var t=webix.patterns[e]||e;return"string"==typeof t&&(t={mask:t}),t.allow=t.allow||/[A-Za-z0-9]/g,this.bD(t),t},cD:function(){this.config.validate=this.config.validate||webix.bind(function(){var e=this.getText(),t=e.replace(this.dD,"");return((""+e).match(this.eD)||[]).join("").length==t.length&&e.length==this.s.pattern.mask.length},this)},ye:function(){var e=webix.env.isIE8?"propertychange":"input";this.nH||webix.UE(this.getInputNode(),e,function(e){var t=(new Date).valueOf();this.$view.offsetWidth,(!this.fD||t-this.fD>100)&&(this.fD=t,this.$setValue(this.getText()))},{bind:this}),webix.UE(this.getInputNode(),"blur",function(e){this.Xy()},{bind:this})},bD:function(e){for(var t=e.mask,i={},n="",r=0,o=0;o<t.length;o++)"#"===t[o]?(i[o]=r,r++):(i[o]=!1,-1===n.indexOf(t[o])&&(n+="\\"+t[o]));this.eD=e.allow,this.dD=RegExp("["+n+"]","g"),this.gD=i,this.cD()},$C:function(e,t){var i=this.getInputNode(),n=i.value,r=webix.html.getSelectionRange(i),o="";8==t||46==t?r.start==r.end&&(8==t?r.start--:r.end++):(o=String.fromCharCode(t),e.shiftKey||(o=o.toLowerCase())),n=n.substr(0,r.start)+o+n.substr(r.end),r=this.hD(o,n.length,r.start,t),this.iD=t,this.$setValue(n),webix.html.setSelectionRange(i,r)},hD:function(e,t,i,n){if(e&&e.match(this.eD)||8==n||46==n)i=e?i+1:i,i=this.jD(i,n);else if(t-1==i&&8!==n&&46!==n){var r=this.s.pattern.mask.indexOf("#",i);r>0&&(i+=r)}return i},jD:function(e,t){var i=e-1*(46!==t);return!1===this.gD[i]?(e+=8==t?-1:1,this.jD(e,t)):!1===this.gD[e]&&8!==t?this.jD(e+1,t)-1:e},_C:function(e){return this.nH?this.nH[0](e):(e=e||"",((""+e).match(this.eD)||[]).join("").replace(this.dD,""))},aD:function(e){if(this.nH)return this.nH[1](this.nH[0](e));var t=this._C(e),i=this.s.pattern.mask,n=this.s.pattern.mask,r=this.gD,o=!1,a=0,s=0,l=0;for(var h in r)if(!1!==r[h]){if(!o){a=1*h,s=r[h];var c=t[s]||"",u=t[s+1];i=(c?i.substr(0,a):"")+c+(c&&u?i.substr(a+1):""),u||(o=!0)}l++}var d=this.iD;if(d&&8!==d||!d&&l-1===s&&i.length<n.length)if(t){var f=a+1;if("#"!==n.charAt(f)&&i.length<n.length){var p=n.indexOf("#",f);0>p&&(p=n.length),i+=n.substr(f,p-f)}}else 46!==d&&(i+=n.substr(0,n.indexOf("#")));return this.iD=null,i}})}(),webix.protoUI({name:"gridsuggest",defaults:{type:"datatable",fitMaster:!1,width:0,body:{navigation:!0,autoheight:!0,autowidth:!0,select:!0},filter:function(e,t){return 0===(""+this.config.template(e)).toLowerCase().indexOf(t.toLowerCase())}},$init:function(e){e.body.columns||(e.body.autoConfig=!0),e.template||(e.template=webix.bind(this.bu,this))},bu:function(e,t){var i=this.getBody(),n=this.config.textValue||i.config.columns[0].id;return i.getText(e.id,n)}},webix.ui.suggest),webix.protoUI({name:"datasuggest",defaults:{type:"dataview",fitMaster:!1,width:0,body:{xCount:3,autoheight:!0,select:!0}}},webix.ui.suggest),webix.protoUI({name:"multiselect",$cssName:"richselect",defaults:{separator:","},Kt:function(e){var t=!webix.isArray(e)&&"object"==typeof e&&!e.name,i={view:"checksuggest",separator:this.config.separator,buttonText:this.config.buttonText,button:this.config.button};this.s.optionWidth?i.width=this.s.optionWidth:i.fitMaster=!0,t&&webix.extend(i,e,!0);var n=webix.ui(i),r=n.getList();return"string"==typeof e?r.load(e):t||r.parse(e),n.attachEvent("onShow",function(e,t,i){n.setValue(webix.$$(n.s.master).config.value)}),n},$setValue:function(e){if(this.se){var t=this.getPopup(),i="";t&&"object"==typeof(i=t.setValue(e))&&(i=i.join(this.config.separator+" ")),this.s.text=i;this.getInputNode().innerHTML=i||this.Yx()}},getValue:function(){return this.s.value||""}},webix.ui.richselect),webix.editors.multiselect=webix.extend({popupType:"multiselect"},webix.editors.richselect),webix.type(webix.ui.list,{name:"multilist",templateStart:webix.template('<div webix_l_id="#!id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;" {common.aria()}>')},"default"),webix.type(webix.ui.list,{name:"checklist",templateStart:webix.template('<div webix_l_id="#!id#" {common.aria()} class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden; white-space:nowrap;">{common.checkbox()}'),checkbox:function(e,t){var i=e.$checked?"fa-check-square":"fa-square-o";return"<span role='checkbox' tabindex='-1' aria-checked='"+(e.$checked?"true":"false")+"' class='webix_icon "+i+"'></span>"},aria:function(e){return"role='option' tabindex='-1' "+(e.$checked?"aria-selected='true'":"")},template:webix.template("#value#")},"default"),webix.protoUI({name:"multisuggest",defaults:{separator:",",type:"layout",button:!0,width:0,filter:function(e,t){return(""+this.getItemText(e.id)).toLowerCase().indexOf(t.toLowerCase())>-1},body:{rows:[{view:"list",type:"multilist",borderless:!0,autoheight:!0,yCount:5,multiselect:"touch",select:!0,on:{onItemClick:function(e){var t=this.getParentView().getParentView();webix.delay(function(){t._y(e)})}}},{view:"button",click:function(){var e=this.getParentView().getParentView();e.setMasterValue({id:e.getValue()}),e.hide()}}]}},_y:function(e,t,i){var n=this.getValue(),r=i||webix.toArray(n?this.getValue().split(this.s.separator):[]),o=webix.$$(this.s.master);if(i||(r.find(e)<0?r.push(e):r.remove(e)),o)o.setValue(r.join(this.s.separator));else{var a=this.setValue(r);this.ae&&(this.ae.value=a.join(this.s.separator))}if(t){var s=this.getList().getItemNode(e).getElementsByTagName("SPAN");s&&s.length&&s[0].focus()}},Jt:function(e){return e.rows[0]},_d:function(){var e=this.getButton(),t=this.s.button?this.s.buttonText||webix.i18n.combo.select:0;if(e&&(t?(e.s.value=t,e.refresh()):e.hide()),this.s.selectAll)return this.getBody().getChildViews()[0].show();this.getList().data.attachEvent("onAfterFilter",webix.bind(function(){return this.be()},this))},ke:function(){var e=this.getList(),t=this.getMasterValue();if(t&&(t=(""+t).split(this.config.separator),t[0]))for(var i=0;i<t.length;i++)e.exists(t[i])&&e.select(t[i],!0)},getButton:function(){return this.getBody().getChildViews()[1]},getList:function(){return this.getBody().getChildViews()[0]},setValue:function(e){var t=[],i=this.getList();if(i.unselect(),e&&(webix.isArray(e)||(e=(""+e).split(this.config.separator)),e[0]))for(var n=0;n<e.length;n++)i.getItem(e[n])&&(i.exists(e[n])&&i.select(e[n],!0),t.push(this.getItemText(e[n])));return this.s.value=e?e.join(this.config.separator):"",t},getValue:function(){return this.s.value}},webix.ui.suggest),webix.protoUI({name:"checksuggest",defaults:{button:!1,selectAll:!1,body:{rows:[{view:"checkbox",hidden:!0,customCheckbox:!1,borderless:!1,css:"webix_checksuggest_select_all",labelRight:webix.i18n.combo.selectAll,labelWidth:0,value:0,height:28,inputHeight:20,on:{onItemClick:function(e){for(var t=this.getParentView().getParentView(),i=t.getList(),n=i.data.order,r=0;r<n.length;r++){i.getItem(n[r]).$checked=this.getValue()}var o=this.getValue()?[].concat(n):[];t._y(n[0],e,o),i.refresh()},onChange:function(){var e=this.$view.querySelector("label"),t=webix.i18n.combo;e.textContent=this.getValue()?t.unselectAll:t.selectAll},onAfterRender:function(){this.callEvent("onChange",[])}}},{view:"list",css:"webix_multilist",borderless:!0,autoheight:!0,yCount:5,select:!0,type:"checklist",on:{onItemClick:function(e,t){var i=this.getItem(e);i.$checked=i.$checked?0:1,this.refresh(e);var n=this.getParentView().getParentView();if(n.FG=new Date,n._y(e,t),n.config.selectAll)if(i.$checked){var r=(n.getValue()||"").split(",");r.length===this.count()&&n.getBody().q[0].setValue(1)}else n.getBody().q[0].setValue(0)}}},{view:"button",click:function(){var e=this.getParentView().getParentView();e.setMasterValue({id:e.getValue()}),e.hide()}}]}},Jt:function(e){return e.rows[1]},getButton:function(){return this.getBody().getChildViews()[2]},getList:function(){return this.getBody().getChildViews()[1]},$init:function(){this.dB={},this.$ready.push(this.eB)},eB:function(){var e=this.getList();if(e.config.dataFeed){var t=this;e.attachEvent("onAfterLoad",function(){t.setValue(t.s.value)}),e.getItem=function(e){return this.data.pull[e]||t.dB[e]}}this.config.master&&!this.config.selectAll&&this.getBody().getChildViews()[0].hide()},$enterKey:function(e,t){if(t.count&&t.count())if(e.isVisible()){var i=t.getSelectedId(!1,!0);i&&this._y(i),e.hide(!0)}else e.show(this.ae);else e.isVisible()&&e.hide(!0)},ke:function(){var e=this.getList();e.select&&e.unselect()},setValue:function(e){var t,i=this.getList(),n=[],r={},o=[];for(e=e||[],webix.isArray(e)?i.config.dataFeed&&(e=this.fB(e)):e=(""+e).split(this.config.separator),t=0;t<e.length;t++)r[e[t]]=1,i.getItem(e[t])&&(this.dB&&(this.dB[e[t]]=webix.copy(i.getItem(e[t]))),n.push(this.getItemText(e[t])));for(i.data.each(function(e){e.$checked?r[e.id]||(e.$checked=0,o.push(e.id)):r[e.id]&&(e.$checked=1,o.push(e.id))},this,!0),t=0;t<o.length;t++)i.refresh(o[t]);return this.s.value=e.length?e.join(this.config.separator):"",n},getValue:function(){return this.s.value},Rs:function(){var e,t;this.s.master&&(t=webix.$$(this.s.master),e=t.getInputNode()),(e=e||this.ae)&&e.focus()},fB:function(e){if(e&&webix.isArray(e)){for(var t=[],i=0;i<e.length;i++)e[i].id?(this.dB[e[i].id]=webix.copy(e[i]),t.push(e[i].id)):t.push(e[i]);e=t}return e}},webix.ui.multisuggest),webix.protoUI({name:"multicombo",$cssName:"text",defaults:{keepText:!1,separator:",",icon:!1,iconWidth:0,tagMode:!0,tagTemplate:function(e){return e.length?e.length+" item(s)":""},template:function(e,t){return t.yy(e,t)}},$init:function(){this.$view.className+=" webix_multicombo",this.attachEvent("onBeforeRender",function(){return this.zy||(this.zy=webix.skin.$active.inputHeight),!0}),this.attachEvent("onAfterRender",function(){this.ac=null}),this.IA=0},on_click:{webix_multicombo_delete:function(e,t,i){var n;return!this.s.readonly&&i&&(n=i.parentNode.getAttribute("optvalue"))&&this.Ay(n),!1}},_E:function(){var e=this.getInputNode().value;e&&this.s.newValues&&new Date-(this.getPopup().FG||0)>100&&this.HA(e),this.s.keepText||(this.xy=""),this.refresh()},Ay:function(e){var t=this.s.value,i=webix.$$(this.config.suggest);"string"==typeof t&&(t=t.split(this.s.separator)),t=webix.toArray(webix.copy(t)),t.remove(e),this.setValue(t.join(this.s.separator)),i&&i.s.selectAll&&i.getBody().q[0].setValue(0)},az:function(e){var t=webix.$$(this.config.suggest);if(t.getList().getItem(e)){var i=t.getValue();i&&"string"==typeof i&&(i=i.split(t.config.separator)),i=webix.toArray(i||[]),i.find(e)<0&&(i.push(e),t.setValue(i),this.setValue(t.getValue()))}},HA:function(e){var t,i=webix.$$(this.config.suggest),n=i.getList();if(e=e.replace(/^\s+|\s+$/g,""))for(var r in n.data.pull)i.getItemText(r)==e&&(t=r);!t&&e&&(t=n.add({id:e,value:e})),this.az(t)},Kt:function(e){var t=!webix.isArray(e)&&"object"==typeof e&&!e.name,i={view:"checksuggest",separator:this.config.separator,buttonText:this.config.buttonText,button:this.config.button},n=this;this.s.optionWidth&&(i.width=this.s.optionWidth),t&&webix.extend(i,e,!0);var r=webix.ui(i);this.s.optionWidth||(r.$customWidth=function(e){this.config.width=n.Ee(n.s)}),r.attachEvent("onBeforeShow",function(e,t,i){return this.s.master&&(this.setValue(webix.$$(this.s.master).config.value),webix.$$(this.s.master).getInputNode().value?(this.getList().refresh(),this.je=!0):this.getList().filter(),e.tagName&&"input"==e.tagName.toLowerCase())?(webix.ui.popup.prototype.show.apply(this,[e.parentNode,t,i]),!1):void 0});var o=r.getList();return"string"==typeof e?o.load(e):t||o.parse(e),r.be=function(){},r},yy:function(e,t){var i,n,r,o,a,s,l,h,c,u,d,f,p,m,g="",v="top"==this.s.labelPosition;return i="x"+webix.uid(),m=t.Ee(e),r=e.inputAlign||"left",l=this.zy-2*webix.skin.$active.inputPadding-2,a=this.xy||"",u="<ul class='webix_multicombo_listbox' style='line-height:"+l+"px'></ul>",s=Math.min(m,t.By||7),o="width: "+s+"px;height:"+l+"px;max-width:"+(m-20)+"px",p=e.readonly?" readonly ":"",n="<input id='"+i+"' role='combobox' aria-multiline='true' aria-label='"+webix.template.escape(e.label)+"' tabindex='0' type='text' class='webix_multicombo_input' "+p+" style='"+o+"' value='"+a+"'/>",h="<div class='webix_inp_static' onclick='' style='line-height:"+l+"px;width: "+m+"px;  text-align: "+r+";height:auto' >"+u+n+"</div>",c=t.$renderLabel(e,i),f=this.s.awidth-m-2*webix.skin.$active.inputPadding,d=(e.invalid?e.invalidMessage:"")||e.bottomLabel,d&&(g="<div class='webix_inp_bottom_label' style='width:"+m+"px;margin-left:"+Math.max(f,webix.skin.$active.inputPadding)+"px;'>"+d+"</div>"),v?c+"<div class='webix_el_box' style='width:"+this.s.awidth+"px; '>"+h+g+"</div>":"<div class='webix_el_box' style='width:"+this.s.awidth+"px; min-height:"+this.s.aheight+"px;'>"+c+h+g+"</div>"},Cy:function(){return this.re().getElementsByTagName("UL")[0]},oe:function(){var e=this.getPopup();if(e){var t=e?e.setValue(this.s.value):null;e.fB&&(this.s.value=e.fB(this.s.value));var i="",n=this.Cy(),r=t&&t.length;if(r){var o=this.zy-2*webix.skin.$active.inputPadding-8,a=this.s.value;if("string"==typeof a&&(a=a.split(this.s.separator)),this.s.tagMode)for(var s=0;s<t.length;s++){var l="<span>"+t[s]+"</span><span class='webix_multicombo_delete' role='button' aria-label='"+webix.i18n.aria.removeItem+"'>x</span>";i+="<li class='webix_multicombo_value' style='line-height:"+o+"px;' optvalue='"+a[s]+"'>"+l+"</li>"}else i+="<li class='webix_multicombo_tag' style='line-height:"+o+"px;'>"+this.s.tagTemplate(a)+"</li>"}n.innerHTML=i;var h=this.getInputNode();this.s.placeholder&&(r?(h.placeholder="",!h.value&&h.offsetWidth>20&&(h.style.width="20px")):h.value||(h.placeholder=this.s.placeholder,h.style.width=this.Ee(this.s)+"px")),!this.s.tagMode&&n.firstChild&&(h.style.width=this.lE()+"px")}this.Dy()},Ey:function(e){if(e=e||this.getInputNode())if(e.value.length){if(e.createTextRange){var t=e.createTextRange();t.moveStart("character",e.value.length),t.collapse(),t.select()}else if(e.selectionStart||"0"==e.selectionStart){var i=e.value.length;e.selectionStart=i,e.selectionEnd=i,e.focus()}}else e.focus()},Dy:function(){var e="top"==this.s.labelPosition,t=this.JA(),i=Math.max(t.offsetHeight+2*webix.skin.$active.inputPadding,this.zy);if(e&&(i+=this.le),(i+=this.s.bottomPadding||0)!=this.$getSize(0,0)[2]){var n=t.offsetHeight+(e?this.le:0);if(n==this.Fy?this.IA++:this.IA=0,this.IA>10)return!1;this.Fy=n;var r=this.getTopParentView();clearTimeout(r.kg),r.kg=webix.delay(function(){this.config.height=this.Fy+2*webix.skin.$active.inputPadding,this.resize(),this.Hy&&(this.Ey(this.getInputNode()),this.Hy=!1),this.bz&&(this.s.keepText?this.getInputNode().select():this.getInputNode().value="",this.bz=!1),(this.getPopup().isVisible()||this.Hy)&&this.getPopup().show(this.JA())},this)}this.bz&&this.getInputNode().select()},JA:function(){for(var e=this.re(),t=e.childNodes,i=0;i<t.length;i++)if(t[i].className&&-1!=t[i].className.indexOf("webix_inp_static"))return t[i];return e},getInputNode:function(){return this.re().getElementsByTagName("INPUT")[0]},$setValue:function(){this.se&&this.oe()},getValue:function(e){if("object"==typeof e&&e.options)return this.AD();var t=this.s.value;return t?"string"!=typeof t?t.join(this.s.separator):t:""},getText:function(){var e=this.s.value;if(!e)return"";"string"==typeof e&&(e=e.split(this.s.separator));for(var t=[],i=0;i<e.length;i++)t.push(this.getPopup().getItemText(e[i]));return t.join(this.s.separator)},AD:function(){var e,t,i,n=[],r=this.s.value;if(!r)return[];for("string"==typeof r&&(r=r.split(this.s.separator)),i=this.getPopup(),e=0;e<r.length;e++)(t=i.getList().getItem(r[e])||(i.dB?i.dB[r[e]]:null))&&n.push(t);return n},$setSize:function(e,t){var i=this.s;if(webix.ui.view.prototype.$setSize.call(this,e,t)){if(!e||!t)return;"top"==i.labelPosition&&(i.labelWidth=0),this.render()}},Iy:function(e){var t=document.createElement("span");t.className="webix_multicombo_input",t.style.visibility="visible",t.style.height="0px",t.innerHTML=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),document.body.appendChild(t);var i=t.offsetWidth+10;return document.body.removeChild(t),i},lE:function(){var e=this.Cy();return e.offsetWidth-e.firstChild.offsetWidth-17},De:function(){webix.UE(this.re(),"click",function(){this.getInputNode().focus()},{bind:this}),webix.UE(this.getInputNode(),"focus",function(){-1==this.re().className.indexOf("webix_focused")&&(this.re().className+=" webix_focused")},{bind:this}),webix.UE(this.getInputNode(),"blur",function(){this.re().className=this.re().className.replace(" webix_focused","")},{bind:this}),webix.UE(this.getInputNode(),"input",function(){!this.getInputNode().value&&this.xy&&(this.getInputNode().style.width="20px",this.By=20,this.xy="",this.Hy=!0,this.getPopup().show(this.JA()),this.Dy())},{bind:this}),webix.UE(this.getInputNode(),"keyup",function(e){var t,i,n=this.getInputNode();if(e=e||event,!this.s.placeholder||this.s.value||n.value?(i=t=this.Iy(n.value)+10,!this.s.tagMode&&this.Cy().firstChild&&(i=this.lE())):i=this.Ee(this.s),n.style.width=i+"px",t!=this.By?(this.s.keepText||13!=e.keyCode?this.xy=n.value:this.xy=!1,this.Hy=!0,this.By&&this.getPopup().show(this.JA()),this.By=t||i,this.Dy()):this.vA!=this.getPopup().$height&&this.getPopup().show(this.JA()),n.value.indexOf(this.s.separator)>-1&&this.s.tagMode){var r=n.value.replace(this.s.separator,"");if(r)if(this.s.newValues)this.HA(r);else{var o=this.getPopup().getItemId(r);o&&this.az(o)}this.s.keepText?(this.xy=r,n.value=r,this.bz=!0,this.Hy=!0,this.Dy()):n.value=""}},{bind:this}),webix.UE(this.getInputNode(),"keydown",function(e){if(this.bz=!1,this.isVisible()){e=e||event;var t=this.Cy().lastChild;if(this.vA=this.getPopup().$height,8==e.keyCode&&t&&(!this.getInputNode().value&&(new Date).valueOf()-(this.Jy||0)>100?(this.Hy=!0,this.Ay(t.getAttribute("optvalue"))):this.Jy=(new Date).valueOf()),13==e.keyCode||9==e.keyCode){var i=this.getInputNode(),n="",r=webix.$$(this.s.suggest);r.getList().getSelectedId()||(i.value&&(n=r.getSuggestion()),this.s.newValues?(13==e.keyCode&&(this.bz=!0),this.HA(i.value),this.s.keepText?this.xy=i.value:i.value=""):n&&(9==e.keyCode?(this.Hy=!1,this.xy="",this.By=10,i.value="",this.az(n)):(this.bz=!0,this.az(n),this.s.keepText?this.xy=i.value:i.value=""))),13==e.keyCode&&(this.bz=!0,this.Hy=!0,this.s.keepText?this.xy=i.value:i.value="")}}},{bind:this}),webix.$$(this.s.suggest).linkInput(this)}},webix.ui.richselect),webix.protoUI({name:"menu",Oh:"webix_menu",$init:function(e){this.data.qf=webix.bind(function(e){e.disabled&&this.data.addMark(e.id,"webix_disabled",!0,1,!0)},this),e.autowidth&&(this.KA=!0,delete e.autowidth),this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.Uq()},this)),this.attachEvent("onMouseMove",this.Vq),this.attachEvent("onMouseOut",function(e){this.Wq()&&"click"==this.s.openAction||!this.Xq&&e.relatedTarget&&this.Uq()}),this.attachEvent("onItemClick",function(e,t,i){var n=this.getItem(e);if(n){if(n.$template)return;var r=this.getTopMenu();if(!this.data.getMark(e,"webix_disabled")){if(!r.callEvent("onMenuItemClick",[e,t,i]))return void(t.showpopup=!0);this!=r&&r.Le(e,t,i),n.submenu||r.sH?(this!==r&&!webix.env.touch||"click"!=r.s.openAction||this.Yq(e,i),t.showpopup=!0):(r.Uq(!0),r.$q&&r.hide())}}}),this.attachEvent("onKeyPress",function(e,t){if(9===e)this.getTopMenu().Uq();else if(13===e||32===e){var i,n=this.getSelectedId();n&&(i=this.getItemNode(n)),i&&webix.html.triggerEvent(i,"MouseEvents","click")}}),this.data.attachEvent("onClearAll",function(){this._q=[]}),this.data._q=[],this.x.setAttribute("role","menubar")},sizeToContent:function(){if("y"==this.s.layout){var e=[],t=!1;this.data.each(function(i){e.push(this.jb(i)),i.submenu&&(t=!0)},this),this.config.width=webix.html.getTextSize(e,this.$view.className).width+16+2+(t?15:0),this.resize()}},getTopMenu:function(){for(var e=this;e.ar;)e=webix.$$(e.ar);return e},Rh:function(e){this.s.autoheight&&(e=this.count());for(var t=0,i=0;e>i;i++){var n=this.data.pull[this.data.order[i]];t+=n&&"Separator"==n.$template?4:this.type.height}return t},on_mouse_move:{},type:{css:"menu",width:"auto",aria:function(e,t,i){return'role="menuitem"'+(i&&i.webix_selected?' aria-selected="true" tabindex="0"':'tabindex="-1"')+(e.submenu||e.data?'aria-haspopup="true"':"")+(i&&i.webix_disabled?' aria-disabled="true"':"")},templateStart:function(e,t,i){if("Separator"===e.$template||"Spacer"===e.$template)return'<div webix_l_id="#id#" role="separator" tabindex="-1" class="webix_context_'+e.$template.toLowerCase()+'">';var n=(e.href?" href='"+e.href+"' ":"")+(e.target?" target='"+e.target+"' ":"");return webix.ui.list.prototype.type.templateStart(e,t,i).replace(/^<div/,"<a "+n)+((e.submenu||e.data)&&t.subsign?"<div class='webix_submenu_icon'></div>":"")},templateEnd:function(e,t,i){return"Separator"===e.$template||"Spacer"===e.$template?"</div>":"</a>"},templateSeparator:webix.template("<div class='sep_line'></div>"),templateSpacer:webix.template("<div></div>")},getMenu:function(e){if(this.data.pull[e])return this;for(var t in this.data.pull){var i=this.getItem(t);if(i.submenu){var n=this.br(i).getMenu(e);if(n)return n}}},getSubMenu:function(e){var t=this.getMenu(e),i=t.getItem(e);return i.submenu?t.br(i):null},getMenuItem:function(e){return this.getMenu(e).getItem(e)},br:function(e){var t=webix.$$(e.submenu);return t||(e.submenu=this.cr(e),t=webix.$$(e.submenu)),t},Vq:function(e,t,i){this.Wq()&&this.Yq(e,i)},Wq:function(){var e=this.getTopMenu();if("click"==e.s.openAction){if(webix.env.touch)return!1;var t=e.dr;return!(!t||!webix.$$(t).isVisible())}return!0},Yq:function(e,t){var i=this.getItem(e);if(i&&(this.Xq=null,this.dr&&i.submenu!=this.dr&&this.Uq(!0),i.submenu||i.data&&!this.config.hidden)){var n=this.br(i);if(this.data.getMark(e,"webix_disabled"))return;n.show(t,{pos:this.s.subMenuPos}),n.ar=this.s.id,this.dr=i.submenu}},disableItem:function(e){this.getMenu(e).addCss(e,"webix_disabled")},enableItem:function(e){this.getMenu(e).removeCss(e,"webix_disabled")},er:function(e,t){var i=this.data;i._q[e]!=t&&(i._q[e]=t,i.filter(function(e){return!i._q[e.id]}),this.resize())},hideItem:function(e){var t=this.getMenu(e);t&&t.er(e,!0)},showItem:function(e){var t=this.getMenu(e);return t?(t.er(e,!1),webix.ui.list.prototype.showItem.call(t,e)):void 0},Uq:function(e){if(this.dr){var t=webix.$$(this.dr);t.Uq&&t.Uq(e),(e||!t.gr)&&(t.hide(),this.dr=null)}},cr:function(e){var t={view:"submenu",data:e.submenu||e.data},i=this.getTopMenu().s.submenuConfig;i&&webix.extend(t,i,!0);var n=this.getMenuItem(e.id);n&&n.config&&webix.extend(t,n.config,!0);var r=webix.ui(t);return r.ar=this,r.s.id},OD:function(e,t,i){var n=this.getItem(e);if("Separator"==n.$template||"Spacer"==n.$template||this.data.getMark(e,"webix_disabled")){var r=this.getIndexById(e)+("up"==i?-1:1);return e=r>=0?this.getIdByIndex(r):null,e?this.OD(e,t,i):t}return e},$skin:function(){webix.ui.list.prototype.$skin.call(this),this.type.height=webix.skin.$active.menuHeight},defaults:{scroll:"",layout:"x",mouseEventDelay:100,subMenuPos:"bottom"}},webix.ui.list),webix.protoUI({name:"submenu",$init:function(){this.gd=webix.clone(this.hr),this.gd.A=this,this.attachEvent("onMouseOut",function(e){"click"!=this.getTopMenu().s.openAction&&(this.Xq||this.gr||!e.relatedTarget||this.hide())}),this.attachEvent("onMouseMoving",function(){this.ar&&(webix.$$(this.ar).Xq=!0)}),this.attachEvent("onBeforeShow",function(){this.getTopMenu().KA&&this.sizeToContent&&!this.isVisible()&&this.sizeToContent()}),this.y.setAttribute("role","menu")},$skin:function(){webix.ui.menu.prototype.$skin.call(this),webix.ui.popup.prototype.$skin.call(this),this.type.height=webix.skin.$active.menuHeight},hr:{$getSize:function(e,t){var i=1*this.A.s.height,n=1*this.A.s.width,r=webix.ui.menu.prototype.$getSize.call(this.A,e,t);return this.A.s.height=i,this.A.s.width=n,r},$setSize:function(e,t){this.A.s.scroll&&(this.A.ed.style.height=t+"px")},destructor:function(){this.A=null}},body_setter:function(){},getChildViews:function(){return[]},defaults:{width:150,subMenuPos:"right",layout:"y",autoheight:!0},type:{height:webix.skin.menuHeight,subsign:!0}},webix.ui.menu,webix.ui.popup),webix.ContextHelper={defaults:{padding:"4",hidden:!0},body_setter:function(e){return e=webix.ui.window.prototype.body_setter.call(this,e),this.gd.x.style.borderWidth="0px",e},attachTo:function(e){var t;t=e.on_context?e.attachEvent("onAfterContextMenu",webix.bind(this.ir,this)):webix.event(e,"contextmenu",this.jr,{bind:this}),this.attachEvent("onDestruct",function(){e.callEvent?e.detachEvent(t):webix.eventRemove(t),e=null})},getContext:function(){return this.nh},setContext:function(e){this.nh=e},jr:function(e){return this.nh=webix.toNode(e||event),this.kr(e)},ir:function(e,t,i){return this.nh={obj:webix.$$(t),id:e},this.kr(t)},kr:function(e){var t=this.show(e,null,!0);return!1===t?t:(webix.callEvent("onClick",[]),webix.html.preventEvent(e))},gr:!0,master_setter:function(e){return this.attachTo(e),null}},webix.protoUI({name:"context"},webix.ContextHelper,webix.ui.popup),webix.protoUI({name:"contextmenu",$q:!0,$init:function(e){e.submenuConfig&&webix.extend(e,e.submenuConfig)}},webix.ContextHelper,webix.ui.submenu),webix.protoUI({name:"tabbar",$init:function(){this.attachEvent("onKeyPress",this.DD)},$skin:function(){var e=webix.skin.$active,t=this.defaults;t.topOffset=e.tabTopOffset||0,t.tabOffset=void 0!==e.tabOffset?e.tabOffset:10,t.bottomOffset=e.tabBottomOffset||0,t.height=e.tabbarHeight,t.tabMargin=e.tabMargin,t.inputPadding=e.inputPadding,t.tabMinWidth=e.tabMinWidth||100,t.tabMoreWidth=e.tabMoreWidth||40},ut:function(){var e,t,i=this.s,n=this.OC||i.options,r=this.we-2*i.tabOffset,o=i.optionWidth||i.tabMinWidth;if(t=n.length,i.tabMinWidth&&o>r/t)return{max:parseInt(r/o,10)||1};if(!i.optionWidth)for(e=0;t>e;e++)n[e].width&&(r-=n[e].width+(e||i.type?0:i.tabMargin),t--);return{width:t?r/t:i.tabMinWidth}},Je:function(){var e=this.s;if(!e.tabbarPopup){var t={view:"popup",width:e.popupWidth||200,body:{view:"list",borderless:!0,select:!0,css:"webix_tab_list",autoheight:!0,yCount:e.yCount,type:{template:e.popupTemplate}}},i=webix.ui(t);i.getBody().attachEvent("onBeforeSelect",webix.bind(function(e){return e&&this.callEvent("onBeforeTabClick",[e])?(this.setValue(e),webix.$$(this.s.tabbarPopup).hide(),this.callEvent("onAfterTabClick",[e]),!0):void 0},this)),i.getBody().attachEvent("onAfterSelect",webix.bind(function(e){this.refresh()},this)),e.tabbarPopup=i.s.id,this.Ns.push(i)}this.Je=function(){}},getPopup:function(){return this.Je(),webix.$$(this.s.tabbarPopup)},moreTemplate_setter:webix.template,popupTemplate_setter:webix.template,defaults:{popupWidth:200,popupTemplate:"#value#",yCount:7,moreTemplate:'<span class="webix_icon fa-ellipsis-h"></span>',template:function(e,t){var i,n,r,o,a,s,l,h,c,u;if(t.OC=h=t.yC(e.options),h.length){t.Be(h),!e.value&&h.length&&(e.value=h[0].id),n="",e.tabOffset&&(n+="<div class='webix_tab_filler' style='width:"+e.tabOffset+"px;'>&nbsp;</div>"),i=t.we-2*e.tabOffset-(e.type?0:e.tabMargin*(h.length-1)),c=e.topOffset+e.bottomOffset;var d=t.ut();if(d.max&&d.max<h.length){var f=t.getPopup();f.hide();var p=f.getBody()||null;if(p)if(d.max){var m=!1;for(r=0;r<h.length&&!m;r++)if(h[r].id==e.value&&(m=!0,r+1>d.max)){var g=h.splice(r,1),v=h.splice(0,d.max-1).concat(g);h=v.concat(h)}p.clearAll(),p.parse(h.slice(d.max))}else p.clearAll()}else t.s.tabbarPopup&&webix.$$(t.s.tabbarPopup).hide();l=e.tabOffset;var b=!1;for(r=0;r<h.length&&!b;r++)d&&d.max?(d.max==r+1&&(b=!0),i=t.we-2*e.tabOffset-(!e.type&&d.max>1?e.tabMargin*(d.max-1):0),u=(i-e.tabMoreWidth)/d.max):u=d.width,u=h[r].width||e.optionWidth||u,l+=u+(r&&!e.type?e.tabMargin:0),e.tabMargin>0&&r&&!e.type&&(n+="<div class='webix_tab_filler' style='width:"+e.tabMargin+"px;'></div>"),n+=t.vt(h[r],u),b&&(n+='<div role="button" tabindex="0" aria-label="'+webix.i18n.aria.showTabs+'" class="webix_tab_more_icon" style="width:'+e.tabMoreWidth+'px;">'+e.moreTemplate(e,t)+"</div>",l+=e.tabMoreWidth);(o=t.bc-l)>0&&!e.type&&(n+="<div class='webix_tab_filler' style='width:"+o+"px;'>&nbsp;</div>")}else n="<div class='webix_tab_filler' style='width:"+t.we+"px; border-right:0px;'></div>";return a="",s=c&&!e.type?"height:"+(t.dc-c)+"px":"",e.topOffset&&!e.type&&(a+="<div class='webix_before_all_tabs' style='width:100%;height:"+e.topOffset+"px'></div>"),a+="<div style='"+s+"' role='tablist' class='webix_all_tabs "+(e.type?"webixtype_"+e.type:"")+"'>"+n+"</div>",e.bottomOffset&&!e.type&&(a+="<div class='webix_after_all_tabs' style='width:100%;height:"+e.bottomOffset+"px'></div>"),a}},Ie:function(){return this.$view.querySelectorAll(".webix_item_tab")},vt:function(e,t){var i,n="",r=this.config;if(e.id==r.value&&(n=" webix_selected"),e.css&&(n+=" "+e.css),t=e.width||t,i='<div class="webix_item_tab'+n+'" button_id="'+e.id+'" role="tab" aria-selected="'+(e.id==r.value?"true":"false")+'" tabindex="'+(e.id==r.value?"0":"-1")+'" style="width:'+t+'px;">',this.lr){var o=this.dc-2*r.inputPadding-2,a=this.dc-2,s=webix.extend({cheight:o,aheight:a},e);i+=this.lr(s)}else{i+=(e.icon?"<span class='webix_icon fa-"+e.icon+"'></span> ":"")+e.value}return(e.close||r.close)&&(i+="<span role='button' tabindex='0' aria-label='"+webix.i18n.aria.closeTab+"' class='webix_tab_close webix_icon fa-times'></span>"),i+="</div>"},ne:{image:"<div class='webix_img_btn_top' style='height:#cheight#px;background-image:url(#image#);'><div class='webix_img_btn_text'>#value#</div></div>",icon:"<div class='webix_img_btn' style='line-height:#cheight#px;height:#cheight#px;'><span class='webix_icon_btn fa-#icon#' style='max-width:#cheight#px;max-height:#cheight#px;'></span>#value#</div>",iconTop:"<div class='webix_img_btn_top' style='height:#cheight#px;width:100%;top:0px;text-align:center;'><span class='webix_icon fa-#icon#'></span><div class='webix_img_btn_text'>#value#</div></div>"},type_setter:function(e){return this.s.tabOffset=0,this.ne[e]&&(this.lr=webix.template(this.ne[e])),e}},webix.ui.segmented),webix.protoUI({name:"tabview",defaults:{type:"clean"},setValue:function(e){this.q[0].setValue(e)},getValue:function(){return this.q[0].getValue()},getTabbar:function(){return this.q[0]},getMultiview:function(){return this.q[1]},addView:function(e){var t=e.body.id=e.body.id||webix.uid();return this.getMultiview().addView(e.body),e.id=e.body.id,e.value=e.header,delete e.body,delete e.header,this.getTabbar().addOption(e),t},removeView:function(e){var t=this.getTabbar();t.removeOption(e),t.refresh()},$init:function(e){this.$ready.push(this.Nv);for(var t=e.cells,i=[],n=t.length-1;n>=0;n--){var r=t[n].body||t[n];r.id||(r.id="view"+webix.uid()),i[n]={value:t[n].header,id:r.id,close:t[n].close,width:t[n].width,hidden:!!t[n].hidden},t[n]=r}var o={view:"tabbar",multiview:!0},a={view:"multiview",cells:t,animate:!!e.animate};e.value&&(o.value=e.value),e.tabbar&&webix.extend(o,e.tabbar,!0),e.multiview&&webix.extend(a,e.multiview,!0),o.options=o.options||i,e.rows=[o,a],delete e.cells,delete e.tabs},Nv:function(){this.getTabbar().attachEvent("onOptionRemove",function(e){var t=webix.$$(e);if(t){var i=t.getParentView();i&&i.removeView(t)}})}},webix.ui.layout),webix.protoUI({name:"fieldset",defaults:{borderless:!0,$cssName:"webix_fieldset",paddingX:18,paddingY:30},$init:function(e){this.x.className+=" "+this.defaults.$cssName,this.x.innerHTML="<fieldset><legend></legend><div></div></fieldset>"},label_setter:function(e){return this.x.firstChild.childNodes[0].innerHTML=e,e},getChildViews:function(){return[this.os]},body_setter:function(e){return this.os=webix.ui(e,this.x.firstChild.childNodes[1]),this.os.Xb=this,e},getBody:function(){return this.os},resizeChildren:function(){var e=this.$width-this.s.paddingX,t=this.$height-this.s.paddingY,i=this.os.$getSize(0,0);i[0]>e&&(e=i[0]),i[2]>t&&(t=i[2]),this.os.$setSize(e,t),this.resize()},$getSize:function(e,t){e+=this.s.paddingX,t+=this.s.paddingY;var i=this.os.$getSize(e,t),n=this.ps=webix.ui.view.prototype.$getSize.call(this,e,t);return n[0]<i[0]&&(n[0]=i[0]),n[2]<i[2]&&(n[2]=i[2]),n[1]>i[1]&&(n[1]=i[1]),n[3]>i[3]&&(n[3]=i[3]),n},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&(e=Math.min(this.ps[1],e),t=Math.min(this.ps[3],t),this.os.$setSize(e-this.s.paddingX,t-this.s.paddingY))}},webix.ui.view),webix.protoUI({name:"forminput",defaults:{$cssName:"webix_forminput",labelWidth:80,labelAlign:"left"},setValue:function(e){this.os.setValue&&this.os.setValue(e)},focus:function(){this.os.focus()},getValue:function(){return this.os.setValue?this.os.getValue():void 0},value_setter:function(e){this.setValue(e)},getBody:function(){return this.os},$skin:function(){this.tF=webix.skin.$active.inputPadding,this.$E=webix.skin.$active.inputSpacing},$init:function(e){this.$ready.push(function(){var e=this.x.firstChild.childNodes[0];e.style.width=this.s.paddingX+"px",e.style.textAlign=this.s.labelAlign,this.s.labelWidth||(e.style.display="none")});var t=webix.isUndefined(e.labelWidth)?this.defaults.labelWidth:e.labelWidth;e.paddingX=t-2*this.tF+2*this.$E},setBottomText:function(e){var t=this.s;if(void 0!==e){if(t.bottomLabel==e)return;t.bottomLabel=e}var i=(t.invalid?t.invalidMessage:"")||t.bottomLabel;this._F&&webix.html.remove(this._F),i&&(this.$view.style.position="relative",this._F=webix.html.create("div",{class:"webix_inp_bottom_label",role:t.invalid?"alert":"","aria-relevant":"all",style:"position:absolute; bottom:0px; padding:2px; background: white; left:"+this.s.labelWidth+"px; "},i),this.x.appendChild(this._F))}},webix.ui.fieldset),webix.protoUI({name:"dbllist",defaults:{borderless:!0},$init:function(e){this.uF={},this.vF=webix.bind(function(e){return this.uF[e.id]},this),this.wF=webix.bind(function(e){return!this.uF[e.id]},this),this.$view.className+=" webix_dbllist",this.$ready.unshift(this.HE)},$onLoad:function(e,t){this.xF(function(){this.$$("left").data.driver=t,this.$$("left").parse(e),this.$$("right").data.driver=t,this.$$("right").parse(e)}),this.QE()},yF:function(){if(!1===this.s.buttons)return{width:10};var e=webix.i18n.dbllist,t=[this.zF("deselect_all",e.deselectAll),this.zF("select_all",e.selectAll),this.zF("deselect_one",e.deselectOne),this.zF("select_one",e.selectOne)],t={width:120,template:t.join(""),onClick:{dbllist_button:function(e,t,i){this.getTopParentView().AF(i.getAttribute("action"))}}};return this.s.buttons&&(t.template=this.s.buttons),t},zF:function(e,t){return"<button class='dbllist_button' action='"+e+"'>"+t+"</button>"},BF:function(e,t,i,n){var r={view:"list",select:"multiselect",multiselect:"touch",id:e,action:t,drag:!0,type:{margin:3,id:e},on:{onBeforeDrop:function(e){var t=e.from,i=e.to,n=t.getTopParentView();if(n===this.getTopParentView()){var r="select_one"!=i.s.action;n.select(e.source,r)}return!1},onItemDblClick:function(){return this.getTopParentView().AF(this.config.action)}}};return this.s.list&&webix.extend(r,this.s.list,!0),i&&(r={rows:[{view:"label",label:i},r]}),n?{rows:[r,{view:"label",height:20,label:n,css:"bottom_label"}]}:r},HE:function(){var e=[{margin:10,type:"clean",cols:[this.BF("left","select_one",this.s.labelLeft,this.s.labelBottomLeft),this.yF(),this.BF("right","deselect_one",this.s.labelRight,this.s.labelBottomRight)]}];this.cols_setter(e)},AF:function(e){var t=this,i=null,n=!1;"select_all"===e?(i=t.$$("left").data.order,n=!0):"select_one"===e?(i=t.$$("left").getSelectedId(!0),n=!0):"deselect_all"===e?(i=t.$$("right").data.order,n=!1):"deselect_one"===e&&(i=t.$$("right").getSelectedId(!0),n=!1),t.select(i,n)},select:function(e,t){var i;if("object"!=typeof e&&(e=[e]),t)for(i=0;i<e.length;i++)this.uF[e[i]]=!0;else for(i=0;i<e.length;i++)delete this.uF[e[i]];this.QE(),this.callEvent("onChange",[])},xF:function(e,t){webix.ui.freeze(webix.bind(e,this),!1),t&&(this.$$("left").s.autoheight||this.$$("right").s.autoheight)&&this.resize()},QE:function(){var e=this.$$("left"),t=this.$$("right");e&&this.xF(function(){e.filter(this.wF),t.filter(this.vF)},!0)},focus:function(){webix.UIManager.setFocus(this)},value_setter:function(e){this.setValue(e)},setValue:function(e){this.uF={},"object"!=typeof e&&(e=(""+e).split(","));for(var t=0;t<e.length;t++)this.uF[e[t]]=!0;this.QE()},getValue:function(){var e=[];for(var t in this.uF)e.push(t);return e.join(",")}},webix.AtomDataLoader,webix.IdSpace,webix.ui.layout),webix.i18n.dbllist={selectAll:"<span class='webix_icon fa-angle-double-right'></span>",selectOne:"<span class='webix_icon fa-angle-right'></span>",deselectAll:"<span class='webix_icon fa-angle-double-left'></span>",deselectOne:"<span class='webix_icon fa-angle-left'></span>"},function(){function e(e){return e.tagName?e.tagName.toLowerCase():null}function t(e,t){if(!e.getAttribute)return null;var i=e.getAttribute(t);return i?i.toLowerCase():null}function i(){var t=e(this);return r[t]?r[t](this):r.other(this)}function n(t){var i=e(this);return o[i]?o[i](this,t):o.other(this,t)}var r={radio:function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return e[t].value;return""},input:function(e){return"checkbox"===t(e,"type")?e.checked:e.value},textarea:function(e){return e.value},select:function(e){var t=e.selectedIndex;return e.options[t].value},other:function(e){return e.innerHTML}},o={radio:function(e,t){for(var i=0;i<e.length;i++)e[i].checked=e[i].value==t},input:function(e,i){"checkbox"===t(e,"type")?e.checked=!!i:e.value=i},textarea:function(e,t){e.value=t},select:function(e,t){e.value=t||(e.firstElementChild.value||t)},other:function(e,t){e.innerHTML=t}};webix.protoUI({name:"htmlform",$init:function(e){this.elements={},this.mr=!1,e.content&&(e.container==e.content||!e.container&&e.content==document.body)&&(this.nr=!0)},content_setter:function(e){if(e=webix.toNode(e),this.nr)for(;e.childNodes.length>1;)this.x.childNodes[0].appendChild(e.childNodes[0]);else this.x.childNodes[0].appendChild(e);return this.pc(),!0},render:function(){webix.ui.template.prototype.render.apply(this,arguments),this.pc()},pc:function(){var r=this.x.querySelectorAll("[name]");this.elements={};for(var o=0;o<r.length;o++){var a=r[o],s=t(a,"name");if(s){var l="button"===e(a),h=t(a,"type"),c=l||"button"===h||"submit"===h;if("radio"===h){var u=this.elements[s]||[];u.tagName="radio",u.push(a),a=u}this.elements[s]=a,a.getValue=i,a.setValue=n,a.Ce=!c,a.s={defaultValue:a.getValue()}}}return this.elements},Te:function(e,t){this.Qe(e,t);var i=this.x.querySelector('[name="'+e+'"]');i&&webix.html.addCss(i,"invalid")},Qe:function(e,t){var i=this.x.querySelector('[name="'+e+'"]');i&&webix.html.removeCss(i,"invalid")}},webix.ui.template,webix.Values)}(),function(){var e,t;webix.protoUI({name:"google-map",$init:function(e){this.$view.innerHTML="<div class='webix_map_content' style='width:100%;height:100%'></div>",this.w=this.$view.firstChild,this.iF=webix.promise.defer(),this.data.provideApi(this,!0),this.$ready.push(this.render)},getMap:function(e){return e?this.iF:this.eo},aG:function(t){return webix.bind(function(){"function"==typeof t&&t(),e=e||window.google,this.mE.call(this)},this)},render:function(){if(void 0===window.google||void 0===window.google.maps){if(!t){t=document.createElement("script"),t.type="text/javascript";var e=this.s,i=e.src||"//maps.google.com/maps/api/js";i+=-1===i.indexOf("?")?"?":"&",e.key&&(i+="&key="+e.key),e.libraries&&(i+="&libraries="+e.libraries),t.src=i,document.getElementsByTagName("head")[0].appendChild(t)}t.onload=this.aG(t.onload)}else this.aG()()},mE:function(){var t=this.config;this.isVisible(t.id)&&(this.eo=new e.maps.Map(this.w,{zoom:t.zoom,center:new e.maps.LatLng(t.center[0],t.center[1]),mapTypeId:e.maps.MapTypeId[t.mapType]}),this.iF.resolve(this.eo))},center_setter:function(t){return this.eo&&this.eo.setCenter(new e.maps.LatLng(t[0],t[1])),t},mapType_setter:function(t){return this.eo&&this.eo.setMapTypeId(e.maps.MapTypeId[t]),t},zoom_setter:function(e){return this.eo&&this.eo.setZoom(e),e},layerType_setter:function(e){return"heatmap"==e&&(this.config.libraries="visualization"),this.nE[e]&&(webix.extend(this,this.nE[e],!0),this.data.attachEvent("onStoreUpdated",webix.bind(function(){this.iF.then(webix.bind(function(){this.drawData.call(this,arguments)},this))},this))),e},defaults:{zoom:5,center:[39.5,-98.5],mapType:"ROADMAP",layerType:"marker"},$setSize:function(){webix.ui.view.prototype.$setSize.apply(this,arguments),this.eo&&e.maps.event.trigger(this.eo,"resize")},$onLoad:function(e){return!this.eo&&(this.iF.then(webix.bind(function(){this.parse(e)},this)),!0)},nE:{marker:{drawData:function(e,t,i){switch(i){case"add":case"update":t.$marker=this.oE(t);break;case"delete":t.$marker.setMap(null);break;default:this.data.each(function(e){e.$marker=this.oE(e)},this)}},clearAll:function(e){this.data.each(function(e){e.$marker.setMap(null)}),this.data.clearAll(e)},showItem:function(t){var i=this.getItem(t);this.eo.setCenter(new e.maps.LatLng(i.lat,i.lng))},oE:function(t){var i={};for(var n in t)i[n]=t[n];i.position=new e.maps.LatLng(t.lat,t.lng),i.map=t.hidden?null:this.eo;var r=t.$marker;return r?t.$marker.setMap(i.map):(r=new e.maps.Marker(i),this.h(r)),this.callEvent("onItemRender",[t]),r},h:function(e){var t=this;e.addListener("click",function(){t.callEvent("onItemClick",[this.id,this])}),e.getDraggable()&&(e.addListener("dragend",function(){t.pE(this,!0)}),e.addListener("drag",function(){t.pE(this)}))},pE:function(e,t){var i=this.getItem(e.id),n=e.getPosition(),r=t?"onAfterDrop":"onDrag";i.lat=n.lat(),i.lng=n.lng(),this.callEvent(r,[i.id,i])}},heatmap:{heatmapConfig_setter:function(e){return e=e||{}},drawData:function(){this.jF&&(this.jF.setMap(null),this.jF=null);var t=[];if(this.data.each(function(e){t.push(this.qE(e))},this),t.length){var i=webix.extend(this.config.heatmapConfig,{data:t,map:this.eo},!0);this.jF=new e.maps.visualization.HeatmapLayer(i),this.callEvent("onHeatMapRender",[this.jF])}},getHeatmap:function(){return this.jF},qE:function(t){var i={};for(var n in t)i[n]=t[n];return i.location=new e.maps.LatLng(t.lat,t.lng),i}}}},webix.DataLoader,webix.EventSystem,webix.ui.view)}(),function(){var e,t;webix.protoUI({name:"geochart",defaults:{chart:{displayMode:"auto",region:"world",resolution:"countries"}},$init:function(e){this.$view.innerHTML="<div class='webix_map_content' style='width:100%;height:100%'></div>",this.w=this.$view.firstChild,this.iF=webix.promise.defer(),e.chart=webix.extend(e.chart||{},this.defaults.chart),this.data.provideApi(this,!0),this.$ready.push(this.render),this.data.attachEvent("onClearAll",webix.bind(this.vG,this)),this.data.attachEvent("onStoreUpdated",webix.bind(this.wG,this))},getMap:function(e){return e?this.iF:this.eo},aG:function(t){return webix.bind(function(){"function"==typeof t&&t(),e=e||window.google,this.mE()},this)},render:function(){void 0===window.google||void 0===window.google.charts?(t||(t=document.createElement("script"),t.type="text/javascript",t.src="//www.gstatic.com/charts/loader.js",document.getElementsByTagName("head")[0].appendChild(t)),t.onload=this.aG(t.onload)):this.aG()()},mE:function(){e.visualization&&e.visualization.GeoChart?(this.eo=new e.visualization.GeoChart(this.w),this.xG(),this.iF.resolve(this.eo)):(e.charts.load("current",{packages:["geochart"],mapsApiKey:this.s.key}),e.charts.setOnLoadCallback(webix.bind(function(){this.mE()},this)))},$onLoad:function(e,t){return!this.eo&&(this.iF.then(webix.bind(function(){this.parse(e,this.s.datatype)},this)),!0)},wG:function(){if(!this.eo)return void(this.eo||this.iF.then(webix.bind(this.wG,this)));var t=this.fj&&this.fj.length?this.fj:this.yG(),i=[];if(this.data.each(function(e,n){for(var r=[],o=0;o<t.length;o++){var a=e[t[o].label];"number"==t[o].type?a*=1:"tooltip"==t[o].role&&(a=this.s.tooltip(e)),r.push(a)}i.push(r)},this),t.length){for(var n=new e.visualization.DataTable,r=0;r<t.length;r++)n.addColumn(t[r]);n.addRows(i);var o=new e.visualization.DataView(n);this.eo.draw(o,this.s.chart)}else this.eo.draw(e.visualization.arrayToDataTable([["",""]]),{})},setDisplayMode:function(e){this.s.chart.displayMode=e,this.refresh()},setRegion:function(e){this.s.chart.region=e,this.refresh()},refresh:function(){this.eo.clearChart(),this.wG()},tooltip_setter:function(e){var t=this.s.chart.tooltip;return this.s.chart.tooltip=webix.extend(t||{},{isHtml:!0}),webix.template(e)},$setSize:function(e,t){webix.ui.view.prototype.$setSize.apply(this,arguments)&&this.eo&&(webix.extend(this.s,{width:e,height:t}),this.refresh())},vG:function(){this.fj=null,this.wG()},zG:function(e,t){if(!e||webix.isUndefined(e[t]))return"string";var i=typeof e[t];return"string"!=i||isNaN(1*e[t])||(i="number"),i},yG:function(e){var t=this.s.columns||[],e=this.data.pull[this.data.order[0]];if(!t.length&&e)for(var i in e)"id"!==i&&t.push(i);for(var n=0;n<t.length;n++)"object"!=typeof t[n]&&(t[n]={type:this.zG(e,t[n]),label:t[n]});return this.s.tooltip&&t.push({type:"string",role:"tooltip",p:{html:!0}}),this.fj=t,t},xG:function(){e.visualization.events.addListener(this.eo,"error",webix.bind(function(){this.callEvent("onMapError",arguments)},this)),e.visualization.events.addListener(this.eo,"ready",webix.bind(function(){this.callEvent("onMapReady",arguments)},this)),e.visualization.events.addListener(this.eo,"regionClick",webix.bind(function(){this.callEvent("onRegionClick",arguments)},this)),e.visualization.events.addListener(this.eo,"select",webix.bind(function(){var e=this.eo.getSelection()[0],t=e||this.AG;if(t){var i=this.data.order[t.row];this.AG=t,this.callEvent("onItemClick",[i,!!e])}},this))}},webix.DataLoader,webix.EventSystem,webix.ui.view)}(),webix.dp=function(e,t){if("object"==typeof e&&e.s&&(e=e.s.id),webix.dp.ur[e]||t)return webix.dp.ur[e];("string"==typeof e||"number"==typeof e)&&(e={master:webix.$$(e)});var i=new webix.DataProcessor(e),n=i.s.master.s.id;return webix.dp.ur[n]=i,webix.$$(n).attachEvent("onDestruct",function(){webix.dp.ur[this.s.id]=null,delete webix.dp.ur[this.s.id]}),i},webix.dp.ur={},webix.dp.$$=function(e){return webix.dp.ur[e]},webix.DataProcessor=webix.proto({defaults:{autoupdate:!0,updateFromResponse:!1,mode:"post",operationName:"webix_operation",trackMove:!1},$init:function(){this.reset(),this.vr=!1,this.name="DataProcessor",this.$ready.push(this.Mi)},reset:function(){this.zr=[]},url_setter:function(e){var t="";if("string"==typeof e){var i=e.split("->");i.length>1&&(e=i[1],t=i[0])}else e&&e.mode&&(t=e.mode,e=e.url);return t?webix.proxy(t,e):e},master_setter:function(e){var t=e;return"DataStore"!=e.name&&(t=e.data),this.s.store=t,e},Mi:function(){this.s.store.attachEvent("onStoreUpdated",webix.bind(this.Ar,this)),this.s.store.attachEvent("onDataMove",webix.bind(this.Br,this))},ignore:function(e,t){var i=this.vr;this.vr=!0,e.call(t||this),this.vr=i},off:function(){this.vr=!0},on:function(){this.vr=!1},Cr:function(e){var t={};for(var i in e)0!==i.indexOf("$")&&(t[i]=e[i]);return t},save:function(e,t,i){t=t||"update",this.Dr(e,i||this.s.store.getItem(e),t)},Dr:function(e,t,i){if("object"==typeof e&&(e=""+e),!e||!0===this.vr||!i||"paint"==i)return!0;var n=this.s.store;n&&n.vf&&(t=n.vf(t));var r={id:e,data:this.Cr(t),operation:i};if(webix.isUndefined(t.$parent)||(r.data.parent=t.$parent),"delete"!=r.operation){var o=this.s.master;o&&o.data&&o.data.getMark&&o.data.getMark(e,"webix_invalid")&&(r.Er=!0),this.validate(null,r.data)||(r.Er=!0)}return this.Fr(r)&&this.zr.push(r),this.s.autoupdate&&this.send(),!0},Br:function(e,t,i,n){if(this.s.trackMove){var r=webix.copy(this.s.store.getItem(e));this.s.store.order,r.webix_move_index=t,r.webix_move_id=n,r.webix_move_parent=i,this.Dr(e,r,"order")}},Ar:function(e,t,i){switch(i){case"save":case"update":i="update";break;case"add":i="insert";break;case"delete":i="delete";break;default:return!0}return this.Dr(e,t,i)},Fr:function(e){for(var t=0;t<this.zr.length;t++){var i=this.zr[t];if(i.id==e.id)return"delete"==e.operation&&("insert"==i.operation?this.zr.splice(t,1):i.operation="delete"),i.data=e.data,i.Er=e.Er,!1}return!0},send:function(){this.Gr()},Gr:function(){if(this.s.url){for(var e=this.zr,t=[],i=this.s.url,n=0;n<e.length;n++){var r=e[n];if(!r.Hr&&!r.Er){var o=r.id,a=r.operation,s="object"!=typeof i||i.$proxy?i:i[a],l=s&&(s.$proxy||"function"==typeof s);if(s&&(this.s.store.uf&&this.s.store.uf(r.data),this.callEvent("onBefore"+a,[o,r]))){if(r.Hr=!0,!this.callEvent("onBeforeDataSend",[r]))return;r.data=this.Ir(r.data);var h=this.at({id:r.id,status:r.operation});s.$proxy?s.save?s.save(this.config.master,r,this,h):t.push(r):("insert"==a&&delete r.data.id,l?s(r.id,r.operation,r.data).then(function(e){e&&"function"==typeof e.json&&(e=e.json()),h.success("",e,-1)},function(e){h.error("",null,e)}):(r.data[this.s.operationName]=a,this.G(s,r.data,this.s.mode,a,h))),this.callEvent("onAfterDataSend",[r])}}}i.$proxy&&i.saveAll&&t.length&&i.saveAll(this.config.master,t,this,this.at({}))}},Ir:function(e){var t={};for(var i in e)0!==i.indexOf("$")&&(t[i]=e[i]);return t},G:function(e,t,i,n,r){return"function"==typeof e?e(t,n,r):void webix.ajax()[i](e,t,r)},at:function(e){var t=this;return{success:function(i,n,r){return t.xr(e,i,n,r)},error:function(i,n,r){return t.yr(e,i,n,r)}}},attachProgress:function(e,t,i){this.attachEvent("onBeforeDataSend",e),this.attachEvent("onAfterSync",t),this.attachEvent("onAfterSaveError",i),this.attachEvent("onLoadError",i)},yr:function(e,t,i,n){e?this.Jr(!0,e.id,!1,e.status,!1,{text:t,data:i,loader:n}):(this.callEvent("onLoadError",arguments),webix.callEvent("onLoadError",[t,i,n,this]))},Jr:function(e,t,i,n,r,o){var a=this.s.master,s=this.getItemState(t);if(s.Hr=!1,e){if(this.callEvent("onBeforeSaveError",[t,n,r,o]))return s.Er=!0,this.s.undoOnError&&a.s.undo&&(this.ignore(function(){a.undo(t)}),this.setItemState(t,!1)),void this.callEvent("onAfterSaveError",[t,n,r,o])}else this.setItemState(t,!1);i&&t!=i&&this.s.store.changeId(t,i),r&&"delete"!=n&&this.s.updateFromResponse&&this.ignore(function(){this.s.store.updateItem(i||t,r)}),this.s.undoOnError&&a.s.undo&&a.removeUndo(i||t),this.callEvent("onAfterSave",[r,t,o]),this.callEvent("onAfter"+n,[r,t,o])},processResult:function(e,t,i){var n=t&&("error"==t.status||"invalid"==t.status),r=!!t&&(t.newid||t.id);this.Jr(n,e.id,r,e.status,t,i)},xr:function(e,t,i,n){if(this.callEvent("onBeforeSync",[e,t,i,n]),-1===n)this.processResult(e,i,{});else{var r=this.s.url;if(r.$proxy&&r.result)r.result(e,this.s.master,this,t,i,n);else{var o;t&&(o=i.json(),!t||null!==o&&void 0!==o||(o={status:"error"})),this.processResult(e,o,{text:t,data:i,loader:n})}}this.callEvent("onAfterSync",[e,t,i,n])},escape:function(e){return this.s.escape?this.s.escape(e):encodeURIComponent(e)},getState:function(){if(!this.zr.length)return!1;for(var e=this.zr.length-1;e>=0;e--)if(this.zr[e].Hr)return"saving";return!0},getItemState:function(e){var t=this.bt(e);return this.zr[t]||null},setItemState:function(e,t){if(t)this.save(e,t);else{var i=this.bt(e);i>-1&&this.zr.splice(i,1)}},bt:function(e){for(var t=-1,i=0;i<this.zr.length;i++)if(this.zr[i].id==e){t=i;break}return t}},webix.Settings,webix.EventSystem,webix.ValidateData),function(){var e={};webix.jsonp=function(t,i,n,r){var o=webix.promise.defer(),a="webix_jsonp_"+webix.uid(),s=document.createElement("script");s.id=a,s.type="text/javascript";var l=document.getElementsByTagName("head")[0];"function"==typeof i&&(r=n,n=i,i={}),i||(i={}),i.jsonp="webix.jsonp."+a,webix.jsonp[a]=function(){n&&n.apply(r||window,arguments),o.resolve(arguments[0]),window.clearTimeout(e[a]),delete e[a],s.parentNode.removeChild(s),n=l=r=s=null,delete webix.jsonp[a]},e[a]=window.setTimeout(function(){o.reject(),delete webix.jsonp[a]},webix.jsonp.timer);var h=[];for(var c in i)h.push(c+"="+encodeURIComponent(i[c]));return t+=(-1==t.indexOf("?")?"?":"&")+h.join("&"),s.src=t,l.appendChild(s),o},webix.jsonp.timer=3e3}(),webix.markup={namespace:"x",attribute:"data-",dataTag:"li",Ys:/-([a-z])/g,Zs:function(e){return e[1].toUpperCase()},Lr:{width:!0,height:!0,gravity:!0,margin:!0,padding:!0,paddingX:!0,paddingY:!0,minWidth:!0,maxWidth:!0,minHeight:!0,maxHeight:!0,headerRowHeight:!0},AA:{disabled:!0,hidden:!0},Mr:function(e,t){return webix.ui.hasMethod(e,t)},init:function(e,t,i){e=e||document.body;for(var n=[],r=this.Nr(e),o=r.html,a=null,s=r.length-1;s>=0;s--)n[s]=r[s];for(var s=0;s<n.length;s++){var l;l=this.Or(n[s],o),l.$scope=i,a=this.Pr(l,n[s],o,t)}return a},parse:function(e,t){"string"==typeof e&&(e=webix.DataDriver[t||"xml"].toObject(e,e));var i=this.Nr(e,t);return this.Or(i[0],i.html)},Pr:function(e,t,i,n){return n?e.container=n:(e.container=t.parentNode,webix.html.remove(t)),this.Mr(e.view,"setPosition")&&delete e.container,webix.ui(e)},Nr:function(e){this.Qr=this.namespace?this.namespace+":":"",this.Rr=this.Qr+"ui";var t=e.getElementsByTagName(this.Rr);return!t.length&&e.documentElement&&e.documentElement.tagName==this.Rr&&(t=[e.documentElement]),!t.length&&this.namespace&&(t=e.getElementsByTagName("ui"),!t.length&&e.documentElement&&"ui"==e.documentElement.tagName&&(t=[e.documentElement])),t.length||(t=this.Sr(e),t.html=!0),t},Sr:function(e){if(e.getAttribute&&e.getAttribute(this.attribute+"view"))return[e];for(var t=e.querySelectorAll("["+this.attribute+"view]"),i=[],n=0;n<t.length;n++)t[n].parentNode.getAttribute(this.attribute+"view")||i.push(t[n]);return i},Or:function(e,t,i){var n=!1;if(!i){var r=this.Tr(e,t);if("ui"==r)for(var o=e.childNodes,a=0;a<o.length;a++)if(1==o[a].nodeType)return this.Or(o[a],t);i={view:r},t&&"table"==e.tagName.toLowerCase()&&(i.data=e,i.datatype="htmltable",n=!0)}for(var s="cols"==i.view||"rows"==i.view||this.Mr(i.view,"addView"),l=[],h=0,c=!(t||e.style),u=e.firstChild;u;){if(1==u.nodeType){var r=this.Tr(u,t);if("data"==r){h=1;var d=u;u=u.nextSibling,i.data=this.Ur(d,t);continue}if("config"==r){this.Vr(u,i,t);var f=u;u=u.nextSibling,webix.html.remove(f);continue}if("column"==r){h=1;var p=this.Wr(u,t);p.header=p.header||p.value,p.width=1*p.width||"",i.columns=i.columns||[],i.columns.push(p)}else if(r||s&&t){var m=this.Or(u,t,{view:r});"head"==m.view?i.head=m.rows?m.rows[0]:m.template:"body"==m.view?this.Mr(i.view,"addView")?l.push({body:m.rows?m.rows[0]:m.value,header:m.header||""}):i.body=m.rows?1==m.rows.length?m.rows[0]:{rows:m.rows}:m.value:l.push(m)}else if(c){h=1;var g=u.tagName;t&&(g=g.toLowerCase().replace(this.Ys,this.Zs)),i[g]=webix.DataDriver.xml.tagToObject(u)}}u=u.nextSibling}if(this.Xr(e,i,t),l.length)i.stack?i[i.stack]=l:this.Mr(i.view,"setValues")?i.elements=l:"rows"==i.view?(i.view="layout",i.rows=l):"cols"==i.view?(i.view="layout",i.cols=l):this.Mr(i.view,"setValue")?i.cells=l:this.Mr(i.view,"getBody")?i.body=1==l.length?l[0]:{rows:l}:i.rows=l;else if(!n&&!h)if(!t||i.template||i.view&&"template"!=i.view){var v=this.Yr(e,t);if(v){var b="template";this.Mr(i.view,"setValue")&&(b="value"),i[b]=i[b]||v}}else i.view="template",i.content=e;return i},Zr:function(e){return!(e.replace(/\s+/gm,"").length>0)},$r:{body:1,head:1,data:1,rows:1,cols:1,cells:1,elements:1,ui:1,column:1,config:1},Vr:function(e,t,i){var n=this.Xr(e,{});n.name?(t[n.name]=n,delete n.name):n.stack?t[n.stack]=[]:t=n;for(var r=e.childNodes,o=0;o<r.length;o++){var a=null;a=1==r[o].nodeType&&"config"==r[o].tagName.toLowerCase()&&r[o].attributes.length?this.Vr(r[o],n,i):r[o].innerHTML,n.stack&&a&&t[n.stack].push(a)}return t},Tr:function(e,t){if(t)return e.getAttribute(this.attribute+"view")||("config"==e.tagName.toLowerCase()?"config":null);var i=e.tagName.toLowerCase();if(this.namespace){if(0===i.indexOf(this.Qr)||e.scopeName==this.namespace)return i.replace(this.Qr,"")}else if(webix.ui[i]||this.$r[i])return i;return 0},Ur:function(e,t){for(var i=[],n=e.getElementsByTagName(webix.markup.dataTag),r=0;r<n.length;r++){var o=n[r];if(o.parentNode.parentNode.tagName!=webix.markup.dataTag){var a=this.Wr(o,t);o.className&&(a.$css=o.className),i.push(a)}}return webix.html.remove(e),i},Yr:function(e,t){return e.style?e.innerHTML:e.firstChild?e.firstChild.wholeText||e.firstChild.data||"":""},Wr:function(e,t){if(!t)return webix.DataDriver.xml.tagToObject(e);var i=this.Xr(e,{},t);return!i.value&&e.childNodes.length&&(i.value=this.Yr(e,t)),i},Xr:function(e,t,i){for(var n=e.attributes,r=0;r<n.length;r++){var o=n[r].name;if(i){if(0!==o.indexOf(this.attribute))continue;o=o.replace(this.attribute,"").replace(this.Ys,this.Zs)}var a=n[r].value;-1!=a.indexOf("json://")&&(a=JSON.parse(a.replace("json://",""))),this.Lr[o]?a=parseInt(a,10):this.AA[o]&&(a=a&&"false"!==a&&"0"!=a),t[o]=a}return t}},function(){function e(e,t){var n=e.callback;i(!1),e.box.parentNode.removeChild(e.box),d=e.box=null,n&&n(t,e.details)}function t(t){if(d){t=t||event;var i=t.which||event.keyCode;if(webix.message.keyboard)return(13==i||32==i)&&e(d,!0),27==i&&e(d,!1),t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0)}}function i(e){i.cover&&i.cover.parentNode||(i.cover=document.createElement("DIV"),i.cover.onkeydown=t,i.cover.className="webix_modal_cover",document.body.appendChild(i.cover)),i.cover.style.display=e?"inline-block":"none"}function n(e,t,i){return"<div role='button' tabindex='0' aria-label='"+e+"' class='webix_popup_button"+(i?" "+i:"")+"' result='"+t+"' ><div>"+e+"</div></div>"}function r(e){f.area||(f.area=document.createElement("DIV"),f.area.className="webix_message_area",f.area.style[f.position]="5px",document.body.appendChild(f.area)),f.area.setAttribute("role","alert"),f.area.setAttribute("aria-atomic",!0),f.hide(e.id);var t=document.createElement("DIV");return t.innerHTML="<div>"+e.text+"</div>",t.className="webix_info webix_"+e.type,t.onclick=function(){f.hide(e.id),e=null},webix.$testmode&&(t.className+=" webix_no_transition"),"bottom"==f.position&&f.area.firstChild?f.area.insertBefore(t,f.area.firstChild):f.area.appendChild(t),e.expire>0&&(f.timers[e.id]=window.setTimeout(function(){f.hide(e.id)},e.expire)),t.style.height=t.offsetHeight-2+"px",f.pull[e.id]=t,t=null,e.id}function o(t,i,r){var o=document.createElement("DIV");o.className=" webix_modal_box webix_"+t.type,o.setAttribute("webixbox",1),o.setAttribute("role","alertdialog"),o.setAttribute("aria-label",t.title||""),o.setAttribute("tabindex","0");var a="";if(t.width&&(o.style.width=t.width+(webix.rules.isNumber(t.width)?"px":"")),t.height&&(o.style.height=t.height+(webix.rules.isNumber(t.height)?"px":"")),t.title&&(a+='<div class="webix_popup_title">'+t.title+"</div>"),a+='<div class="webix_popup_text"><span>'+(t.content?"":t.text)+'</span></div><div  class="webix_popup_controls">',(i||t.ok)&&(a+=n(t.ok||"OK",!0,"confirm")),(r||t.cancel)&&(a+=n(t.cancel||"Cancel",!1)),t.buttons)for(var s=0;s<t.buttons.length;s++)a+=n(t.buttons[s],s);if(a+="</div>",o.innerHTML=a,t.content){var l=t.content;"string"==typeof l&&(l=document.getElementById(l)),"none"==l.style.display&&(l.style.display=""),o.childNodes[t.title?1:0].appendChild(l)}return o.onclick=function(i){i=i||event;var n=i.target||i.srcElement;if(n.className||(n=n.parentNode),-1!=n.className.indexOf("webix_popup_button")){var r=n.getAttribute("result");r="true"==r||"false"!=r&&r,e(t,r)}i.cancelBubble=!0},t.box=o,(i||r||t.buttons)&&(d=t),o}function a(e,n,r){var a=e.tagName?e:o(e,n,r);e.hidden||i(!0),webix.toNode(e.container||document.body).appendChild(a);var s=e.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-a.offsetWidth)/2)),l=e.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-a.offsetHeight)/2));return"top"==e.position?a.style.top="-3px":a.style.top=l+"px",a.style.left=s+"px",a.onkeydown=t,a.focus(),e.hidden&&webix.modalbox.hide(a),a}function s(e){return a(e,!0,!1)}function l(e){return a(e,!0,!0)}function h(e){return a(e)}function c(e,t,i){return"object"!=typeof e&&("function"==typeof t&&(i=t,t=""),e={text:e,type:t,callback:i}),e}function u(e,t,i,n){return"object"!=typeof e&&(e={text:e,type:t,expire:i,id:n}),e.id=e.id||f.uid(),e.expire=e.expire||f.expire,e}var d=null;webix.event(document,"keydown",t,{capture:!0}),webix.alert=function(){var e=c.apply(this,arguments);return e.type=e.type||"confirm",s(e)},webix.confirm=function(){var e=c.apply(this,arguments);return e.type=e.type||"alert",l(e)},webix.modalbox=function(){var e=c.apply(this,arguments);return e.type=e.type||"alert",h(e)},webix.modalbox.hide=function(e){if(e){for(;e&&e.getAttribute&&!e.getAttribute("webixbox");)e=e.parentNode;e&&e.parentNode.removeChild(e)}i(!1),d=null};var f=webix.message=function(e,t,i,n){switch(e=u.apply(this,arguments),e.type=e.type||"info",e.type.split("-")[0]){case"alert":return s(e);case"confirm":return l(e);case"modalbox":return h(e);default:return r(e)}};f.seed=(new Date).valueOf(),f.uid=function(){return f.seed++},f.expire=4e3,f.keyboard=!0,f.position="top",f.pull={},f.timers={},f.hideAll=function(){for(var e in f.pull)f.hide(e)},f.hide=function(e){var t=f.pull[e];t&&t.parentNode&&(window.setTimeout(function(){t.parentNode.removeChild(t),t=null},2e3),t.style.height=0,t.className+=" hidden",f.area.removeAttribute("role"),f.timers[e]&&window.clearTimeout(f.timers[e]),delete f.pull[e])}}(),webix.protoUI({name:"carousel",defaults:{scrollSpeed:"300ms",type:"clean",navigation:{},animate:!0},$init:function(e){this.x.className+=" webix_carousel",this.Ft=null,this.y=null,this.Mh=0,this.$ready.unshift(this.Gt),this.$ready.push(this.Mi)},addView:function(e,t){var i=this.Ft.addView(e,t);return this.bG(),i},removeView:function(e){this.Ft.removeView(e),this.bG()},Qb:function(e,t){this.Ft.Qb(e,t),this.bG()},bG:function(){this.q=this.Ft.q,this.Ch(),this.setActiveIndex(Math.min(this.Mh,this.q.length-1))},Gt:function(){this.Ft&&this.Ft.destructor&&this.Ft.destructor();var e="";this.config.cols?(e="cols",this.mc=0):(e="rows",this.mc=1);var t={borderless:!0,type:"clean"};t[e]=webix.copy(this.s[e]);for(var i=["type","margin","marginX","marginY","padding","paddingX","paddingY"],n={},r=0;r<7;r++)this.s[i[r]]&&(n[i[r]]=this.s[i[r]]);webix.extend(t,n,!0),this.Ft=webix.ui.A(t),this.Ft.Xb=this,this.x.appendChild(this.Ft.x),this.q=this.Ft.q,this.Ft.fc=webix.bind(webix.ui.carousel.prototype.fc,this),this.Ft.adjustScroll=webix.bind(webix.ui.carousel.prototype.adjustScroll,this),webix.attachEvent("onReconstruct",webix.bind(function(e){e==this.Ft&&this.Ht()},this)),this.w=this.x.firstChild},DD:function(e,t){this.s.navigation.items&&"tab"===t.target.getAttribute("role")&&this.PD(e,t),webix.ui.baseview.prototype.DD.call(this,e,t)},getChildViews:function(){return[this.Ft]},getLayout:function(){return this.Ft},Mi:function(){this.w.setAttribute("touch_scroll",this.mc?"y":"x"),this.Ft.attachEvent("onAfterScroll",webix.bind(function(e){this.callEvent("onShow",[this.getActiveId()])},this)),webix.ui.each(this.Ft,function(e){e.x.setAttribute("role","tabpanel")})},adjustScroll:function(e){var t,i=this.mc?this.dc:this.bc;return this.mc?(t=Math.round(e.f/i),e.f=t*i):(t=Math.round(e.e/i),e.e=t*i),this.Mh=-t,this.s.navigation&&this.Eh(),!0},fc:function(e){var t,i,n,r,o,a;for(n=-1,i=this.Ft,t=0;t<i.q.length;t++)if(i.q[t]==e){n=t;break}0>n||n==this.Mh||(this.Mh=n,r=i.mc?this.dc:this.bc,o=-(i.mc?0:n*r),a=-(i.mc?n*r:0),this.scrollTo(o,a),this.callEvent("onShow",[i.q[this.Mh].s.id]),this.s.navigation&&this.Ch())},scrollTo:function(e,t){webix.Touch&&webix.animate.isSupported()&&this.s.animate?webix.Touch.Nf(this.w,e,t,this.s.scrollSpeed||"100ms"):(this.w.style.marginLeft=e+"px",this.w.style.marginTop=t+"px")},navigation_setter:function(e){return this.E(e,{type:"corner",buttons:!0,items:!0}),e},showNext:function(){this.Mh<this.Ft.q.length-1&&this.setActiveIndex(this.Mh+1)},showPrev:function(){this.Mh>0&&this.setActiveIndex(this.Mh-1)},setActiveIndex:function(e){var t=this.Ft.q[e].s.id;webix.$$(t).show()},getActiveIndex:function(){return this.Mh},$getSize:function(e,t){var i=this.Ft.$getSize(0,0),n=webix.ui.view.prototype.$getSize.call(this,e,t);return this.Ft.mc?(n[0]=Math.max(n[0],i[0]),n[1]=Math.min(n[1],i[1])):(n[2]=Math.max(n[2],i[2]),n[3]=Math.min(n[3],i[3])),n},$setSize:function(e,t){var i=this.Ft,n=i.q.length,r=webix.ui.view.prototype.$setSize.call(this,e,t),o=this.dc*(i.mc?n:1),a=this.bc*(i.mc?1:n);r?(this.w.style.height=o+"px",this.w.style.width=a+"px",i.$setSize(a,o),this.Ht()):i.$setSize(a,o)},Ht:function(){var e=this.Ft,t=this.Mh||0,i=e.mc?this.dc:this.bc,n=-(e.mc?0:t*i),r=-(e.mc?t*i:0);this.scrollTo(n,r),this.s.navigation&&this.Ch()},getActiveId:function(){var e=this.Ft.q[this.Mh];return e?e.s.id:null},setActive:function(e){webix.$$(e).show()}},webix.EventSystem,webix.NavigationButtons,webix.ui.view),webix.type(webix.ui.list,{name:"uploader",template:"#name#  {common.removeIcon()}{common.percent()}<div style='float:right'>#sizetext#</div>",percent:function(e){return"transfer"==e.status?"<div style='width:60px; text-align:center; float:right'>"+e.percent+"%</div>":"<div class='webix_upload_"+e.status+"'><span class='"+("error"==e.status?"error_icon":"fa-check webix_icon")+"'></span></div>"},removeIcon:function(e){return"<div class='webix_remove_upload'><span class='cancel_icon'></span></div>"},on_click:{webix_remove_upload:function(e,t){webix.$$(this.config.uploader).files.remove(t)}}}),webix.UploadDriver={flash:{$render:function(e){window.swfobject||webix.require("legacy/swfobject.js",!0);var t=this.s;t.swfId=t.swfId||"webix_swf_"+webix.uid(),this.re().innerHTML+="<div class='webix_upload_flash'><div id='"+t.swfId+"'></div></div>",this._r=this.re().lastChild,swfobject.embedSWF(webix.codebase+"/legacy/uploader.swf",t.swfId,"100%","100%","9",null,{uploaderId:t.id,ID:t.swfId,enableLogs:t.enableLogs?"1":"",paramName:t.inputName,multiple:t.multiple?"Y":""},{wmode:"transparent"}),swfobject.getFlashPlayerVersion(),webix.UE(this.x,"click",webix.bind(function(){new Date-(this.ds||0)>250&&this.fileDialog()},this)),this.files.attachEvent("onBeforeDelete",webix.bind(this.as,this))},$applyFlash:function(e,t){return this[e].apply(this,t)},getSwfObject:function(){return swfobject.getObjectById(this.s.swfId)},fileDialog:function(){this.getSwfObject()&&this.getSwfObject().showDialog()},send:function(e){if("function"==typeof e&&(this.fs=e,e=0),!e){var t=this.files.data.order,i=!0;if(t.length)for(var n=0;n<t.length;n++)i=this.send(t[n])&&i;return void(i&&this.gs())}var r=this.files.getItem(e);if("client"!==r.status)return!1;if(r.status="transfer",this.getSwfObject()){var o=this.rE(r),a=this.s.formData||{};"function"==typeof a&&(a=a.call(this));var s=webix.extend(r.formData||{},a);this.getSwfObject().upload(e,o,s)}return!0},$beforeAddFileToQueue:function(e,t,i){var n=t.split(".").pop(),r=this.ks(i);return this.callEvent("onBeforeFileAdd",[{id:e,name:t,size:i,sizetext:r,type:n}])},$addFileToQueue:function(e,t,i){if(this.files.exists(e))return!1;this.s.multiple||this.files.clearAll();var n=t.split(".").pop(),r=this.ks(i),o={name:t,id:e,size:i,sizetext:r,type:n,status:"client"};this.files.add(o),this.callEvent("onAfterFileAdd",[o]),e&&this.s.autosend&&this.send(e)},stopUpload:function(e){this.as(e)},as:function(e){var t=this.files.getItem(e);"transfer"==t.status&&(this.getSwfObject().uploadStop(e),t.status="client")},bs:function(){},$onUploadComplete:function(){this.s.autosend&&this.gs()},$onUploadSuccess:function(e,t,i){var n=this.files.getItem(e);n&&(n.status="server",n.progress=100,i.text&&"string"==typeof i.text&&(webix.DataDriver.json.toObject(i.text),webix.extend(n,i,!0)),this.callEvent("onFileUpload",[n,i]),this.callEvent("onChange",[]),this.files.updateItem(e))},$onUploadFail:function(e){var t=this.files.getItem(e);t.status="error",delete t.percent,this.files.updateItem(e),this.callEvent("onFileUploadError",[t,""])}},html5:{$render:function(e){if(this._r)return void this.w.firstChild.appendChild(this._r);this.files.attachEvent("onBeforeDelete",this.as);var t={type:"file",class:"webix_hidden_upload",tabindex:-1};this.s.accept&&(t.accept=this.s.accept),this.s.multiple&&(t.multiple="true"),this.s.directory&&(t.webkitdirectory="true",t.mozdirectory="true",t.directory="true");var i=webix.html.create("input",t);this._r=this.w.firstChild.appendChild(i),webix.UE(this.x,"drop",webix.bind(function(e){this.bs(e),webix.html.preventEvent(e)},this)),webix.UE(i,"change",webix.bind(function(){if(this.cs(i.files),webix.env.isIE){var e=document.createElement("form");e.appendChild(this._r),e.reset(),this.w.firstChild.appendChild(i)}else i.value=""},this)),webix.UE(this.x,"click",webix.bind(function(){new Date-(this.ds||0)>250&&this.fileDialog()},this)),webix.UE(this.x,"dragenter",webix.html.preventEvent),webix.UE(this.x,"dragexit",webix.html.preventEvent),webix.UE(this.x,"dragover",webix.html.preventEvent)},kF:function(e){return e.isDirectory},lF:function(e,t,i){if(e.isFile)e.file(function(e){t.addFile(e,null,null,{name:i+"/"+e.name})});else if(e.isDirectory){var n=e.createReader();n.readEntries(function(n){for(var r=0;r<n.length;r++)t.lF(n[r],t,(i?i+"/":"")+e.name)})}},bs:function(e){var t=e.dataTransfer.files,i=e.dataTransfer.items;if(this.callEvent("onBeforeFileDrop",[t,e])){i=i||t;for(var n=0;n<i.length;n++){var r=i[n];this.s.directory&&r.webkitGetAsEntry&&(r=r.webkitGetAsEntry(),r.isDirectory)?this.lF(r,this,""):this.addFile(t[n])}}this.callEvent("onAfterFileDrop",[t,e])},fileDialog:function(e){this.ds=new Date,this.es=e;var t=this.x.getElementsByTagName("INPUT");t[t.length-1].click()},send:function(e){if("function"==typeof e&&(this.fs=e,e=0),!e){var t=this.files.data.order,i=!0;if(t.length)for(var n=0;n<t.length;n++)i=!this.send(t[n])&&i;return void(i&&this.gs())}var r=this.files.getItem(e);if("client"!==r.status)return!1;r.status="transfer";var o=new FormData;if(r.folder)for(var n=0;n<r.folder.length;n++)o.append(this.config.inputName+n,r.folder[n],r.folder[n].webkitRelativePath);else o.append(this.config.inputName,r.file,r.name),this.s.directory&&o.append(this.config.inputName+"_fullpath",r.name);var a={},s=this.s.formData||{};"function"==typeof s&&(s=s.call(this));var l=webix.extend(r.formData||{},s),h=new XMLHttpRequest,c=this.rE(r);if(webix.callEvent("onBeforeAjax",["POST",c,l,h,a,o])){for(var u in l)o.append(u,l[u]);r.xhr=h,h.upload.addEventListener("progress",webix.bind(function(t){this.$updateProgress(e,t.loaded/t.total*100)},this),!1),h.onload=webix.bind(function(t){h.aborted||this.is(e)},this),h.open("POST",c,!0);for(var u in a)h.setRequestHeader(u,a[u]);h.send(o)}return this.$updateProgress(e,0),!0},is:function(e){var t=this.files.getItem(e);if(t){var i=null;t.xhr.status<400&&(i=webix.DataDriver[this.s.datatype||"json"].toObject(t.xhr.responseText)),i&&"error"!=i.status?this.js(e,i):(t.status="error",delete t.percent,this.files.updateItem(e),this.callEvent("onFileUploadError",[t,i])),delete t.xhr}},stopUpload:function(e){webix.bind(this.as,this.files)(e)},as:function(e){var t=this.getItem(e);void 0!==t.xhr&&(t.xhr.aborted=!0,t.xhr.abort(),delete t.xhr,t.status="client")}}},webix.protoUI({name:"uploader",defaults:{autosend:!0,multiple:!0,inputName:"upload"},$cssName:"button",Ce:!0,on_click:{webix_hidden_upload:function(){return!1}},send:function(){},fileDialog:function(){},stopUpload:function(){},$init:function(e){var t=webix.UploadDriver.html5;this.files=new webix.DataCollection,this.Ns=[this.files],(webix.isUndefined(XMLHttpRequest)||webix.isUndefined((new XMLHttpRequest).upload))&&(t=webix.UploadDriver.flash),webix.extend(this,t,!0)},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&this.render()},apiOnly_setter:function(e){return webix.delay(this.render,this),this.$apiOnly=e},cs:function(e){for(var t=0;t<e.length;t++)this.addFile(e[t])},link_setter:function(e){return e&&webix.delay(function(){var e=webix.$$(this.s.link);if(!e){var t=this.getTopParentView();t.$$&&(e=t.$$(this.s.link))}e.sync&&e.filter?e.sync(this.files):e.setValues&&this.files.data.attachEvent("onStoreUpdated",function(){e.setValues(this)}),e.s.uploader=this.s.id},this),e},addFile:function(e,t,i,n){var r=null;"object"==typeof e&&(r=e,e=r.name,t=r.size);var o=this.ks(t);i=i||e.split(".").pop();var a={file:r,name:e,id:webix.uid(),size:t,sizetext:o,type:i,context:this.es,status:"client"};if(this.s.directory&&r.webkitRelativePath&&(a.name=r.webkitRelativePath),n&&webix.extend(a,n,!0),this.callEvent("onBeforeFileAdd",[a])){this.s.multiple||this.files.clearAll();var s=this.files.add(a);this.callEvent("onAfterFileAdd",[a]),s&&this.s.autosend&&this.send(s)}return a},rE:function(e){var t=this.s.upload,i=webix.extend(e.urlData||{},this.s.urlData||{});if(t&&i){var n=[];for(var r in i)n.push(encodeURIComponent(r)+"="+encodeURIComponent(i[r]));n.length&&(t+=(-1==t.indexOf("?")?"?":"&")+n.join("&"))}return t},addDropZone:function(e,t){var i=webix.toNode(e),n="";t&&(n=" "+webix.html.createCss({content:'"'+t+'"'},":before"));var r="webix_drop_file"+n,o=null;webix.UE(i,"dragover",webix.html.preventEvent),webix.UE(i,"dragover",function(e){webix.html.addCss(i,r,!0),o&&(clearTimeout(o),o=null)}),webix.UE(i,"dragleave",function(e){o=setTimeout(function(){webix.html.removeCss(i,r)},150)}),webix.UE(i,"drop",webix.bind(function(e){return webix.html.removeCss(i,r),this.bs(e),webix.html.preventEvent(e)},this))},ks:function(e){for(var t=0;e>1024;)t++,e/=1024;return Math.round(100*e)/100+" "+webix.i18n.fileSize[t]},js:function(e,t){var i=this.files.getItem(e);webix.extend(i,t,!0),i.status="server",i.progress=100,this.callEvent("onFileUpload",[i,t]),this.callEvent("onChange",[]),this.files.updateItem(e),this.isUploaded()&&this.gs(t)},gs:function(e){this.callEvent("onUploadComplete",[e]),this.fs&&(this.fs.call(this,e),this.fs=0)},isUploaded:function(){for(var e=this.files.data.order,t=0;t<e.length;t++)if("server"!=this.files.getItem(e[t]).status)return!1;return!0},$onUploadComplete:function(){},$updateProgress:function(e,t){this.files.getItem(e).percent=Math.round(t),this.files.updateItem(e)},setValue:function(e){"string"==typeof e&&e&&(e={value:e,status:"server"}),this.files.clearAll(),e&&this.files.parse(e),this.callEvent("onChange",[])},getValue:function(){var e=[];return this.files.data.each(function(t){"server"==t.status&&e.push(t.value||t.name)}),e.join(",")}},webix.ui.button),webix.html.addMeta=function(e,t){document.getElementsByTagName("head").item(0).appendChild(webix.html.create("meta",{name:e,content:t}))},function(){var e=function(){var e=!!(window.orientation%180);webix.ui.orientation!==e&&(webix.ui.orientation=e,webix.callEvent("onRotate",[e]))};webix.env.touch&&(webix.ui.orientation=!!((webix.isUndefined(window.orientation)?90:window.orientation)%180),webix.event(window,"onorientationchange"in window?"orientationchange":"resize",e)),webix.ui.fullScreen=function(){if(webix.env.touch){webix.html.addMeta("apple-mobile-web-app-capable","yes"),webix.html.addMeta("viewport","initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no");var t=function(){var e=window.innerWidth,t=window.innerHeight;t&&(document.body.style.height=t+"px",document.body.style.width=e+"px"),webix.ui.PG=!1,webix.ui.resize()},i=function(){webix.ui.PG=!0,webix.delay(t,null,[],500)};webix.attachEvent("onRotate",i),e(),webix.delay(i)}}}(),webix.history={track:function(e,t){if(this.ls(e,t),this.cG&&webix.$$(this.dG).detachEvent(this.cG),e){this.dG=e;var i=webix.$$(e),n=function(){webix.history.ms||i.getValue&&webix.history.push(e,i.getValue())};i.getActiveId?this.cG=i.attachEvent("onViewChange",n):this.cG=i.attachEvent("onChange",n)}},ns:function(e,t){webix.history.ms=1,e=webix.$$(e),e.callEvent("onBeforeHistoryNav",[t])&&e.setValue&&e.setValue(t),webix.history.ms=0},push:function(e,t,i){e=webix.$$(e);var n="";t&&(n="#!/"+t),webix.isUndefined(i)&&(i=e.getValue?e.getValue():t),window.history.pushState({webix:!0,id:e.s.id,value:i},"",n)},ls:function(e,t){webix.event(window,"popstate",function(e){e.state&&e.state.webix&&webix.history.ns(e.state.id,e.state.value)});var i=window.location.hash;webix.noanimate=!0,i&&0===i.indexOf("#!/")?webix.history.ns(e,i.replace("#!/","")):t&&(webix.history.push(e,t),webix.history.ns(e,t)),webix.noanimate=!1,this.ls=function(){}}},webix.protoUI({name:"slider",$touchCapture:!0,defaults:{min:0,max:100,value:50,step:1,title:!1,moveTitle:!0,template:function(e,t){var i=t.qs="x"+webix.uid(),n="",r="<div class='webix_slider_title"+(e.moveTitle?" webix_slider_move":"")+"'"+(!e.moveTitle&&e.vertical?" style='line-height:"+(e.aheight-2*e.inputPadding)+"px;'":"")+"></div>",o="<div class='webix_slider_left'>&nbsp;</div>",a="<div class='webix_slider_right'></div>",s="<div class='webix_slider_handle' role='slider' aria-label='"+e.label+(e.title?" "+e.title(e):"")+"' aria-valuemax='"+e.max+"' aria-valuemin='"+e.min+"' aria-valuenow='"+e.value+"' tabindex='0' id='"+i+"'>&nbsp;</div>";return n=e.vertical?"<div class='webix_slider_box'>"+a+o+s+"</div>"+r:r+"<div class='webix_slider_box'>"+o+a+s+"</div>",t.$renderInput(e,n,i)}},type_setter:function(e){this.x.className+=" webix_slider_"+e},title_setter:function(e){return"string"==typeof e?webix.template(e):e},rs:function(){return this.$view.querySelector(".webix_slider_handle")},oe:function(){var e=this.rs(),t=this.s;if(e){var i=t.vertical?this.dc:this.Ee(t),n=t.value%t.step?Math.round(t.value/t.step)*t.step:t.value,r=t.max-t.min;n=Math.max(Math.min(n,t.max),t.min),n=t.vertical?r-(n-t.min):n-t.min;var o=Math.ceil((i-2*this.mF)*n/r),a=i-2*this.mF-o,s=t.vertical?"top":"left",l=t.vertical?"height":"width";e.style[s]=this.mF+o-this.nF/2+"px",e.parentNode.style[l]=i+"px",a=Math.min(Math.max(a,2*this.oF),i-2*this.mF-2*this.oF),o=Math.min(Math.max(o,2*this.oF),i-2*this.mF-2*this.oF);var h=e.previousSibling;h.style[l]=a+"px";h.previousSibling.style[l]=o+"px",this.BG(e,o,a,s)}},BG:function(e,t,i,n){var r=this.s;if(this.s.title){var o=e.parentNode[r.vertical?"nextSibling":"previousSibling"];if(o.innerHTML=this.s.title(this.s,this),this.s.moveTitle){var a=0;if(r.vertical)a=t+2*this.oF-this.nF/2;else{var s=o.clientWidth/2,l=s>t?s-t-2*this.oF:0,h=s>i?s-i-2*this.oF-this.nF/2:0;a=this.mF+t-s+l-h}o.style[n]=a+"px"}}},sE:function(){this.rs().setAttribute("aria-valuenow",this.s.value)},refresh:function(){var e=this.rs();e&&(this.sE(),this.s.title&&e.setAttribute("aria-label",this.s.label+" "+this.s.title(this.s,this)),this.oe())},$setValue:function(){this.refresh()},$getValue:function(){return this.s.value},$init:function(e){webix.env.touch?this.attachEvent("onTouchStart",webix.bind(this.ss,this)):webix.UE(this.x,"mousedown",webix.bind(this.ss,this)),webix.UE(this.$view,"keydown",webix.bind(this.tE,this)),e.vertical&&(e.height=e.height||webix.skin.$active.vSliderHeight,this.x.className+=" webix_slider_vertical",this.mF=webix.skin.$active.vSliderPadding)},$skin:function(){this.nF=webix.skin.$active.sliderHandleWidth,this.mF=webix.skin.$active.sliderPadding,this.oF=webix.skin.$active.sliderBorder},tE:function(e){var t=e.keyCode,i=this.s,n=i.value;if(t>32&&41>t){webix.html.preventEvent(e);var r=e.target||e.srcElement,o=/webix_slider_handle_(\d)/.exec(r.className);if(this.My=o?parseInt(o[1],10):-1,o&&(n=i.value[this.My]),n=n<i.min?i.min:n>i.max?i.max:n,35===t)n=i.min;else if(36===t)n=i.max;else{var a=37===t||40===t||34===t?-1:1;(33===t||34===t||i.step>1)&&(a*=i.step),n=1*n+a}if(o){var s=i.value[this.My?0:1];n=this.My&&s>=n||!this.My&&n>=s?s:n}if(n>=i.min&&n<=i.max){if(o){for(var l=[],h=0;h<i.value.length;h++)l[h]=h===this.My?n:i.value[h];n=l}this.setValue(n),this.My=-1}}},ss:function(e){var t=e.target||e.srcElement;this.Ky&&this.Ky(e);var i=this.s.value;return webix.isArray(i)&&(i=webix.copy(i)),-1!=t.className.indexOf("webix_slider_handle")?(this.$x=i,this.ts.apply(this,arguments)):void(-1!=t.className.indexOf("webix_slider")&&(this.$x=i,this.s.value=this.us.apply(this,arguments),this.ts(e)))},ts:function(e){webix.env.touch?this.vs=[this.attachEvent("onTouchMove",webix.bind(this.ws,this)),this.attachEvent("onTouchEnd",webix.bind(this.xs,this))]:this.vs=[webix.event(document.body,"mousemove",webix.bind(this.ws,this)),webix.event(window,"mouseup",webix.bind(this.xs,this))],webix.html.addCss(document.body,"webix_noselect")},xs:function(e){this.vs&&(webix.env.touch?(webix.detachEvent(this.vs[0]),webix.detachEvent(this.vs[1])):(webix.eventRemove(this.vs[0]),webix.eventRemove(this.vs[1])),this.vs=[]),webix.html.removeCss(document.body,"webix_noselect");var t=this.s.value;webix.isArray(t)&&(t=webix.copy(t)),this.s.value=this.$x,this.setValue(t),this.rs(this.My).focus(),this.My=-1},ws:function(e){this.s.value=this.us.apply(this,arguments),this.refresh(),this.callEvent("onSliderDrag",[])},us:function(e,t){var i=0,n=this.s.vertical?"y":"x";return i=webix.env.touch?t?t[n]:e[n]:webix.html.pos(e)[n],this.ys(i)},ys:function(e){var t=this.s,i=t.max-t.min,n=t.vertical?"y":"x",r=webix.html.offset(this.rs().parentNode)[n]+this.mF,o=(t.vertical?this.dc:this.Ee(t))-2*this.mF,a=o?(e-r)*i/o:0;return t.vertical&&(a=i-a),a=Math.round((a+t.min)/t.step)*t.step,Math.max(Math.min(a,t.max),t.min)},De:function(){}},webix.ui.text),webix.protoUI({name:"rangeslider",$cssName:"slider webix_rangeslider",defaults:{separator:",",value:"20,80",template:function(e,t){var i="x"+webix.uid();t.qs=[i+"_0",i+"_1"];var n="role='slider' aria-label='"+e.label+(e.title?" "+e.title(e):"")+"' aria-valuemax='"+e.max+"' aria-valuemin='"+e.min+"' tabindex='0'",r="<div class='webix_slider_handle webix_slider_handle_0' id='"+t.qs[0]+"' "+n+" aria-valuenow='"+e.value[0]+"'>&nbsp;</div>";r+="<div class='webix_slider_handle webix_slider_handle_1' id='"+t.qs[1]+"' "+n+" aria-valuenow='"+e.value[1]+"'>&nbsp;</div>";var o="<div class='webix_slider_title"+(e.moveTitle?" webix_slider_move":"")+"'"+(!e.moveTitle&&e.vertical?" style='line-height:"+(e.aheight-t.mF-2*e.inputPadding)+"px;'":"")+"></div>";e.moveTitle&&(o="<div class='webix_slider_title_box'>"+(o+o)+"</div>");var a="<div class='webix_slider_right'>&nbsp;</div><div class='webix_slider_left'></div>",s="";return s=e.vertical?"<div class='webix_slider_box'>"+a+r+"</div>"+o:o+"<div class='webix_slider_box'>"+a+r+"</div>",t.$renderInput(e,s,i)}},value_setter:function(e){return webix.isArray(e)||(e=(""+e).split(this.s.separator)),e.length<2&&(e[1]=e[0]),e[0]=parseFloat(e[0]),e[1]=parseFloat(e[1]),e},rs:function(e){return e=e&&e>=0?e:0,this.$view.querySelector(".webix_slider_handle_"+(e||0))},Ly:function(e,t){var i,n,r;return i=this.s,n=i.max-i.min,r=i.value[t]%i.step?Math.round(i.value[t]/i.step)*i.step:i.value[t],r=Math.max(Math.min(r,i.max),i.min),Math.ceil((e-2*this.mF)*(r-i.min)/n)},tH:function(e,t,i){var n=this.mF+t-this.nF/2*(i?-1:1);return(n=i?e-n:n)+"px"},uH:function(e,t,i,n){var r=t+this.mF+2*this.oF;return n&&(r=e-r-i),r+"px"},oe:function(){var e,t,i,n,r,o,a,s,l,h,c;t=this.rs(0),i=this.rs(1),e=this.s,webix.isArray(e.value)||this.define("value",e.value),t&&(l=e.vertical?"height":"width",c=e.vertical?"top":"left",h=e.vertical?this.dc:this.Ee(e),o=h-2*this.mF-2*this.oF,n=this.Ly(h,0),r=this.Ly(h,1),a=r-n,t.style[c]=this.tH(h,n,e.vertical),i.style[c]=this.tH(h,r,e.vertical),s=t.parentNode,s.style[l]=h+"px",s.firstChild.style[l]=o+"px",s.childNodes[1].style[l]=a+"px",s.childNodes[1].style[c]=this.uH(h,n,a,e.vertical),this.BG(t,[n,r],o,c))},vH:0,wH:function(e,t){webix.isUndefined(this.vH)||(e[this.vH].style.visibility="visible"),webix.isUndefined(t)||(e[t].style.visibility="hidden",this.vH=t)},BG:function(e,t,i,n){var r=this.s;if(this.s.title){var o=e.parentNode,a=r.vertical?"nextSibling":"previousSibling";if(r.moveTitle){for(var s=o[a].childNodes,l=[],h=0;2>h;h++)l.push(this.xH(s[h],r.value[h],t[h],i,n,h));var c=r.vertical?l[0]-l[1]-this.nF:l[1]-l[0],u=r.vertical?"clientHeight":"clientWidth";s[0][u]/2+s[1][u]/2>c?this.wH(s,webix.isUndefined(this.My)?0:this.My?0:1):this.wH(s);for(var h=0;2>h;h++)s[h].style[n]=l[h]+"px"}else o[a].innerHTML=this.s.title(this.s,this)}},xH:function(e,t,i,n,r,o){e.innerHTML=this.s.title({value:t},this);var a=e.clientWidth/2,s=0;return this.s.vertical?s=n-i-this.nF/2-(o?this.mF+this.config.inputPadding:0)+2*this.oF:(s=i+this.nF/2+2*this.oF-a,s=!o&&a>i?a-i+s:s,s=o&&a+i>n?s-a+(n-i):s),s},sE:function(){for(var e=0;2>e;e++)this.rs(e).setAttribute("aria-valuenow",this.s.value[e])},Ky:function(e){var t=e.target||e.srcElement,i=/webix_slider_handle_(\d)/.exec(t.className);this.My=i?parseInt(i[1],10):-1,i&&this.Ny(this.My)},setValue:function(e){var t=this.s.value,i="object"==typeof e?e.join(this.s.separator):e;return t.join(this.s.separator)!=i&&(this.s.value=e,this.se&&this.$setValue(e),void this.callEvent("onChange",[e,t]))},$getValue:function(){var e=this.s.value;return this.s.stringResult?e.join(this.s.separator):e},Ny:function(e){var t=this.rs(e),i=this.rs(1-e);-1==t.className.indexOf("webix_slider_active")&&(t.className+=" webix_slider_active"),i.className=i.className.replace(" webix_slider_active","")},ys:function(e){var t=this.s,i=t.value,n=t.max-t.min,r=t.vertical?"y":"x",o=webix.html.offset(this.rs().parentNode)[r],a=Math.ceil((e-o)*n/(t.vertical?this.dc:this.Ee(t)));a=Math.round((a+t.min)/t.step)*t.step,t.vertical&&(a=n-a);var s=null,l=webix.html.offset(this.rs(0))[r],h=webix.html.offset(this.rs(1))[r];if(l!=h||t.value[0]!=t.min&&t.value[0]!=t.max)if(this.My>=0)s=this.My;else if(l==h)s=l>e?0:1;else{var c=Math.abs(l-e),u=Math.abs(h-e);s=u>c?0:1,this.My=s}else s=t.value[0]==t.min?1:0,this.Ny(s);return i[s]=s?Math.max(Math.min(a,t.max),i[0]):Math.max(Math.min(a,i[1]),t.min),i}},webix.ui.slider),webix.proxy.offline={$proxy:!0,storage:webix.storage.local,cache:!1,data:"",zs:function(){this.cache||webix.env.offline||(webix.callEvent("onOfflineMode",[]),webix.env.offline=!0)},As:function(){!this.cache&&webix.env.offline&&(webix.env.offline=!1,webix.callEvent("onOnlineMode",[]))},load:function(e,t){var i={error:function(){var i=this.getCache()||this.data,n={responseText:i},r=webix.ajax.prototype.J(n);this.zs(),webix.ajax.$callback(e,t,i,r,n)},success:function(i,n,r){this.As(),webix.ajax.$callback(e,t,i,n,r),this.setCache(i)}};this.cache&&this.getCache()?i.error.call(this):this.source.$proxy?this.source.load(this,i):webix.ajax(this.source,i,this)},getCache:function(){return this.storage.get(this.Bs())},clearCache:function(){this.storage.remove(this.Bs())},setCache:function(e){this.storage.put(this.Bs(),e)},Bs:function(){return this.source.$proxy?this.source.source+"_$proxy$_data":this.source+"_$proxy$_data"},saveAll:function(e,t,i,n){this.setCache(e.serialize()),webix.ajax.$callback(e,n,"",t)},result:function(e,t,i,n,r){for(var o=0;o<r.length;o++)i.processResult({id:r[o].id,status:r[o].operation},{},{})}},webix.proxy.cache={init:function(){webix.extend(this,webix.proxy.offline)},cache:!0},webix.proxy.local={init:function(){webix.extend(this,webix.proxy.offline)},cache:!0,data:[]},webix.ActiveContent={$init:function(e){if(e.activeContent){this.$ready.push(this.Ds),this.Es={},this.Fs={},this.Gs={},this.Hs={};for(var t in e.activeContent)if(this[t]=this.Is(t),e.activeContent[t].earlyInit){var i=webix.Xb;webix.Xb=null,this[t].call(this,{},this,e.activeContent),webix.Xb=i}}},uE:function(){for(var e in this.Hs){var t=this.Hs[e];t.destructor&&t.destructor()}},Ds:function(){if(this.attachEvent("onDestruct",webix.bind(this.uE,this)),webix.UE(this.$view,"blur",function(e){if("BUTTON"!=(e.target||e.srcElement).tagName){var t=webix.$$(e);if(t&&t!==this&&t.getValue&&t.setValue){t.getNode(e);var i=t.getValue();i!=t.s.value&&t.setValue(i)}}},{bind:this,capture:!0}),this.filter){for(var e in this.s.activeContent)this.type[e]=this[e],this[e]=this.Js(e);this.attachEvent("onBeforeRender",function(){this.type.masterUI=this}),this.type.masterUI=this}},Js:function(e){return function(t){for(var i=this.Hs[e],n=i.s.id,r=this.getItemNode(t).getElementsByTagName("DIV"),o=0;o<r.length;o++)if(r[o].getAttribute("view_id")==n){i.x=i.y=r[o];break}return i}},Ks:function(e,t,i){return function(n){if(n)for(var r=n.target||n.srcElement;r;){if(r.getAttribute&&r.getAttribute("view_id")){if(i.vE(e,r),i.locate){var o=i.locate(r.parentNode),a=i.Gs[t][o];e.s.value=a,e.s.$masterId=o}return r}r=r.parentNode}return e.x}},Ls:function(e,t){return function(i){var n=t.data;if(t.filter){var r=t.locate(this.x.parentNode);n=t.getItem(r),this.refresh(),t.Fs[e][r]=this.x.outerHTML||(new XMLSerializer).serializeToString(this.x),t.Gs[e][r]=i}n&&(n[e]=i)}},Is:function(e){return function(t,i,n){var r=i.Es?i:i.masterUI;if(!r.Es[e]){var o=document.createElement("DIV");n=n||r.s.activeContent;var a=webix.ui(n[e],o);o.firstChild.setAttribute("onclick","event.processed = true; if (webix.env.isIE8) event.srcElement.w_view = '"+a.s.id+"';"),a.getNode=r.Ks(a,e,r),a.attachEvent("onChange",r.Ls(e,r)),r.Hs[e]=a,r.Es[e]=o.innerHTML,r.Fs[e]={},r.Gs[e]={},a.$activeEl=a.$view}if(r.filter&&t[e]!=r.Gs[e]&&!webix.isUndefined(t[e])){var a=r.Hs[e];a.blockEvent(),r.vE(a,a.$activeEl),a.$view.firstChild||a.refresh(),a.setValue(t[e]),a.refresh(),a.unblockEvent(),r.Gs[e][t.id]=t[e],r.Fs[e][t.id]=a.x.outerHTML||(new XMLSerializer).serializeToString(a.x)}return r.Fs[e][t.id]||r.Es[e]}},vE:function(e,t){e.y=e.x=e.$view=t}},webix.ProgressBar={$init:function(){webix.isUndefined(this.cu)&&this.attachEvent&&(this.attachEvent("onBeforeLoad",this.showProgress),this.attachEvent("onAfterLoad",this.hideProgress),this.cu=null)},showProgress:function(e){if(!this.cu){e=webix.extend({position:0,delay:2e3,type:"icon",icon:"refresh",hide:!1},e||{},!0);var t="icon"==e.type?"fa-"+e.icon+" fa-spin":"";if(this.cu=webix.html.create("DIV",{class:"webix_progress_"+e.type,role:"progressbar","aria-valuemin":"0","aria-valuemax":"100",tabindex:"0"},"<div class='webix_progress_state "+t+"'></div>"),this.setPosition||(this.x.style.position="relative"),webix.html.insertBefore(this.cu,this.x.firstChild,this.x),this.x.setAttribute("aria-busy","true"),!webix.Touch.$active&&this.getScrollState){var i=this.getScrollState();this.x.scrollWidth!=this.$width&&(this.cu.style.left=i.x+"px"),this.x.scrollHeight!=this.$height&&("bottom"!=e.type?this.cu.style.top=i.y+"px":this.cu.style.top=i.y+this.$height-this.cu.offsetHeight+"px")}this.du=1}e&&"icon"!=e.type?webix.delay(function(){if(this.cu){var t=e.position||1;if(this.cu.style[webix.env.transitionDuration]===webix.undefined&&e.delay){var i=0,n=0,r=t/e.delay*30,o=this;this.Oy&&(window.clearInterval(this.Oy),n=this.cu.firstChild.offsetWidth/this.cu.offsetWidth*100),this.Oy=window.setInterval(function(){30*i==e.delay?window.clearInterval(o.Oy):(o.cu&&o.cu.firstChild&&(o.cu.firstChild.style.width=n+i*r*t*100+"%"),i++)},30)}else this.cu.firstChild.style.width=100*t+"%",e.delay&&(this.cu.firstChild.style[webix.env.transitionDuration]=e.delay+"ms");e.hide&&webix.delay(this.hideProgress,this,[1],e.delay)}this.du=0},this):e&&"icon"==e.type&&e.hide&&webix.delay(this.hideProgress,this,[1],e.delay)},hideProgress:function(e){this.du&&(e=!0),this.cu&&(e?(this.Oy&&window.clearInterval(this.Oy),webix.html.remove(this.cu),this.cu=null,this.x.removeAttribute("aria-busy")):this.showProgress({position:1.1,delay:300,hide:!0}))}},webix.protoUI({name:"multitext",$cssName:"text",defaults:{icon:"plus-circle",iconWidth:25,separator:", "},getValueHere:function(){return webix.ui.text.prototype.getValue.call(this)},setValueHere:function(e){return webix.ui.text.prototype.$setValue.call(this,e)},getValue:function(){if("extra"==this.config.mode)return this.getValueHere();if(this.rH)return this.rH;for(var e=[this.getValueHere(this)],t=0;t<this.eu.length;t++){var i=webix.$$(this.eu[t]).getValueHere();i&&e.push(i)}return e.join(this.config.separator)},$setValue:function(e){if(e=e||"","extra"==this.config.mode)return this.setValueHere(e);this.rH=e;var t=e.split(this.config.separator);if(t.length!=this.eu.length+1){this.removeSection(),this.setValueHere.call(this,t[0]);for(var i=1;i<t.length;i++)this.addSection(t[i]);this.rH=""}else{this.setValueHere(t[0]);for(var i=0;i<this.eu.length;i++)webix.$$(this.eu[i]).setValueHere(t[i+1])}},yB:function(e){var t=this.config.master?webix.$$(this.config.master):this,i=t.getValue(),n=t.s.value;i!==n&&(t.s.value=i,t.callEvent("onChange",[i,n]))},addSection:function(e){var t=this.config,i={labelWidth:t.labelWidth,inputWidth:t.inputWidth,width:t.width,label:t.label?"&nbsp;":"",view:this.name,mode:"extra",value:e||"",icon:"minus-circle",suggest:t.suggest||null,master:t.id};webix.extend(i,t.subConfig||{},!0);var n=this.getParentView().addView(i);return webix.$$(n).attachEvent("onChange",this.yB),this.eu.push(n),this.callEvent("onSectionAdd",[n,this.eu.length]),n},removeSection:function(e){for(var t=this.config.master?webix.$$(this.config.master):this,i=t.eu.length-1;i>=0;i--){var n=t.eu[i];e&&n!=e||(t.eu.removeAt(i),this.getParentView().removeView(n),t.callEvent("onSectionRemove",[n,i+1]))}},on_click:{webix_input_icon:function(e,t,i){if("extra"==this.config.mode){this.removeSection(this.config.id);var n=this.getParentView().getChildViews();n[n.length-1].focus(),this.yB()}else webix.$$(this.addSection()).focus();return!1}},$init:function(){this.eu=webix.toArray([]),this.attachEvent("onKeyPress",this.DD)},$render:function(e){this.$setValue(e.value)}},webix.ui.text),webix.protoUI({name:"organogram",defaults:{scroll:"auto",ariaLabel:"lines"},$init:function(){this.x.className+=" webix_organogram",this.v=document.createElement("DIV"),this.$ready.push(this.Av),webix.extend(this.data,webix.TreeStore,!0),this.data.provideApi(this,!0)},ad:"webix_dg_id",on_click:{webix_organogram_item:function(e,t){this.s.select&&("multiselect"==this.s.select||this.s.multiselect?this.select(t,!1,e.ctrlKey||e.metaKey||"touch"==this.s.multiselect,e.shiftKey):this.select(t),this.Qh=!1)}},on_context:{},on_dblclick:{},Av:function(){this.y.style.position="relative",this.data.attachEvent("onStoreUpdated",webix.bind(this.render,this))},pg:function(e){var t=this.data.Me[e.id];return this.callEvent("onItemRender",[e]),this.type.templateStart.call(this,e,this.type,t)+(e.$template?this.type["template"+e.$template].call(this,e,this.type,t):this.type.template.call(this,e,this.type,t))+this.type.templateEnd.call(this)},jb:function(e){var t=this.pg(e);return this.data.branch[e.id]&&(t+=this._x(e.id)),t},LA:function(){return this.type.listMarginX||this.type.listMarginY},_x:function(e,t){var i,n,r,o,a="",s=this.data.branch[e],l=this.data.Me[e],h=this.getItem(e),c=!!h&&h.$type;if(t=t||0,"list"===c&&(t+=this.type.listMarginX),e||(this.ay=[],this.$xy={},o=this.$width-2*this.type.padding,this.$xy[0]={totalWidth:o,start:this.type.padding,width:0,height:0,left:o/2,top:this.type.padding||0}),s){r=this.$xy[e],"list"!=c||this.LA()||(a+=this.type.templateListStart.call(this,h,this.type,l));var u=0,d=0;for(i=0;i<s.length;i++){n=s[i],o=this.by[n];var f=this.getItem(n);f.open==webix.undefined&&(f.open=!0),"list"==c&&this.data.addMark(n,"list_item","",1,!0);var p=this.cy(n);if("list"==c){var m=0;this.LA()?m=this.type.listMarginY:i||(m=this.type.marginY),this.$xy[n]={totalWidth:o,start:r.start,width:this.type.width,height:p,left:r.start+o/2-this.type.width/2+t,top:i?this.$xy[s[i-1]].top+this.$xy[s[i-1]].height+m+d:r.top+r.height+m},d=this.data.branch[n]?this.GG(n):0}else this.$xy[n]={totalWidth:o,start:r.start+u,width:this.type.width,height:p,left:r.start+u+o/2-this.type.width/2,top:r.top+r.height+(e?this.type.marginY:0)};a+=this.pg(f),u+=o}for(i=0;i<s.length;i++)n=s[i],this.data.branch[n]&&this.getItem(n).open?a+=this._x(n,t):h&&("list"!=h.$type?this.ay.push(this.$xy[n].top+this.$xy[n].height):i==s.length-1&&this.ay.push(this.$xy[n].top+this.$xy[n].height));var g=0;for(var v in this.$xy){var f=this.$xy[v];g=Math.max(f.left+f.width,g)}this.y.style.width=g+this.type.padding+this.type.marginX/2+"px","list"!=c||this.LA()||(a+=this.type.templateListEnd(h,this.type,l))}return a},GG:function(e){for(var t=this.data.branch[e],i=0,n=0;n<t.length;n++)i+=this.cy(t[n])+this.type.listMarginY,this.data.branch[t[n]]&&(i+=this.GG(t[n]));return i+this.type.marginY},cy:function(e){var t=this.getItem(e),i=this.type.height;return"function"==typeof i&&(i=i.call(t,this.type,this.data.Me[e])),this.dy||(this.dy=webix.html.create("div"),this.y.appendChild(this.dy)),this.dy.className=this.type.classname(t,this.type,this.data.Me[e]),this.dy.style.cssText="width:"+this.type.width+"px;height:"+i+("auto"==i?"":"px")+";",this.dy.innerHTML=this.type.template.call(this,t,this.type,this.data.Me[e]),this.dy.scrollHeight},ey:function(){var e={},t=this.type.width,i=this.type.marginX;return this.data.each(function(n){e[n.id]=t+i;var r=this.getParentId(n.id);if(r&&"list"!=this.getItem(r).$type)for(;r;){var o=this.branch[r];e[r]=0;for(var a=0;a<o.length;a++)e[r]+=e[o[a]]||0;r=this.getParentId(r)}}),this.by=e,e},getItemNode:function(e){if(this.t)return this.t[e];this.t={};for(var t=this.y.childNodes,i=0;i<t.length;i++){var n=t[i].getAttribute(this.ad);if(n&&(this.t[n]=t[i]),-1!=t[i].className.indexOf("webix_organogram_list")&&!this.LA())for(var r=t[i].childNodes,o=0;o<r.length;o++)(n=r[o].getAttribute(this.ad))&&(this.t[n]=r[o])}return this.getItemNode(e)},Ne:function(e){return this.v.innerHTML=this.pg(e),this.v.firstChild},render:function(e,t,i){if(this.isVisible(this.s.id)&&!this.$blockRender){if("update"==i){var n=this.getItemNode(e),r=this.t[e]=this.Ne(t);return webix.html.insertBefore(r,n),webix.html.remove(n),!0}return this.callEvent("onBeforeRender",[this.data])&&(this.ey(),this.t=null,this.y.innerHTML=this._x(0),this.dy=null,this.y.style.height=Math.max.apply(Math,this.ay)+this.type.padding+"px",this.fy(),this.resize(),this.callEvent("onAfterRender",[])),!0}},fy:function(){this.canvas&&this.canvas.clearCanvas(!0),this.canvas=new webix.Canvas({container:this.y,name:this.name,title:this.s.ariaLabel,width:this.y.offsetWidth,height:this.y.offsetHeight}),this.gy(0)},zo:function(e,t,i,n,r,o,a){e.strokeStyle=o,e.lineCap="square",e.lineWidth=a,e.beginPath(),e.moveTo(t,i),e.lineTo(n,r),e.stroke(),e.lineWidth=1},gy:function(e,t){var i,n,r,o,a,s,l,h,c,u;if(this.config.layout,t||(t=this.canvas.getCanvas()),this.$xy&&(e=e||0,r=this.data.branch[e],n=this.getItem(e),r&&r.length)){if(o=this.$xy[e],e)if(s=parseInt(o.left+o.width/2,10)+.5,l=parseInt(o.top+o.height,10),h=parseInt(o.top+o.height+this.type.marginY/2,10),"list"==n.$type){if(!this.LA())return h=parseInt(o.top+o.height+this.type.marginY,10),void this.zo(t,s,l,s,h,this.type.lineColor)}else this.zo(t,s,l,s,h,this.type.lineColor);for(l=parseInt(o.top+o.height+this.type.marginY/2,10)+.5,i=0;i<r.length;i++)e&&(a=this.$xy[r[i]],"list"==n.$type&&this.LA()?(s=parseInt(o.left+this.type.listMarginX/2,10)+.5,i?i==r.length-1&&(u=s):c=s,h=parseInt(a.top+a.height/2,10),this.zo(t,s,l-this.type.marginY/2,s,h,this.type.lineColor),this.zo(t,s,h,s+this.type.listMarginX/2,h,this.type.lineColor)):(s=parseInt(a.left+a.width/2,10)+.5,i?i==r.length-1&&(u=s):c=s,h=parseInt(a.top,10),this.zo(t,s,l,s,h,this.type.lineColor))),this.getItem(r[i]).open&&this.gy(r[i],t);e&&this.zo(t,c,l,u,l,this.type.lineColor)}},$getSize:function(e,t){var i=this.s.autowidth,n=this.s.autoheight;return i&&(e=this.y.offsetWidth+(this.y.offsetHeight>t&&!n?webix.ui.scrollSize:0)),n&&(t=this.y.offsetHeight+(this.y.offsetWidth>e&&!i?webix.ui.scrollSize:0)),webix.ui.view.prototype.$getSize.call(this,e,t)},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&(this.y.style.width=this.$width+"px",this.y.style.height=this.$height+"px",this.render())},type:{width:120,height:"auto",padding:20,marginX:20,marginY:20,listMarginX:0,listMarginY:0,lineColor:"#90caf9",classname:function(e,t,i){var n="webix_organogram_item ";return e.$css&&("object"==typeof e.$css&&(e.$css=webix.html.createCss(e.$css)),n+=" "+e.$css),i&&i.list_item&&(n+=" webix_organogram_list_item "),i&&i.$css&&(n+=i.$css),n+=" webix_organogram_level_"+e.$level},listClassName:function(e){var t="webix_organogram_list webix_organogram_list_"+e.$level;return e.$listCss&&("object"==typeof e.$listCss&&(e.$listCss=webix.html.createCss(e.$listCss)),t+=" "+e.$listCss),t},template:webix.template("#value#"),templateStart:function(e,t,i){var n="";if((!i||!i.list_item||t.listMarginX||t.listMarginY)&&this.$xy){var r=this.$xy[e.id];n+="width: "+r.width+"px; height: "+r.height+"px;",n+="top: "+r.top+"px; left: "+r.left+"px;"}return'<div webix_dg_id="'+e.id+'" class="'+t.classname.call(this,e,t,i)+'"'+(n?'style="'+n+'"':"")+'">'},templateEnd:webix.template("</div>"),templateListStart:function(e,t,i){var n="";if(this.$xy){var r=this.$xy[e.id];n+="width: "+r.width+"px;",n+="top: "+(r.top+r.height+t.marginY)+"px; left: "+r.left+"px;"}return'<div class="'+t.listClassName.call(this,e,t,i)+'"'+(n?'style="'+n+'"':"")+'">'},templateListEnd:webix.template("</div>")}},webix.AutoTooltip,webix.Group,webix.TreeAPI,webix.DataMarks,webix.SelectionModel,webix.MouseEvents,webix.Scrollable,webix.RenderStack,webix.TreeDataLoader,webix.DataLoader,webix.ui.view,webix.EventSystem),webix.protoUI({name:"barcode",defaults:{type:"ean13",height:160,width:220,paddingY:10,paddingX:20,textHeight:20,color:"#000",ariaLabel:"bars"},$init:function(){this.$view.className+=" webix_barcode",this.types||(this.types={default:this.type},this.type.name="default")},type:{},render:function(){this.isVisible(this.s.id)&&(this.canvas&&this.canvas.clearCanvas(!0),this.$view.innerHTML="",this.fy())},fy:function(){this.canvas=new webix.Canvas({container:this.$view,name:this.name,title:this.s.ariaLabel,width:this.$width,height:this.$height}),this.hy()},hy:function(){var e,t,i,n,r=this.s.value,o=this.s.type;if(!o||!this.types[o]||!r)return!1;if(e=this.type.encode(r),n=e.length,t=this.canvas.getCanvas(),n){var a=(this.$width-2*this.config.paddingX)/n,s=0;for(i=0;n>i;i++){parseInt(e.charAt(i),10)?(s++,i==n-1&&this.bp(t,i+1,a,s,n)):s&&(this.bp(t,i,a,s,n),s=0)}this.iy(r,a)}},bp:function(e,t,i,n,r){var o,a,s,l;a=parseInt(t*i+this.config.paddingX,10),o=parseInt(a-n*i,10),s=this.config.paddingY,l=this.$height-this.config.paddingY-this.config.textHeight,this.jy()&&(4>t||t>r-4||r/2+2>t&&t>r/2-2)&&(l+=this.config.textHeight/2),e.fillStyle=this.config.color,e.beginPath(),e.moveTo(o,s),e.lineTo(a,s),e.lineTo(a,l),e.lineTo(o,l),e.lineTo(o,s),e.fill()},iy:function(e,t){var i,n,r;if(this.type.template&&(e=this.type.template(e)),this.jy()){if(this.type.firstDigit&&(this.canvas.renderTextAt(!0,"left",this.config.paddingX,this.$height-this.config.paddingY,e.charAt(0)),e=e.slice(1)),n=e.length,this.type.lastDigit&&n--,n){var o=(this.$width-2*this.config.paddingX-11*t)/n;for(i=0;n>i;i++)r=this.config.paddingX+i*o+(n/2>i?3:8)*t+o/2,this.canvas.renderTextAt(!0,!0,r,this.$height-this.config.paddingY,e.charAt(i));this.type.lastDigit&&(r=this.config.paddingX+n*o+11*t,this.canvas.renderTextAt(!0,!1,r,this.$height-this.config.paddingY,e.charAt(n)))}}else this.canvas.renderTextAt(!0,!0,this.$width/2,this.$height-this.config.paddingY,e)},setValue:function(e){return this.s.value=e,this.render(),e},getValue:function(){var e=this.s.value;return this.type.template?this.type.template(e):e},type_setter:function(e){return this.types[e]?(this.type=webix.clone(this.types[e]),this.type.css&&(this.w.className+=" "+this.type.css)):this.customize(e),e},jy:function(){var e=this.config.type;return 0===e.indexOf("ean")||-1!=e.indexOf("upcA")},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&this.render()}},webix.ui.view),webix.type(webix.ui.barcode,{name:"ean8",encodings:[["0001101","1110010"],["0011001","1100110"],["0010011","1101100"],["0111101","1000010"],["0100011","1011100"],["0110001","1001110"],["0101111","1010000"],["0111011","1000100"],["0110111","1001000"],["0001011","1110100"]],encode:function(e){var t,i;if(e=e.replace(/[^0-9]/g,"").substring(0,7),7!=e.length)return"";for(e+=this.checksum(e),t="101",i=0;4>i;i++)t+=this.encodings[parseInt(e.charAt(i),10)][0];for(t+="01010",i=4;8>i;i++)t+=this.encodings[parseInt(e.charAt(i),10)][1];return t+="101"},template:function(e){return e.replace(/[^0-9]/g,"").substring(0,7)+this.checksum(e)},checksum:function(e){e=e.substring(0,7);var t,i=!0,n=0;for(t=0;7>t;t++)n+=(i?3:1)*parseInt(e.charAt(t),10),i=!i;return""+(10-n%10)%10}}),webix.type(webix.ui.barcode,{name:"ean13",firstDigit:!0,encodings:[["0001101","0100111","1110010","000000"],["0011001","0110011","1100110","001011"],["0010011","0011011","1101100","001101"],["0111101","0100001","1000010","001110"],["0100011","0011101","1011100","010011"],["0110001","0111001","1001110","011001"],["0101111","0000101","1010000","011100"],["0111011","0010001","1000100","010101"],["0110111","0001001","1001000","010110"],["0001011","0010111","1110100","011010"]],encode:function(e){var t,i,n;if(e=e.replace(/[^0-9]/g,"").substring(0,12),12!=e.length)return"";for(e+=this.checksum(e),t="101",i=this.encodings[parseInt(e.charAt(0),10)][3],n=1;7>n;n++)t+=this.encodings[parseInt(e.charAt(n),10)][parseInt(i.charAt(n-1),10)];for(t+="01010",n=7;13>n;n++)t+=this.encodings[parseInt(e.charAt(n),10)][2];return t+="101"},template:function(e){return e.replace(/[^0-9]/g,"").substring(0,12)+this.checksum(e)},checksum:function(e){var t,i=!1,n=0;for(e=e.substring(0,12),t=0;12>t;t++)n+=(i?3:1)*parseInt(e.charAt(t),10),i=!i;return""+(10-n%10)%10}}),webix.type(webix.ui.barcode,{name:"upcA",firstDigit:!0,lastDigit:!0,encode:function(e){return e.length<12&&(e="0"+e),webix.ui.barcode.prototype.types.ean13.encode(e)},template:function(e){return e.replace(/[^0-9]/g,"").substring(0,11)+this.checksum(e)},checksum:function(e){return e.length<12&&(e="0"+e),webix.ui.barcode.prototype.types.ean13.checksum(e)}}),webix.protoUI({name:"abslayout",$init:function(){this.$view.className+=" webix_abslayout",delete this.rows_setter,delete this.cols_setter,this.nc=[]},cells_setter:function(e){this.nc=e},kc:function(){webix.ui.baselayout.prototype.kc.call(this,this.nc)},$getSize:function(e,t){for(var i=webix.ui.baseview.prototype.$getSize.call(this,0,0),n=null,r=0;r<this.q.length;r++)this.q[r].s.relative&&(n=this.q[r].$getSize(0,0));return n&&(i[1]>=1e5&&(i[1]=0),i[3]>=1e5&&(i[3]=0),i[0]=Math.max(i[0],n[0]),i[1]=Math.max(i[1],n[1]),i[2]=Math.max(i[2],n[2]),i[3]=Math.max(i[3],n[3])),i},$setSize:function(e,t){this.lc=[e,t],webix.ui.baseview.prototype.$setSize.call(this,e,t),this.rc(e,t)},rc:function(e,t){for(var i=0;i<this.q.length;i++){var n=this.q[i],r=n.s,o=n.$getSize(0,0);r.relative?(r.left=r.top=0,n.$setSize(e,t)):n.$setSize(o[0],o[2]);for(var a=n.$view,s=["left","right","top","bottom"],l=0;l<4;l++){var h=s[l];h in r&&(a.style[h]=r[h]+"px")}}}},webix.ui.baselayout),webix.protoUI({name:"datalayout",$init:function(){this.data.provideApi(this,!0),this.data.attachEvent("onStoreUpdated",webix.bind(this.render,this))},kc:function(e){return this.cC||(this.cC=this.nc,this.nc=[{}]),webix.ui.layout.prototype.kc.call(this,this.nc)},setValue:function(e){this.parse(e)},getValue:function(e){for(var t=this.cC.length,i=0;i<this.q.length;i++){var n=this.data.order[Math.floor(i/t)],r=this.data.getItem(n);this.HG(this.q[i],r)}return this.data.serialize()},HG:function(e,t){var i=e.s.name;if(i){var n=null;e.getValues?n=e.getValues():e.getValue?n=e.getValue():e.serialize&&(n=e.serialize()),"$value"==i?webix.extend(t,n,!0):t[i]=n}else{var r=e.q;if(r)for(var o=0;o<r.length;o++)this.HG(r[o],t)}},sC:function(e,t){var i,n=e.s.name;if(n)i="$value"==n?t:t[n],e.setValues?e.setValues(i):e.setValue?e.setValue(i):e.parse&&(e.openAll&&(i=webix.copy(i)),e.parse(i));else{var r=e.q;if(r)for(var o=0;o<r.length;o++)this.sC(r[o],t)}},render:function(e,t,i){var n=this.cC.length;if(e&&"update"===i)for(var t=this.getItem(e),r=this.getIndexById(e),o=0;n>o;o++)this.sC(this.q[r*n+o],t);else{for(var a=this.nc=[],s=this.data.order,o=0;o<s.length;o++)if(n)for(var l=0;n>l;l++)a.push(webix.copy(this.cC[l]));else a.push(this.getItem(s[o]));if(a.length||a.push({}),this.reconstruct(),n)for(var o=0;o<s.length;o++)for(var h=this.getItem(s[o]),l=0;n>l;l++){var c=this.q[o*n+l];this.sC(c,h)}}}},webix.DataLoader,webix.ui.layout),webix.protoUI({$init:function(){webix.extend(this,webix.FlexLayout,!0)},name:"flexdatalayout"},webix.ui.datalayout),webix.protoUI({name:"gridlayout",defaults:{gridColumns:2,gridRows:2,margin:10,padding:10},gridRows_setter:function(e){return this.WG=e},kc:function(){for(var e=0;e<this.nc.length;e++)this.nc[e].Ob={};webix.ui.baselayout.prototype.kc.call(this,this.nc)},removeView:function(e){webix.ui.abslayout.prototype.removeView.call(this,e),this.pH(),this.callEvent("onChange",[])},XG:function(e){if(e.dx=e.dx||1,e.dy=e.dy||1,webix.isUndefined(e.y)||webix.isUndefined(e.x)){for(var t=this.YG(),i=0;i<this.WG;i++)for(var n=0;n<this.s.gridColumns;n++)if(!t[n][i]&&this.ZG(t,n,i,n+e.dx,i+e.dy))return e.x=n,void(e.y=i);e.x=0,e.y=this.WG}var r=e.x+e.dx-this.s.gridColumns;r>0&&(e.dx-=r)},Qb:function(e,t){this.XG(e.config),this.q.push(e),e.Xb=this,this.$view.appendChild(e.x),this.$G(e.config,e.config.id),this._G||this.callEvent("onChange",[])},ZG:function(e,t,i,n,r){for(var o=t;n>o;o++)for(var a=i;r>a;a++)if(!e[o]||e[o][a])return!1;return!0},aH:function(e,t,i){for(var n=0;n<t.dx;n++)for(var r=0;r<t.dy;r++)e[n+t.x][r+t.y]=i},bH:function(e,t,i){for(var n=this.s.gridColumns,r=t.x+t.dx;r+i.dx<=n;r++)if(this.ZG(e,r,i.y,r+i.dx,i.y+i.dy))return r-i.x;return 0},cH:function(e,t,i){for(var n=t.x-i.dx;n>=0;n--)if(this.ZG(e,n,i.y,n+i.dx,i.y+i.dy))return i.x-n;return 0},dH:function(e,t,i){for(var n=t.y-i.dy;n>=0;n--)if(this.ZG(e,i.x,n,i.x+i.dx,n+i.dy))return i.y-n;return 0},YG:function(e){for(var t=[],i=0;i<this.s.gridColumns;i++)t[i]=[];for(var n=0;n<this.q.length;n++){var r=this.q[n].config;r.id!==e&&this.aH(t,r,r.id)}return t},pH:function(){this.kH()&&this.eH()},kH:function(){var e=this.s.gridColumns,t=this.WG,i=this.YG(),n=!1;e:for(var r=t-1;r>=0;r--){for(var o=e-1;o>=0;o--)if(i[o][r])continue e;n=!0;for(var a=0;a<this.q.length;a++){var s=this.q[a].config;s.y>=r&&(s.y-=1)}}return n},$G:function(e,t,i){e.x-=Math.max(0,e.x+e.dx-this.s.gridColumns);for(var n=[],r=this.YG(t),o=0;o<this.q.length;o++){var a=this.q[o].config;a.id!==t&&a.y<e.y+e.dy&&a.y+a.dy>e.y&&a.x<e.x+e.dx&&a.x+a.dx>e.x&&n.push(a)}for(var s=[],o=0;o<n.length;o++){var a=n[o];this.aH(r,a,0);var l=this.bH(r,e,a);if(l)a.x+=l;else{var h=this.cH(r,e,a);if(h)a.x-=h;else{var c=this.dH(r,e,a);c?a.y-=c:(a.y=e.y+e.dy,s.push(a))}}this.aH(r,a,a.id)}for(var o=0;o<s.length;o++)this.$G(s[o],s[o].id,!0);i||(this.kH(),this.eH())},eH:function(){for(var e=this.s.gridRows,t=0;t<this.q.length;t++){var i=this.q[t].config;e=Math.max(e,i.y+i.dy)}this.WG!=e&&(this.WG=e,this.resize()),this.rc()},moveView:function(e,t){t=webix.extend(webix.$$(e).config,t,!0),this.$G(t,e),this.callEvent("onChange",[])},serialize:function(e){for(var t=[],i=0;i<this.q.length;i++)if(e)t.push(e.call(this,this.q[i]));else{var n=this.q[i].config;t.push({id:n.id,name:n.name,x:n.x,y:n.y,dx:n.dx,dy:n.dy})}return t},clearAll:function(){for(var e=0;e<this.q.length;e++)this.q[e].destructor();this.q=[]},restore:function(e,t){t=t||this.s.factory,e=webix.copy(e),this._G=!0;for(var i={},n=0;n<e.length;n++){var r,o=e[n],a=webix.$$(o.id);a?(webix.extend(a.config,o,!0),r=a.config.id):(a=t.call(this,o),r=this.addView(a)),i[r]=1}for(var n=this.q.length-1;n>=0;n--)i[this.q[n].config.id]||(this.q[n].destructor(),this.q.splice(n,1));this.eH(),this._G=!1},$getSize:function(e,t){for(var i=webix.ui.baseview.prototype.$getSize.call(this,0,0),n=0;n<this.q.length;n++)this.q[n].$getSize(0,0);var r=this.s.cellWidth,o=this.s.cellHeight,a=this.fH(0,0,this.s.gridColumns,this.WG);return r&&(i[0]=a.dx+2*a.x),o&&(i[2]=a.dy+2*a.y),i},fH:function(e,t,i,n){var r=this.s.margin,o=this.s.paddingX||this.s.padding,a=this.s.paddingY||this.s.padding,s=this.s.cellWidth;s||(s=(this.$width-2*o+r)/this.s.gridColumns-r);var l=this.s.cellHeight;return l||(l=(this.$height-2*a+r)/this.WG-r),{x:o+(s+r)*e,y:a+(l+r)*t,dx:Math.ceil(s+(s+r)*(i-1)),dy:Math.ceil(l+(l+r)*(n-1))}},rc:function(e,t){for(var i=0;i<this.q.length;i++){var n=this.q[i],r=n.s,o=this.fH(r.x,r.y,r.dx,r.dy);n.$getSize(0,0),n.$setSize(o.dx,o.dy);var a=n.$view;a.style.left=o.x+"px",a.style.top=o.y+"px"}}},webix.ui.abslayout),webix.protoUI({name:"dashboard",$init:function(){webix.DragControl.addDrag(this.$view,this),webix.DragControl.addDrop(this.$view,this,!0)},gH:function(e){return!(!e.getAttribute||e.getAttribute("webix_disable_drag")||e.getAttribute("webixignore"))&&(-1!=(""+(e.className||"")).indexOf("panel_drag")?e:!(!e.parentNode||e==this.$view)&&this.gH(e.parentNode))},$dragCreate:function(e,t){if(t.target){if(!this.gH(t.target))return!1;var i=webix.$$(t);i.$resizeMove||(i=i.queryView(function(e){return!!e.config.dx},"parent"));var n=webix.html.offset(this.$view),r=webix.html.pos(t);return webix.DragControl.Gd={source:i,from:this,dashboard:{sx:r.x-n.x-parseInt(i.$view.style.left)+this.s.margin/2,sy:r.y-n.y-parseInt(i.$view.style.top)+this.s.margin/2}},this.hH(i.s.dx,i.s.dy),i.$view}},hH:function(e,t){var i=this.iH=webix.html.create("div",{class:"panel_target"}),n=this.fH(0,0,e,t);i.style.width=n.dx+"px",i.style.height=n.dy+"px",this.$view.appendChild(this.iH)},$drop:function(e,t){var i=webix.DragControl.Gd,n={x:i.dashboard.x,y:i.dashboard.y};if(i.from===this){var r=i.source.config;this.moveView(r.id,n)}else n.name=i.source[0],n.dx=i.dashboard.dx,n.dy=i.dashboard.dy,n.id=n.name+":"+webix.uid(),n=this.s.factory.call(this,n),this.addView(n)},$dragDestroy:function(e,t,i){t.style.zIndex=1,webix.html.remove(this.iH),this.iH=null,this.eH()},jH:function(e,t){var i=this.s.margin,n=this.s.paddingX||this.s.padding,r=this.s.paddingY||this.s.padding,o=this.s.cellWidth;o||(o=(this.$width-2*n+i)/this.s.gridColumns-i);var a=this.s.cellHeight;return a||(a=(this.$height-2*r+i)/this.WG-i),e=Math.round((e-n)/(o+i/2)-.2),t=Math.round((t-n)/(a+i/2)-.2),e=Math.max(0,Math.min(e,this.s.gridColumns)),t=Math.max(0,Math.min(t,this.WG)),{x:e,y:t,width:o,height:a,margin:i,rx:e*o+i*e+n,ry:t*a+i*t+r}},$dragOut:function(){var e=webix.DragControl.Gd;this.iH&&e.external&&(webix.html.remove(this.iH),this.iH=null)},$dragIn:function(e,t,i){var n=webix.DragControl.Gd;if(!this.iH){n.external=!0;var r=n.from.getItem(n.source);n.dashboard={dx:r.dx,dy:r.dy},this.hH(r.dx,r.dy)}if(n.external){var o=this.iH,a=webix.env.mouse.context(i),s=webix.html.offset(this.$view),l=this.jH(a.x-s.x,a.y-s.y);webix.extend(n.dashboard,l,!0),o.style.left=l.rx+"px",o.style.top=l.ry+"px"}return!0},$dragPos:function(e,t,i){var n=webix.DragControl.Gd;i.style.left="-10000px";var r=webix.env.mouse.context(t),o=webix.html.offset(this.$view),a=n.dashboard,s=this.jH(r.x-o.x-a.sx,r.y-o.y-a.sy);e.x=r.x-a.sx-o.x,e.y=r.y-a.sy-o.y;var l=this.iH;l.style.left=s.rx+"px",l.style.top=s.ry+"px",webix.extend(a,s,!0)}},webix.ui.gridlayout),webix.protoUI({name:"panel",$init:function(e){if(e.header&&e.body){var t=e.header;"object"!=typeof t&&(t={template:e.header,type:"header",css:"webix_header"}),e.body=[t,e.body]}webix.html.addCss(this.$view,"panel_drag_view"),this.$ready.push(this.Py)},Py:function(){var e=this.getChildViews(),t=1===e.length?this:e[1];if(this.s.icon){var i=webix.html.create("div",{class:"panel_icon"},"<span class='webix_icon fa-"+this.s.icon+" panel_icon_span'></span>");t!=this&&(t.$view.style.position="relative"),t.$view.appendChild(i)}},body_setter:function(e){return this.rows_setter(webix.isArray(e)?e:[e])},$resizeEnd:function(e){var t=this.getParentView();if(t&&t.jH){var i=t.jH(e.x,e.y),n=(this.s,Math.max(i.x,1)),r=Math.max(i.y,1);t.moveView(this.s.id,{dx:n,dy:r})}},$resizeMove:function(e){var t=this.getParentView();if(t&&t.jH){var i=t.jH(e.x,e.y);e.x=i.width*i.x+i.margin*(i.x-1),e.y=i.height*i.y+i.margin*(i.y-1)}}},webix.ui.layout,webix.ResizeArea),webix.protoUI({name:"video",$init:function(e){e.id||(e.id=webix.uid()),this.$ready.push(this.Ms)},Ms:function(){var e=this.s;if(this.w=webix.html.create("video",{class:"webix_view_video",style:"width:100%;height:100%;",autobuffer:"autobuffer"},""),e.poster&&(this.w.poster=e.poster),e.src){"object"!=typeof e.src&&(e.src=[e.src]);for(var t=0;t<e.src.length;t++)this.w.innerHTML+=' <source src="'+e.src[t]+'">'}e.controls&&(this.w.controls=!0),e.autoplay&&(this.w.autoplay=!0),this.x.appendChild(this.w)},getVideo:function(){return this.w},defaults:{src:"",controls:!0}},webix.ui.view),webix.protoUI({name:"sidemenu",defaults:{animate:!0,position:"left",width:200,borderless:!0},$init:function(){this.$view.className+=" webix_sidemenu"},$skin:function(){this.defaults.padding=0},position_setter:function(e){var t=this.s.position;return t&&webix.html.removeCss(this.$view," webix_sidemenu_"+t),webix.html.addCss(this.$view," webix_sidemenu_"+e),e},$getSize:function(){var e=webix.ui.window.prototype.$getSize.apply(this,arguments);return this.MA=e,e},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t),e=this.bc-2*this.s.padding,t=this.dc-2*this.s.padding,this.w.style.padding=this.s.padding+"px",this.bd.style.display="none",this.ed.style.height=t+"px",this.gd.$setSize(e,t)},show:function(){return!!this.callEvent("onBeforeShow",arguments)&&(this.s.hidden=!1,this.x.style.zIndex=this.s.zIndex||webix.ui.zIndex(),(this.s.modal||this.my)&&(this.Md(!0),this.my=null),this.x.style.display="block",this.Qd(),this.s.position&&this.Td(),this.Ww=1,webix.delay(function(){this.Ww=0},this,[],webix.env.touch?400:100),this.config.autofocus&&(this.Vd=webix.UIManager.getFocus(),webix.UIManager.setFocus(this)),-1==webix.ui.et.find(this)&&webix.ui.et.push(this),void this.callEvent("onShow",[]))},Td:function(e){var t,i,n,r,o,a=0,s=0,l={};this.$view.style.position="fixed",n=window.innerWidth||document.documentElement.offsetWidth,r=window.innerHeight||document.documentElement.offsetHeight,t=this.MA[0]||n,i=this.MA[2]||r,o=this.s.position,"top"==o?t=n:"right"==o?(i=r,a=n-t):"bottom"==o?(t=n,s=r-i):i=r,l={left:a,top:s,width:t,height:i,maxWidth:n,maxHeight:r},"function"==typeof this.s.state&&this.s.state.call(this,l),this.NA=l,this.$setSize(l.width,l.height),void 0===e&&this.OA()?(webix.html.removeCss(this.$view,"webix_animate",!0),this.Qf[this.s.position].beforeShow.call(this,l),webix.delay(function(){webix.html.addCss(this.$view,"webix_animate",!0)},this,null,1),webix.delay(function(){this.Qf[this.s.position].show.call(this,l)},this,null,10)):("right"===this.s.position&&(l.left=l.right?n-l.width-l.right:n-l.width),this.setPosition(l.left,l.top))},OA:function(){return webix.animate.isSupported()&&this.s.animate&&!(webix.env.isIE&&-1!=navigator.appVersion.indexOf("MSIE 9"))},hidden_setter:function(e){return e?this.hide(!0):this.show(),!!e},Qf:{left:{beforeShow:function(e){this.$view.style.left=-e.width+"px",this.$view.style.top=e.top+"px"},show:function(e){this.$view.style.left=e.left?e.left+"px":"0px"},hide:function(e){this.$view.style.left=-e.width+"px"}},right:{beforeShow:function(e){this.$view.style.left="auto",this.$view.style.right=-e.width+"px",this.$view.style.top=e.top+"px"},show:function(e){this.$view.style.right=e.right?e.right+"px":"0px"},hide:function(e){this.$view.style.right=-e.width+"px"}},top:{beforeShow:function(e){this.setPosition(e.left,e.top),this.$view.style.height="0px",this.ed.style.height="0px"},show:function(e){this.$view.style.height=e.height+"px",this.ed.style.height=e.height+"px"},hide:function(){this.$view.style.height="0px",this.ed.style.height="0px"}},bottom:{beforeShow:function(e){this.$view.style.left=e.left+"px",this.$view.style.top="auto";var t=e.bottom!=webix.undefined?e.bottom:e.maxHeight-e.top-e.height;this.$view.style.bottom=t+"px",this.$view.style.height="0px"},show:function(e){this.$view.style.height=e.height+"px"},hide:function(){this.$view.style.height="0px"}}},hide:function(e){if(!this.$destructed){this.s.modal&&this.Md(!1);var t=window.innerWidth||document.documentElement.offsetWidth,i=window.innerHeight||document.documentElement.offsetHeight;if(!e&&this.OA()&&t==this.NA.maxWidth&&i==this.NA.maxHeight){this.Qf[this.s.position].hide.call(this,this.NA);var n=webix.event(this.$view,webix.env.transitionEnd,webix.bind(function(e){this.Wd(),webix.eventRemove(n)},this))}else this.Wd();if(this.s.autofocus){var r=document.activeElement;r&&this.x&&this.x.contains(r)&&(webix.UIManager.setFocus(this.Vd),this.Vd=null)}this.ny()}}},webix.ui.popup),webix.protoUI({name:"sidebar",defaults:{titleHeight:40,type:"sideBar",activeTitle:!0,select:!0,scroll:!1,collapsed:!1,collapsedWidth:41,position:"left",width:250,mouseEventDelay:10},$init:function(e){this.$ready.push(this.yH),this.$ready.push(this.zH),this.data.qf=function(e){e.data&&(e.menu=webix.copy(e.data))}},on_context:{},on_mouse_move:{},yH:function(){this.AH=this.config.width,this.attachEvent("onBeforeOpen",function(e){if(!this.config.multipleOpen)for(var t=this.getOpenItems(),i=0;i<t.length;i++)this.getParentId(e)==this.getParentId(t[i])&&this.close(t[i]);return!this.config.collapsed}),this.attachEvent("onItemClick",function(e,t,i){this.getPopup()&&!this.getPopup().config.hidden&&(t.showpopup=!0),webix.env.touch&&this.BH(e,i)}),this.attachEvent("onBeforeSelect",function(e){return!this.getItem(e).$count&&(this.clearCss("webix_sidebar_selected"),!0)}),this.attachEvent("onAfterSelect",function(e){this.CH(this,e,!0),this.getPopup().DH(e)}),this.attachEvent("onMouseMove",function(e,t,i){this.BH(e,i)}),this.config.collapsed&&this.collapse()},BH:function(e,t){if(this.config.collapsed){var i=this.getPopup();i&&(this.EH(e),this.FH(e),i.show(t,{x:"left"==this.config.position?this.config.collapsedWidth:-i.config.width,y:-1}))}},EH:function(e){var t=this.getPopup(),i=t.getBody().getChildViews()[0];if(i){var n=this.getSelectedId();i.masterId=e,i.parse(this.getItem(e)),n&&this.getParentId(n)==e?webix.html.addCss(i.$view,"webix_sidebar_selected",!0):webix.html.removeCss(i.$view,"webix_sidebar_selected"),n==e?webix.html.addCss(i.$view,"webix_selected",!0):webix.html.removeCss(i.$view,"webix_selected")}},FH:function(e){var t=this.getPopup(),i=t.getBody().getChildViews()[1];if(i){i.clearCss("webix_sidebar_selected"),i.masterId=e;var n=this.getSelectedId(),r=this.getItem(e).menu?webix.copy(this.getItem(e).menu):[].concat(webix.copy(this.data.getBranch(e)));i.unselect(),r.length?(i.show(),i.data.importData(r),i.exists(n)?i.select(n):n&&this.CH(i,n)):i.hide()}},zH:function(){var e,t=this,i=t.config;if(i.popup&&(e=webix.$$(i.popup)),!e){var n="left"==i.position?"webix_sidebar_popup_left":"webix_sidebar_popup_right",r="left"==i.position?"right":"left",o=function(e){return(e.submenu||e.data?'<div class="webix_icon fa-angle-'+("left"==i.position?"right":"left")+'"></div>':"")+e.value},a={view:"popup",css:"webix_sidebar_popup "+n,autofit:!1,width:this.AH-this.config.collapsedWidth,borderless:!0,padding:0,body:{rows:[{view:"template",borderless:!0,css:"webix_sidebar_popup_title",template:"#value#",height:this.config.titleHeight+2,onClick:{webix_template:function(){var e=this.masterId;t.getItem(e).$count||t.select(e)}}},{view:"menu",submenu:"data",layout:"y",subMenuPos:r,select:!0,borderless:!0,autoheight:!0,css:"webix_sidebar_popup_list "+n,template:o,type:{subsign:!1},submenuConfig:{padding:0,subMenuPos:r,template:o,select:!0,type:{subsign:!1},css:"webix_sidebar_popup_list "+n,on:{onShow:function(){this.clearCss("webix_sidebar_selected"),this.unselectAll();var e=t.getSelectedId();e&&this.exists(e)?this.select(e):e&&t.CH(this,e)},onBeforeSelect:function(e){return!this.getSubMenu(e)&&void 0},onAfterSelect:function(e){for(var i=t.getPopup().queryView({view:"menu"}),n=t.getParentId(e);n;){var r=i.getMenu(n);r&&(r.unselectAll(),t.CH(r,e)),n=t.getParentId(n)}t.CH(this,e)}}},on:{onBeforeSelect:function(e){return!this.getSubMenu(e)&&void 0},onMenuItemClick:function(e){this.getSubMenu(e)||t.select(e)}}}]}};webix.extend(a,i.popup||{},!0),e=webix.ui(a),e.DH=function(e){t&&t.getParentId(e)==this.masterId&&webix.html.addCss(this.$view,"webix_sidebar_selected",!0),t.config.collapsed&&1==t.getItem(e).$level&&webix.html.addCss(this.$view,"webix_selected",!0)},e.queryView({view:"menu"}).sH=!0}e.attachEvent("onBeforeShow",function(){return i.collapsed}),this.Ns=[e],i.popupId=e.config.id,webix.UE(document.body,"mousemove",function(t){var i=t.target||t.srcElement;e.config.hidden||e.$view.contains(i)||this.$view.firstChild.contains(i)||e.queryView({view:"menu"}).dr||e.hide()},{bind:this})},CH:function(e,t,i){var n="webix_sidebar_selected";e.data.each(function(r){!this.GH(t,r.id)||i&&"0"!=this.getParentId(r.id)?e.hasCss(r.id,n)&&e.removeCss(r.id,n):e.addCss(r.id,n)},this)},GH:function(e,t){var i=this.getParentId(e);return t==i||!!i&&this.GH(i,t)},getPopup:function(){return webix.$$(this.config.popupId)},position_setter:function(e){var t=e,i="left"==e?"right":"left";webix.html.removeCss(this.$view,"webix_sidebar_"+i),webix.html.addCss(this.$view,"webix_sidebar_"+t,!0);var n=this.getPopup();if(n){var r=n.$view;webix.html.removeCss(r,"webix_sidebar_popup_"+i),webix.html.addCss(r,"webix_sidebar_popup_"+t,!0)}return e},collapse:function(){this.define("collapsed",!0)},expand:function(){this.define("collapsed",!1)},toggle:function(){var e=!this.config.collapsed;this.define("collapsed",e)},collapsed_setter:function(e){var t;return e?(t=this.config.collapsedWidth,this.closeAll(),this.type.collapsed=!0,webix.html.removeCss(this.$view,"webix_sidebar_expanded")):(t=this.AH,this.type.collapsed=!1,webix.html.addCss(this.$view,"webix_sidebar_expanded",!0)),this.define("width",t),this.resize(),e}},webix.ui.tree),webix.type(webix.ui.tree,{name:"sideBar",height:"auto",css:"webix_sidebar",template:function(e,t){return t.collapsed?t.icon(e,t):t.arrow(e,t)+t.icon(e,t)+"<span>"+e.value+"</span>"},arrow:function(e,t){for(var i="",n=1;n<=e.$level;n++)if(n==e.$level&&e.$count){var r="webix_sidebar_dir_icon webix_icon fa-angle-"+(e.open?"down":"left");i+="<span class='"+r+"'></span>"}return i},icon:function(e,t){var i="";return e.$level>2&&(i='style="padding-left:'+40*(e.$level-2)+'px"'),e.icon?"<span class='webix_icon webix_sidebar_icon fa-"+e.icon+"' "+i+"></span>":"<span "+i+"></span>"}}),function(){var e=webix.CustomScroll={scrollStep:40,init:function(){this.ze(),webix.env.$customScroll=!0,webix.ui.scrollSize=0,webix.destructors.push({obj:{destructor:function(){this.gu=null}}}),webix.attachEvent("onReconstruct",e.hu),webix.attachEvent("onResize",e.hu),webix.attachEvent("onClick",e.hu)},resize:function(){this.hu()},mk:function(t){t.Vf.iu=t.s.id,t.attachEvent("onAfterRender",function(){var t=e.ju(this),i=Math.max(t.dy-t.py,0),n=Math.max(t.dx-t.px,0);this.Wj&&this.jk>i?this.Wj.scrollTo(i):this.Zj&&this.bk>n&&this.Zj.scrollTo(n),e.gu==this.Vf&&e.hu()}),webix.UE(t.Vf,"mouseover",e.ku),webix.UE(t.Vf,"mouseout",e.lu)},enable:function(t,i){if(e.ze(),t.mapCells)return this.mk(t);var n=t;t.y&&(n=t.y.parentNode),n.mu=i||"xy",webix.UE(n,"mouseover",e.ku),webix.UE(n,"mouseout",e.lu),webix.UE(n,"mousewheel",e.nu),webix.UE(n,"DOMMouseScroll",e.nu),this.wE(t)},hu:function(){var t=e.gu;t&&t.ou&&(e.pu.call(t),e.ku.call(t))},ze:function(t){webix.event(document.body,"mousemove",function(t){e.qu&&e.ru(e.qu,e.qu.su,webix.html.pos(t))}),e.ze=function(){}},ku:function(t){if(e.gu=this,clearTimeout(this.tu),!this.ou&&!e.qu){var i;if(this.iu){var n=webix.$$(this.iu);if(!n)return;i=e.ju(n)}else i={dx:this.scrollWidth,dy:this.scrollHeight,px:this.clientWidth,py:this.clientHeight},i.ec=i.dx>i.px&&-1!=this.mu.indexOf("x"),i.cc=i.dy>i.py&&-1!=this.mu.indexOf("y");this.ou=i,i.ec&&(i.uu=e.Om(this,"x",i.dx,i.px,"width","height"),i.vu=i.px-i.uu.offsetWidth-4,i.wu=i.dx-i.px,e.trackBar&&(i.wA=e.xA(this,"x"))),i.cc&&(i.xu=e.Om(this,"y",i.dy,i.py,"height","width"),i.yu=i.py-i.xu.offsetHeight-4,i.zu=i.dy-i.py,e.trackBar&&(i.yA=e.xA(this,"y"))),e.sk(this)}},xA:function(e,t){var i=webix.html.create("DIV",{webixignore:"1",class:"webix_c_scroll_bar_"+t},"");return e.appendChild(i),i},ru:function(t,i,n){var r=t.ou,o=t.iu;if(o&&(o=webix.$$(o)),r.uu==t.Au){var a=(n.x-i.x)*r.wu/r.vu;o?o.Zj.scrollTo(o.bk+a):e.Bu(t,"scrollLeft",a)}if(r.xu==t.Au){var a=(n.y-i.y)*r.zu/r.yu;o?o.Wj.scrollTo(o.jk+a):e.Bu(t,"scrollTop",a)}t.su=n,e.sk(t)},ju:function(e){var t={};return e.Zj&&e.s.scrollX&&(t.dx=e.Zj.s.scrollWidth,t.px=e.Zj.Si||1,t.ec=t.dx-t.px>1),e.Wj&&e.s.scrollY&&(t.dy=e.Wj.s.scrollHeight,t.py=e.Wj.Si||1,t.cc=t.dy-t.py>1),t},lu:function(){clearTimeout(this.tu),this.tu=webix.delay(e.pu,this,[],200)},Cu:function(e){e&&(webix.html.remove(e),e.Du&&(webix.eventRemove(e.Du),webix.eventRemove(e.Eu)))},pu:function(){if(this.ou){if(this.Au)return void(this.Fu=!0);var t=this.ou;e.Cu(t.uu),e.Cu(t.xu),webix.html.removeCss(document.body,"webix_noselect"),t.wA&&webix.html.remove(t.wA),t.yA&&webix.html.remove(t.yA),this.ou=null}},nu:function(t){var i=this.ou,n=t.wheelDelta/-40,r=!0;if(!n&&t.detail&&webix.isUndefined(t.wheelDelta)&&(n=t.detail),i)if(i.uu&&(t.wheelDeltaX||n&&!i.xu)){var o=t.wheelDeltaX/-40||n;r=e.Bu(this,"scrollLeft",o*e.scrollStep)}else n&&i.xu&&(r=e.Bu(this,"scrollTop",n*e.scrollStep));return e.sk(this),!1!==r?webix.html.preventEvent(t):void 0},Bu:function(t,i,n){var r=t.ou,o="scrollLeft"==i?r.dx-r.px:r.dy-r.py,a=t[i];return a+n>o&&(n=o-a),!(!n||0>a+n&&0===a)&&(webix.env.isIE?(e.sk(t,i,n+a),t[i]+=n):t[i]+=n,!0)},Om:function(t,i,n,r,o,a){var s=webix.html.create("DIV",{webixignore:"1",class:"webix_c_scroll_"+i},"<div></div>");return s.style[o]=Math.max(r*r/n-7,40)+"px",t.style.position="relative",t.appendChild(s),t.Du=webix.event(s,"mousedown",e.Gu(t)),t.Eu=webix.event(document.body,"mouseup",webix.bind(e.Hu,t)),s},Gu:function(t){return function(i){webix.html.addCss(document.body,"webix_noselect",1),this.className+=" webix_scroll_active",e.qu=t,t.Au=this,t.su=webix.html.pos(i)}},Hu:function(t){this.Au&&(webix.html.removeCss(document.body,"webix_noselect"),this.Au.className=(""+this.Au.className).replace(" webix_scroll_active",""),this.Au=!1,e.qu=0,this.Fu&&(e.pu.call(this),this.Fu=!1))},sk:function(e,t,i){var n=e.ou;if(n&&(n.uu||n.xu)){var r=e.iu,o="scrollLeft"==t?i:e.scrollLeft,a=r?webix.$$(r).bk:o,s=r?0:a,l="scrollTop"==t?i:e.scrollTop,h=r?webix.$$(r).jk:l,c=r?0:h;n.uu&&(n.uu.style.bottom=1-c+"px",n.uu.style.left=Math.round(n.vu*a/(n.dx-n.px))+s+1+"px",n.wA&&(n.wA.style.bottom=1-c+"px",n.wA.style.left=s+"px")),n.xu&&(n.xu.style.right=0-s+"px",n.xu.style.top=Math.round(n.yu*h/(n.dy-n.py))+c+1+"px",n.yA&&(n.yA.style.right=0-s+"px",n.yA.style.top=c+"px"))}},wE:function(t){t.data&&t.data.attachEvent&&t.data.attachEvent("onStoreUpdated",function(){var i=e.gu;i&&t.$view.contains(i)&&e.resize()})}}}(),webix.protoUI({name:"portlet",defaults:{layoutType:"wide",icon:"bars"},$init:function(e){this.x.style.position="relative",e.header&&e.body&&(e.body=[{template:e.header,type:"header"},e.body]),this.$ready.push(this.Py),webix.attachEvent("onAfterPortletMove",this.xC)},xC:function(e){webix.ui.each(e,function(e){e.Ow&&e.Ow()})},Py:function(){var e=this.getChildViews();if(e.length>1)webix.DragControl.addDrag(e[0].$view,this);else if(this.s.icon){var t=webix.html.create("div",{class:"portlet_drag"},"<span class='webix_icon fa-"+this.s.icon+"'></span>");this.x.appendChild(t),webix.DragControl.addDrag(t,this)}else webix.DragControl.addDrag(this.$view,this)},body_setter:function(e){return this.rows_setter(webix.isArray(e)?e:[e])},markDropArea:function(e,t){return e?(e=webix.$$(e),this.Qy||(this.Qy=webix.html.create("div",null,"&nbsp;")),e.$view.appendChild(this.Qy),void(this.Qy.className="portlet_marker"+t)):webix.html.remove(this.Qy)},movePortlet:function(e,t){var i=e.getParentView(),n=this.getParentView(),r=i.index(e),o=n.index(this);if(webix.callEvent("onBeforePortletMove",[n,i,this,e,t])){webix.ui.PG=!0;var a=n!=i?1:0,s=i.mc;"top"==t||"bottom"==t?(1!==s&&(i=webix.ui({type:e.s.layoutType,rows:[]},i,r+a),webix.ui(e,i,0),r=0,a=1),"bottom"==t&&(a+=1)):("left"==t||"right"==t)&&(0!==s&&(i=webix.ui({type:e.s.layoutType,cols:[]},i,r+a),webix.ui(e,i,0),r=0,a=1),"right"==t&&(a+=1)),r>o&&(a-=1),webix.ui(this,i,r+a),"replace"==t&&webix.ui(e,n,o),this.Ry(n),webix.ui.PG=!1,n.getTopParentView(),e.resize(),n.resize(),webix.callEvent("onAfterPortletMove",[n,i,this,e,t])}},Ry:function(e){for(var t,i=0;e.getChildViews().length<=i;)t=e,e=e.getParentView(),i=1;i&&e.removeView(t)},$drag:function(e,t){return webix.html.addCss(this.x,"portlet_in_drag"),webix.DragControl.Gd={source:e,from:e},this.x.innerHTML},$dragDestroy:function(e,t,i){webix.html.removeCss(this.x,"portlet_in_drag"),webix.html.remove(t),this.Sy&&(this.movePortlet(this.Sy,this.Ty),this.markDropArea(),this.Sy=null)},WB:function(){return webix.html.offset(this.$view)},$dragPos:function(e,t,i){i.style.left="-10000px";var n=webix.env.mouse.context(t),r=document.body.scrollTop||document.documentElement.scrollTop||0,o=document.body.scrollLeft||document.documentElement.scrollLeft||0,a=document.elementFromPoint(n.x-o,n.y-r),s=null;a&&(s=webix.$$(a)),this.Sy=this.Uy(s),this.Ty=this.Vy(this.Sy,t),e.x=e.x-this.bc+10,e.y=e.y-20,webix.DragControl.Ed=!0},Vy:function(e,t){var i="",n="";if(t&&e){var r=webix.html.offset(e.$view),o=webix.html.pos(t),a=o.x-r.x-r.width/2,s=o.y-r.y-r.height/2;n=e.s.mode,n||(n=Math.abs(a)*(r.height/r.width)>Math.abs(s)?"cols":"rows"),"cols"==n?i=a>=0?"right":"left":"rows"==n&&(i=s>=0?"bottom":"top"),this.markDropArea(e,i)}return this.markDropArea(e,i),i||n},Uy:function(e){for(;e;){if(e.movePortlet)return e;e=e.getParentView()}}},webix.ui.layout),webix.UIManager.getState=function(e,t){t=t||!1,e=webix.$$(e);var i={id:e.config.id,width:e.config.width,height:e.config.height,gravity:e.config.gravity};if(webix.isUndefined(e.config.collapsed)||(i.collapsed=e.config.collapsed),("tabs"===e.name||"tabbar"===e.name)&&(i.activeCell=e.getValue()),t&&(i=[i],e.q))for(var n=0;n<e.q.length;n++)i=i.concat(this.getState(e.q[n],t));return i},webix.UIManager.setState=function(e){webix.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t],n=webix.$$(i.id);n&&(webix.isUndefined(i.collapsed)||n.define("collapsed",i.collapsed),webix.isUndefined(i.activeCell)||n.setValue(i.activeCell),n.define("width",i.width),n.define("height",i.height),n.define("gravity",i.gravity))}var r=webix.$$(e[0].id);r&&r.resize()},function(){function e(e,t){return webix.csv.stringify(e)}function t(e,t,i){return!i&&t.format?function(i){return t.format(i[e])}:function(t){return t[e]}}function i(e,i){var n=[],r=0,o=0,a=e.getColumnConfig,s=i.columns,l=!!i.rawValues;if(n.heights={},s){if(!s.length){var h=[];for(var c in s)h.push(webix.extend({id:c},webix.extend({},s[c])));s=h}}else if(a)s=[].concat(e.fj);else{s=[];var u=e.data.pull[e.data.order[0]];for(var c in u)"id"!==c&&"$"!=c[0]&&s.push({id:c})}if(i.ignore)for(var d=s.length-1;d>=0;d--)i.ignore[s[d].id]&&s.splice(d,1);if(i.id&&n.push({id:"id",width:50,header:" ",template:function(e){return e.id}}),i.flatTree){for(var f=i.flatTree.id,p=[].concat(i.flatTree.columns),m=[],g=!!i.flatTree.fill,d=1;d<=p.length;d++)p[d-1].template=function(e,t){return function(t){return t.$level==e?m[e]=t[f]:g&&e<t.$level?m[e]:""}}(d);for(var v=0,d=s.length-1;d>=0;d--)s[d].id===f&&(v=d);s=[].concat(s.slice(0,v)).concat(p).concat(s.slice(v+1))}for(var b=0;b<s.length;b++){var w=s[b],c=w.id;if(!w.noExport){a&&e.Aj[c]&&(w=webix.extend(webix.extend({},w),e.Aj[c]));var x={id:w.id,template:l||!w.template?t(c,w,l):w.template,width:(w.width||200)*("excel"===i.export_mode?8.43/70:1),header:!1!==w.header?w.header||c:""};"excel"===i.export_mode&&webix.extend(x,{type:w.exportType||"",format:w.exportFormat||""}),"string"==typeof x.header?x.header=[{text:x.header}]:x.header=webix.copy(x.header);for(var d=0;d<x.header.length;d++)x.header[d]=x.header[d]?x.header[d].contentId?"":x.header[d].text:"";if(r=Math.max(r,x.header.length),e.s.footer){var y=w.footer||"";y="string"==typeof y?[{text:y}]:webix.copy(y);for(var d=0;d<y.length;d++)y[d]?y[d]=y[d].contentId?e.getHeaderContent(y[d].contentId).getValue():y[d].text:y[d]="";x.footer=y,o=Math.max(o,x.footer.length)}n.push(x)}}for(var d=0;d<n.length;d++){for(var _=r-n[d].header.length,k=0;_>k;k++)n[d].header.push("");if(e.s.footer){_=o-n[d].footer.length;for(var k=0;_>k;k++)n[d].footer.push("")}}return n}function n(e,t,i){var n,r,o=!!t.filterHTML,a=/<[^>]*>/gi,s=[];if("excel"===t.export_mode&&t.docHeader&&(s=[[""+(t.docHeader.text||t.docHeader)],[""]],t.docHeader.height&&(i.heights[0]=t.docHeader.height)),!1!==t.header&&i.length)for(var l=0;l<i[0].header.length;l++){r=[];for(var h=0;h<i.length;h++)n="",i[h].header[l]&&(n=i[h].header[l],o&&(n=i[h].header[l]=n.replace(a,""))),r.push(n);"excel"!=t.export_mode||!e.fj||!1===t.heights||e.Mt[l]===webix.skin.$active.barHeight&&"all"!=t.heights||(i.heights[s.length]=e.Mt[l]),"pdf"!==t.export_mode&&(s[s.length]=r)}t.yCorrection=(t.yCorrection||0)-s.length;var c="TreeStore"==e.data.name,u=t.flatTree||t.plainOutput?"":" - ";if(e.data.each(function(n){if(!t.filter||t.filter(n)){for(var r=[],l=0;l<i.length;l++){var h=i[l],d=null;if(t.math&&n["$"+h.id]&&"="==n["$"+h.id].charAt(0)&&!n["$"+h.id].match(/^=(image|link|sparkline)\(/i)&&(d=n["$"+h.id]),this.Rt){var f=this.getSpan(n.id,h.id);f&&f[4]&&f[0]==n.id&&f[1]==h.id&&(d=f[4],o&&"string"==typeof d&&(d=d.replace(a,"")))}d||(d=h.template(n,e.type,n[h.id],h,l),d||0===d||(d=""),o&&"string"==typeof d&&(c&&(d=d.replace(/<div class=.webix_tree_none.><\/div>/,u)),d=d.replace(a,"")),"string"==typeof d&&"csv"===t.export_mode&&(d=d.trim()),"string"!=typeof d||"excel"!==t.export_mode&&"csv"!==t.export_mode||(d=d.replace(/<br\s*\/?>/gm,"\n"))),r.push(d)}"excel"==t.export_mode&&e.fj&&!1!==t.heights&&(n.$height&&n.$height!==webix.skin.$active.rowHeight||"all"==t.heights)&&(i.heights[s.length]=n.$height||this.config.rowHeight),s.push(r)}},e),!1!==t.footer)for(var d=i[0].footer?i[0].footer.length:0,f=0;d>f;f++){for(var p=[],h=0;h<i.length;h++){var m=i[h].footer[f];o&&(m=i[h].footer[f]=(""+m).replace(a,"")),p.push(m)}"excel"!=t.export_mode||!e.fj||!1===t.heights||e.Nt[f]===webix.skin.$active.barHeight&&"all"!=t.heights||(i.heights[s.length]=e.Nt[f]),"pdf"!==t.export_mode&&s.push(p)}return"excel"===t.export_mode&&t.docFooter&&(s=s.concat([[],[""+(t.docFooter.text||t.docFooter)]]),t.docFooter.height&&(i.heights[s.length-1]=t.docFooter.height)),s}function r(e){for(var t=[],i=0;i<e.length;i++)t.push({wch:e[i].width});return t}function o(e){return Math.round(25569+e/864e5)}function a(e,t){var i=e.getColumnConfig,n=e.Rt,r=[];if(i){if(!1!==t.header&&(r=s(e,t,"header",r)),n){var o=t.xCorrection||0,a=t.yCorrection||0;for(var l in n){var h=n[l];for(var c in h){var u=e.getColumnIndex(c)-o,d=e.getIndexById(l)-a,f=u+h[c][0]-1,p=d+(h[c][1]-1);r.push({s:{c:u,r:d},e:{c:f,r:p}})}}}!1!==t.footer&&(r=s(e,t,"footer",r))}return r}function s(e,t,i,n){for(var r=e.config.columns,o=(t.docHeader?2:0)+("header"==i?0:(!1!==t.header?e.Mt.length:0)+e.count()),a=0;a<r.length;a++)for(var s=r[a][i],l=0;l<s.length;l++)s[l]&&(s[l].colspan||s[l].rowspan)&&n.push({s:{c:a,r:l+o},e:{c:a+(s[l].colspan||1)-1,r:l+(s[l].rowspan||1)-1+o}});return n}function l(e,t,i){return i[e]&&i[e][t]?i[e][t]:""}function h(e){for(var t in e)e[t]={hpx:e[t],hpt:.75*e[t]};return e}function c(e,t,i,n){for(var a={},s={s:{c:1e7,r:1e7},e:{c:0,r:0}},c=0;c!=e.length;++c)for(var u=0;u!=e[c].length;++u){s.s.r>c&&(s.s.r=c),s.s.c>u&&(s.s.c=u),s.e.r<c&&(s.e.r=c),s.e.c<u&&(s.e.c=u);var d={v:e[c][u]};if(null!==d.v){var f=XLSX.utils.encode_cell({c:u,r:c});if(d.v instanceof Date?(d.t="n",d.z=XLSX.SSF[g][14],d.v=o(d.v)):"boolean"==typeof d.v?d.t="b":"number"==typeof d.v||d.v&&!isNaN(1*d.v)?(d.v=1*d.v,d.t="n"):"="==d.v.charAt(0)?(d.t="n",d.f=d.v,delete d.v):d.t="s",c>=t[0].header.length&&!d.f){var p=t[u];p.type&&(d.t=m[p.type]||d.t),p.format&&(d.z=p.format)}n&&(d.s=l(c,u,n)),a[f]=d}}return s.s.c<1e7&&(a["!ref"]=XLSX.utils.encode_range(s)),a["!rows"]=h(t.heights),a["!cols"]=r(t),i.length&&(a["!merges"]=i),a}function u(e){for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),n=0;n!=e.length;++n)i[n]=255&e.charCodeAt(n);return t}function d(e,t,i,n){i.header=webix.isUndefined(i.header)||!0===i.header?{}:i.header,i.footer=webix.isUndefined(i.footer)||!0===i.footer?{}:i.footer,i.table=i.table||{};var r=i.width||595.296,o=i.height||841.896;if(i.orientation&&"landscape"===i.orientation&&(o=[r,r=o][0]),i.autowidth){r=80;for(var a=0;a<e.length;a++)r+=e[a].width}for(var s=new pdfjs.Document({padding:40,font:i.hB,threshold:256,width:r,height:o}),l=!1===i.header?0:e[0].header.length,h=!1!==i.footer&&e[0].footer?e[0].footer.length:0,c=[],a=0;a<e.length;a++)c[a]=e[a].width;var u=webix.extend(i.table,{borderWidth:1,height:20,lineHeight:1.1,borderColor:15658734,backgroundColor:16777215,color:6710886,textAlign:"left",paddingRight:10,paddingLeft:10,headerRows:l,widths:c.length?c:["100%"]}),d=s.table(u);if(l)for(var f=webix.extend(i.header,{borderRightColor:11587299,borderBottomColor:11587299,color:4868682,backgroundColor:13820911,height:27,lineHeight:1.2}),a=0;l>a;a++)for(var p=d.tr(f),m=0;m<e.length;m++)p.td(""+e[m].header[a]);for(var g=0;g<t.length;g++)for(var v=d.tr({}),b=0;b<t[g].length;b++)v.td(t[g][b]);if(h)for(var w=webix.extend(i.footer,{borderRightColor:15658734,borderBottomColor:15658734,backgroundColor:16448250,color:6710886,height:27,lineHeight:1.2}),a=0;h>a;a++)for(var x=d.tr(w),m=0;m<e.length;m++)x.td(""+e[m].footer[a]);if(!1!==i.docFooter){s.footer().text({color:6710886,textAlign:"center"}).append(webix.i18n.dataExport.page||"Page").pageNumber().append("  "+(webix.i18n.dataExport.of||"of")+"  ").pageCount()}var y={text:0,image:1};if(i.docHeader&&("string"==typeof i.docHeader&&(i.docHeader={text:i.docHeader}),webix.extend(i.docHeader,{color:6710886,textAlign:"right",order:0}),y.text=i.docHeader.order),i.docHeaderImage&&("string"==typeof i.docHeaderImage&&(i.docHeaderImage={url:i.docHeaderImage}),webix.extend(i.docHeaderImage,{align:"right",order:1}),y.image=i.docHeaderImage.order),i.docHeader&&y.image>y.text&&s.header({paddingBottom:10}).text(i.docHeader.text,i.docHeader),i.docHeaderImage)pdfjs.load(i.docHeaderImage.url,function(e,t){if(!e){var r=new pdfjs.Image(t);s.header({paddingBottom:10}).image(r,i.docHeaderImage),i.docHeader&&y.image<y.text&&s.header({paddingBottom:10}).text(i.docHeader.text,i.docHeader)}var o=s.render();n(o,i)});else{var _=s.render();n(_,i)}}var f="non-existing view for export";webix.toPNG=function(e,t){var i=webix.promise.defer();return webix.require(webix.cdn+"/extras/html2canvas.min.js",function(){"string"==typeof t&&(t={filename:t}),t=t||{};var n=webix.$$(e);if(n&&n.$exportView&&(n=n.$exportView(t)),!n)return i.reject(f);var r=n?n.$view:webix.toNode(e),o=(t.filename||"Data")+".png";window.html2canvas(r).then(function(e){var n=function(n){!1!==t.download&&webix.html.download(n,o),e.remove(),i.resolve(n)};e.msToBlob?n(e.msToBlob()):e.toBlob(n,"image/png")})}),i},webix.toExcel=function(e,t){t=t||{},t.export_mode="excel",e=webix.isArray(e)?e:[e];for(var r=[],o=0;o<e.length;o++){var s=webix.$$(e[o]);if(s&&s.$exportView&&(s=s.$exportView(t)),s&&(r=r.concat(s)),t.dataOnly){var l=i(s,t);r[o]={scheme:l,exportData:n(s,t,l),spans:t.spans?a(s,t):[]}}}if(t.dataOnly)return r;var h=webix.promise.defer();return webix.require(webix.cdn+"/extras/xlsx.core.styles.min.js",function(){if(!r.length)return h.reject(f);for(var e={SheetNames:[],Sheets:{},Workbook:{WBProps:{},Names:[]}},o=webix.isArray(t.sheets)?t.sheets:[t.name||"Data"],s=0;s<r.length;s++){var l=r[s].scheme||i(r[s],t),d=r[s].exportData||n(r[s],t,l),p=r[s].spans?r[s].spans:t.spans?a(r[s],t):[],m=r[s].ranges||[],g=r[s].styles||[],v=c(d,l,p,g),b=(o[s]||"Data"+s).replace(/[\*\?\:\[\]\\\/]/g,"").replace(/&/g,"&amp;").substring(0,31);e.SheetNames.push(b),e.Sheets[b]=v,e.Workbook.Names=e.Workbook.Names.concat(m)}var w=XLSX.write(e,{bookType:"xlsx",bookSST:!1,type:"binary"}),x=(t.filename||o.join(","))+".xlsx",y=new Blob([u(w)],{type:"application/xlsx"});!1!==t.download&&webix.html.download(y,x),h.resolve(y)}),h},webix.toCSV=function(t,r){r=r||{};var o=webix.$$(t);if(o&&o.$exportView&&(o=o.$exportView(r)),!o)return webix.promise.reject(f);r.export_mode="csv",r.filterHTML=!0;var a=i(o,r),s=n(o,r,a),l=e(s,a),h=(r.filename||"Data")+".csv",c=new Blob(["\ufeff"+l],{type:"text/csv"});return!1!==r.download&&webix.html.download(c,h),webix.promise.resolve(c)};var p;webix.toPDF=function(e,t){var r=webix.promise.defer();return webix.require(webix.cdn+"/extras/pdfjs.js",function(){t=t||{};var o=webix.$$(e);if(o&&o.$exportView&&(o=o.$exportView(t)),!o)return r.reject();t.export_mode="pdf",t.hB=p,t.fontName=t.fontName||"pt-sans.regular";var a=i(o,t),s=n(o,t,a),l=function(e,t){var i=(t.filename||"Data")+".pdf",n=new Blob([""+e],{type:"application/pdf"});!1!==t.download&&webix.html.download(n,i),r.resolve(n)};t.hB?d(a,s,t,l):pdfjs.load(webix.cdn+"/extras/"+t.fontName+".ttf",function(e,i){if(e)throw e;p=t.hB=new pdfjs.TTFFont(i),d(a,s,t,l)})}),r};var m={number:"n",date:"n",string:"s",boolean:"b"},g="_table"}(),webix.protoUI({name:"pdfviewer",defaults:{scale:"auto"},$init:function(e){this.$view.className+=" webix_pdf";var t=document.createElement("DIV");t.className="canvas_wrapper";var i=document.createElement("canvas");this.uz=this.$view,this.gt=this.$view.appendChild(t),this.Zn=this.gt.appendChild(i),this.$pdfDoc=null,this.$pageNum=0,this.$numPages=0,this.vz=!1,this.wz=null,this.xz=this.Zn.getContext("2d"),this.zz=.1,this.Az=e.scaleDelta||1.1,this.Bz=e.minScale||.25,this.Cz=e.maxScale||10,this.Dz=1.25,this.Ez=40,this.Fz=10,this.$ready.push(this.Hz)},toolbar_setter:function(e){if("string"==typeof e){var t=webix.$$(e);return t&&(t.$master=this,t.refresh()),this.attachEvent("onDocumentReady",function(){t?(t.setPage(this.$pageNum),t.setValues(this.$numPages,this.s.scale)):this.toolbar_setter(e)}),e}},Hz:function(){if(delete this.s.datatype,this.attachEvent("onScaleChange",function(e,t){t&&this.s.toolbar&&webix.$$(this.s.toolbar).setScale&&webix.$$(this.s.toolbar).setScale(e)}),webix.env.touch)this.xE=!1,webix.UE(this.x,"touchstart",webix.bind(function(e){var t=e.targetTouches;2===t.length&&(webix.html.preventEvent(e),this.xE=Math.abs(t[0].pageY-t[1].pageY))},this)),webix.UE(this.$view,"touchmove",webix.bind(function(e){var t=e.targetTouches;2===t.length&&!1!==this.xE&&(webix.html.preventEvent(e),Math.abs(t[0].pageY-t[1].pageY)>this.xE?this.zoomIn():this.zoomOut(),this.xE=!1)},this)),this.attachEvent("onSwipeX",function(e,t){this.$view.scrollLeft=this.$view.scrollLeft-(t.x-e.x)}),this.attachEvent("onSwipeY",function(e,t){var i=this.$view.clientHeight,n=this.$view.scrollHeight,r=this.$view.offsetHeight,o=this.$view.scrollTop,a=t.y-e.y;if(i===n||0>a&&o>n-r||a>0&&0===o){var s=this.$pageNum+(a>0?-1:1);s>0&&s<=this.$numPages&&(this.$pageNum=s,this.Mz(this.$pageNum),this.$view.scrollTop=a>0?n:0)}else this.$view.scrollTop=o-a});else{var e=webix.env.isFF?"DOMMouseScroll":"mousewheel";webix.event(window,e,webix.bind(function(e){var t="DOMMouseScroll"===e.type?-e.detail:e.wheelDelta,i=0>t?"out":"in";e.ctrlKey&&(webix.html.preventEvent(e),"in"==i?this.zoomIn():this.zoomOut())},this))}},yE:function(e){if(e.name){var t=new FileReader;t.onload=webix.bind(function(e){this.yE({data:e.target.result})},this),t.readAsArrayBuffer(e)}else PDFJS.getDocument({data:e.data}).then(webix.bind(function(e){this.clear(),this.$pdfDoc=e,this.$numPages=this.$pdfDoc.numPages,this.$pageNum=1,this.Jz(this.$pageNum).then(webix.bind(function(){this.callEvent("onDocumentReady")},this))},this))},$onLoad:function(e){return window.PDFJS?this.yE(e):webix.require([webix.cdn+"/extras/pdfjs/compatibility.min.js",webix.cdn+"/extras/pdfjs/pdf.min.js"],function(){PDFJS.workerSrc=webix.cdn+"/extras/pdfjs/pdf.worker.min.js",this.yE(e)},this),!0},Kz:function(e,t){var i=e.getViewport(t);return this.Zn.height=i.height,this.Zn.width=i.width,this.gt.style.width=i.width+"px",this.gt.style.height=i.height+"px",i},Jz:function(e){var t=this;return t.vz=!0,this.$pdfDoc.getPage(e).then(function(e){var i=isNaN(parseFloat(t.s.scale))?t.zz:t.s.scale,n=t.Kz(e,i);i!==t.s.scale&&(i=t.Lz(t.s.scale),n=t.Kz(e,i),t.s.scale=i);var r={canvasContext:t.xz,viewport:n};return e.cleanupAfterRender=!0,e.render(r).promise.then(function(){t.callEvent("onPageRender",[t.$pageNum]),t.vz=!1,null!==t.wz&&(t.Jz(t.wz),t.wz=null)})})},Mz:function(e){this.vz?this.wz=e:this.Jz(e)},renderPage:function(e){!this.$pdfDoc||0>e||e>this.$numPages||(this.$pageNum=e,this.Mz(this.$pageNum))},prevPage:function(){this.$pageNum<=1||(this.$pageNum--,this.Mz(this.$pageNum))},nextPage:function(){this.$pageNum>=this.$numPages||(this.$pageNum++,this.Mz(this.$pageNum))},zoomIn:function(){var e=this.s.scale;e=(e*this.Az).toFixed(2),e=Math.ceil(10*e)/10,e=Math.min(this.Cz,e),this.setScale(e,!0)},zoomOut:function(){var e=this.s.scale;e=(e/this.Az).toFixed(2),e=Math.floor(10*e)/10,e=Math.max(this.Bz,e),this.setScale(e,!0)},Lz:function(e){if(!isNaN(parseFloat(e)))return e;isNaN(parseFloat(this.s.scale))&&(this.s.scale=this.zz);var t=1,i=((this.uz.clientWidth-this.Ez)*this.s.scale/this.Zn.clientWidth).toFixed(2),n=((this.uz.clientHeight-this.Fz)*this.s.scale/this.Zn.clientHeight).toFixed(2);switch(e){case"page-actual":t=1;break;case"page-width":t=i;break;case"page-height":t=n;break;case"page-fit":t=Math.min(i,n);break;case"auto":var r=this.uz.clientWidth>this.uz.clientHeight,o=r?Math.min(n,i):i;t=Math.min(this.Dz,o)}return t},setScale:function(e,t){if(isNaN(parseFloat(e))){var i=this.Lz(e);this.Nz(i,t)}else this.Nz(e,t)},Nz:function(e,t){this.s.scale=e,this.renderPage(this.$pageNum),this.callEvent("onScaleChange",[e,t])},download:function(){if(this.$pdfDoc){var e=(this.s.downloadName||"document")+".pdf";this.$pdfDoc.getData().then(function(t){var i=PDFJS.createBlob(t,"application/pdf");webix.html.download(i,e)})}},clear:function(){this.$pdfDoc&&(this.xz.clearRect(0,0,this.Zn.width,this.Zn.height),this.gt.style.height=this.gt.style.width=this.Zn.width=this.Zn.height=0,this.s.scale="auto",this.$pageNum=this.$numPages=0,this.$pdfDoc.transport.startCleanup(),this.$pdfDoc.destroy(),this.$pdfDoc=null,this.s.toolbar&&webix.$$(this.s.toolbar)&&webix.$$(this.s.toolbar).reset())}},webix.EventSystem,webix.AtomDataLoader,webix.ui.view),webix.protoUI({name:"pdfbar",reset:function(){this.setPage(0),this.setValues(0,"auto")},$init:function(e){this.$view.className+=" pdf_bar",e.cols=[{view:"button",type:"icon",icon:"arrow-left",width:35,click:function(){this.getParentView().he("prev")}},{view:"text",width:70,value:"0",on:{onBlur:function(){this.getParentView().he(this.getValue())},onKeyPress:function(e){13===e&&this.getParentView().he(this.getValue())}}},{template:webix.i18n.PDFviewer.of+" #limit#",width:70,data:{limit:0},borderless:!0},{view:"button",type:"icon",icon:"arrow-right",width:35,click:function(){this.getParentView().he("next")}},{},{view:"button",type:"icon",icon:"minus",width:35,click:function(){this.getParentView().zoom("out")}},{view:"richselect",options:[],maxWidth:195,suggest:{padding:0,css:"pdf_opt_list",borderless:!0,body:{type:{height:25},scroll:!1,yCount:13}},on:{onChange:function(){this.getParentView().setMasterScale(this.getValue())}}},{view:"button",type:"icon",icon:"plus",width:35,click:function(){this.getParentView().zoom("in")}},{view:"button",type:"icon",icon:"download",width:35,click:function(){this.getParentView().download()}}],this.$ready.push(this.Oz)},Oz:function(){var e=this.getChildViews()[6].getPopup().getBody();e.clearAll(),e.parse([{id:"auto",value:webix.i18n.PDFviewer.automaticZoom},{id:"page-actual",value:webix.i18n.PDFviewer.actualSize},{id:"page-fit",value:webix.i18n.PDFviewer.pageFit},{id:"page-width",value:webix.i18n.PDFviewer.pageWidth},{id:"page-height",value:webix.i18n.PDFviewer.pageHeight},{id:"0.5",value:"50%"},{id:"0.75",value:"75%"},{id:"1",value:"100%"},{id:"1.25",value:"125%"},{id:"1.5",value:"150%"},{id:"2",value:"200%"},{id:"3",value:"300%"},{id:"4",value:"400%"}]);var t=0;e.data.each(function(e){t=Math.max(webix.html.getTextSize(e.value,"webixbutton").width,t)}),this.getChildViews()[6].define("width",t+20),this.getChildViews()[6].resize()},he:function(e){this.setMasterPage(e),this.setPage(this.$master.$pageNum)},setScale:function(e){var t=this.getChildViews()[6];t.blockEvent(),t.getPopup().getList().exists(e)?t.setValue(e):(t.setValue(""),t.getInputNode().innerHTML=(100*e).toFixed(0)+"%"),t.unblockEvent()},setMasterScale:function(e){this.$master&&this.$master.setScale(e)},setMasterPage:function(e){this.$master&&("prev"===e?this.$master.prevPage():"next"===e?this.$master.nextPage():isNaN(parseInt(e))||this.$master.renderPage(parseInt(e)))},zoom:function(e){this.$master&&("out"===e?this.$master.zoomOut():"in"===e&&this.$master.zoomIn())},setPage:function(e){this.getChildViews()[1].setValue(e)},setValues:function(e,t){this.getChildViews()[2].data.limit=e,this.getChildViews()[2].refresh(),this.setScale(t)},download:function(){this.$master&&this.$master.download()}},webix.ui.toolbar),webix.protoUI({name:"excelbar",defaults:{padding:0,type:"line"},$init:function(e){e.cols=[{view:"tabbar",options:[""],optionWidth:200,on:{onaftertabclick:function(){this.getParentView().callEvent("onExcelSheetSelect",[this.getValue()])}}}]},getValue:function(){return this.getInput().getValue()},setValue:function(e){return this.getInput().setValue(e)},getInput:function(){return this.getChildViews()[0]},setSheets:function(e){var t=this.getInput();t.config.options=e,t.refresh()}},webix.ui.toolbar),webix.protoUI({name:"excelviewer",$init:function(){this.$ready.push(function(){this.s.toolbar&&webix.$$(this.s.toolbar).attachEvent("onExcelSheetSelect",webix.bind(this.showSheet,this))})},defaults:{datatype:"excel"},$onLoad:function(e){if(e.sheets){this.zA=e,this.s.toolbar&&webix.$$(this.s.toolbar).setSheets(e.names);var t=e.names[0];return this.showSheet(t.id||t),!0}return!1},$exportView:function(e){if("excel"!==e.export_mode||e.dataOnly)return this;!0===e.sheets?e.sheets=this.getSheets():e.sheets&&e.sheets.length?"string"==typeof e.sheets&&(e.sheets=[e.sheets]):e.sheets=[this.IG],e.dataOnly=!0,e.heights=webix.isUndefined(e.heights)&&e.styles?"all":e.heights;for(var t=[],i=this.IG,n=0;n<e.sheets.length;n++)this.showSheet(e.sheets[n]),t=t.concat(webix.toExcel(this,e)),e.styles&&(t[n].styles=this.oG(e));return this.showSheet(i),delete e.dataOnly,t},showSheet:function(e){this.clearAll();var t=this.data.driver.sheetToArray(this.zA.sheets[e],{spans:this.s.spans}),i=this.s.excelHeader,n={},r={};if(t.sizes)for(var o=0;o<t.sizes.length;o++)"column"==t.sizes[o][0]?n[t.sizes[o][1]]=Math.round(t.sizes[o][2]):"row"==t.sizes[o][0]&&(r[t.sizes[o][1]]=Math.round(t.sizes[o][2]));if(i)if(!0===i){i=t.data.splice(0,1)[0];for(var o=0;o<i.length;o++)i[o]={header:i[o],id:"data"+o,width:n[o],adjust:!n[o],editor:"text",sort:"string"}}else i=webix.copy(i);else{i=webix.copy(t.data[0]);for(var o=0;o<i.length;o++)i[o]={header:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[o],id:"data"+o,width:n[o],adjust:!n[o],editor:"text",sort:"string"}}this.config.columns=i,this.refreshColumns(),this.parse(t,this.s.datatype),this.IG=e;var a=this.eG(t.spans),s=this.JG(r),l=this.KG(t.styles,a);(a||s||l)&&this.refresh()},getSheets:function(){return this.zA.names},LG:function(e,t,i,n){for(var r=!1,o=0;o<e.length;o++)if(e[o][0]===t&&e[o][1]===i){e[o][5]=webix.html.createCss(this.MG(n)),this.addSpan(e[o][0],e[o][1],e[o][2],e[o][3],e[o][4],e[o][5]),r=!0;break}return r},KG:function(e,t){var i=0;if(e&&e.length){for(var n=0;n<e.length;n++){var r=e[n][0]-(this.config.excelHeader?1:0);if(r>=0){var o=this.getIdByIndex(r);if(this.exists(o)){var a=this.getItem(o),s=this.columnId(e[n][1]);s&&(t.length&&this.LG(t,o,s,e[n][2])||(a.$cellCss=a.$cellCss||{},a.$cellCss[s]=this.MG(e[n][2])),i++)}}}return i}return!1},NG:function(e){return e=e||"000000",8===e.length&&(e=e.substring(2)),"#"+e},MG:function(e){var t={};if(e.fill&&e.fill.fgColor&&(t["background-color"]=this.NG(e.fill.fgColor.rgb)),e.font){var i=e.font;i.name&&(t["font-family"]=i.name),i.sz&&(t["font-size"]=i.sz/.75+"px"),i.color&&i.color.rgb&&(t.color=this.NG(i.color.rgb)),i.bold&&(t["font-weight"]="bold"),i.underline&&(t["text-decoration"]="underline"),i.italic&&(t["font-style"]="italic"),i.strike&&(t["text-decoration"]="line-through")}if(e.alignment){var n=e.alignment;n.vertical&&"center"==n.vertical&&(t.display="flex",t["justify-content"]="flex-start",t["align-items"]="center"),n.vertical&&"bottom"==n.vertical&&(t.display="flex",t["justify-content"]="flex-end",t["align-items"]="flex-end"),n.horizontal&&(!n.vertical||"center"!=n.vertical&&"bottom"!=n.vertical?t["text-align"]=n.horizontal:t["justify-content"]="center"),n.wrapText&&(t["white-space"]="normal")}if(e.border){var r=e.border;r.top&&(t["border-top"]="1px solid "+this.NG(r.top.color.rgb)),r.bottom&&(t["border-bottom"]="1px solid "+this.NG(r.bottom.color.rgb)+" !important"),r.left&&(t["border-left"]="1px solid "+this.NG(r.left.color.rgb)),r.right&&(t["border-right"]="1px solid "+this.NG(r.right.color.rgb)+" !important")}return t},JG:function(e){var t=0;for(var i in e){var n=this.config.excelHeader?i-1:i;if(n>=0){var r=this.getIdByIndex(n);this.exists(r)&&(this.getItem(r).$height=e[i],t++)}}return this.config.fixedRowHeight=!t,t},eG:function(e){var t=[];if(this.s.spans&&e&&e.length){this.Rt={};for(var i=0;i<e.length;i++)this.config.excelHeader&&e[i][0]--,e[i][0]>=0&&(e[i][0]=this.getIdByIndex(e[i][0]),e[i][1]="data"+e[i][1],t.push(e[i]));return this.addSpan(t),t}return!1}},webix.ui.datatable),webix.DataDriver.excel=webix.extend({toObject:function(e){if(!e.excel){var t=e.options||{};t.dataurl&&webix.extend(t,this.zB(t.dataurl)),e=e.data||e;var i=webix.promise.defer();if(e.name){t.ext=e.name.split(".").pop();var n=new FileReader;n.onload=webix.bind(function(e){i.resolve(this.parseData(e.target.result,t))},this),n.readAsArrayBuffer(e)}else i.resolve(this.parseData(e,t));return i}return e},parseData:function(e,t){e=new Uint8Array(e);for(var i=[],n=0;n!=e.length;++n)i[n]=String.fromCharCode(e[n]);var r=(t.ext||t).toLowerCase();return"xls"!=r&&(r="xlsx"),webix.require(webix.cdn+"/extras/xlsx.core.styles.min.js").then(webix.bind(function(){var e="xls"==r?XLS.read(i.join(""),{type:"binary",cellStyles:!0,cellDates:!0}):XLSX.read(i.join(""),{type:"binary",cellStyles:!0,cellDates:!0}),n={sheets:e.Sheets,names:e.SheetNames,options:t,ranges:e.Workbook?e.Workbook.Names||[]:[]};return webix.extend(this.getSheet(n,t),n)},this))},getSheet:function(e,t){var i=t.name||e.names[0];return e=this.sheetToArray(e.sheets[i],t),t.rows&&t.rows.length&&(e.data=e.data.splice(t.rows[0],Math.min(t.rows[1],e.data.length)-t.rows[0])),e},sheetToArray:function(e,t){var i=[],n=[],r=[],o=[];if(e&&e["!ref"]){var a,s,l,h,c=XLS.utils.decode_range(e["!ref"]),u=c.s.c,d=c.s.r+(t.rows?t.rows[0]:0);for(a=c.s.r;a<=c.e.r;a++){var f=[];for(s=c.s.c;s<=c.e.c;s++)if(l=XLS.utils.encode_cell({r:a,c:s}),h=e[l]){var p="";p=t.math&&h.f?"="==h.f.charAt(0)?h.f:"="+h.f:"d"==h.t&&webix.isDate(h.v)?webix.i18n.dateFormatStr(h.v):h.v,f.push(p),h.s&&r.push([a-d,s-u,h.s])}else f.push("");i.push(f)}if(e["!merges"])for(var m=e["!merges"],g=0;g<m.length;g++){var v=m[g].s,b=m[g].e;(!t.rows||v.r-d>=0&&b.r-d<=t.rows[1])&&n.push([v.r-d,v.c-u,b.c-v.c+1,b.r-v.r+1])}if(e["!cols"])for(var w=e["!cols"],g=0;g<w.length;g++)w[g]&&o.push(["column",g-u,Math.round(w[g].wch/(8.43/70))]);if(e["!rows"])for(var x=e["!rows"],g=0;g<x.length;g++)x[g]&&o.push(["row",g-d,x[g].hpx])}return{data:i,spans:n,styles:r,sizes:o,excel:!0}},zB:function(e){var t=e.split("["),i={};if(i.name=t[0],t[1]){var n=t[1].split(/[^0-9]+/g);n[0]=1*n[0]||0,n[1]=1*n[1]||9999999,i.rows=n}return i}},webix.DataDriver.jsarray),webix.protoUI({name:"treemap",defaults:{activeItem:!1,subRender:!0,header:!0,headerHeight:35,value:webix.template("#value#"),headerTemplate:"",navigation:!0},value_setter:webix.template,headerTemplate_setter:webix.template,header_setter:function(e){return e&&!0!==e&&(this.type.header=e),e},$init:function(e){this.$view.className+=" webix_treemap",this.x.setAttribute("role","tree"),this.PA=document.createElement("DIV"),webix.extend(this.data,webix.TreeStore,!0),this.data.provideApi(this,!0),this.data.attachEvent("onClearAll",webix.bind(function(){this.v="",this.$values={},this.$xy={}},this)),this.attachEvent("onKeyPress",this.DD)},pg:function(e){var t=this.data.Me[e.id];this.callEvent("onItemRender",[e]);var i=e.$template?this.type["template"+e.$template].call(this,e,this.type,t):this.type.template.call(this,e,this.type,t);return this.type.templateStart.call(this,e,this.type,t)+i+this.type.templateEnd.call(this)},QA:function(e){var t=this.getItem(e),i=this.s.headerHeight,n="<div class='webix_treemap_header' style='height:"+i+"px;line-height:"+i+"px;'>";return n+=this.type.header.call(this,t,this.type),n+="</div>"},_x:function(e){var t,i,n,r,o,a=[];if(!this.$width||!this.count())return this.v="",!1;if(e||(e=this.config.branch||0,this.v="",this.$values={},this.$xy={},this.$xy[e]={width:this.$width,height:this.$height,top:0,left:0},e&&this.s.header&&(this.$xy[e].height-=this.s.headerHeight,this.$xy[e].top=this.s.headerHeight,this.v+=this.QA(e)),o=0,this.data.each(function(e){var t=this.getParentId(e.id);if(!this.data.branch[e.id]&&(r=1*this.config.value.call(this,e),!isNaN(r)&&r))for(this.$values[e.id]=r,o+=r;t;)this.$values[t]||(this.$values[t]=0),this.$values[t]+=r,t=this.getParentId(t)},this,!1,e)),this.data.eachChild(e,function(e){this.$values[e.id]&&a.push(webix.copy(e))},this),o=o||this.$values[e],a.length&&o){i=this.$xy[e],n={top:i.top,left:i.left,dx:i.width,dy:i.height,set:[],sum:0},n.dim=Math.min(n.dx,n.dy);var s=n.dx*n.dy/o;for(t=0;t<a.length;t++)a[t].$value=this.$values[a[t].id]*s;a.sort(function(e,t){return e.$value>t.$value?-1:1});for(var l=1/0,t=0;a[t];){var h=this.RA(n,a[t]);if(l>h)n.sum+=a[t].$value,n.set.push(a[t]),l=h,t++;else{this.SA(n);var c={top:n.top,left:n.left,dx:n.dx,dy:n.dy,set:[],sum:0},s=n.sum/n.dim;n.dx>n.dy?(c.left+=s,c.dx-=s):(c.top+=s,c.dy-=s),n=c,n.dim=Math.min(n.dx,n.dy),l=1/0}}}n&&this.SA(n)},SA:function(e){var t,i,n,r,o=e.top,a=e.left;for(e.mode=e.dy<e.dx,e.contra=e.sum/e.dim,t=0;t<e.set.length;t++)i=e.set[t].id,e.mode?(n=e.contra,r=e.set[t].$value/e.contra):(n=e.set[t].$value/e.contra,r=e.contra),this.$xy[i]={},this.$xy[i].top=o,this.$xy[i].left=a,e.mode?o+=r:a+=n,this.$xy[i].width=n,this.$xy[i].height=r,this.v+=this.pg(this.getItem(i)),this.s.subRender&&this.data.branch[i]&&this._x(i)},RA:function(e,t){var i=e.sum+t.$value,n=i*i/(e.dim*e.dim*t.$value);return e.set.length&&(n=Math.max(e.dim*e.dim*e.set[0].$value/(i*i),n)),n>1?n:1/n},Ne:function(e){return this.PA.innerHTML=this.pg(e),this.PA.firstChild},showBranch:function(e){this.s.branch=e,this.refresh()},render:function(e,t,i){if(this.isVisible(this.s.id)&&!this.$blockRender){if("update"==i){var n=this.getItemNode(e);if(n){var r=this.t[e]=this.Ne(t);webix.html.insertBefore(r,n),webix.html.remove(n)}}else!this.data.branch||this.s.branch&&!this.data.branch[this.s.branch]||(this.t=null,this.callEvent("onBeforeRender",[]),this._x(),this.y.innerHTML=this.v,this.callEvent("onAfterRender",[]));return!0}},ad:"webix_dm_id",on_click:{webix_treemap_item:function(e,t){this.s.select&&("multiselect"==this.s.select||this.s.multiselect?this.select(t,!1,e.ctrlKey||e.metaKey||"touch"==this.s.multiselect,e.shiftKey):this.select(t)),this.s.activeItem&&this.isBranch(t)&&this.showBranch(t)},webix_treemap_header_item:function(e){var t=webix.html.locate(e,"webix_dm_header_id");this.define("branch",t),this.refresh()},webix_treemap_reset:function(e){this.define("branch",0),this.refresh()}},on_dblclick:{},on_mouse_move:{},TA:function(e){var t="";for(var i in e)t+=i+":"+e[i]+";";return t},type:{template:webix.template("#value#"),header:function(e,t){for(var i=e.id,n="<div role='button' tabindex='0' aria-label='"+webix.i18n.aria.resetTreeMap+"' class='webix_treemap_reset'></div>",r=[];i;)e=this.getItem(i),r.push(t.headerItem.call(this,e,t)),i=this.getParentId(i);return r.reverse(),n+r.join("<span class='webix_icon fa-angle-right webix_treemap_path_icon'></span>")},headerItem:function(e){var t=this.config.headerTemplate(e),i='<a role="button" tabindex="0" aria-label="'+t+'" webix_dm_header_id="'+e.id+'" class="webix_treemap_header_item">';return i+=t,i+="</a>"},classname:function(e,t,i){var n="webix_treemap_item";t.css&&(n+=t.css+" "),e.$css&&("object"==typeof e.$css&&(e.$css=webix.html.createCss(e.$css)),n+=" "+e.$css);var r=this.$xy[e.id];i&&i.$css&&(n+=" "+i.$css),n+=" webix_treemap_level_"+this.getItem(e.id).$level;var o=this.getParentId(e.id);if(o&&o!=this.s.branch||(n+=" webix_treemap_level_top"),this.$height-r.top-r.height<1&&(n+=" webix_treemap_item_bottom"),this.$width-r.left-r.width<1&&(n+=" webix_treemap_item_right"),t.cssClass){var a=t.cssClass.call(this,e,t,i);a&&(n+="object"==typeof a?" "+webix.html.createCss(a):" "+a)}return n},templateStart:function(e,t,i){var n="";if(this.$xy){var r=this.$xy[e.id];n+="width: "+r.width+"px; height: "+r.height+"px;",n+="top: "+r.top+"px; left: "+r.left+"px;"}return'<div role="treeitem" aria-level="'+e.$level+'" '+(i&&i.webix_selected?'aria-selected="true" tabindex="0"':"")+' webix_dm_id="'+e.id+'" class="'+t.classname.call(this,e,t,i)+'" style="'+n+'">'},templateEnd:webix.template("</div>")}},webix.AutoTooltip,webix.Group,webix.TreeAPI,webix.SelectionModel,webix.KeysNavigation,webix.MouseEvents,webix.Scrollable,webix.TreeDataLoader,webix.ui.proto,webix.TreeRenderStack,webix.CopyPaste,webix.EventSystem),webix.extend(webix.ui.datatable,{iB:function(){this.jB=!0,this.kB={},this.define("select","area"),this.attachEvent("onAfterScroll",function(){this.refreshSelectArea()}),this.attachEvent("onAfterRender",function(){this.refreshSelectArea()}),this.attachEvent("onBeforeColumnHide",function(e){this.tC=this.getColumnIndex(e)}),this.attachEvent("onAfterColumnHide",function(){this.uC(this.tC)}),this.attachEvent("onAfterRender",function(){this.qH()}),this.wB=function(e,t,i,n){if(e.row&&t.row){if(i)return this.addSelectArea(e,t,!0),this.jB=!0,!1;if(!this.callEvent("onAreaDrag",[e,t,n]))return!1;this.mB?this.nB(this.mB):!this.jB||this.s.multiselect&&n&&n.ctrlKey||(this.removeSelectArea(),this.jB=!1)}},this.attachEvent("onBeforeAreaAdd",this.oB),webix.UE(this.Vf,"mousedown",this.pB,{bind:this})},ql:!0,uC:function(e){var t=this.kB;for(var i in t){var n=t[i];if(this.getColumnIndex(n.start.column)<0)if(n.start.column==n.end.column)this.removeSelectArea(n.name);else{var r=this.columnId(e+1);r&&this.vC(n.name,{row:n.start.row,column:r},null)}else if(this.getColumnIndex(n.end.column)<0){var r=this.columnId(e-1);r&&this.vC(n.name,null,{row:n.end.row,column:r})}}},gC:function(e,t,i,n){var r,o,a,s,l,h,c,u;if(t){r=this.getColumnIndex(t.start.column),o=this.getColumnIndex(t.end.column),a=this.getIndexById(t.start.row),s=this.getIndexById(t.end.row),l=this.getColumnIndex(e.column),h=this.getIndexById(e.row),c=this.getIndexById(t.init.row),u=this.getColumnIndex(t.init.column),r>l||"left"==i?"left"===i&&n.ctrl?(r=this.OG(c,r,i),o=u):"left"===i&&o>u?o--:r=l:(l>=o||"right"==i)&&("right"==i&&n.ctrl?(o=this.OG(c,o,i),r=u):"right"==i&&u>r?r++:o=l),a>h||"up"==i?"up"==i&&n.ctrl?(a=this.OG(a,u,i),s=c):"up"==i&&s>c?s--:a=h:(h>s||"down"==i)&&("down"==i&&n.ctrl?(s=this.OG(s,u,i),a=c):"down"==i&&c>a?a++:s=h);var d={row:this.getIdByIndex(a),column:this.columnId(r)},f={row:this.getIdByIndex(s),column:this.columnId(o)};this.callEvent("onBeforeBlockSelect",[d,f,!0])&&(this.vC(t.name,d,f),this.callEvent("onSelectChange",[]),this.callEvent("onAfterBlockSelect",[d,f]))}},OG:function(e,t,i){var n=this.config.columns,r=this.data.order,o=this.data.pull[r[e]],a=n[t].id,s=0;if("right"==i)for(var l=t+1;l<n.length;l++){if(o[n[l].id]){s=l;break}s=l}else if("left"==i){for(var l=t-1;l>=0;l--)if(o[n[l].id]){s=l;break}}else if("down"==i)for(var l=e+1;l<r.length;l++){if(this.getItem(r[l])[a]){s=l;break}s=l}else if("up"==i)for(var l=e-1;l>=0;l--)if(this.getItem(r[l])[a]){s=l;break}return s},vC:function(e,t,i,n){var r=this.kB[e];if(!r)return!1;var o=webix.copy(r),a={start:t||r.start,end:i||r.end};this.oB(a),webix.extend(r,a,!0),this.refreshSelectArea(),this.qH(o),n&&this.callEvent("onSelectChange",[])},areaselect_setter:function(e){return e&&(this.iB(),this.iB=function(){}),this.define("blockselect",e),e},addSelectArea:function(e,t,i,n,r,o){var a,s,l,h,c;a=this.getIndexById(e.row),s=this.getIndexById(t.row),l=this.getColumnIndex(e.column),h=this.getColumnIndex(t.column),a>s&&(c=a,a=s,s=c),l>h&&(c=l,l=h,h=c),n=n||this.mB||webix.uid(),this.mB=null;var u={start:{row:this.getIdByIndex(a),column:this.columnId(l)},end:{row:this.getIdByIndex(s),column:this.columnId(h)}};return r&&(u.css=r),(o||!1===o)&&(u.handle=o),this.kB[n]?this.vC(n,u.start,u.end,!0):(u.handle=!0,u.name=n,u.init=u.start,void(this.callEvent("onBeforeAreaAdd",[u])&&(this.qB=n,i||this.removeSelectArea(),this.kB[u.name]=u,this.el.push(u),this.refreshSelectArea(),this.qH(),this.callEvent("onAfterAreaAdd",[u]),this.callEvent("onSelectChange",[]))))},PC:function(){var e=webix.html.create("DIV");return e.className="webix_area_selection_layer",e.style.top=this.ck+"px",e},refreshSelectArea:function(){var e,t,i,n,r=null,o=null,a=null,s=this.s.prerender;if(this.wk){e=this.Xj(s),t=this.Sj(!0===s),this.rB||(this.rB=this.PC(),this.Vf.childNodes[1].appendChild(this.rB),this.QC=this.PC(),this.Vf.childNodes[0].appendChild(this.QC),this.RC=this.PC(),this.Vf.childNodes[2].appendChild(this.RC)),this.rB.innerHTML="",this.QC.innerHTML="",this.RC.innerHTML="";var l=this.s.leftSplit,h=this.s.rightSplit;for(i in this.kB){n=this.kB[i];var c=this.BD(n,e,t);if(null!==c){var u=this.getColumnIndex(n.start.column),d=this.getColumnIndex(n.end.column);if(c.r0<=c.r1){if(this.s.topSplit&&void 0>=this.s.topSplit&&void 0<this.ak)return!1;l>u&&(o=this.SC(c.r0,u,c.r1,Math.min(d,l-1))),c.c0<=c.c1&&(r=this.SC(c.r0,c.c0,c.r1,c.c1)),h&&d>=this.Fj&&(a=this.SC(c.r0,Math.max(u,this.Fj),c.r1,d)),(o||r||a)&&this.sB(o,r,a,i,n.css,n.handle)}}else this.removeSelectArea(i)}}},BD:function(e,t,i){var n,r,o,a,s=this.getIndexById(e.start.row),l=this.getIndexById(e.end.row),h=this.getColumnIndex(e.start.column),c=this.getColumnIndex(e.end.column);if(-1===h||-1===c)return null;if(-1===s||-1===l)return null;if(r=Math.min(i[1],l),this.s.topSplit){if(n=s,n>=this.s.topSplit&&(n=Math.max(i[0]-this.s.topSplit,s)),r>=this.s.topSplit){var u=this.ug(this.getIdByIndex(l),e.end.column),d=this.ug(this.getIdByIndex(this.s.topSplit-1),e.end.column);d.top+d.height>u.top+u.height&&(r=this.s.topSplit-1)}}else n=Math.max(i[0],this.getIndexById(e.start.row));return o=Math.max(t[0],h),a=Math.min(this.Fj?t[1]-1:t[1],c),{r0:n,r1:r,c0:o,c1:a}},SC:function(e,t,i,n){return[this.ug(this.getIdByIndex(e),this.columnId(t)),this.ug(this.getIdByIndex(i),this.columnId(n))]},sB:function(e,t,i,n,r,o){var a,s,l=this.kB[n],h=0;this.s.topSplit&&(h=this.zD(l.start,!0));var c=function(e,t,i,o,a){var s,l,c,u,d,f,p={top:1,right:1,bottom:1,left:1};o&&delete p.left,a&&delete p.right,l=i.top-t.top+i.height-1,c=i.left-t.left+i.width;for(s in p){u=t.top+h,"bottom"==s&&(u=i.top+i.height),d=t.left,"right"==s&&(d=i.left+i.width),f="top"==s||"bottom"==s,e.appendChild(webix.html.create("DIV",{class:"webix_area_selection webix_area_selection_"+s+(r?" "+r:""),style:"left:"+d+"px;top:"+u+"px;"+(f?"width:"+c+"px;":"height:"+(l-h)+"px;"),webix_area_name:n},""));var m=e.lastChild;"right"==s&&(m.style.left=d-m.offsetWidth+"px"),"bottom"==s&&(m.style.top=u-m.offsetHeight+"px"),h&&("top"==s&&(m.style.display="none"),i.height==h&&"bottom"==s&&(m.style.display="none"))}};i&&c(this.RC,i[0],i[1],!!t,!1),t&&c(this.rB,t[0],t[1],!!e,!!i),e&&c(this.QC,e[0],e[1],!1,!!t),o&&(s=i?i[1]:t?t[1]:e[1],a=i?this.RC:t?this.rB:this.QC,a.appendChild(webix.html.create("DIV",{class:"webix_area_selection_handle"+(r?" "+r:""),style:"left:"+(s.left+s.width)+"px;top:"+(s.top+s.height)+"px;",webix_area_name:n},"")),h&&s.height==h&&(a.lastChild.style.display="none"))},nB:function(e){if(e){var t=function(t){for(var i=t.childNodes,n=i.length-1;n>=0;n--)i[n].getAttribute("webix_area_name")==e&&t.removeChild(i[n])};t(this.rB),t(this.QC),t(this.RC)}},removeSelectArea:function(e){if(e&&this.kB[e]){if(this.callEvent("onBeforeAreaRemove",[e])){this.qH(webix.copy(this.kB[e]),!0),delete this.kB[e],this.nB(e),this.el=[];for(var t in this.kB)this.el.push(this.kB[t]);this.callEvent("onAfterAreaRemove",[e])}}else for(var i in this.kB)this.removeSelectArea(i)},pB:function(e){var t=e.target||e.srcElement,i=webix.html.TC(t);if(i&&-1!=i.indexOf("webix_area_selection_handle")){var n=t.getAttribute("webix_area_name");this.mB=n;var r=this.kB[n],o=this.ug(r.start.row,r.start.column),a=this.ug(r.end.row,r.end.column),s=this.s.prerender,l=this.getColumnIndex(r.start.column)<this.s.leftSplit?0:this.dk,h=this.getColumnIndex(r.end.column)<this.s.leftSplit?0:this.dk;return this.ul=[o.left+1+l-this.bk,o.top+1-(s?this.jk:0),{row:r.start.row,column:r.start.column}],this.xl=webix.html.offset(this.Vf),this.Al(e),this.vl=[a.left+1+h-this.bk,a.top+1-(s?this.jk:0)],this.jz(!1,!1),webix.html.preventEvent(e)}},getSelectArea:function(e){return this.kB[e||this.qB]},getAllSelectAreas:function(){return this.kB},oB:function(e,t){var i,n,r,o,a,s,l,h,c,u,d,f,p,m=!1,g=e.start,v=e.end;for(u=a=this.getIndexById(g.row),d=r=this.getColumnIndex(g.column),f=s=this.getIndexById(v.row),p=o=this.getColumnIndex(v.column),i=a;s>=i;i++){if(this.getItem(this.getIdByIndex(i)).$row&&!t)m=!0,p=this.fj.length-1;else if(this.config.spans)for(n=r;o>=n;n++)(l=this.getSpan(this.getIdByIndex(i),this.columnId(n)))&&(h=this.getIndexById(l[0]),c=this.getColumnIndex(l[1]),u>h&&(u=h,m=!0),d>c&&(m=!0,d=c),h+l[3]-1>f&&(m=!0,f=h+l[3]-1),c+l[2]-1>p&&(m=!0,p=c+l[2]-1))}m&&(e.start={row:this.getIdByIndex(u),column:this.columnId(d)},e.end={row:this.getIdByIndex(f),column:this.columnId(p)},this.oB(e,!0))},qH:function(e,t){if(e){var i=this.getIndexById(e.end.row)-this.getIndexById(e.start.row)+1,n=this.getColumnIndex(e.end.column)-this.getColumnIndex(e.start.column)+1;this.mapCells(e.start.row,e.start.column,i,n,webix.bind(function(e,t,i){var n=this.getItemNode({row:t,column:i});n&&n.removeAttribute("tabindex")},this),!0)}!t&&this.el.length&&this.mapSelection(webix.bind(function(e,t,i){var n=this.getItemNode({row:t,column:i});return n&&n.setAttribute("tabindex","1"),e},this))}}),webix.protoUI({name:"rangechart",$init:function(){this.attachEvent("onAfterRender",this.AB),this.BB()},AB:function(){return!this.eo.sA.length||this.CB?void this.pF(!0):(this.TE(),this.EB=(this.eo.sA[0].points[2]-this.eo.sA[0].points[0])/2,this.FB=webix.html.create("div",{class:"webix_chart_resizer right",tabindex:"0",role:"button","aria-label":webix.i18n.aria.resizeChart}),this.GB=webix.html.create("div",{class:"webix_chart_resizer left",tabindex:"0",role:"button","aria-label":webix.i18n.aria.resizeChart}),this.CB=webix.html.create("div",{class:"webix_chart_frame"}),this.x.appendChild(this.GB),this.x.appendChild(this.CB),this.x.appendChild(this.FB),this.pF(),webix.UE(this.FB,webix.env.mouse.down,this.IB,{bind:this}),webix.UE(this.GB,webix.env.mouse.down,this.IB,{bind:this}),webix.UE(this.CB,webix.env.mouse.down,this.IB,{bind:this}),webix.UE(webix.toNode(this.FB),"keydown",this.zE,{bind:this}),webix.UE(webix.toNode(this.GB),"keydown",this.zE,{bind:this}),this.JB&&(this.s.range=this.BB(this.JB)),this.KB(),this.callEvent("onAfterRangeChange",[this.JB]),void this.data.attachEvent("onStoreUpdated",webix.bind(this.KB,this)))},$setSize:function(e,t){webix.ui.chart.prototype.$setSize.call(this,e,t)&&(this.TE(),this.KB())},pF:function(e){this.FB&&!this.HB&&(this.HB=this.FB.clientWidth/2,e&&this.KB())},TE:function(){var e=this.no(this.bc,this.dc);this.kp=e.start,this.DB=e.end},removeAllSeries:function(){this.CB=this.FB=this.GB=null,webix.ui.chart.prototype.removeAllSeries.apply(this,arguments)},zE:function(e){var t=e.which||e.keyCode;if(37===t||39===t){webix.html.preventEvent(e);var i=-1!==e.target.className.indexOf("right")?"eindex":"sindex",n=-1!==e.target.className.indexOf("right")?"end":"start",r=this.JB;r[i]=r[i]+(37===t?-1:1),this.eo.sA[r[i]]&&(r[n]=this.SB(r[i]),this.setFrameRange(r))}},IB:function(e){if(-1!==e.target.className.indexOf("webix_chart_resizer"))this.LB=e.target;else if(this.eo.sA.length){var t=this.eo.sA[this.JB.sindex].points[2]-this.EB,i=this.eo.sA[this.JB.eindex].points[2]-this.EB;this.MB={ex:webix.html.pos(e).x,fx:t+this.kp.x,fw:i-t}}webix.html.addCss(this.x,"webix_noselect webix_wresize_cursor"),this.GE(),this.NB=webix.event(document.body,webix.env.mouse.move,this.OB,{bind:this}),this.PB=webix.event(document.body,webix.env.mouse.up,this.QB,{bind:this})},GE:function(){webix.h[this.NB]&&(webix.eventRemove(this.NB),webix.eventRemove(this.PB))},OB:function(e){if(this.LB){var t=webix.html.pos(e).x-webix.html.offset(this.$view).x;t>=this.kp.x&&t<=this.DB.x&&(-1!==this.LB.className.indexOf("left")?t<this.FB.offsetLeft&&(this.LB.style.left=t-this.HB+"px",this.CB.style.left=t+"px",this.CB.style.width=this.FB.offsetLeft-this.GB.offsetLeft-1+"px"):t>this.GB.offsetLeft+this.HB&&(this.LB.style.left=t-this.HB+"px",this.CB.style.width=this.FB.offsetLeft-this.GB.offsetLeft-1+"px"))}else if(this.MB){var i=webix.html.pos(e).x-this.MB.ex,n=this.MB.fx+i,r=n+this.MB.fw;this.kp.x<=n&&this.DB.x>=r&&(webix.extend(this.MB,{lx:n,rx:r},!0),this.GB.style.left=n-this.HB+"px",this.FB.style.left=r-this.HB+"px",this.CB.style.left=n+"px")}},QB:function(e){if(this.GE(),webix.html.removeCss(this.x,"webix_noselect"),webix.html.removeCss(this.x,"webix_wresize_cursor"),this.count()){if(this.LB){var t=webix.env.touch?e.changedTouches[0].pageX:webix.html.pos(e).x;t-=webix.html.offset(this.$view).x+this.kp.x;var i=this.RB(t),n=this.SB(i);this.LB===this.GB?(i>=this.JB.eindex&&(i=this.JB.eindex,n=this.SB(i)),this.JB.start=n,this.JB.sindex=i):(i<=this.JB.sindex&&(i=this.JB.sindex,n=this.SB(i)),this.JB.end=n,this.JB.eindex=i),this.LB=null}else if(this.MB&&this.MB.lx){var r=this.JB.sindex=this.RB(this.MB.lx-this.kp.x),o=this.JB.eindex=this.RB(this.MB.rx-this.kp.x);this.JB.start=this.SB(r),this.JB.end=this.SB(o),this.MB=null}this.KB(),this.callEvent("onAfterRangeChange",[this.JB.start,this.JB.end])}},SB:function(e){return e>=this.data.order.length&&(e=this.data.order.length-1),this.getItem(this.data.order[e])[this.s.frameId||"id"]},RB:function(e){for(var t=this.eo.sA,i=0;i<t.length;i++)if(e<=t[i].points[2]-this.EB)return i;return t.length-1},TB:function(e){for(var t=this.s.frameId||"id",i=0;i<this.data.order.length;i++)if(this.getItem(this.data.order[i])[t]==e)return i;return-1},BB:function(e){e?(e.start&&(e.sindex=this.TB(e.start)),e.end&&(e.eindex=this.TB(e.end)),e.start=e.start||this.SB(e.sindex),e.end=e.end||this.SB(e.eindex)):e={start:0,end:0,sindex:0,eindex:0},this.JB=e},range_setter:function(e){return this.BB(e),this.JB},getFrameData:function(){for(var e=[],t=this.JB.sindex;t<=this.JB.eindex;t++){var i=this.getItem(this.data.order[t]);i&&e.push(i)}return e},setFrameRange:function(e){this.BB(e),this.KB(),this.callEvent("onAfterRangeChange",[e])},KB:function(){if(this.eo){var e=this.eo.sA;if(e.length){var t=e[this.JB.sindex].points[0]+this.kp.x+this.EB-1,i=e[this.JB.eindex].points[0]+this.kp.x+this.EB-1;this.GB.style.left=t-this.HB+"px",this.FB.style.left=i-this.HB+"px",this.CB.style.left=t+"px",this.CB.style.width=i-t+"px",this.s.range=this.JB}}},getFrameRange:function(){return this.s.range}},webix.ui.chart),webix.protoUI({name:"richtext",defaults:{label:"",labelWidth:80,labelPosition:"left"},$init:function(e){this.$ready.unshift(this.HE)},getInputNode:function(){return this.$view.querySelector(".webix_richtext_editor")},IE:function(e){return{view:"toggle",type:"iconButton",icon:e,name:e,id:e,label:webix.i18n.richtext[e],autowidth:!0,action:e,click:this.JE}},HE:function(){var e=this,t={view:"template",css:"webix_richtext_container",borderless:!0,template:"<div class='webix_richtext_editor' contenteditable='true'>"+this.getValue()+"</div>",on:{onAfterRender:function(){webix.UE(e.getInputNode(),"blur",function(){e.CG(this.innerHTML)}),webix.UE(e.getInputNode(),"keyup",function(){e.KE()})}},onClick:{webix_richtext_editor:function(){e.KE()}}},i={view:"toolbar",id:"toolbar",elements:[this.IE("underline"),this.IE("bold"),this.IE("italic"),{}]},n=[i,t];"top"!==this.config.labelPosition&&this.config.labelWidth?(this.config.borderless=!0,this.cols_setter([{template:this.config.label||" ",width:this.config.labelWidth},{rows:n}])):(i.elements.push({view:"label",label:this.config.label,align:"right"}),this.rows_setter(n))},KE:function(){var e,t=this;t.$$("toolbar").setValues({italic:!1,underline:!1,bold:!1}),e=window.getSelection?window.getSelection():document.selection.createRange();for(var i=0;i<e.rangeCount;++i)e.getRangeAt(i),t.$view.contains(this.getInputNode())&&(document.queryCommandState("bold")&&t.$$("bold").setValue(!0),document.queryCommandState("underline")&&t.$$("underline").setValue(!0),document.queryCommandState("italic")&&t.$$("italic").setValue(!0))},refresh:function(){this.getInputNode().innerHTML=this.config.value},LE:function(e,t){var i,n;if(window.getSelection()?(i=window.getSelection(),n=(""+i).length):(i=document.selection.createRange(),n=i.text.length),n>0)for(var r=0;r<i.rangeCount;++r){var o=i.getRangeAt(r);if(i.isCollapsed){var a=i.focusNode.textContent,s=i.focusNode,l=i.anchorOffset,h=a.substring(0,l).match(/[A-Za-z]*$/)[0],c=a.substring(l).match(/^[A-Za-z]*/)[0],u=l-h.length,d=l+c.length;o.setStart(s,u),o.setEnd(s,d),i.removeAllRanges(),window.getSelection().addRange(o),document.execCommand(t,!1,"")}else document.execCommand(t,!1,"")}},JE:function(){var e=(this.config.action,this.getTopParentView()),t=e.getInputNode();this.$view.contains(this.getInputNode())&&e.LE(t,this.config.action)},focus:function(){this.$view.querySelector(".webix_richtext_editor").focus()},CG:function(e){var t=this.config.value;this.config.value=e||"",t!==e&&this.callEvent("onChange",[e,t])},setValue:function(e){this.CG(e),this.refresh()},getValue:function(){this.getInputNode()&&(this.config.value=this.getInputNode().innerHTML);var e=this.config.value;return e||(0===e?"0":"")}},webix.IdSpace,webix.ui.layout),webix.protoUI({name:"gage",defaults:{value:0,minRange:0,maxRange:100,minWidth:250,minHeight:200,smoothFlow:!0,scale:3,stroke:7},$init:function(){this.$ready.push(webix.bind(this.ME,this)),this.attachEvent("onDestruct",function(){this.NE=this.OE=this.PE=null})},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&(this.QE(this.config.value),this.Qf(this.config.value))},QE:function(){var e=this.$view.querySelector(".webix_gage_curves"),t=this.$view.querySelector(".webix_gage_info"),i=this.config.scale,n=this.$width;e.setAttribute("r",n/i),e.setAttribute("strokeDasharray",Math.round(Math.PI*n/i)),e.style.r=n/i,e.style.strokeDasharray=Math.round(Math.PI*n/i),t.setAttribute("style","width: "+Math.round(n/i*2)+"px;"),this.PE.setAttribute("style","height: "+(n/i+20)+"px;"),this.NE.setAttribute("r",n/i),this.NE.setAttribute("style","stroke-dasharray: "+Math.round(this.gradientLength*Math.PI*n/i)+", 1900;"),this.RE(e.style.r)},sF:function(e){return Math.min(Math.max(e,this.s.minRange),this.s.maxRange)},RE:function(e){var t=this.$width,i=this.config.value;i=this.sF(i);var n=i-this.config.minRange,r=Math.round(180*n/(this.config.maxRange-this.config.minRange));(0===r||180===r)&&(this.PE.style.paddingTop="3px"),this.OE.style.transformOrigin=t/2-.55+"px 0 0",this.OE.setAttribute("y1","0"),this.OE.setAttribute("x1",Math.round(.55*t)),this.OE.setAttribute("y2",0),this.OE.setAttribute("x2",Math.round(.525*t+parseInt(e)))},Qf:function(e){var t=this.$view.querySelector(".webix_gage-value"),i=this.sF(e)-this.config.minRange,n=Math.round(180*i/(this.config.maxRange-this.config.minRange)),r=this.$width;r=Math.floor(r/10),this.$view.style.fontSize=r+"px",t.innerHTML=e,this.NE.style.stroke=this.color,this.NE.setAttribute("stroke",this.color),this.OE.setAttribute("transform","rotate("+n+" "+this.$width/2+" 0)"),this.OE.style.transform="rotate("+n+"deg)"},SE:function(){this.gradientLength=(this.sF(this.config.value)-this.config.minRange)/(this.config.maxRange-this.config.minRange);var e=this.config.color;this.color=e?"function"==typeof e?e.call(this,this.config.value):e:"hsl("+(120-Math.round(120*this.gradientLength))+", 100%, 50%)",!0===this.config.animation?this.defaultColor="hsl(125, 100%, 50%)":this.defaultColor="hsl("+(120-Math.round(120*this.gradientLength))+", 100%, 50%)"},ME:function(){this.gradientLength=0,this.SE(),this.$view.innerHTML='<div class="webix_gage_label"><span>'+(this.config.label||"")+'</span></div><svg class="webix_gage" style="height:300px; position: relative;"><circle class="webix_gage_curves" r="0" cx="50%" cy="0" stroke="#EEEEEE" stroke-width="'+this.config.stroke+'%" fill="none"></circle><circle class="webix_gage_gradient" r="0" stroke="'+this.defaultColor+'" cx="50%" cy="0" stroke-width="'+this.config.stroke+'%" fill="none" style="stroke-dasharray: 0, 1900;"></circle><line class="webix_gage_gradient_point" x1="0" x2="0" y1="0" y2="0" style="stroke:#B0B0B0; stroke-width:4;"></line></svg><div class="webix_gage_info"><div class="webix_gage_min_range">'+this.config.minRange+'</div><div class="webix_gage_max_range">'+this.config.maxRange+'</div><div class="webix_gage_placeholder"><div class="webix_gage-value">'+this.config.value+'</div><div class="webix_gage_range_info">'+(this.config.placeholder||"")+"</div></div></div>",this.NE=this.$view.querySelector(".webix_gage_gradient"),this.OE=this.$view.querySelector(".webix_gage_gradient_point"),this.PE=this.$view.querySelector(".webix_gage"),!0===this.isVisible()&&!0===this.config.smoothFlow&&webix.env.svganimation&&!webix.env.isEdge&&(this.NE.setAttribute("class","webix_gage_gradient webix_gage_animated"),this.OE.setAttribute("class","webix_gage_gradient_point webix_gage_gradient_point_animated"))},setValue:function(e){this.config.value=e,this.SE(),this.QE(),this.Qf(e)},getValue:function(){return this.config.value}},webix.EventSystem,webix.ui.view),webix.protoUI({name:"bullet",defaults:{color:"#394646",marker:!1,layout:"x",barWidth:40,flowTime:500,labelWidth:150,stroke:8,bands:[{value:100,color:"#5be5d6"},{value:80,color:"#fff07e"},{value:60,color:"#fd8b8c"}],scale:{step:10}},label_setter:webix.template,placeholder_setter:webix.template,$init:function(e){e&&(e.layout&&"x"!==e.layout||e.height||(e.height=!1===e.scale?60:90),"y"!==e.layout||e.width||(e.width=!1===e.scale?60:97))},scale_setter:function(e){return e.step=e.step||10,e.template=webix.template(e.template||"#value#"),e},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&(this.ME("y"===this.s.layout?t:e),(this.s.value||0===this.s.value)&&this.Qf(0,this.s.value))},sF:function(e){return Math.min(Math.max(e,this.s.minRange),this.s.maxRange)},CF:function(e){this.DF=e-(this.um||e),this.um=e;var t;((t=this.s.flowTime>this.DF?this.s.flowTime/this.DF:this.s.flowTime)>1e3||5>t)&&(t=30);var i=(this.s.value-this.EF)/t;this.FF+=i,Math.abs(this.FF-this.s.value)<Math.abs(i)&&(this.FF=this.s.value),this.FF!=this.s.value?this.GF=requestAnimationFrame(this.CF.bind(this)):(cancelAnimationFrame(this.GF),this.GF=null),this.HF.setAttribute("width",Math.floor(this.FF*this.JF))},Qf:function(e,t){this.EF=this.FF=e,this.s.value=t;var i=this.s.label;i&&(this.$view.querySelector(".webix_bullet_header").textContent=i(this.s));var n=this.s.placeholder;"function"==typeof n&&(this.$view.querySelector(".webix_bullet_subheader").textContent=n(this.s)),!0===this.isVisible()&&!0===this.s.smoothFlow&&window.requestAnimationFrame?this.GF||(this.GF=requestAnimationFrame(this.CF.bind(this))):this.HF.setAttribute("width",Math.floor(t*this.JF))},KF:function(e,t,i){for(var n=0;n<t.length;n++)e.setAttribute(t[n],i[n])},LF:function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&this.KF(n,t,i),n},SF:function(e){var t=this.LF(e[0],e[1],e[2]),i=e[3];if(i)for(var n=0;n<i.length;n++)t.appendChild(this.SF(i[n]));return t},MF:function(){var e="d"+webix.uid(),t=this.LF("svg",["class"],["webix_bullet_graph_svg"]),i=this.LF("g"),n=this.LF("g"),r=this.LF("rect",["x","y","width","height","class","style"],[this.IF,this.TF,100,this.s.stroke,"webix_bullet_value","filter:url(#"+e+");fill:"+this.s.color]),o=this.LF("rect",["x","y","width","height","fill"],[0,5,3,this.s.barWidth-10,"rgba(0,0,0,0.5)"]),a=this.LF("g",["stroke","stroke-width","fill"],["#8b94ac","2","none"]),s=this.LF("text",["text-anchor","stroke","fill"],["end","none","#8b94ac"]),l="y"==this.s.layout?"50%":this.IF-10,h="y"==this.s.layout?11:17,c=this.LF("tspan",["x","y","class"],[l,h,"webix_bullet_header"]),u=this.LF("tspan",["x","y","class"],[l,h+17,"webix_bullet_subheader"]),d=this.LF("text",["text-anchor","stroke","class","fill"],["middle","none","webix_bullet_scale","#8b94ac"]),f=this.SF(["filter",["id","x","y","width","height"],[e,"0","-150%","110%","400%"],[["feOffset",["in","dx","dy"],["SourceAlpha",0,0]],["feGaussianBlur",["stdDeviation"],["2"]],["feComponentTransfer",0,0,[["feFuncA",["type","slope"],["linear","0.5"]]]],["feMerge",0,0,[["feMergeNode"],["feMergeNode",["in"],["SourceGraphic"]]]]]]);t.appendChild(f);var p=document.createElement("div");i.appendChild(n),!1!==this.s.marker&&(o.setAttribute("x",this.IF+this.sF(this.s.marker)*this.JF-2),i.appendChild(o)),i.appendChild(r),s.appendChild(c),s.appendChild(u),t.appendChild(s);var m="y"===this.s.layout;if(this.s.scale){for(var g=this.s.minRange;g<=this.s.maxRange;g+=this.s.scale.step){var v=this.s.labelHeight||this.s.labelWidth,l=Math.floor(v+g*this.JF-(g?.1:-1)),b=m?(this.$width-this.s.barWidth)/2-10:l,w=m?this.NF-l+v+44:this.s.barWidth+28,x=m?-13:this.s.barWidth+3,y=m?"end":"middle",_=this.LF("tspan",["x","y","text-anchor"],[b,w,y]),k=this.LF("line",["x1","y1","x2","y2","stroke-width"],[l,x,l,x+10,1]);p.innerHTML=this.s.scale.template({value:g}),_.appendChild(p.childNodes[0]),d.appendChild(_),a.appendChild(k)}i.appendChild(a),t.appendChild(d)}for(var g=0;g<this.s.bands.length;g++){var C=this.s.bands[g],S=this.LF("path"),r=this.sF(C.value)*this.JF;S.setAttribute("d","M "+this.IF+",0 l "+r+",0 l 0,"+this.s.barWidth+" l -"+r+",0 z"),S.setAttribute("fill",C.color),n.appendChild(S)}if(t.appendChild(i),"y"===this.s.layout){var $=this.s.scale?this.$width/2-10:0,T=this.$height+this.IF-28;i.setAttribute("transform","translate("+$+", "+T+") rotate(270)"),s.setAttribute("text-anchor","middle"),s.childNodes[0].setAttribute("x","55%"),s.childNodes[1].setAttribute("x","55%"),d.setAttribute("text-anchor","right")}return t.setAttribute("viewBox","0 0 "+this.$width+" "+this.$height),t},ME:function(e){if(e){var t=this.$view;t.innerHTML="";var i=this.s.labelHeight||this.s.labelWidth;this.IF=this.s.label?i:7,this.TF=Math.floor((this.s.barWidth-this.s.stroke)/2),this.NF=e-this.IF-30,this.JF=this.NF/(this.s.maxRange-this.s.minRange);var n=this.MF();n.setAttribute("height",this.$height),n.setAttribute("width",this.$width),t.appendChild(n),this.HF=t.querySelector(".webix_bullet_value")}},setValue:function(e){this.s.value!=e&&this.Qf(this.s.value,e)},getValue:function(){return this.s.value}},webix.ui.gage,webix.ui.view),webix.protoUI({name:"switch",defaults:{template:function(e,t){t.HH();var i=e.name||"x"+webix.uid(),n="";e.labelRight&&(n="<label class='webix_label_right'>"+e.labelRight+"</label>",e.labelWidth&&(e.label=e.label||"&nbsp;"));var r=e.checkValue==e.value,o='<label class="webix_switch_box '+(r?" webix_switch_on":"")+'" style="width:'+t.IH+'px" for="'+i+'"><span class="webix_switch_text">'+((r?e.onLabel:e.offLabel)||"")+'</span><span class="webix_switch_handle" style="left:'+(r?t.IH-t.JH:0)+'px;"><input  id="'+i+'" class="webix_switch_toggle" type="checkbox" '+(r?"checked":"")+"></span></label>"+n;return t.$renderInput(e,o)}},$skin:function(){this.JH=webix.skin.$active.switchHeight,this.IH=webix.skin.$active.switchWidth},$setValue:function(e){var t=this.s,i=e==t.checkValue,n=this.$view.querySelector(".webix_switch_box");if(n){var r=n.childNodes[1],o=(i?t.onLabel:t.offLabel)||"";i?webix.html.addCss(n,"webix_switch_on"):webix.html.removeCss(n,"webix_switch_on"),r.style.left=(i?this.IH-this.JH:0)+"px",r.firstChild.checked=i,o&&(n.childNodes[0].innerHTML=o)}},HH:function(){var e=this.s;if(e.onLabel||e.offLabel){var t=e.onLabel?webix.html.getTextSize(e.onLabel,"webix_switch_text").width:0,i=e.onLabel?webix.html.getTextSize(e.offLabel,"webix_switch_text").width:0;this.IH=Math.max(t,i)+this.JH}},on_click:{webix_switch_toggle:function(e,t,i){this.toggle()}}},webix.ui.checkbox)}).call(exports,__webpack_require__(18).setImmediate)},function(e,t,i){(function(e){function n(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new n(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},i(19),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,i(7))},function(e,t,i){(function(e,t){!function(e,i){"use strict";function n(e){"function"!=typeof e&&(e=Function(""+e));for(var t=Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return h[l]=n,s(l),l++}function r(e){delete h[e]}function o(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(i,n)}}function a(e){if(c)setTimeout(a,0,e);else{var t=h[e];if(t){c=!0;try{o(t)}finally{r(e),c=!1}}}}if(!e.setImmediate){var s,l=1,h={},c=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?function(){var t="setImmediate$"+Math.random()+"$",i=function(i){i.source===e&&"string"==typeof i.data&&0===i.data.indexOf(t)&&a(+i.data.slice(t.length))};e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),s=function(i){e.postMessage(t+i,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var e=u.documentElement;s=function(t){var i=u.createElement("script");i.onreadystatechange=function(){a(t),i.onreadystatechange=null,e.removeChild(i),i=null},e.appendChild(i)}}():function(){s=function(e){setTimeout(a,0,e)}}(),d.setImmediate=n,d.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,i(7),i(20))},function(e,t){function i(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(u===clearTimeout)return clearTimeout(e);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function a(){m&&f&&(m=!1,f.length?p=f.concat(p):g=-1,p.length&&s())}function s(){if(!m){var e=r(a);m=!0;for(var t=p.length;t;){for(f=p,p=[];++g<t;)f&&f[g].run();g=-1,t=p.length}f=null,m=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function h(){}var c,u,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:i}catch(e){c=i}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(e){u=n}}();var f,p=[],m=!1,g=-1;d.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];p.push(new l(e,t)),1!==p.length||m||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=h,d.addListener=h,d.once=h,d.off=h,d.removeListener=h,d.removeAllListeners=h,d.emit=h,d.prependListener=h,d.prependOnceListener=h,d.listeners=function(e){return[]},d.binding=function(e){throw Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,i){"use strict";(function(t,n){var r=i(22),o=i(23),a=i(1);i(24)(),window.myLayout=new o(r,"#layoutContainer"),myLayout.registerComponent("page",function(e,n){a.start();var r=(new Date).getTime().toString(16);t(r,{status:"loading"}),e.getElement().attr("id",r),e.getElement().attr("data-state-href",n.href);try{i(29)("./"+n.type+".js")(e,n,r,myLayout)}catch(t){i(12)(e,n,r,myLayout)}return a.done(),!1}),myLayout.on("stackCreated",function(e){e.header.controlsContainer.prepend("<a class='container-cog'><i class='fa fa-cog'></i></a>")}),myLayout.on("stateChanged",function(){try{var e=JSON.stringify(myLayout.toConfig());localStorage.setItem("savedState",e)}catch(e){webix.ui({view:"window",id:"configLayoutError",head:"Error layout config",width:200,height:200,position:"center",modal:!0,body:{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",labelPosition:"center",label:"Reload page",icon:"repeat",click:function(){location.reload()}}]}}).show(),localStorage.removeItem("savedState")}}),n(function(){i(50)(myLayout)}),window.addEventListener("resize",function(){myLayout.updateSize(),n(".CodeMirror-fullscreen").length>0&&n(".CodeMirror-fullscreen").height(n("#layoutContainer").height()+34)}),myLayout.init(),e.exports=myLayout}).call(t,i(2),i(0))},function(e,t,i){"use strict";webix.attachEvent("onBeforeAjax",function(e,t,i,n,r,o,a){r["X-CSRF-TOKEN"]=LA.token,"DELETE"==e&&(r["Content-type"]="application/json")});var n={settings:{selectionEnabled:!0},content:[{type:"row",content:[]}]},r=localStorage.getItem("savedState");null!==r&&(n=JSON.parse(r)),e.exports=n},function(e,t,i){var n,r;!function(o){var a={config:{},container:{},controls:{},errors:{},items:{},utils:{}};a.utils.F=function(){},a.utils.extend=function(e,t){e.prototype=a.utils.createObject(t.prototype),e.prototype.contructor=e},a.utils.createObject=function(e){return"function"==typeof Object.create?Object.create(e):(a.utils.F.prototype=e,new a.utils.F)},a.utils.objectKeys=function(e){var t,i;if("function"==typeof Object.keys)return Object.keys(e);t=[];for(i in e)t.push(i);return t},a.utils.getHashValue=function(e){var t=location.hash.match(RegExp(e+"=([^&]*)"));return t?t[1]:null},a.utils.getQueryStringParam=function(e){if(window.location.hash)return a.utils.getHashValue(e);if(!window.location.search)return null;var t,i,n=window.location.search.substr(1).split("&"),r={};for(i=0;i<n.length;i++)t=n[i].split("="),r[t[0]]=t[1];return r[e]||null},a.utils.copy=function(e,t){for(var i in t)e[i]=t[i];return e},a.utils.animFrame=function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)})(function(){e()})},a.utils.indexOf=function(e,t){if(!(t instanceof Array))throw Error("Haystack is not an Array");if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},"function"!=typeof/./&&"object"!=typeof Int8Array?a.utils.isFunction=function(e){return"function"==typeof e||!1}:a.utils.isFunction=function(e){return"[object Function]"===toString.call(e)},a.utils.fnBind=function(e,t,i){if(void 0!==Function.prototype.bind)return Function.prototype.bind.apply(e,[t].concat(i||[]));var n=function(){var r=(i||[]).concat(Array.prototype.slice.call(arguments,0));if(!(this instanceof n))return e.apply(t,r);e.apply(this,r)};return n.prototype=e.prototype,n},a.utils.removeFromArray=function(e,t){var i=a.utils.indexOf(e,t);if(-1===i)throw Error("Can't remove item from array. Item is not in the array");t.splice(i,1)},a.utils.now=function(){return"function"==typeof Date.now?Date.now():(new Date).getTime()},a.utils.getUniqueId=function(){return(1e15*Math.random()).toString(36).replace(".","")},a.utils.filterXss=function(e,t){var i=e.replace(/javascript/gi,"j&#97;vascript").replace(/expression/gi,"expr&#101;ssion").replace(/onload/gi,"onlo&#97;d").replace(/script/gi,"&#115;cript").replace(/onerror/gi,"on&#101;rror");return!0===t?i:i.replace(/>/g,"&gt;").replace(/</g,"&lt;")},a.utils.stripTags=function(e){return o.trim(e.replace(/(<([^>]+)>)/gi,""))},a.utils.EventEmitter=function(){this._mSubscriptions={},this._mSubscriptions[a.utils.EventEmitter.ALL_EVENT]=[],this.on=function(e,t,i){if(!a.utils.isFunction(t))throw Error("Tried to listen to event "+e+" with non-function callback "+t);this._mSubscriptions[e]||(this._mSubscriptions[e]=[]),this._mSubscriptions[e].push({fn:t,ctx:i})},this.emit=function(e){var t,i,n;n=Array.prototype.slice.call(arguments,1);var r=this._mSubscriptions[e];if(r)for(r=r.slice(),t=0;t<r.length;t++)i=r[t].ctx||{},r[t].fn.apply(i,n);n.unshift(e);var o=this._mSubscriptions[a.utils.EventEmitter.ALL_EVENT].slice();for(t=0;t<o.length;t++)i=o[t].ctx||{},o[t].fn.apply(i,n)},this.unbind=function(e,t,i){if(!this._mSubscriptions[e])throw Error("No subscribtions to unsubscribe for event "+e);var n,r=!1;for(n=0;n<this._mSubscriptions[e].length;n++)t&&this._mSubscriptions[e][n].fn!==t||i&&i!==this._mSubscriptions[e][n].ctx||(this._mSubscriptions[e].splice(n,1),r=!0);if(!1===r)throw Error("Nothing to unbind for "+e)},this.off=this.unbind,this.trigger=this.emit},a.utils.EventEmitter.ALL_EVENT="__all",a.utils.DragListener=function(e,t){a.utils.EventEmitter.call(this),this._eElement=o(e),this._oDocument=o(document),this._eBody=o(document.body),this._nButtonCode=t||0,this._nDelay=200,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._bDragging=!1,this._fMove=a.utils.fnBind(this.onMouseMove,this),this._fUp=a.utils.fnBind(this.onMouseUp,this),this._fDown=a.utils.fnBind(this.onMouseDown,this),this._eElement.on("mousedown touchstart",this._fDown)},a.utils.DragListener.timeout=null,a.utils.copy(a.utils.DragListener.prototype,{destroy:function(){this._eElement.unbind("mousedown touchstart",this._fDown),this._oDocument.unbind("mouseup touchend",this._fUp),this._eElement=null,this._oDocument=null,this._eBody=null},onMouseDown:function(e){if(e.preventDefault(),0==e.button||"touchstart"===e.type){var t=this._getCoordinates(e);this._nOriginalX=t.x,this._nOriginalY=t.y,this._oDocument.on("mousemove touchmove",this._fMove),this._oDocument.one("mouseup touchend",this._fUp),this._timeout=setTimeout(a.utils.fnBind(this._startDrag,this),this._nDelay)}},onMouseMove:function(e){if(null!=this._timeout){e.preventDefault();var t=this._getCoordinates(e);this._nX=t.x-this._nOriginalX,this._nY=t.y-this._nOriginalY,!1===this._bDragging&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&(clearTimeout(this._timeout),this._startDrag()),this._bDragging&&this.emit("drag",this._nX,this._nY,e)}},onMouseUp:function(e){null!=this._timeout&&(clearTimeout(this._timeout),this._eBody.removeClass("lm_dragging"),this._eElement.removeClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events",""),this._oDocument.unbind("mousemove touchmove",this._fMove),this._oDocument.unbind("mouseup touchend",this._fUp),!0===this._bDragging&&(this._bDragging=!1,this.emit("dragStop",e,this._nOriginalX+this._nX)))},_startDrag:function(){this._bDragging=!0,this._eBody.addClass("lm_dragging"),this._eElement.addClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events","none"),this.emit("dragStart",this._nOriginalX,this._nOriginalY)},_getCoordinates:function(e){return e=e.originalEvent&&e.originalEvent.touches?e.originalEvent.touches[0]:e,{x:e.pageX,y:e.pageY}}}),a.LayoutManager=function(e,t){if(!o||"function"!=typeof o.noConflict){var i="jQuery is missing as dependency for GoldenLayout. ";throw i+='Please either expose $ on GoldenLayout\'s scope (e.g. window) or add "jquery" to ',i+="your paths when using RequireJS/AMD",Error(i)}a.utils.EventEmitter.call(this),this.isInitialised=!1,this._isFullPage=!1,this._resizeTimeoutId=null,this._components={"lm-react-component":a.utils.ReactComponentHandler},this._itemAreas=[],this._resizeFunction=a.utils.fnBind(this._onResize,this),this._unloadFunction=a.utils.fnBind(this._onUnload,this),this._maximisedItem=null,this._maximisePlaceholder=o('<div class="lm_maximise_place"></div>'),this._creationTimeoutPassed=!1,this._subWindowsCreated=!1,this._dragSources=[],this._updatingColumnsResponsive=!1,this._firstLoad=!0,this.width=null,this.height=null,this.root=null,this.openPopouts=[],this.selectedItem=null,this.isSubWindow=!1,this.eventHub=new a.utils.EventHub(this),this.config=this._createConfig(e),this.container=t,this.dropTargetIndicator=null,this.transitionIndicator=null,this.tabDropPlaceholder=o('<div class="lm_drop_tab_placeholder"></div>'),!0===this.isSubWindow&&o("body").css("visibility","hidden"),this._typeToItem={column:a.utils.fnBind(a.items.RowOrColumn,this,[!0]),row:a.utils.fnBind(a.items.RowOrColumn,this,[!1]),stack:a.items.Stack,component:a.items.Component}},a.LayoutManager.__lm=a,a.LayoutManager.minifyConfig=function(e){return(new a.utils.ConfigMinifier).minifyConfig(e)},a.LayoutManager.unminifyConfig=function(e){return(new a.utils.ConfigMinifier).unminifyConfig(e)},a.utils.copy(a.LayoutManager.prototype,{registerComponent:function(e,t){if("function"!=typeof t)throw Error("Please register a constructor function");if(void 0!==this._components[e])throw Error("Component "+e+" is already registered");this._components[e]=t},toConfig:function(e){var t,i,n;if(!1===this.isInitialised)throw Error("Can't create config, layout not yet initialised");if(e&&!(e instanceof a.items.AbstractContentItem))throw Error("Root must be a ContentItem");for(t={settings:a.utils.copy({},this.config.settings),dimensions:a.utils.copy({},this.config.dimensions),labels:a.utils.copy({},this.config.labels)},t.content=[],i=function(e,t){var n,r;for(n in t.config)"content"!==n&&(e[n]=t.config[n]);if(t.contentItems.length)for(e.content=[],r=0;r<t.contentItems.length;r++)e.content[r]={},i(e.content[r],t.contentItems[r])},e?i(t,{contentItems:[e]}):i(t,this.root),this._$reconcilePopoutWindows(),t.openPopouts=[],n=0;n<this.openPopouts.length;n++)t.openPopouts.push(this.openPopouts[n].toConfig());return t.maximisedItemId=this._maximisedItem?"__glMaximised":null,t},getComponent:function(e){if(void 0===this._components[e])throw new a.errors.ConfigurationError('Unknown component "'+e+'"');return this._components[e]},init:function(){return!1===this._subWindowsCreated&&(this._createSubWindows(),this._subWindowsCreated=!0),"loading"===document.readyState||null===document.body?void o(document).ready(a.utils.fnBind(this.init,this)):!0===this.isSubWindow&&!1===this._creationTimeoutPassed?(setTimeout(a.utils.fnBind(this.init,this),7),void(this._creationTimeoutPassed=!0)):(!0===this.isSubWindow&&this._adjustToWindowMode(),this._setContainer(),this.dropTargetIndicator=new a.controls.DropTargetIndicator(this.container),this.transitionIndicator=new a.controls.TransitionIndicator,this.updateSize(),this._create(this.config),this._bindEvents(),this.isInitialised=!0,this._adjustColumnsResponsive(),void this.emit("initialised"))},updateSize:function(e,t){2===arguments.length?(this.width=e,this.height=t):(this.width=this.container.width(),this.height=this.container.height()),!0===this.isInitialised&&(this.root.callDownwards("setSize",[this.width,this.height]),this._maximisedItem&&(this._maximisedItem.element.width(this.container.width()),this._maximisedItem.element.height(this.container.height()),this._maximisedItem.callDownwards("setSize")),this._adjustColumnsResponsive())},destroy:function(){!1!==this.isInitialised&&(this._onUnload(),o(window).off("resize",this._resizeFunction),o(window).off("unload beforeunload",this._unloadFunction),this.root.callDownwards("_$destroy",[],!0),this.root.contentItems=[],this.tabDropPlaceholder.remove(),this.dropTargetIndicator.destroy(),this.transitionIndicator.destroy(),this.eventHub.destroy(),this._dragSources.forEach(function(e){e._dragListener.destroy(),e._element=null,e._itemConfig=null,e._dragListener=null}),this._dragSources=[])},createContentItem:function(e,t){var i;if("string"!=typeof e.type)throw new a.errors.ConfigurationError("Missing parameter 'type'",e);if("react-component"===e.type&&(e.type="component",e.componentName="lm-react-component"),!this._typeToItem[e.type])throw i="Unknown type '"+e.type+"'. Valid types are "+a.utils.objectKeys(this._typeToItem).join(","),new a.errors.ConfigurationError(i);return"component"!==e.type||t instanceof a.items.Stack||!t||!0===this.isSubWindow&&t instanceof a.items.Root||(e={type:"stack",width:e.width,height:e.height,content:[e]}),new this._typeToItem[e.type](this,e,t)},createPopout:function(e,t,i,n){var r,o,s,l,h,c,u=e,d=e instanceof a.items.AbstractContentItem,f=this;if(i=i||null,d){for(u=this.toConfig(e).content,i=a.utils.getUniqueId(),l=e.parent,h=e;1===l.contentItems.length&&!l.isRoot;)l=l.parent,h=h.parent;l.addId(i),isNaN(n)&&(n=a.utils.indexOf(h,l.contentItems))}else u instanceof Array||(u=[u]);return!t&&d&&(r=window.screenX||window.screenLeft,o=window.screenY||window.screenTop,s=e.element.offset(),t={left:r+s.left,top:o+s.top,width:e.element.width(),height:e.element.height()}),t||d||(t={left:window.screenX||window.screenLeft+20,top:window.screenY||window.screenTop+20,width:500,height:309}),d&&e.remove(),c=new a.controls.BrowserPopout(u,t,i,n,this),c.on("initialised",function(){f.emit("windowOpened",c)}),c.on("closed",function(){f._$reconcilePopoutWindows()}),this.openPopouts.push(c),c},createDragSource:function(e,t){this.config.settings.constrainDragToContainer=!1;var i=new a.controls.DragSource(o(e),t,this);return this._dragSources.push(i),i},selectItem:function(e,t){if(!0!==this.config.settings.selectionEnabled)throw Error("Please set selectionEnabled to true to use this feature");e!==this.selectedItem&&(null!==this.selectedItem&&this.selectedItem.deselect(),e&&!0!==t&&e.select(),this.selectedItem=e,this.emit("selectionChanged",e))},_$maximiseItem:function(e){null!==this._maximisedItem&&this._$minimiseItem(this._maximisedItem),this._maximisedItem=e,this._maximisedItem.addId("__glMaximised"),e.element.addClass("lm_maximised"),e.element.after(this._maximisePlaceholder),this.root.element.prepend(e.element),e.element.width(this.container.width()),e.element.height(this.container.height()),e.callDownwards("setSize"),this._maximisedItem.emit("maximised"),this.emit("stateChanged")},_$minimiseItem:function(e){e.element.removeClass("lm_maximised"),e.removeId("__glMaximised"),this._maximisePlaceholder.after(e.element),this._maximisePlaceholder.remove(),e.parent.callDownwards("setSize"),this._maximisedItem=null,e.emit("minimised"),this.emit("stateChanged")},_$closeWindow:function(){window.setTimeout(function(){window.close()},1)},_$getArea:function(e,t){var i,n,r=1/0,o=null;for(i=0;i<this._itemAreas.length;i++)n=this._itemAreas[i],e>n.x1&&e<n.x2&&t>n.y1&&t<n.y2&&r>n.surface&&(r=n.surface,o=n);return o},_$createRootItemAreas:function(){var e={y2:0,x2:0,y1:"y2",x1:"x2"};for(var t in e){var i=this.root._$getArea();i.side=t,i[t]=e[t]?i[e[t]]-50:50,i.surface=(i.x2-i.x1)*(i.y2-i.y1),this._itemAreas.push(i)}},_$calculateItemAreas:function(){var e,t,i=this._getAllContentItems();if(this._itemAreas=[],1===i.length)return void this._itemAreas.push(this.root._$getArea());for(this._$createRootItemAreas(),e=0;e<i.length;e++)if(i[e].isStack&&null!==(t=i[e]._$getArea()))if(t instanceof Array)this._itemAreas=this._itemAreas.concat(t);else{this._itemAreas.push(t);var n={};a.utils.copy(n,t),a.utils.copy(n,t.contentItem._contentAreaDimensions.header.highlightArea),n.surface=(n.x2-n.x1)*(n.y2-n.y1),this._itemAreas.push(n)}},_$normalizeContentItem:function(e,t){if(!e)throw Error("No content item defined");if(a.utils.isFunction(e)&&(e=e()),e instanceof a.items.AbstractContentItem)return e;if(o.isPlainObject(e)&&e.type){var i=this.createContentItem(e,t);return i.callDownwards("_$init"),i}throw Error("Invalid contentItem")},_$reconcilePopoutWindows:function(){var e,t=[];for(e=0;e<this.openPopouts.length;e++)!1===this.openPopouts[e].getWindow().closed?t.push(this.openPopouts[e]):this.emit("windowClosed",this.openPopouts[e]);this.openPopouts.length!==t.length&&(this.emit("stateChanged"),this.openPopouts=t)},_getAllContentItems:function(){var e=[],t=function(i){if(e.push(i),i.contentItems instanceof Array)for(var n=0;n<i.contentItems.length;n++)t(i.contentItems[n])};return t(this.root),e},_bindEvents:function(){this._isFullPage&&o(window).resize(this._resizeFunction),o(window).on("unload beforeunload",this._unloadFunction)},_onResize:function(){clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout(a.utils.fnBind(this.updateSize,this),100)},_createConfig:function(e){var t=a.utils.getQueryStringParam("gl-window");t&&(this.isSubWindow=!0,e=localStorage.getItem(t),e=JSON.parse(e),e=(new a.utils.ConfigMinifier).unminifyConfig(e),localStorage.removeItem(t)),e=o.extend(!0,{},a.config.defaultConfig,e);var i=function(e){for(var t in e)"props"!==t&&"object"==typeof e[t]?i(e[t]):"type"===t&&"react-component"===e[t]&&(e.type="component",e.componentName="lm-react-component")};return i(e),!1===e.settings.hasHeaders&&(e.dimensions.headerHeight=0),e},_adjustToWindowMode:function(){var e=o('<div class="lm_popin" title="'+this.config.labels.popin+'"><div class="lm_icon"></div><div class="lm_bg"></div></div>');e.click(a.utils.fnBind(function(){this.emit("popIn")},this)),document.title=a.utils.stripTags(this.config.content[0].title),o("head").append(o("body link, body style, template, .gl_keep")),this.container=o("body").html("").css("visibility","visible").append(e);document.body.offsetHeight;window.__glInstance=this},_createSubWindows:function(){var e,t;for(e=0;e<this.config.openPopouts.length;e++)t=this.config.openPopouts[e],this.createPopout(t.content,t.dimensions,t.parentId,t.indexInParent)},_setContainer:function(){var e=o(this.container||"body");if(0===e.length)throw Error("GoldenLayout container not found");if(e.length>1)throw Error("GoldenLayout more than one container element specified");e[0]===document.body&&(this._isFullPage=!0,o("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"})),this.container=e},_create:function(e){var t;if(!(e.content instanceof Array))throw t=void 0===e.content?"Missing setting 'content' on top level of configuration":"Configuration parameter 'content' must be an array",new a.errors.ConfigurationError(t,e);if(e.content.length>1)throw t="Top level content can't contain more then one element.",new a.errors.ConfigurationError(t,e);this.root=new a.items.Root(this,{content:e.content},this.container),this.root.callDownwards("_$init"),"__glMaximised"===e.maximisedItemId&&this.root.getItemsById(e.maximisedItemId)[0].toggleMaximise()},_onUnload:function(){if(!0===this.config.settings.closePopoutsOnUnload)for(var e=0;e<this.openPopouts.length;e++)this.openPopouts[e].close()},_adjustColumnsResponsive:function(){if(!this._useResponsiveLayout()||this._updatingColumnsResponsive||!this.config.dimensions||!this.config.dimensions.minItemWidth||0===this.root.contentItems.length||!this.root.contentItems[0].isRow)return void(this._firstLoad=!1);this._firstLoad=!1;var e=this.root.contentItems[0].contentItems.length;if(!(e<=1)){var t=this.config.dimensions.minItemWidth;if(!(e*t<=this.width)){this._updatingColumnsResponsive=!0;for(var i=Math.max(Math.floor(this.width/t),1),n=e-i,r=this.root.contentItems[0],o=this._findAllStackContainers()[0],a=0;a<n;a++){var s=r.contentItems[r.contentItems.length-1];this._addChildContentItemsToContainer(o,s)}this._updatingColumnsResponsive=!1}}},_useResponsiveLayout:function(){return this.config.settings&&("always"==this.config.settings.responsiveMode||"onload"==this.config.settings.responsiveMode&&this._firstLoad)},_addChildContentItemsToContainer:function(e,t){"stack"===t.type?t.contentItems.forEach(function(i){e.addChild(i),t.removeChild(i,!0)}):t.contentItems.forEach(a.utils.fnBind(function(t){this._addChildContentItemsToContainer(e,t)},this))},_findAllStackContainers:function(){var e=[];return this._findAllStackContainersRecursive(e,this.root),e},_findAllStackContainersRecursive:function(e,t){t.contentItems.forEach(a.utils.fnBind(function(t){"stack"==t.type?e.push(t):t.isComponent||this._findAllStackContainersRecursive(e,t)},this))}}),function(){n=[i(0)],void 0!==(r=function(e){return o=e,a.LayoutManager}.apply(t,n))&&(e.exports=r)}(),a.config.itemDefaultConfig={isClosable:!0,reorderEnabled:!0,title:""},a.config.defaultConfig={openPopouts:[],settings:{hasHeaders:!0,constrainDragToContainer:!0,reorderEnabled:!0,selectionEnabled:!1,popoutWholeStack:!1,blockedPopoutsThrowError:!0,closePopoutsOnUnload:!0,showPopoutIcon:!0,showMaximiseIcon:!0,showCloseIcon:!0,responsiveMode:"onload",tabOverlapAllowance:0,reorderOnTabMenuClick:!0,tabControlOffset:10},dimensions:{borderWidth:5,borderGrabWidth:15,minItemHeight:10,minItemWidth:10,headerHeight:20,dragProxyWidth:300,dragProxyHeight:200},labels:{close:"close",maximise:"maximise",minimise:"minimise",popout:"open in new window",popin:"pop in",tabDropdown:"additional tabs"}},a.container.ItemContainer=function(e,t,i){a.utils.EventEmitter.call(this),this.width=null,this.height=null,this.title=e.componentName,this.parent=t,this.layoutManager=i,this.isHidden=!1,this._config=e,this._element=o('<div class="lm_item_container"><div class="lm_content"></div></div>'),this._contentElement=this._element.find(".lm_content")},a.utils.copy(a.container.ItemContainer.prototype,{getElement:function(){return this._contentElement},hide:function(){this.emit("hide"),this.isHidden=!0,this._element.hide()},show:function(){this.emit("show"),this.isHidden=!1,this._element.show(),0==this.height&&0==this.width||this.emit("shown")},setSize:function(e,t){for(var i,n,r,o,a,s,l=this.parent,h=this;!l.isColumn&&!l.isRow;)if(h=l,l=l.parent,l.isRoot)return!1;for(r=l.isColumn?"height":"width",o="height"===r?t:e,i=this[r]*(1/(h.config[r]/100)),n=o/i*100,a=(h.config[r]-n)/(l.contentItems.length-1),s=0;s<l.contentItems.length;s++)l.contentItems[s]===h?l.contentItems[s].config[r]=n:l.contentItems[s].config[r]+=a;return l.callDownwards("setSize"),!0},close:function(){this._config.isClosable&&(this.emit("close"),this.parent.close())},getState:function(){return this._config.componentState},extendState:function(e){this.setState(o.extend(!0,this.getState(),e))},setState:function(e){this._config.componentState=e,this.parent.emitBubblingEvent("stateChanged")},setTitle:function(e){this.parent.setTitle(e)},_$setSize:function(e,t){if(e!==this.width||t!==this.height){this.width=e,this.height=t;var i=this._contentElement[0],n=i.offsetWidth-i.clientWidth,r=i.offsetHeight-i.clientHeight;this._contentElement.width(this.width-n).height(this.height-r),this.emit("resize")}}}),a.controls.BrowserPopout=function(e,t,i,n,r){a.utils.EventEmitter.call(this),this.isInitialised=!1,this._config=e,this._dimensions=t,this._parentId=i,this._indexInParent=n,this._layoutManager=r,this._popoutWindow=null,this._id=null,this._createWindow()},a.utils.copy(a.controls.BrowserPopout.prototype,{toConfig:function(){if(!1===this.isInitialised)throw Error("Can't create config, layout not yet initialised");return{dimensions:{width:this.getGlInstance().width,height:this.getGlInstance().height,left:this._popoutWindow.screenX||this._popoutWindow.screenLeft,top:this._popoutWindow.screenY||this._popoutWindow.screenTop},content:this.getGlInstance().toConfig().content,parentId:this._parentId,indexInParent:this._indexInParent}},getGlInstance:function(){return this._popoutWindow.__glInstance},getWindow:function(){return this._popoutWindow},close:function(){if(this.getGlInstance())this.getGlInstance()._$closeWindow();else try{this.getWindow().close()}catch(e){}},popIn:function(){var e,t;this._indexInParent;this._parentId&&(e=o.extend(!0,{},this.getGlInstance().toConfig()).content[0],(t=this._layoutManager.root.getItemsById(this._parentId)[0])||(t=this._layoutManager.root.contentItems.length>0?this._layoutManager.root.contentItems[0]:this._layoutManager.root)),t.addChild(e,this._indexInParent),this.close()},_createWindow:function(){var e,t=this._createUrl(),i=Math.floor(1e6*Math.random()).toString(36),n=this._serializeWindowOptions({width:this._dimensions.width,height:this._dimensions.height,innerWidth:this._dimensions.width,innerHeight:this._dimensions.height,menubar:"no",toolbar:"no",location:"no",personalbar:"no",resizable:"yes",scrollbars:"no",status:"no"});if(this._popoutWindow=window.open(t,i,n),this._popoutWindow)o(this._popoutWindow).on("load",a.utils.fnBind(this._positionWindow,this)).on("unload beforeunload",a.utils.fnBind(this._onClose,this)),e=setInterval(a.utils.fnBind(function(){this._popoutWindow.__glInstance&&this._popoutWindow.__glInstance.isInitialised&&(this._onInitialised(),clearInterval(e))},this),10);else if(!0===this._layoutManager.config.settings.blockedPopoutsThrowError){var r=Error("Popout blocked");throw r.type="popoutBlocked",r}},_serializeWindowOptions:function(e){var t,i=[];for(t in e)i.push(t+"="+e[t]);return i.join(",")},_createUrl:function(){var e,t={content:this._config},i="gl-window-config-"+a.utils.getUniqueId();t=(new a.utils.ConfigMinifier).minifyConfig(t);try{localStorage.setItem(i,JSON.stringify(t))}catch(e){throw Error("Error while writing to localStorage "+e)}return e=document.location.href.split("?"),1===e.length?e[0]+"?gl-window="+i:document.location.href+"&gl-window="+i},_positionWindow:function(){this._popoutWindow.moveTo(this._dimensions.left,this._dimensions.top),this._popoutWindow.focus()},_onInitialised:function(){this.isInitialised=!0,this.getGlInstance().on("popIn",this.popIn,this),this.emit("initialised")},_onClose:function(){setTimeout(a.utils.fnBind(this.emit,this,["closed"]),50)}}),a.controls.DragProxy=function(e,t,i,n,r,s){a.utils.EventEmitter.call(this),this._dragListener=i,this._layoutManager=n,this._contentItem=r,this._originalParent=s,this._area=null,this._lastValidArea=null,this._dragListener.on("drag",this._onDrag,this),this._dragListener.on("dragStop",this._onDrop,this),this.element=o(a.controls.DragProxy._template),s&&s._side&&(this._sided=s._sided,this.element.addClass("lm_"+s._side),["right","bottom"].indexOf(s._side)>=0&&this.element.find(".lm_content").after(this.element.find(".lm_header"))),this.element.css({left:e,top:t}),this.element.find(".lm_tab").attr("title",a.utils.stripTags(this._contentItem.config.title)),this.element.find(".lm_title").html(this._contentItem.config.title),this.childElementContainer=this.element.find(".lm_content"),this.childElementContainer.append(r.element),this._updateTree(),this._layoutManager._$calculateItemAreas(),this._setDimensions(),o(document.body).append(this.element);var l=this._layoutManager.container.offset();this._minX=l.left,this._minY=l.top,this._maxX=this._layoutManager.container.width()+this._minX,this._maxY=this._layoutManager.container.height()+this._minY,this._width=this.element.width(),this._height=this.element.height(),this._setDropPosition(e,t)},a.controls.DragProxy._template='<div class="lm_dragProxy"><div class="lm_header"><ul class="lm_tabs"><li class="lm_tab lm_active"><i class="lm_left"></i><span class="lm_title"></span><i class="lm_right"></i></li></ul></div><div class="lm_content"></div></div>',a.utils.copy(a.controls.DragProxy.prototype,{_onDrag:function(e,t,i){i=i.originalEvent&&i.originalEvent.touches?i.originalEvent.touches[0]:i;var n=i.pageX,r=i.pageY;(n>this._minX&&n<this._maxX&&r>this._minY&&r<this._maxY||!0!==this._layoutManager.config.settings.constrainDragToContainer)&&this._setDropPosition(n,r)},_setDropPosition:function(e,t){this.element.css({left:e,top:t}),this._area=this._layoutManager._$getArea(e,t),null!==this._area&&(this._lastValidArea=this._area,this._area.contentItem._$highlightDropZone(e,t,this._area))},_onDrop:function(){this._layoutManager.dropTargetIndicator.hide(),null!==this._area?this._area.contentItem._$onDrop(this._contentItem,this._area):null!==this._lastValidArea?this._lastValidArea.contentItem._$onDrop(this._contentItem,this._lastValidArea):this._originalParent?this._originalParent.addChild(this._contentItem):this._contentItem._$destroy(),this.element.remove(),this._layoutManager.emit("itemDropped",this._contentItem)},_updateTree:function(){this._contentItem.parent&&this._contentItem.parent.removeChild(this._contentItem,!0),this._contentItem._$setParent(this)},_setDimensions:function(){var e=this._layoutManager.config.dimensions,t=e.dragProxyWidth,i=e.dragProxyHeight;this.element.width(t),this.element.height(i),t-=this._sided?e.headerHeight:0,i-=this._sided?0:e.headerHeight,this.childElementContainer.width(t),this.childElementContainer.height(i),this._contentItem.element.width(t),this._contentItem.element.height(i),this._contentItem.callDownwards("_$show"),this._contentItem.callDownwards("setSize")}}),a.controls.DragSource=function(e,t,i){this._element=e,this._itemConfig=t,this._layoutManager=i,this._dragListener=null,this._createDragListener()},a.utils.copy(a.controls.DragSource.prototype,{_createDragListener:function(){null!==this._dragListener&&this._dragListener.destroy(),this._dragListener=new a.utils.DragListener(this._element),this._dragListener.on("dragStart",this._onDragStart,this),this._dragListener.on("dragStop",this._createDragListener,this)},_onDragStart:function(e,t){var i=this._itemConfig;a.utils.isFunction(i)&&(i=i());var n=this._layoutManager._$normalizeContentItem(o.extend(!0,{},i)),r=new a.controls.DragProxy(e,t,this._dragListener,this._layoutManager,n,null);this._layoutManager.transitionIndicator.transitionElements(this._element,r.element)}}),a.controls.DropTargetIndicator=function(){this.element=o(a.controls.DropTargetIndicator._template),o(document.body).append(this.element)},a.controls.DropTargetIndicator._template='<div class="lm_dropTargetIndicator"><div class="lm_inner"></div></div>',a.utils.copy(a.controls.DropTargetIndicator.prototype,{destroy:function(){this.element.remove()},highlight:function(e,t,i,n){this.highlightArea({x1:e,y1:t,x2:i,y2:n})},highlightArea:function(e){this.element.css({left:e.x1,top:e.y1,width:e.x2-e.x1,height:e.y2-e.y1}).show()},hide:function(){this.element.hide()}}),a.controls.Header=function(e,t){a.utils.EventEmitter.call(this),this.layoutManager=e,this.element=o(a.controls.Header._template),!0===this.layoutManager.config.settings.selectionEnabled&&(this.element.addClass("lm_selectable"),this.element.on("click touchstart",a.utils.fnBind(this._onHeaderClick,this))),this.tabsContainer=this.element.find(".lm_tabs"),this.tabDropdownContainer=this.element.find(".lm_tabdropdown_list"),this.tabDropdownContainer.hide(),this.controlsContainer=this.element.find(".lm_controls"),this.parent=t,this.parent.on("resize",this._updateTabSizes,this),this.tabs=[],this.activeContentItem=null,this.closeButton=null,this.tabDropdownButton=null,this.hideAdditionalTabsDropdown=a.utils.fnBind(this._hideAdditionalTabsDropdown,this),o(document).mouseup(this.hideAdditionalTabsDropdown),this._lastVisibleTabIndex=-1,this._tabControlOffset=this.layoutManager.config.settings.tabControlOffset,this._createControls()},a.controls.Header._template='<div class="lm_header"><ul class="lm_tabs"></ul><ul class="lm_controls"></ul><ul class="lm_tabdropdown_list"></ul></div>',a.utils.copy(a.controls.Header.prototype,{createTab:function(e,t){var i,n;for(n=0;n<this.tabs.length;n++)if(this.tabs[n].contentItem===e)return;if(i=new a.controls.Tab(this,e),0===this.tabs.length)return this.tabs.push(i),void this.tabsContainer.append(i.element);void 0===t&&(t=this.tabs.length),t>0?this.tabs[t-1].element.after(i.element):this.tabs[0].element.before(i.element),this.tabs.splice(t,0,i),this._updateTabSizes()},removeTab:function(e){for(var t=0;t<this.tabs.length;t++)if(this.tabs[t].contentItem===e)return this.tabs[t]._$destroy(),void this.tabs.splice(t,1);throw Error("contentItem is not controlled by this header")},setActiveContentItem:function(e){var t,i,n,r;for(t=0;t<this.tabs.length;t++)n=this.tabs[t].contentItem===e,this.tabs[t].setActive(n),!0===n&&(this.activeContentItem=e,this.parent.config.activeItemIndex=t);if(this.layoutManager.config.settings.reorderOnTabMenuClick&&-1!==this._lastVisibleTabIndex&&this.parent.config.activeItemIndex>this._lastVisibleTabIndex){for(r=this.tabs[this.parent.config.activeItemIndex],i=this.parent.config.activeItemIndex;i>0;i--)this.tabs[i]=this.tabs[i-1];this.tabs[0]=r,this.parent.config.activeItemIndex=0}this._updateTabSizes(),this.parent.emitBubblingEvent("stateChanged")},position:function(e){var t=this.parent._header.show;return t&&!this.parent._side&&(t="top"),void 0!==e&&this.parent._header.show!=e&&(this.parent._header.show=e,this.parent._setupHeaderPosition()),t},_$setClosable:function(e){return!(!this.closeButton||!this._isClosable())&&(this.closeButton.element[e?"show":"hide"](),!0)},_$destroy:function(){this.emit("destroy",this);for(var e=0;e<this.tabs.length;e++)this.tabs[e]._$destroy();o(document).off("mouseup",this.hideAdditionalTabsDropdown),this.element.remove()},_getHeaderSetting:function(e){if(e in this.parent._header)return this.parent._header[e]},_createControls:function(){var e,t,i,n,r,o,s,l,h;h=a.utils.fnBind(this._showAdditionalTabsDropdown,this),l=this.layoutManager.config.labels.tabDropdown,this.tabDropdownButton=new a.controls.HeaderButton(this,l,"lm_tabdropdown",h),this.tabDropdownButton.element.hide(),this._getHeaderSetting("popout")&&(t=a.utils.fnBind(this._onPopoutClick,this),i=this._getHeaderSetting("popout"),new a.controls.HeaderButton(this,i,"lm_popout",t)),this._getHeaderSetting("maximise")&&(o=a.utils.fnBind(this.parent.toggleMaximise,this.parent),n=this._getHeaderSetting("maximise"),r=this._getHeaderSetting("minimise"),s=new a.controls.HeaderButton(this,n,"lm_maximise",o),this.parent.on("maximised",function(){s.element.attr("title",r)}),this.parent.on("minimised",function(){s.element.attr("title",n)})),this._isClosable()&&(e=a.utils.fnBind(this.parent.remove,this.parent),i=this._getHeaderSetting("close"),this.closeButton=new a.controls.HeaderButton(this,i,"lm_close",e))},_showAdditionalTabsDropdown:function(){this.tabDropdownContainer.show()},_hideAdditionalTabsDropdown:function(e){this.tabDropdownContainer.hide()},_isClosable:function(){return this.parent.config.isClosable&&this.layoutManager.config.settings.showCloseIcon},_onPopoutClick:function(){!0===this.layoutManager.config.settings.popoutWholeStack?this.parent.popout():this.activeContentItem.popout()},_onHeaderClick:function(e){e.target===this.element[0]&&this.parent.select()},_updateTabSizes:function(e){if(0!==this.tabs.length){this.tabDropdownButton.element.toggle(!0===e);var t=function(e){return e?"width":"height"};this.element.css(t(!this.parent._sided),""),this.element[t(this.parent._sided)](this.layoutManager.config.dimensions.headerHeight);var i,n,r,o,a,s=this.element.outerWidth()-this.controlsContainer.outerWidth()-this._tabControlOffset,l=0,h=0,c=0,u=this.layoutManager.config.settings.tabOverlapAllowance,d=!1,f=this.activeContentItem?this.tabs.indexOf(this.activeContentItem.tab):0,p=this.tabs[f];for(this.parent._sided&&(s=this.element.outerHeight()-this.controlsContainer.outerHeight()-this._tabControlOffset),this._lastVisibleTabIndex=-1,n=0;n<this.tabs.length;n++)if(i=this.tabs[n].element,this.tabsContainer.append(i),a=i.outerWidth()+parseInt(i.css("margin-right"),10),l+=a,(h=f<=n?l:l+p.element.outerWidth()+parseInt(p.element.css("margin-right"),10))>s){if(d)n===f&&(i.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(i));else if((c=f>0&&f<=n?(h-s)/(n-1):(h-s)/n)<u){for(r=0;r<=n;r++)o=r!==f&&0!==r?"-"+c+"px":"",this.tabs[r].element.css({"z-index":n-r,"margin-left":o});this._lastVisibleTabIndex=n,this.tabsContainer.append(i)}else d=!0;if(d&&n!==f){if(!e)return void this._updateTabSizes(!0);i.css({"z-index":"auto","margin-left":""}),this.tabDropdownContainer.append(i)}}else this._lastVisibleTabIndex=n,i.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(i)}}}),a.controls.HeaderButton=function(e,t,i,n){this._header=e,this.element=o('<li class="'+i+'" title="'+t+'"></li>'),this._header.on("destroy",this._$destroy,this),this._action=n,this.element.on("click touchstart",this._action),this._header.controlsContainer.append(this.element)},a.utils.copy(a.controls.HeaderButton.prototype,{_$destroy:function(){this.element.off(),this.element.remove()}}),a.controls.Splitter=function(e,t,i){this._isVertical=e,this._size=t,this._grabSize=i<t?t:i,this.element=this._createElement(),this._dragListener=new a.utils.DragListener(this.element)},a.utils.copy(a.controls.Splitter.prototype,{on:function(e,t,i){this._dragListener.on(e,t,i)},_$destroy:function(){this.element.remove()},_createElement:function(){var e=o('<div class="lm_drag_handle"></div>'),t=o('<div class="lm_splitter"></div>');t.append(e);var i=this._grabSize-this._size,n=i/2;return this._isVertical?(e.css("top",-n),e.css("height",this._size+i),t.addClass("lm_vertical"),t.height(this._size)):(e.css("left",-n),e.css("width",this._size+i),t.addClass("lm_horizontal"),t.width(this._size)),t}}),a.controls.Tab=function(e,t){this.header=e,this.contentItem=t,this.element=o(a.controls.Tab._template),this.titleElement=this.element.find(".lm_title"),this.closeElement=this.element.find(".lm_close_tab"),this.closeElement[t.config.isClosable?"show":"hide"](),this.isActive=!1,this.setTitle(t.config.title),this.contentItem.on("titleChanged",this.setTitle,this),this._layoutManager=this.contentItem.layoutManager,!0===this._layoutManager.config.settings.reorderEnabled&&!0===t.config.reorderEnabled&&(this._dragListener=new a.utils.DragListener(this.element),this._dragListener.on("dragStart",this._onDragStart,this),this.contentItem.on("destroy",this._dragListener.destroy,this._dragListener)),this._onTabClickFn=a.utils.fnBind(this._onTabClick,this),this._onCloseClickFn=a.utils.fnBind(this._onCloseClick,this),this.element.on("mousedown touchstart",this._onTabClickFn),this.contentItem.config.isClosable?(this.closeElement.on("click touchstart",this._onCloseClickFn),this.closeElement.on("mousedown",this._onCloseMousedown)):this.closeElement.remove(),this.contentItem.tab=this,this.contentItem.emit("tab",this),this.contentItem.layoutManager.emit("tabCreated",this),this.contentItem.isComponent&&(this.contentItem.container.tab=this,this.contentItem.container.emit("tab",this))},a.controls.Tab._template='<li class="lm_tab"><i class="lm_left"></i><span class="lm_title"></span><div class="lm_close_tab"></div><i class="lm_right"></i></li>',a.utils.copy(a.controls.Tab.prototype,{setTitle:function(e){this.element.attr("title",a.utils.stripTags(e)),this.titleElement.html(e)},setActive:function(e){e!==this.isActive&&(this.isActive=e,e?this.element.addClass("lm_active"):this.element.removeClass("lm_active"))},_$destroy:function(){this.element.off("mousedown touchstart",this._onTabClickFn),this.closeElement.off("click touchstart",this._onCloseClickFn),this._dragListener&&(this.contentItem.off("destroy",this._dragListener.destroy,this._dragListener),this._dragListener.off("dragStart",this._onDragStart),this._dragListener=null),this.element.remove()},_onDragStart:function(e,t){!0===this.contentItem.parent.isMaximised&&this.contentItem.parent.toggleMaximise(),new a.controls.DragProxy(e,t,this._dragListener,this._layoutManager,this.contentItem,this.header.parent)},_onTabClick:function(e){if(0===e.button||"touchstart"===e.type){var t=this.header.parent.getActiveContentItem();this.contentItem!==t&&this.header.parent.setActiveContentItem(this.contentItem)}else 1===e.button&&this.contentItem.config.isClosable&&this._onCloseClick(e)},_onCloseClick:function(e){e.stopPropagation(),this.header.parent.removeChild(this.contentItem)},_onCloseMousedown:function(e){e.stopPropagation()}}),a.controls.TransitionIndicator=function(){this._element=o('<div class="lm_transition_indicator"></div>'),o(document.body).append(this._element),this._toElement=null,this._fromDimensions=null,this._totalAnimationDuration=200,this._animationStartTime=null},a.utils.copy(a.controls.TransitionIndicator.prototype,{destroy:function(){this._element.remove()},transitionElements:function(e,t){},_nextAnimationFrame:function(){var e,t=this._measure(this._toElement),i=(a.utils.now()-this._animationStartTime)/this._totalAnimationDuration,n={};if(i>=1)return void this._element.hide();t.opacity=0;for(e in this._fromDimensions)n[e]=this._fromDimensions[e]+(t[e]-this._fromDimensions[e])*i;this._element.css(n),a.utils.animFrame(a.utils.fnBind(this._nextAnimationFrame,this))},_measure:function(e){var t=e.offset();return{left:t.left,top:t.top,width:e.outerWidth(),height:e.outerHeight()}}}),a.errors.ConfigurationError=function(e,t){Error.call(this),this.name="Configuration Error",this.message=e,this.node=t},a.errors.ConfigurationError.prototype=Error(),a.items.AbstractContentItem=function(e,t,i){a.utils.EventEmitter.call(this),this.config=this._extendItemNode(t),this.type=t.type,this.contentItems=[],this.parent=i,this.isInitialised=!1,this.isMaximised=!1,this.isRoot=!1,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.layoutManager=e,this._pendingEventPropagations={},this._throttledEvents=["stateChanged"],this.on(a.utils.EventEmitter.ALL_EVENT,this._propagateEvent,this),t.content&&this._createContentItems(t)},a.utils.copy(a.items.AbstractContentItem.prototype,{setSize:function(){throw Error("Abstract Method")},callDownwards:function(e,t,i,n){var r;for(!0!==i&&!0!==n&&this[e].apply(this,t||[]),r=0;r<this.contentItems.length;r++)this.contentItems[r].callDownwards(e,t,i);!0===i&&!0!==n&&this[e].apply(this,t||[])},removeChild:function(e,t){var i=a.utils.indexOf(e,this.contentItems);if(-1===i)throw Error("Can't remove child item. Unknown content item");!0!==t&&this.contentItems[i]._$destroy(),this.contentItems.splice(i,1),this.config.content.splice(i,1),this.contentItems.length>0?this.callDownwards("setSize"):this instanceof a.items.Root||!0!==this.config.isClosable||this.parent.removeChild(this)},addChild:function(e,t){void 0===t&&(t=this.contentItems.length),this.contentItems.splice(t,0,e),void 0===this.config.content&&(this.config.content=[]),this.config.content.splice(t,0,e.config),e.parent=this,!0===e.parent.isInitialised&&!1===e.isInitialised&&e._$init()},replaceChild:function(e,t,i){t=this.layoutManager._$normalizeContentItem(t);var n=a.utils.indexOf(e,this.contentItems),r=e.element[0].parentNode;if(-1===n)throw Error("Can't replace child. oldChild is not child of this");r.replaceChild(t.element[0],e.element[0]),!0===i&&(e.parent=null,e._$destroy()),this.contentItems[n]=t,t.parent=this,this.isStack&&(this.header.tabs[n].contentItem=t),!0===t.parent.isInitialised&&!1===t.isInitialised&&t._$init(),this.callDownwards("setSize")},remove:function(){this.parent.removeChild(this)},popout:function(){var e=this.layoutManager.createPopout(this);return this.emitBubblingEvent("stateChanged"),e},toggleMaximise:function(e){e&&e.preventDefault(),!0===this.isMaximised?this.layoutManager._$minimiseItem(this):this.layoutManager._$maximiseItem(this),this.isMaximised=!this.isMaximised,this.emitBubblingEvent("stateChanged")},select:function(){this.layoutManager.selectedItem!==this&&(this.layoutManager.selectItem(this,!0),this.element.addClass("lm_selected"))},deselect:function(){this.layoutManager.selectedItem===this&&(this.layoutManager.selectedItem=null,this.element.removeClass("lm_selected"))},setTitle:function(e){this.config.title=e,this.emit("titleChanged",e),this.emit("stateChanged")},hasId:function(e){return!!this.config.id&&("string"==typeof this.config.id?this.config.id===e:this.config.id instanceof Array?-1!==a.utils.indexOf(e,this.config.id):void 0)},addId:function(e){this.hasId(e)||(this.config.id?"string"==typeof this.config.id?this.config.id=[this.config.id,e]:this.config.id instanceof Array&&this.config.id.push(e):this.config.id=e)},removeId:function(e){if(!this.hasId(e))throw Error("Id not found");if("string"==typeof this.config.id)delete this.config.id;else if(this.config.id instanceof Array){var t=a.utils.indexOf(e,this.config.id);this.config.id.splice(t,1)}},getItemsByFilter:function(e){var t=[],i=function(n){for(var r=0;r<n.contentItems.length;r++)!0===e(n.contentItems[r])&&t.push(n.contentItems[r]),i(n.contentItems[r])};return i(this),t},getItemsById:function(e){return this.getItemsByFilter(function(t){return t.config.id instanceof Array?-1!==a.utils.indexOf(e,t.config.id):t.config.id===e})},getItemsByType:function(e){return this._$getItemsByProperty("type",e)},getComponentsByName:function(e){var t,i=this._$getItemsByProperty("componentName",e),n=[];for(t=0;t<i.length;t++)n.push(i[t].instance);return n},_$getItemsByProperty:function(e,t){return this.getItemsByFilter(function(i){return i[e]===t})},_$setParent:function(e){this.parent=e},_$highlightDropZone:function(e,t,i){this.layoutManager.dropTargetIndicator.highlightArea(i)},_$onDrop:function(e){this.addChild(e)},_$hide:function(){this._callOnActiveComponents("hide"),this.element.hide(),this.layoutManager.updateSize()},_$show:function(){this._callOnActiveComponents("show"),this.element.show(),this.layoutManager.updateSize()},_callOnActiveComponents:function(e){var t,i,n=this.getItemsByType("stack");for(i=0;i<n.length;i++)(t=n[i].getActiveContentItem())&&t.isComponent&&t.container[e]()},_$destroy:function(){this.emitBubblingEvent("beforeItemDestroyed"),this.callDownwards("_$destroy",[],!0,!0),this.element.remove(),this.emitBubblingEvent("itemDestroyed")},_$getArea:function(e){e=e||this.element;var t=e.offset(),i=e.width(),n=e.height();return{x1:t.left,y1:t.top,x2:t.left+i,y2:t.top+n,surface:i*n,contentItem:this}},_$init:function(){var e;for(this.setSize(),e=0;e<this.contentItems.length;e++)this.childElementContainer.append(this.contentItems[e].element);this.isInitialised=!0,this.emitBubblingEvent("itemCreated"),this.emitBubblingEvent(this.type+"Created")},emitBubblingEvent:function(e){var t=new a.utils.BubblingEvent(e,this);this.emit(e,t)},_createContentItems:function(e){var t,i;if(!(e.content instanceof Array))throw new a.errors.ConfigurationError("content must be an Array",e);for(i=0;i<e.content.length;i++)t=this.layoutManager.createContentItem(e.content[i],this),this.contentItems.push(t)},_extendItemNode:function(e){for(var t in a.config.itemDefaultConfig)void 0===e[t]&&(e[t]=a.config.itemDefaultConfig[t]);return e},_propagateEvent:function(e,t){t instanceof a.utils.BubblingEvent&&!1===t.isPropagationStopped&&!0===this.isInitialised&&(!1===this.isRoot&&this.parent?this.parent.emit.apply(this.parent,Array.prototype.slice.call(arguments,0)):this._scheduleEventPropagationToLayoutManager(e,t))},_scheduleEventPropagationToLayoutManager:function(e,t){-1===a.utils.indexOf(e,this._throttledEvents)?this.layoutManager.emit(e,t.origin):!0!==this._pendingEventPropagations[e]&&(this._pendingEventPropagations[e]=!0,a.utils.animFrame(a.utils.fnBind(this._propagateEventToLayoutManager,this,[e,t])))},_propagateEventToLayoutManager:function(e,t){this._pendingEventPropagations[e]=!1,this.layoutManager.emit(e,t)}}),a.items.Component=function(e,t,i){a.items.AbstractContentItem.call(this,e,t,i);var n=e.getComponent(this.config.componentName),r=o.extend(!0,{},this.config.componentState||{});r.componentName=this.config.componentName,this.componentName=this.config.componentName,""===this.config.title&&(this.config.title=this.config.componentName),this.isComponent=!0,this.container=new a.container.ItemContainer(this.config,this,e),this.instance=new n(this.container,r),this.element=this.container._element},a.utils.extend(a.items.Component,a.items.AbstractContentItem),a.utils.copy(a.items.Component.prototype,{close:function(){this.parent.removeChild(this)},setSize:function(){this.element.is(":visible")&&this.container._$setSize(this.element.width(),this.element.height())},_$init:function(){a.items.AbstractContentItem.prototype._$init.call(this),this.container.emit("open")},_$hide:function(){this.container.hide(),a.items.AbstractContentItem.prototype._$hide.call(this)},_$show:function(){this.container.show(),a.items.AbstractContentItem.prototype._$show.call(this)},_$shown:function(){this.container.shown(),a.items.AbstractContentItem.prototype._$shown.call(this)},_$destroy:function(){this.container.emit("destroy",this),a.items.AbstractContentItem.prototype._$destroy.call(this)},_$getArea:function(){return null}}),a.items.Root=function(e,t,i){a.items.AbstractContentItem.call(this,e,t,null),this.isRoot=!0,this.type="root",this.element=o('<div class="lm_goldenlayout lm_item lm_root"></div>'),this.childElementContainer=this.element,this._containerElement=i,this._containerElement.append(this.element)},a.utils.extend(a.items.Root,a.items.AbstractContentItem),a.utils.copy(a.items.Root.prototype,{addChild:function(e){if(this.contentItems.length>0)throw Error("Root node can only have a single child");e=this.layoutManager._$normalizeContentItem(e,this),this.childElementContainer.append(e.element),a.items.AbstractContentItem.prototype.addChild.call(this,e),this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(e,t){e=void 0===e?this._containerElement.width():e,t=void 0===t?this._containerElement.height():t,this.element.width(e),this.element.height(t),this.contentItems[0]&&(this.contentItems[0].element.width(e),this.contentItems[0].element.height(t))},_$highlightDropZone:function(e,t,i){this.layoutManager.tabDropPlaceholder.remove(),a.items.AbstractContentItem.prototype._$highlightDropZone.apply(this,arguments)},_$onDrop:function(e,t){var i;if(e.isComponent&&(i=this.layoutManager.createContentItem({type:"stack",header:e.config.header||{}},this),i._$init(),i.addChild(e),e=i),this.contentItems.length){var n="x"==t.side[0]?"row":"column",r="x"==t.side[0]?"width":"height",o="2"==t.side[1],s=this.contentItems[0];if(!s instanceof a.items.RowOrColumn||s.type!=n){var l=this.layoutManager.createContentItem({type:n},this);this.replaceChild(s,l),l.addChild(e,o?0:void 0,!0),l.addChild(s,o?void 0:0,!0),s.config[r]=50,e.config[r]=50,l.callDownwards("setSize")}else{var h=s.contentItems[o?0:s.contentItems.length-1];s.addChild(e,o?0:void 0,!0),h.config[r]*=.5,e.config[r]=h.config[r],s.callDownwards("setSize")}}else this.addChild(e)}}),a.items.RowOrColumn=function(e,t,i,n){a.items.AbstractContentItem.call(this,t,i,n),this.isRow=!e,this.isColumn=e,this.element=o('<div class="lm_item lm_'+(e?"column":"row")+'"></div>'),this.childElementContainer=this.element,this._splitterSize=t.config.dimensions.borderWidth,this._splitterGrabSize=t.config.dimensions.borderGrabWidth,this._isColumn=e,this._dimension=e?"height":"width",this._splitter=[],this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null},a.utils.extend(a.items.RowOrColumn,a.items.AbstractContentItem),a.utils.copy(a.items.RowOrColumn.prototype,{addChild:function(e,t,i){var n,r,o,s;if(e=this.layoutManager._$normalizeContentItem(e,this),void 0===t&&(t=this.contentItems.length),this.contentItems.length>0?(s=this._createSplitter(Math.max(0,t-1)).element,t>0?(this.contentItems[t-1].element.after(s),s.after(e.element)):(this.contentItems[0].element.before(s),s.before(e.element))):this.childElementContainer.append(e.element),a.items.AbstractContentItem.prototype.addChild.call(this,e,t),n=1/this.contentItems.length*100,!0===i)return void this.emitBubblingEvent("stateChanged");for(o=0;o<this.contentItems.length;o++)this.contentItems[o]===e?e.config[this._dimension]=n:(r=this.contentItems[o].config[this._dimension]*=(100-n)/100,this.contentItems[o].config[this._dimension]=r);this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},removeChild:function(e,t){var i,n,r=e.config[this._dimension],o=a.utils.indexOf(e,this.contentItems),s=Math.max(o-1,0);if(-1===o)throw Error("Can't remove child. ContentItem is not child of this Row or Column");for(this._splitter[s]&&(this._splitter[s]._$destroy(),this._splitter.splice(s,1)),i=0;i<this.contentItems.length;i++)this.contentItems[i]!==e&&(this.contentItems[i].config[this._dimension]+=r/(this.contentItems.length-1));a.items.AbstractContentItem.prototype.removeChild.call(this,e,t),1===this.contentItems.length&&!0===this.config.isClosable?(n=this.contentItems[0],this.contentItems=[],this.parent.replaceChild(this,n,!0)):(this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged"))},replaceChild:function(e,t){var i=e.config[this._dimension];a.items.AbstractContentItem.prototype.replaceChild.call(this,e,t),t.config[this._dimension]=i,this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(){this.contentItems.length>0&&(this._calculateRelativeSizes(),this._setAbsoluteSizes()),this.emitBubblingEvent("stateChanged"),this.emit("resize")},_$init:function(){if(!0!==this.isInitialised){var e;for(a.items.AbstractContentItem.prototype._$init.call(this),e=0;e<this.contentItems.length-1;e++)this.contentItems[e].element.after(this._createSplitter(e).element)}},_setAbsoluteSizes:function(){var e,t=this._calculateAbsoluteSizes();for(e=0;e<this.contentItems.length;e++)t.additionalPixel-e>0&&t.itemSizes[e]++,this._isColumn?(this.contentItems[e].element.width(t.totalWidth),this.contentItems[e].element.height(t.itemSizes[e])):(this.contentItems[e].element.width(t.itemSizes[e]),this.contentItems[e].element.height(t.totalHeight))},_calculateAbsoluteSizes:function(){var e,t,i,n=(this.contentItems.length-1)*this._splitterSize,r=this.element.width(),o=this.element.height(),a=0,s=[];for(this._isColumn?o-=n:r-=n,e=0;e<this.contentItems.length;e++)i=this._isColumn?Math.floor(o*(this.contentItems[e].config.height/100)):Math.floor(r*(this.contentItems[e].config.width/100)),a+=i,s.push(i);return t=Math.floor((this._isColumn?o:r)-a),{itemSizes:s,additionalPixel:t,totalWidth:r,totalHeight:o}},_calculateRelativeSizes:function(){var e,t=0,i=[],n=this._isColumn?"height":"width";for(e=0;e<this.contentItems.length;e++)void 0!==this.contentItems[e].config[n]?t+=this.contentItems[e].config[n]:i.push(this.contentItems[e]);if(100===Math.round(t))return void this._respectMinItemWidth();if(Math.round(t)<100&&i.length>0){for(e=0;e<i.length;e++)i[e].config[n]=(100-t)/i.length;return void this._respectMinItemWidth()}if(Math.round(t)>100)for(e=0;e<i.length;e++)i[e].config[n]=50,t+=50;for(e=0;e<this.contentItems.length;e++)this.contentItems[e].config[n]=this.contentItems[e].config[n]/t*100;this._respectMinItemWidth()},_respectMinItemWidth:function(){var e,t,i,n=this.layoutManager.config.dimensions?this.layoutManager.config.dimensions.minItemWidth||0:0,r=null,o=[],a=0,s=0,l=0,h=0,c=[];if(!(this._isColumn||!n||this.contentItems.length<=1)){r=this._calculateAbsoluteSizes();for(var u=0;u<this.contentItems.length;u++)this.contentItems[u],h=r.itemSizes[u],h<n?(s+=n-h,i={width:n}):(a+=h-n,i={width:h},o.push(i)),c.push(i);if(!(0===s||s>a)){for(e=s/a,l=s,u=0;u<o.length;u++)i=o[u],t=Math.round((i.width-n)*e),l-=t,i.width-=t;for(0!==l&&(c[c.length-1].width-=l),u=0;u<this.contentItems.length;u++)this.contentItems[u].config.width=c[u].width/r.totalWidth*100}}},_createSplitter:function(e){var t;return t=new a.controls.Splitter(this._isColumn,this._splitterSize,this._splitterGrabSize),t.on("drag",a.utils.fnBind(this._onSplitterDrag,this,[t]),this),t.on("dragStop",a.utils.fnBind(this._onSplitterDragStop,this,[t]),this),t.on("dragStart",a.utils.fnBind(this._onSplitterDragStart,this,[t]),this),this._splitter.splice(e,0,t),t},_getItemsForSplitter:function(e){var t=a.utils.indexOf(e,this._splitter);return{before:this.contentItems[t],after:this.contentItems[t+1]}},_getMinimumDimensions:function(e){for(var t=0,i=0,n=0;n<e.length;++n)t=Math.max(e[n].minWidth||0,t),i=Math.max(e[n].minHeight||0,i);return{horizontal:t,vertical:i}},_onSplitterDragStart:function(e){var t=this._getItemsForSplitter(e),i=this.layoutManager.config.dimensions[this._isColumn?"minItemHeight":"minItemWidth"],n=this._getMinimumDimensions(t.before.config.content),r=this._isColumn?n.vertical:n.horizontal,o=this._getMinimumDimensions(t.after.config.content),a=this._isColumn?o.vertical:o.horizontal;this._splitterPosition=0,this._splitterMinPosition=-1*(t.before.element[this._dimension]()-(r||i)),this._splitterMaxPosition=t.after.element[this._dimension]()-(a||i)},_onSplitterDrag:function(e,t,i){var n=this._isColumn?i:t;n>this._splitterMinPosition&&n<this._splitterMaxPosition&&(this._splitterPosition=n,e.element.css(this._isColumn?"top":"left",n))},_onSplitterDragStop:function(e){var t=this._getItemsForSplitter(e),i=t.before.element[this._dimension](),n=t.after.element[this._dimension](),r=(this._splitterPosition+i)/(i+n),o=t.before.config[this._dimension]+t.after.config[this._dimension];t.before.config[this._dimension]=r*o,t.after.config[this._dimension]=(1-r)*o,e.element.css({top:0,left:0}),a.utils.animFrame(a.utils.fnBind(this.callDownwards,this,["setSize"]))}}),a.items.Stack=function(e,t,i){a.items.AbstractContentItem.call(this,e,t,i),this.element=o('<div class="lm_item lm_stack"></div>'),this._activeContentItem=null;var n=e.config;this._header={show:!0===n.settings.hasHeaders&&!1!==t.hasHeaders,popout:n.settings.showPopoutIcon&&n.labels.popout,maximise:n.settings.showMaximiseIcon&&n.labels.maximise,close:n.settings.showCloseIcon&&n.labels.close,minimise:n.labels.minimise},n.header&&a.utils.copy(this._header,n.header),t.header&&a.utils.copy(this._header,t.header),t.content&&t.content[0]&&t.content[0].header&&a.utils.copy(this._header,t.content[0].header),this._dropZones={},this._dropSegment=null,this._contentAreaDimensions=null,this._dropIndex=null,this.isStack=!0,this.childElementContainer=o('<div class="lm_items"></div>'),this.header=new a.controls.Header(e,this),this.element.append(this.header.element),this.element.append(this.childElementContainer),this._setupHeaderPosition(),this._$validateClosability()},a.utils.extend(a.items.Stack,a.items.AbstractContentItem),a.utils.copy(a.items.Stack.prototype,{setSize:function(){var e,t=this._header.show?this.layoutManager.config.dimensions.headerHeight:0,i=this.element.width()-(this._sided?t:0),n=this.element.height()-(this._sided?0:t);for(this.childElementContainer.width(i),this.childElementContainer.height(n),e=0;e<this.contentItems.length;e++)this.contentItems[e].element.width(i).height(n);this.emit("resize"),this.emitBubblingEvent("stateChanged")},_$init:function(){var e,t;if(!0!==this.isInitialised){for(a.items.AbstractContentItem.prototype._$init.call(this),e=0;e<this.contentItems.length;e++)this.header.createTab(this.contentItems[e]),this.contentItems[e]._$hide();if(this.contentItems.length>0){if(!(t=this.contentItems[this.config.activeItemIndex||0]))throw Error("Configured activeItemIndex out of bounds");this.setActiveContentItem(t)}}},setActiveContentItem:function(e){if(-1===a.utils.indexOf(e,this.contentItems))throw Error("contentItem is not a child of this stack");null!==this._activeContentItem&&this._activeContentItem._$hide(),this._activeContentItem=e,this.header.setActiveContentItem(e),e._$show(),this.emit("activeContentItemChanged",e),this.layoutManager.emit("activeContentItemChanged",e),this.emitBubblingEvent("stateChanged")},getActiveContentItem:function(){return this.header.activeContentItem},addChild:function(e,t){e=this.layoutManager._$normalizeContentItem(e,this),a.items.AbstractContentItem.prototype.addChild.call(this,e,t),this.childElementContainer.append(e.element),this.header.createTab(e,t),this.setActiveContentItem(e),this.callDownwards("setSize"),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},removeChild:function(e,t){var i=a.utils.indexOf(e,this.contentItems);a.items.AbstractContentItem.prototype.removeChild.call(this,e,t),this.header.removeTab(e),this.header.activeContentItem===e&&(this.contentItems.length>0?this.setActiveContentItem(this.contentItems[Math.max(i-1,0)]):this._activeContentItem=null),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},_$validateClosability:function(){var e,t,i;for(e=this.header._isClosable(),i=0,t=this.contentItems.length;i<t&&e;i++)e=this.contentItems[i].config.isClosable;this.header._$setClosable(e)},_$destroy:function(){a.items.AbstractContentItem.prototype._$destroy.call(this),this.header._$destroy()},_$onDrop:function(e){if("header"===this._dropSegment)return this._resetHeaderDropZone(),void this.addChild(e,this._dropIndex);if("body"===this._dropSegment)return void this.addChild(e);var t,i,n,r="top"===this._dropSegment||"bottom"===this._dropSegment,o="left"===this._dropSegment||"right"===this._dropSegment,s="top"===this._dropSegment||"left"===this._dropSegment,l=r&&this.parent.isColumn||o&&this.parent.isRow,h=r?"column":"row",c=r?"height":"width";e.isComponent&&(i=this.layoutManager.createContentItem({type:"stack",header:e.config.header||{}},this),i._$init(),i.addChild(e),e=i),l?(t=a.utils.indexOf(this,this.parent.contentItems),this.parent.addChild(e,s?t:t+1,!0),this.config[c]*=.5,e.config[c]=this.config[c],this.parent.callDownwards("setSize")):(h=r?"column":"row",n=this.layoutManager.createContentItem({type:h},this),this.parent.replaceChild(this,n),n.addChild(e,s?0:void 0,!0),n.addChild(this,s?void 0:0,!0),this.config[c]=50,e.config[c]=50,n.callDownwards("setSize"))},_$highlightDropZone:function(e,t){var i,n;for(i in this._contentAreaDimensions)if(n=this._contentAreaDimensions[i].hoverArea,n.x1<e&&n.x2>e&&n.y1<t&&n.y2>t)return void("header"===i?(this._dropSegment="header",this._highlightHeaderDropZone(this._sided?t:e)):(this._resetHeaderDropZone(),this._highlightBodyDropZone(i)))},_$getArea:function(){if(!1===this.element.is(":visible"))return null;var e=a.items.AbstractContentItem.prototype._$getArea,t=e.call(this,this.header.element),i=e.call(this,this.childElementContainer),n=i.x2-i.x1,r=i.y2-i.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2},highlightArea:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}}},this._activeContentItem&&!1===this._activeContentItem.isComponent?t:0===this.contentItems.length?(this._contentAreaDimensions.body={hoverArea:{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},highlightArea:{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}},e.call(this,this.element)):(this._contentAreaDimensions.left={hoverArea:{x1:i.x1,y1:i.y1,x2:i.x1+.25*n,y2:i.y2},highlightArea:{x1:i.x1,y1:i.y1,x2:i.x1+.5*n,y2:i.y2}},this._contentAreaDimensions.top={hoverArea:{x1:i.x1+.25*n,y1:i.y1,x2:i.x1+.75*n,y2:i.y1+.5*r},highlightArea:{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y1+.5*r}},this._contentAreaDimensions.right={hoverArea:{x1:i.x1+.75*n,y1:i.y1,x2:i.x2,y2:i.y2},highlightArea:{x1:i.x1+.5*n,y1:i.y1,x2:i.x2,y2:i.y2}},this._contentAreaDimensions.bottom={hoverArea:{x1:i.x1+.25*n,y1:i.y1+.5*r,x2:i.x1+.75*n,y2:i.y2},highlightArea:{x1:i.x1,y1:i.y1+.5*r,x2:i.x2,y2:i.y2}},e.call(this,this.element))},_highlightHeaderDropZone:function(e){var t,i,n,r,o,a,s,l,h,c=this.header.tabs.length,u=!1;if(0===c)return s=this.header.element.offset(),void this.layoutManager.dropTargetIndicator.highlightArea({x1:s.left,x2:s.left+100,y1:s.top+this.header.element.height()-20,y2:s.top+this.header.element.height()});for(t=0;t<c;t++)if(i=this.header.tabs[t].element,o=i.offset(),this._sided?(r=o.top,n=o.left,l=i.height()):(r=o.left,n=o.top,l=i.width()),e>r&&e<r+l){u=!0;break}if(!(!1===u&&e<r)){if(h=r+l/2,e<h?(this._dropIndex=t,i.before(this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(t+1,c),i.after(this.layoutManager.tabDropPlaceholder)),this._sided)return placeHolderTop=this.layoutManager.tabDropPlaceholder.offset().top,void this.layoutManager.dropTargetIndicator.highlightArea({x1:n,x2:n+i.innerHeight(),y1:placeHolderTop,y2:placeHolderTop+this.layoutManager.tabDropPlaceholder.width()});a=this.layoutManager.tabDropPlaceholder.offset().left,this.layoutManager.dropTargetIndicator.highlightArea({x1:a,x2:a+this.layoutManager.tabDropPlaceholder.width(),y1:n,y2:n+i.innerHeight()})}},_resetHeaderDropZone:function(){this.layoutManager.tabDropPlaceholder.remove()},_setupHeaderPosition:function(){var e=["right","left","bottom"].indexOf(this._header.show)>=0&&this._header.show;if(this.header.element.toggle(!!this._header.show),this._side=e,this._sided=["right","left"].indexOf(this._side)>=0,this.element.removeClass("lm_left lm_right lm_bottom"),this._side&&this.element.addClass("lm_"+this._side),this.element.find(".lm_header").length&&this.childElementContainer){var t=["right","bottom"].indexOf(this._side)>=0?"before":"after";this.header.element[t](this.childElementContainer),this.callDownwards("setSize")}},_highlightBodyDropZone:function(e){var t=this._contentAreaDimensions[e].highlightArea;this.layoutManager.dropTargetIndicator.highlightArea(t),this._dropSegment=e}}),a.utils.BubblingEvent=function(e,t){this.name=e,this.origin=t,this.isPropagationStopped=!1},a.utils.BubblingEvent.prototype.stopPropagation=function(){this.isPropagationStopped=!0},a.utils.ConfigMinifier=function(){if(this._keys=["settings","hasHeaders","constrainDragToContainer","selectionEnabled","dimensions","borderWidth","minItemHeight","minItemWidth","headerHeight","dragProxyWidth","dragProxyHeight","labels","close","maximise","minimise","popout","content","componentName","componentState","id","width","type","height","isClosable","title","popoutWholeStack","openPopouts","parentId","activeItemIndex","reorderEnabled","borderGrabWidth"],this._keys.length>36)throw Error("Too many keys in config minifier map");this._values=[!0,!1,"row","column","stack","component","close","maximise","minimise","open in new window"]},a.utils.copy(a.utils.ConfigMinifier.prototype,{minifyConfig:function(e){var t={};return this._nextLevel(e,t,"_min"),t},unminifyConfig:function(e){var t={};return this._nextLevel(e,t,"_max"),t},_nextLevel:function(e,t,i){var n,r;for(n in e)e instanceof Array&&(n=parseInt(n,10)),e.hasOwnProperty(n)&&(r=this[i](n,this._keys),"object"==typeof e[n]?(t[r]=e[n]instanceof Array?[]:{},this._nextLevel(e[n],t[r],i)):t[r]=this[i](e[n],this._values))},_min:function(e,t){if("string"==typeof e&&1===e.length)return"___"+e;var i=a.utils.indexOf(e,t);return-1===i?e:i.toString(36)},_max:function(e,t){return"string"==typeof e&&1===e.length?t[parseInt(e,36)]:"string"==typeof e&&"___"===e.substr(0,3)?e[3]:e}}),a.utils.EventHub=function(e){a.utils.EventEmitter.call(this),this._layoutManager=e,this._dontPropagateToParent=null,this._childEventSource=null,this.on(a.utils.EventEmitter.ALL_EVENT,a.utils.fnBind(this._onEventFromThis,this)),this._boundOnEventFromChild=a.utils.fnBind(this._onEventFromChild,this),o(window).on("gl_child_event",this._boundOnEventFromChild)},a.utils.EventHub.prototype._onEventFromThis=function(){var e=Array.prototype.slice.call(arguments);this._layoutManager.isSubWindow&&e[0]!==this._dontPropagateToParent&&this._propagateToParent(e),this._propagateToChildren(e),this._dontPropagateToParent=null,this._childEventSource=null},a.utils.EventHub.prototype._$onEventFromParent=function(e){this._dontPropagateToParent=e[0],this.emit.apply(this,e)},a.utils.EventHub.prototype._onEventFromChild=function(e){this._childEventSource=e.originalEvent.__gl,this.emit.apply(this,e.originalEvent.__glArgs)},a.utils.EventHub.prototype._propagateToParent=function(e){var t;document.createEvent?(t=window.opener.document.createEvent("HTMLEvents"),t.initEvent("gl_child_event",!0,!0)):(t=window.opener.document.createEventObject(),t.eventType="gl_child_event"),t.eventName="gl_child_event",t.__glArgs=e,t.__gl=this._layoutManager,document.createEvent?window.opener.dispatchEvent(t):window.opener.fireEvent("on"+t.eventType,t)},a.utils.EventHub.prototype._propagateToChildren=function(e){var t,i;for(i=0;i<this._layoutManager.openPopouts.length;i++)(t=this._layoutManager.openPopouts[i].getGlInstance())&&t!==this._childEventSource&&t.eventHub._$onEventFromParent(e)},a.utils.EventHub.prototype.destroy=function(){o(window).off("gl_child_event",this._boundOnEventFromChild)},a.utils.ReactComponentHandler=function(e,t){this._reactComponent=null,this._originalComponentWillUpdate=null,this._container=e,this._initialState=t,this._reactClass=this._getReactClass(),this._container.on("open",this._render,this),this._container.on("destroy",this._destroy,this)},a.utils.copy(a.utils.ReactComponentHandler.prototype,{_render:function(){this._reactComponent=ReactDOM.render(this._getReactComponent(),this._container.getElement()[0]),this._originalComponentWillUpdate=this._reactComponent.componentWillUpdate||function(){},this._reactComponent.componentWillUpdate=this._onUpdate.bind(this),this._container.getState()&&this._reactComponent.setState(this._container.getState())},_destroy:function(){ReactDOM.unmountComponentAtNode(this._container.getElement()[0]),this._container.off("open",this._render,this),this._container.off("destroy",this._destroy,this)},_onUpdate:function(e,t){this._container.setState(t),this._originalComponentWillUpdate.call(this._reactComponent,e,t)},_getReactClass:function(){var e,t=this._container._config.component;if(!t)throw Error("No react component name. type: react-component needs a field `component`");if(!(e=this._container.layoutManager.getComponent(t)))throw Error('React component "'+t+'" not found. Please register all components with GoldenLayout using `registerComponent(name, component)`');return e},_getReactComponent:function(){var e={glEventHub:this._container.layoutManager.eventHub,glContainer:this._container},t=o.extend(e,this._container._config.props);return React.createElement(this._reactClass,t)}})}(window.$)},function(e,t,i){"use strict";(function(t,n){t.fn.extend({disableSelection:function(){this.each(function(){this.onselectstart=function(){return!1},this.unselectable="on",t(this).css({"-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}),t(this).bind("mousedown",function(){return!1})})}}),e.exports=function(){window.buildMenuFunctions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null!=e?e:JSON.parse(localStorage.getItem("savedMenu"));if(window.runers=[],window.newItem=[],null!=t){var n=i(25)();t=Object.assign(t,n),t.forEach(function(e){if(null!==e.uri&&"#"!=e.uri){var t={title:'<i class="fa fa-'+e.icon+'"></i> '+e.title,type:"component",componentName:"page",componentState:{href:"link"==e.type?"/"+adminPrefix+"/"+e.uri:e.uri,header:'<i class="fa fa-'+e.icon+'"></i> '+e.title,type:e.type}};if(newItem[e.id]=t,"modal"==e.type)var n=i(8)("./"+e.type)(e);else var n=i(4)(e,t);runers[e.id]=n,runers[e.uri]=n,null!=e.hotkey&&webix.UIManager.addHotKey(e.hotkey,function(){return runers[e.id](),!1})}})}},window.run=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0==e.uri)return webix.alert("Enter a URI","alert-error");void 0==e.type&&(e.type="webix"),void 0==e.title&&(e.title="No title");var n={title:(void 0!=e.icon?'<i class="fa fa-'+e.icon+'"></i> ':"")+e.title,type:"component",componentName:"page",componentState:{href:"link"==e.type?"/"+adminPrefix+"/"+e.uri:e.uri,header:(void 0!=e.icon?'<i class="fa fa-'+e.icon+'"></i> ':"")+e.title,type:e.type,query:void 0!=e.query?e.query:[]}};return("modal"==e.type?i(8)("./"+e.type)(e):i(4)(e,n))(t)},window.menuFromTop=function(){var e=localStorage.getItem("menuFromTop");null!==e?window.menuFromTop=JSON.parse(e):webix.ajax().get(Route("remote.get",{name:"menu"}),{fromTop:!0},function(e){window.menuFromTop=JSON.parse(e),localStorage.setItem("menuFromTop",JSON.stringify(window.menuFromTop)),updateMenuData(),buildMenuFunctions()})},window.reloadTopMenu=function(){$$("menuContainer").clearAll(),$$("menuContainer").load(Route("remote.get",{name:"menu",fromTop:!0})),updateMenuData(),webix.ajax().get(Route("remote.get",{name:"menu"}),{fromTop:!0},function(e){window.menuFromTop=JSON.parse(e),localStorage.setItem("menuFromTop",JSON.stringify(window.menuFromTop)),buildMenuFunctions()})},menuFromTop(),window.updateMenuData=function(){webix.ajax().get(Route("remote.get",{name:"menu"}),{noTree:!0},function(e){window.menuItems=JSON.parse(e),localStorage.setItem("savedMenu",JSON.stringify(window.menuItems)),buildMenuFunctions(window.menuItems)})},buildMenuFunctions(),window.getMenu=function(e){var t=null;return n.each(window.menuItems,function(i,n){n.id==e&&(t=window.menuItems[i])}),t};var e=localStorage.getItem("savedMenu");null!==e?window.menuItems=JSON.parse(e):window.updateMenuData()}}).call(t,i(0),i(0))},function(e,t,i){"use strict";e.exports=function(){return[]}},function(e,t,i){function n(e){return i(r(e))}function r(e){var t=o[e];if(!(t+1))throw Error("Cannot find module '"+e+"'.");return t}var o={"./terminal.js":10};n.keys=function(){return Object.keys(o)},n.resolve=r,e.exports=n,n.id=26},function(e,t){e.exports=function(e){function t(e){"undefined"!=typeof console&&(console.error||console.log)("[Script Loader]",e)}try{"undefined"!=typeof execScript&&function(){return"undefined"!=typeof attachEvent&&"undefined"==typeof addEventListener}()?execScript(e):"undefined"!=typeof eval?eval.call(null,e):t("EvalError: No eval function available")}catch(e){t(e)}}},function(e,t){e.exports='!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t,n){var r;r=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\\/\\d/i.test(e),r=/MSIE \\d/.test(e),i=/Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(e),o=/Edge\\/(\\d+)/.exec(e),a=r||i||o,s=a&&(r?document.documentMode||6:+(o||i)[1]),l=!o&&/WebKit\\//.test(e),c=l&&/Qt\\/\\d+\\.\\d+/.test(e),u=!o&&/Chrome\\//.test(e),f=/Opera\\//.test(e),p=/Apple Computer/.test(navigator.vendor),d=/Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(e),h=/PhantomJS/.test(e),m=!o&&/AppleWebKit/.test(e)&&/Mobile\\/\\w+/.test(e),g=/Android/.test(e),v=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=m||/Mac/.test(t),b=/\\bCrOS\\b/.test(e),x=/win/i.test(t),w=f&&e.match(/Version\\/(\\d*\\.\\d*)/);w&&(w=Number(w[1])),w&&w>=15&&(f=!1,l=!0);var k=y&&(c||f&&(null==w||w<12.11)),_=n||a&&s>=9;function C(e){return new RegExp("(^|\\\\s)"+e+"(?:$|\\\\s)\\\\s*")}var S,T=function(e,t){var n=e.className,r=C(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function A(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function L(e,t){return A(e).appendChild(t)}function M(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function F(e,t,n,r){var i=M(e,t,n,r);return i.setAttribute("role","presentation"),i}function E(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function O(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function D(e,t){var n=e.className;C(t).test(n)||(e.className+=(n?" ":"")+t)}function N(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!C(n[r]).test(t)&&(t+=" "+n[r]);return t}S=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var P=function(e){e.select()};function R(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function j(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function I(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\\s\\u00a0]/))&&(t=e.length);for(var o=r||0,a=i||0;;){var s=e.indexOf("\\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}}m?P=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(P=function(e){try{e.select()}catch(e){}});var q=function(){this.id=null};function B(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}q.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var z=30,H={toString:function(){return"CodeMirror.Pass"}},W={scroll:!1},$={origin:"*mouse"},K={origin:"+move"};function U(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\\t",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=t)return r}}var V=[""];function G(e){for(;V.length<=e;)V.push(X(V)+" ");return V[e]}function X(e){return e[e.length-1]}function J(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Y(){}function Q(e,t){var n;return Object.create?n=Object.create(e):(Y.prototype=e,n=new Y),t&&j(t,n),n}var Z=/[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;function ee(e){return/\\w/.test(e)||e>"Â"&&(e.toUpperCase()!=e.toLowerCase()||Z.test(e))}function te(e,t){return t?!!(t.source.indexOf("\\\\w")>-1&&ee(e))||t.test(e):ee(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&re.test(e)}function oe(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function ae(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}function se(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function le(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function ce(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function ue(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function fe(e){if(null==e.parent)return null;for(var t=e.parent,n=B(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function pe(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var s=e.lines[a].height;if(t<s)break;t-=s}return n+a}function de(e,t){return t>=e.first&&t<e.first+e.size}function he(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function me(e,t,n){if(void 0===n&&(n=null),!(this instanceof me))return new me(e,t,n);this.line=e,this.ch=t,this.sticky=n}function ge(e,t){return e.line-t.line||e.ch-t.ch}function ve(e,t){return e.sticky==t.sticky&&0==ge(e,t)}function ye(e){return me(e.line,e.ch)}function be(e,t){return ge(e,t)<0?t:e}function xe(e,t){return ge(e,t)<0?e:t}function we(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ke(e,t){if(t.line<e.first)return me(e.first,0);var n=e.first+e.size-1;return t.line>n?me(n,se(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?me(e.line,t):n<0?me(e.line,0):e}(t,se(e,t.line).text.length)}function _e(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=ke(e,t[r]);return n}var Ce=!1,Se=!1;function Te(e,t,n){this.marker=e,this.from=t,this.to=n}function Ae(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Le(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Me(e,t){if(t.full)return null;var n=de(e,t.from.line)&&se(e,t.from.line).markedSpans,r=de(e,t.to.line)&&se(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==ge(t.from,t.to),s=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Te(a,o.from,s?null:o.to))}}return r}(n,i,a),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Te(a,s?null:o.from-t,null==o.to?null:o.to-t))}}return r}(r,o,a),c=1==t.text.length,u=X(t.text).length+(c?i:0);if(s)for(var f=0;f<s.length;++f){var p=s[f];if(null==p.to){var d=Ae(l,p.marker);d?c&&(p.to=null==d.to?null:d.to+u):p.to=i}}if(l)for(var h=0;h<l.length;++h){var m=l[h];if(null!=m.to&&(m.to+=u),null==m.from)Ae(s,m.marker)||(m.from=u,c&&(s||(s=[])).push(m));else m.from+=u,c&&(s||(s=[])).push(m)}s&&(s=Fe(s)),l&&l!=s&&(l=Fe(l));var g=[s];if(!c){var v,y=t.text.length-2;if(y>0&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(v||(v=[])).push(new Te(s[b].marker,null,null));for(var x=0;x<y;++x)g.push(v);g.push(l)}return g}function Fe(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ee(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Oe(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function De(e){return e.inclusiveLeft?-1:0}function Ne(e){return e.inclusiveRight?1:0}function Pe(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=ge(r.from,i.from)||De(e)-De(t);if(o)return-o;var a=ge(r.to,i.to)||Ne(e)-Ne(t);return a||t.id-e.id}function Re(e,t){var n,r=Se&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||Pe(n,i.marker)<0)&&(n=i.marker);return n}function je(e){return Re(e,!0)}function Ie(e){return Re(e,!1)}function qe(e,t,n,r,i){var o=se(e,t),a=Se&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var c=l.marker.find(0),u=ge(c.from,n)||De(l.marker)-De(i),f=ge(c.to,r)||Ne(l.marker)-Ne(i);if(!(u>=0&&f<=0||u<=0&&f>=0)&&(u<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ge(c.to,n)>=0:ge(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ge(c.from,r)<=0:ge(c.from,r)<0)))return!0}}}function Be(e){for(var t;t=je(e);)e=t.find(-1,!0).line;return e}function ze(e,t){var n=se(e,t),r=Be(n);return n==r?t:fe(r)}function He(e,t){if(t>e.lastLine())return t;var n,r=se(e,t);if(!We(e,r))return t;for(;n=Ie(r);)r=n.find(1,!0).line;return fe(r)+1}function We(e,t){var n=Se&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&$e(e,t,r))return!0}}function $e(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return $e(e,r.line,Ae(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&$e(e,t,i))return!0}function Ke(e){for(var t=0,n=(e=Be(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;t+=s.height}return t}function Ue(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=je(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=Ie(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function Ve(e){var t=e.display,n=e.doc;t.maxLine=se(n,n.first),t.maxLineLength=Ue(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=Ue(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}var Ge=null;function Xe(e,t,n){var r;Ge=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==n?r=i:Ge=i),o.from==t&&(o.from!=o.to&&"before"!=n?r=i:Ge=i)}return null!=r?r:Ge}var Je=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var n=/[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/,r=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,a=/[1n]/;function s(e,t,n){this.level=e,this.from=t,this.to=n}return function(l,c){var u="ltr"==c?"L":"R";if(0==l.length||"ltr"==c&&!n.test(l))return!1;for(var f,p=l.length,d=[],h=0;h<p;++h)d.push((f=l.charCodeAt(h))<=247?e.charAt(f):1424<=f&&f<=1524?"R":1536<=f&&f<=1785?t.charAt(f-1536):1774<=f&&f<=2220?"r":8192<=f&&f<=8203?"w":8204==f?"b":"L");for(var m=0,g=u;m<p;++m){var v=d[m];"m"==v?d[m]=g:g=v}for(var y=0,b=u;y<p;++y){var x=d[y];"1"==x&&"r"==b?d[y]="n":i.test(x)&&(b=x,"r"==x&&(d[y]="R"))}for(var w=1,k=d[0];w<p-1;++w){var _=d[w];"+"==_&&"1"==k&&"1"==d[w+1]?d[w]="1":","!=_||k!=d[w+1]||"1"!=k&&"n"!=k||(d[w]=k),k=_}for(var C=0;C<p;++C){var S=d[C];if(","==S)d[C]="N";else if("%"==S){var T=void 0;for(T=C+1;T<p&&"%"==d[T];++T);for(var A=C&&"!"==d[C-1]||T<p&&"1"==d[T]?"1":"N",L=C;L<T;++L)d[L]=A;C=T-1}}for(var M=0,F=u;M<p;++M){var E=d[M];"L"==F&&"1"==E?d[M]="L":i.test(E)&&(F=E)}for(var O=0;O<p;++O)if(r.test(d[O])){var D=void 0;for(D=O+1;D<p&&r.test(d[D]);++D);for(var N="L"==(O?d[O-1]:u),P=N==("L"==(D<p?d[D]:u))?N?"L":"R":u,R=O;R<D;++R)d[R]=P;O=D-1}for(var j,I=[],q=0;q<p;)if(o.test(d[q])){var B=q;for(++q;q<p&&o.test(d[q]);++q);I.push(new s(0,B,q))}else{var z=q,H=I.length;for(++q;q<p&&"L"!=d[q];++q);for(var W=z;W<q;)if(a.test(d[W])){z<W&&I.splice(H,0,new s(1,z,W));var $=W;for(++W;W<q&&a.test(d[W]);++W);I.splice(H,0,new s(2,$,W)),z=W}else++W;z<q&&I.splice(H,0,new s(1,z,q))}return"ltr"==c&&(1==I[0].level&&(j=l.match(/^\\s+/))&&(I[0].from=j[0].length,I.unshift(new s(0,0,j[0].length))),1==X(I).level&&(j=l.match(/\\s+$/))&&(X(I).to-=j[0].length,I.push(new s(0,p-j[0].length,p)))),"rtl"==c?I.reverse():I}}();function Ye(e,t){var n=e.order;return null==n&&(n=e.order=Je(e.text,t)),n}var Qe=[],Ze=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Qe).concat(n)}};function et(e,t){return e._handlers&&e._handlers[t]||Qe}function tt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=B(i,n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function nt(e,t){var n=et(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function rt(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),nt(e,n||t.type,e,t),ct(t)||t.codemirrorIgnore}function it(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==B(n,t[r])&&n.push(t[r])}function ot(e,t){return et(e,t).length>0}function at(e){e.prototype.on=function(e,t){Ze(this,e,t)},e.prototype.off=function(e,t){tt(this,e,t)}}function st(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function lt(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ct(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ut(e){st(e),lt(e)}function ft(e){return e.target||e.srcElement}function pt(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),y&&e.ctrlKey&&1==t&&(t=3),t}var dt,ht,mt=function(){if(a&&s<9)return!1;var e=M("div");return"draggable"in e||"dragDrop"in e}();function gt(e){if(null==dt){var t=M("span","â");L(e,M("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(dt=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&s<8))}var n=dt?M("span","â"):M("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function vt(e){if(null!=ht)return ht;var t=L(e,document.createTextNode("AØ®A")),n=S(t,0,1).getBoundingClientRect(),r=S(t,1,2).getBoundingClientRect();return A(e),!(!n||n.left==n.right)&&(ht=r.right-n.right<3)}var yt,bt=3!="\\n\\nb".split(/\\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\\r\\n?|\\n/)},xt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},wt="oncopy"in(yt=M("div"))||(yt.setAttribute("oncopy","return;"),"function"==typeof yt.oncopy),kt=null;var _t={},Ct={};function St(e){if("string"==typeof e&&Ct.hasOwnProperty(e))e=Ct[e];else if(e&&"string"==typeof e.name&&Ct.hasOwnProperty(e.name)){var t=Ct[e.name];"string"==typeof t&&(t={name:t}),(e=Q(t,e)).name=t.name}else{if("string"==typeof e&&/^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(e))return St("application/xml");if("string"==typeof e&&/^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(e))return St("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Tt(e,t){t=St(t);var n=_t[t.name];if(!n)return Tt(e,"text/plain");var r=n(e,t);if(At.hasOwnProperty(t.name)){var i=At[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)r[a]=t.modeProps[a];return r}var At={};function Lt(e,t){j(t,At.hasOwnProperty(e)?At[e]:At[e]={})}function Mt(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Ft(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Et(e,t,n){return!e.startState||e.startState(t,n)}var Ot=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};Ot.prototype.eol=function(){return this.pos>=this.string.length},Ot.prototype.sol=function(){return this.pos==this.lineStart},Ot.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ot.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ot.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ot.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ot.prototype.eatSpace=function(){for(var e=this.pos;/[\\s\\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ot.prototype.skipToEnd=function(){this.pos=this.string.length},Ot.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Ot.prototype.backUp=function(e){this.pos-=e},Ot.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=I(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?I(this.string,this.lineStart,this.tabSize):0)},Ot.prototype.indentation=function(){return I(this.string,null,this.tabSize)-(this.lineStart?I(this.string,this.lineStart,this.tabSize):0)},Ot.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},Ot.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ot.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ot.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ot.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Dt=function(e,t){this.state=e,this.lookAhead=t},Nt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function Pt(e,t,n,r){var i=[e.state.modeGen],o={};$t(e,t.text,e.doc.mode,n,function(e,t){return i.push(e,t)},o,r);for(var a=n.state,s=function(r){n.baseTokens=i;var s=e.state.overlays[r],l=1,c=0;n.state=!0,$t(e,t.text,s.mode,n,function(e,t){for(var n=l;c<e;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,c=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+t}},o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)s(l);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function Rt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=jt(e,fe(t)),i=t.text.length>e.options.maxHighlightLength&&Mt(e.doc.mode,r.state),o=Pt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function jt(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new Nt(r,!0,t);var o=function(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=se(o,s-1),c=l.stateAfter;if(c&&(!n||s+(c instanceof Dt?c.lookAhead:0)<=o.modeFrontier))return s;var u=I(l.text,null,e.options.tabSize);(null==i||r>u)&&(i=s-1,r=u)}return i}(e,t,n),a=o>r.first&&se(r,o-1).stateAfter,s=a?Nt.fromSaved(r,a,o):new Nt(r,Et(r.mode),o);return r.iter(o,t,function(n){It(e,n.text,s);var r=s.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?s.save():null,s.nextLine()}),n&&(r.modeFrontier=s.line),s}function It(e,t,n,r){var i=e.doc.mode,o=new Ot(t,e.options.tabSize,n);for(o.start=o.pos=r||0,""==t&&qt(i,n.state);!o.eol();)Bt(i,o,n.state),o.start=o.pos}function qt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ft(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Bt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Ft(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}Nt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Nt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Nt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Nt.fromSaved=function(e,t,n){return t instanceof Dt?new Nt(e,Mt(e.mode,t.state),n,t.lookAhead):new Nt(e,Mt(e.mode,t),n)},Nt.prototype.save=function(e){var t=!1!==e?Mt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Dt(t,this.maxLookAhead):t};var zt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Ht(e,t,n,r){var i,o,a=e.doc,s=a.mode,l=se(a,(t=ke(a,t)).line),c=jt(e,t.line,n),u=new Ot(l.text,e.options.tabSize,c);for(r&&(o=[]);(r||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=Bt(s,u,c.state),r&&o.push(new zt(u,i,Mt(a.mode,c.state)));return r?o:new zt(u,i,c.state)}function Wt(e,t){if(e)for(;;){var n=e.match(/(?:^|\\s+)line-(background-)?(\\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function $t(e,t,n,r,i,o,a){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,c=0,u=null,f=new Ot(t,e.options.tabSize,r),p=e.options.addModeClass&&[null];for(""==t&&Wt(qt(n,r.state),o);!f.eol();){if(f.pos>e.options.maxHighlightLength?(s=!1,a&&It(e,t,r,f.pos),f.pos=t.length,l=null):l=Wt(Bt(n,f,r.state,p),o),p){var d=p[0].name;d&&(l="m-"+(l?d+" "+l:d))}if(!s||u!=l){for(;c<f.start;)i(c=Math.min(f.start,c+5e3),u);u=l}f.start=f.pos}for(;c<f.pos;){var h=Math.min(f.pos,c+5e3);i(h,u),c=h}}var Kt=function(e,t,n){this.text=e,Oe(this,t),this.height=n?n(this):1};function Ut(e){e.parent=null,Ee(e)}Kt.prototype.lineNo=function(){return fe(this)},at(Kt);var Vt={},Gt={};function Xt(e,t){if(!e||/^\\s*$/.test(e))return null;var n=t.addModeClass?Gt:Vt;return n[e]||(n[e]=e.replace(/\\S+/g,"cm-$&"))}function Jt(e,t){var n=F("span",null,null,l?"padding-right: .1px":null),r={pre:F("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(a||l)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,s=void 0;r.pos=0,r.addToken=Qt,vt(e.display.measure)&&(s=Ye(o,e.doc.direction))&&(r.addToken=Zt(r.addToken,s)),r.map=[],tn(o,r,Rt(e,o,t!=e.display.externalMeasured&&fe(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=N(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=N(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(gt(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var c=r.content.lastChild;(/\\bcm-tab\\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return nt(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=N(r.pre.className,r.textClass||"")),r}function Yt(e){var t=M("span","â¢","cm-invalidchar");return t.title="\\\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qt(e,t,n,r,i,o,l){if(t){var c,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o="Â "),r+=o,n=" "==o}return r}(t,e.trailingSpace):t,f=e.cm.state.specialChars,p=!1;if(f.test(t)){c=document.createDocumentFragment();for(var d=0;;){f.lastIndex=d;var h=f.exec(t),m=h?h.index-d:t.length-d;if(m){var g=document.createTextNode(u.slice(d,d+m));a&&s<9?c.appendChild(M("span",[g])):c.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!h)break;d+=m+1;var v=void 0;if("\\t"==h[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(v=c.appendChild(M("span",G(b),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\\t"),e.col+=b}else"\\r"==h[0]||"\\n"==h[0]?((v=c.appendChild(M("span","\\r"==h[0]?"â":"â¤","cm-invalidchar"))).setAttribute("cm-text",h[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(h[0])).setAttribute("cm-text",h[0]),a&&s<9?c.appendChild(M("span",[v])):c.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),a&&s<9&&(p=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||r||i||p||l){var x=n||"";r&&(x+=r),i&&(x+=i);var w=M("span",[c],x,l);return o&&(w.title=o),e.content.appendChild(w)}e.content.appendChild(c)}}function Zt(e,t){return function(n,r,i,o,a,s,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var f=void 0,p=0;p<t.length&&!((f=t[p]).to>c&&f.from<=c);p++);if(f.to>=u)return e(n,r,i,o,a,s,l);e(n,r.slice(0,f.to-c),i,o,null,s,l),o=null,r=r.slice(f.to-c),c=f.to}}}function en(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function tn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,s,l,c,u,f,p,d=i.length,h=0,m=1,g="",v=0;;){if(v==h){l=c=u=f=s="",p=null,v=1/0;for(var y=[],b=void 0,x=0;x<r.length;++x){var w=r[x],k=w.marker;"bookmark"==k.type&&w.from==h&&k.widgetNode?y.push(k):w.from<=h&&(null==w.to||w.to>h||k.collapsed&&w.to==h&&w.from==h)?(null!=w.to&&w.to!=h&&v>w.to&&(v=w.to,c=""),k.className&&(l+=" "+k.className),k.css&&(s=(s?s+";":"")+k.css),k.startStyle&&w.from==h&&(u+=" "+k.startStyle),k.endStyle&&w.to==v&&(b||(b=[])).push(k.endStyle,w.to),k.title&&!f&&(f=k.title),k.collapsed&&(!p||Pe(p.marker,k)<0)&&(p=w)):w.from>h&&v>w.from&&(v=w.from)}if(b)for(var _=0;_<b.length;_+=2)b[_+1]==v&&(c+=" "+b[_]);if(!p||p.from==h)for(var C=0;C<y.length;++C)en(t,0,y[C]);if(p&&(p.from||0)==h){if(en(t,(null==p.to?d+1:p.to)-h,p.marker,null==p.from),null==p.to)return;p.to==h&&(p=!1)}}if(h>=d)break;for(var S=Math.min(d,v);;){if(g){var T=h+g.length;if(!p){var A=T>S?g.slice(0,S-h):g;t.addToken(t,A,a?a+l:l,u,h+A.length==v?c:"",f,s)}if(T>=S){g=g.slice(S-h),h=S;break}h=T,u=""}g=i.slice(o,o=n[m++]),a=Xt(n[m++],t.cm.options)}}else for(var L=1;L<n.length;L+=2)t.addToken(t,i.slice(o,o=n[L]),Xt(n[L+1],t.cm.options))}function nn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Ie(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?fe(X(this.rest))-n+1:1,this.node=this.text=null,this.hidden=We(e,t)}function rn(e,t,n){for(var r,i=[],o=t;o<n;o=r){var a=new nn(e.doc,se(e.doc,o),o);r=o+a.size,i.push(a)}return i}var on=null;var an=null;function sn(e,t){var n=et(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);on?r=on.delayedCallbacks:an?r=an:(r=an=[],setTimeout(ln,0));for(var o=function(e){r.push(function(){return n[e].apply(null,i)})},a=0;a<n.length;++a)o(a)}}function ln(){var e=an;an=null;for(var t=0;t<e.length;++t)e[t]()}function cn(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?pn(e,t):"gutter"==o?hn(e,t,n,r):"class"==o?dn(e,t):"widget"==o&&mn(e,t,r)}t.changes=null}function un(e){return e.node==e.text&&(e.node=M("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&s<8&&(e.node.style.zIndex=2)),e.node}function fn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Jt(e,t)}function pn(e,t){var n=t.text.className,r=fn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,dn(e,t)):n&&(t.text.className=n)}function dn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=un(t);t.background=r.insertBefore(M("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?un(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function hn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=un(t);t.gutterBackground=M("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=un(t),s=t.gutter=M("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),a.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(M("div",he(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.options.gutters.length;++l){var c=e.options.gutters[l],u=o.hasOwnProperty(c)&&o[c];u&&s.appendChild(M("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function mn(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);vn(e,t,n)}function gn(e,t,n,r){var i=fn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),dn(e,t),hn(e,t,n,r),vn(e,t,r),t.node}function vn(e,t,n){if(yn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)yn(e,t.rest[r],t,n,!1)}function yn(e,t,n,r,i){if(t.widgets)for(var o=un(n),a=0,s=t.widgets;a<s.length;++a){var l=s[a],c=M("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),bn(l,c,n,r),e.display.input.setUneditable(c),i&&l.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),sn(l,"redraw")}}function bn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function xn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!E(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),L(t.display.measure,M("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function wn(e,t){for(var n=ft(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function kn(e){return e.lineSpace.offsetTop}function _n(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Cn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=L(e.measure,M("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Sn(e){return z-e.display.nativeBarWidth}function Tn(e){return e.display.scroller.clientWidth-Sn(e)-e.display.barWidth}function An(e){return e.display.scroller.clientHeight-Sn(e)-e.display.barHeight}function Ln(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(fe(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Mn(e,t,n,r){return On(e,En(e,t),n,r)}function Fn(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[sr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function En(e,t){var n=fe(t),r=Fn(e,n);r&&!r.text?r=null:r&&r.changes&&(cn(e,r,n,nr(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=fe(t=Be(t)),r=e.display.externalMeasured=new nn(e.doc,t,n);r.lineN=n;var i=r.built=Jt(e,r);return r.text=i.pre,L(e.display.lineMeasure,i.pre),r}(e,t));var i=Ln(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function On(e,t,n,r,i){t.before&&(n=-1);var o,l=n+(r||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,n){var r=e.options.lineWrapping,i=r&&Tn(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],c=a[s+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,r){var i,o=Pn(t.map,n,r),l=o.node,c=o.start,u=o.end,f=o.collapse;if(3==l.nodeType){for(var p=0;p<4;p++){for(;c&&ie(t.line.text.charAt(o.coverStart+c));)--c;for(;o.coverStart+u<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+u));)++u;if((i=a&&s<9&&0==c&&u==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():Rn(S(l,c,u).getClientRects(),r)).left||i.right||0==c)break;u=c,c-=1,f="right"}a&&s<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=kt)return kt;var t=L(e,M("span","x")),n=t.getBoundingClientRect(),r=S(t,0,1).getBoundingClientRect();return kt=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var d;c>0&&(f=r="right"),i=e.options.lineWrapping&&(d=l.getClientRects()).length>1?d["right"==r?d.length-1:0]:l.getBoundingClientRect()}if(a&&s<9&&!c&&(!i||!i.left&&!i.right)){var h=l.parentNode.getClientRects()[0];i=h?{left:h.left,right:h.left+tr(e.display),top:h.top,bottom:h.bottom}:Nn}for(var m=i.top-t.rect.top,g=i.bottom-t.rect.top,v=(m+g)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(v<y[b]);b++);var x=b?y[b-1]:0,w=y[b],k={left:("right"==f?i.right:i.left)-t.rect.left,right:("left"==f?i.left:i.right)-t.rect.left,top:x,bottom:w};i.left||i.right||(k.bogus=!0);e.options.singleCursorHeightPerLine||(k.rtop=m,k.rbottom=g);return k}(e,t,n,r)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var Dn,Nn={left:0,right:0,top:0,bottom:0};function Pn(e,t,n){for(var r,i,o,a,s,l,c=0;c<e.length;c+=3)if(s=e[c],l=e[c+1],t<s?(i=0,o=1,a="left"):t<l?o=(i=t-s)+1:(c==e.length-3||t==l&&e[c+3]>t)&&(i=(o=l-s)-1,t>=l&&(a="right")),null!=i){if(r=e[c+2],s==l&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],a="left";if("right"==n&&i==l-s)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],a="right";break}return{node:r,start:i,end:o,collapse:a,coverStart:s,coverEnd:l}}function Rn(e,t){var n=Nn;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function jn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function In(e){e.display.externalMeasure=null,A(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)jn(e.display.view[t])}function qn(e){In(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Bn(){return u&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function zn(){return u&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Hn(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=xn(e.widgets[n]));return t}function Wn(e,t,n,r,i){if(!i){var o=Hn(t);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=Ke(t);if("local"==r?a+=kn(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:zn());var l=s.left+("window"==r?0:Bn());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function $n(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=Bn(),i-=zn();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function Kn(e,t,n,r,i){return r||(r=se(e.doc,t.line)),Wn(e,r,Mn(e,r,t.ch,i),n)}function Un(e,t,n,r,i,o){function a(t,a){var s=On(e,i,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,Wn(e,r,s,n)}r=r||se(e.doc,t.line),i||(i=En(e,r));var s=Ye(r,e.doc.direction),l=t.ch,c=t.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!s)return a("before"==c?l-1:l,"before"==c);function u(e,t,n){var r=1==s[t].level;return a(n?e-1:e,r!=n)}var f=Xe(s,l,c),p=Ge,d=u(l,f,"before"==c);return null!=p&&(d.other=u(l,p,"before"!=c)),d}function Vn(e,t){var n=0;t=ke(e.doc,t),e.options.lineWrapping||(n=tr(e.display)*t.ch);var r=se(e.doc,t.line),i=Ke(r)+kn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Gn(e,t,n,r,i){var o=me(e,t,n);return o.xRel=i,r&&(o.outside=!0),o}function Xn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Gn(r.first,0,null,!0,-1);var i=pe(r,n),o=r.first+r.size-1;if(i>o)return Gn(r.first+r.size-1,se(r,o).text.length,null,!0,1);t<0&&(t=0);for(var a=se(r,i);;){var s=Zn(e,a,i,t,n),l=Ie(a),c=l&&l.find(0,!0);if(!l||!(s.ch>c.from.ch||s.ch==c.from.ch&&s.xRel>0))return s;i=fe(a=c.to.line)}}function Jn(e,t,n,r){r-=Hn(t);var i=t.text.length,o=ae(function(t){return On(e,n,t-1).bottom<=r},i,0);return{begin:o,end:i=ae(function(t){return On(e,n,t).top>r},o,i)}}function Yn(e,t,n,r){return n||(n=En(e,t)),Jn(e,t,n,Wn(e,t,On(e,n,r),"line").top)}function Qn(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function Zn(e,t,n,r,i){i-=Ke(t);var o=En(e,t),a=Hn(t),s=0,l=t.text.length,c=!0,u=Ye(t,e.doc.direction);if(u){var f=(e.options.lineWrapping?function(e,t,n,r,i,o,a){var s=Jn(e,t,r,a),l=s.begin,c=s.end;/\\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,f=null,p=0;p<i.length;p++){var d=i[p];if(!(d.from>=c||d.to<=l)){var h=1!=d.level,m=On(e,r,h?Math.min(c,d.to)-1:Math.max(l,d.from)).right,g=m<o?o-m+1e9:m-o;(!u||f>g)&&(u=d,f=g)}}u||(u=i[i.length-1]);u.from<l&&(u={from:l,to:u.to,level:u.level});u.to>c&&(u={from:u.from,to:c,level:u.level});return u}:function(e,t,n,r,i,o,a){var s=ae(function(s){var l=i[s],c=1!=l.level;return Qn(Un(e,me(n,c?l.to:l.from,c?"before":"after"),"line",t,r),o,a,!0)},0,i.length-1),l=i[s];if(s>0){var c=1!=l.level,u=Un(e,me(n,c?l.from:l.to,c?"after":"before"),"line",t,r);Qn(u,o,a,!0)&&u.top>a&&(l=i[s-1])}return l})(e,t,n,o,u,r,i);s=(c=1!=f.level)?f.from:f.to-1,l=c?f.to:f.from-1}var p,d,h=null,m=null,g=ae(function(t){var n=On(e,o,t);return n.top+=a,n.bottom+=a,!!Qn(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(h=t,m=n),!0)},s,l),v=!1;if(m){var y=r-m.left<m.right-r,b=y==c;g=h+(b?0:1),d=b?"after":"before",p=y?m.left:m.right}else{c||g!=l&&g!=s||g++,d=0==g?"after":g==t.text.length?"before":On(e,o,g-(c?1:0)).bottom+a<=i==c?"after":"before";var x=Un(e,me(n,g,d),"line",t,o);p=x.left,v=i<x.top||i>=x.bottom}return Gn(n,g=oe(t.text,g,1),d,v,r-p)}function er(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Dn){Dn=M("pre");for(var t=0;t<49;++t)Dn.appendChild(document.createTextNode("x")),Dn.appendChild(M("br"));Dn.appendChild(document.createTextNode("x"))}L(e.measure,Dn);var n=Dn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),A(e.measure),n||1}function tr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=M("span","xxxxxxxxxx"),n=M("pre",[t]);L(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function nr(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)n[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,r[e.options.gutters[a]]=o.clientWidth;return{fixedPos:rr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function rr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ir(e){var t=er(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/tr(e.display)-3);return function(i){if(We(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function or(e){var t=e.doc,n=ir(e);t.iter(function(e){var t=n(e);t!=e.height&&ue(e,t)})}function ar(e,t,n,r){var i=e.display;if(!n&&"true"==ft(t).getAttribute("cm-not-content"))return null;var o,a,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,a=t.clientY-s.top}catch(t){return null}var l,c=Xn(e,o,a);if(r&&1==c.xRel&&(l=se(e.doc,c.line).text).length==c.ch){var u=I(l,l.length,e.options.tabSize)-l.length;c=me(c.line,Math.max(0,Math.round((o-Cn(e.display).left)/tr(e.display))-u))}return c}function sr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function lr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function cr(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var s=n.sel.ranges[a];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var l=s.empty();(l||e.options.showCursorWhenSelecting)&&ur(e,s.head,i),l||pr(e,s,o)}}return r}function ur(e,t,n){var r=Un(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(M("div","Â ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(M("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function fr(e,t){return e.top-t.top||e.left-t.left}function pr(e,t,n){var r=e.display,i=e.doc,o=document.createDocumentFragment(),a=Cn(e.display),s=a.left,l=Math.max(r.sizerWidth,Tn(e)-r.sizer.offsetLeft)-a.right,c="ltr"==i.direction;function u(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),o.appendChild(M("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\\n                             height: "+(r-t)+"px"))}function f(t,n,r){var o,a,f=se(i,t),p=f.text.length;function d(n,r){return Kn(e,me(t,n),"div",f,r)}function h(t,n,r){var i=Yn(e,f,null,t),o="ltr"==n==("after"==r)?"left":"right";return d("after"==r?i.begin:i.end-(/\\s/.test(f.text.charAt(i.end-1))?2:1),o)[o]}var m=Ye(f,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}(m,n||0,null==r?p:r,function(e,t,i,f){var g="ltr"==i,v=d(e,g?"left":"right"),y=d(t-1,g?"right":"left"),b=null==n&&0==e,x=null==r&&t==p,w=0==f,k=!m||f==m.length-1;if(y.top-v.top<=3){var _=(c?x:b)&&k,C=(c?b:x)&&w?s:(g?v:y).left,S=_?l:(g?y:v).right;u(C,v.top,S-C,v.bottom)}else{var T,A,L,M;g?(T=c&&b&&w?s:v.left,A=c?l:h(e,i,"before"),L=c?s:h(t,i,"after"),M=c&&x&&k?l:y.right):(T=c?h(e,i,"before"):s,A=!c&&b&&w?l:v.right,L=!c&&x&&k?s:y.left,M=c?h(t,i,"after"):l),u(T,v.top,A-T,v.bottom),v.bottom<y.top&&u(s,v.bottom,null,y.top),u(L,y.top,M-L,y.bottom)}(!o||fr(v,o)<0)&&(o=v),fr(y,o)<0&&(o=y),(!a||fr(v,a)<0)&&(a=v),fr(y,a)<0&&(a=y)}),{start:o,end:a}}var p=t.from(),d=t.to();if(p.line==d.line)f(p.line,p.ch,d.ch);else{var h=se(i,p.line),m=se(i,d.line),g=Be(h)==Be(m),v=f(p.line,p.ch,g?h.text.length+1:null).end,y=f(d.line,g?0:null,d.ch).start;g&&(v.top<y.top-2?(u(v.right,v.top,null,v.bottom),u(s,y.top,y.left,y.bottom)):u(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&u(s,v.bottom,null,y.top)}n.appendChild(o)}function dr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function hr(e){e.state.focused||(e.display.input.focus(),gr(e))}function mr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,vr(e))},100)}function gr(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(nt(e,"focus",e,t),e.state.focused=!0,D(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),dr(e))}function vr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(nt(e,"blur",e,t),e.state.focused=!1,T(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function yr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],o=void 0;if(!i.hidden){if(a&&s<8){var l=i.node.offsetTop+i.node.offsetHeight;o=l-n,n=l}else{var c=i.node.getBoundingClientRect();o=c.bottom-c.top}var u=i.line.height-o;if(o<2&&(o=er(t)),(u>.005||u<-.005)&&(ue(i.line,o),br(i.line),i.rest))for(var f=0;f<i.rest.length;f++)br(i.rest[f])}}}function br(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function xr(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-kn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=pe(t,r),a=pe(t,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<o?(o=s,a=pe(t,Ke(se(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(o=pe(t,Ke(se(t,l))-e.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function wr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=rr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function kr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=he(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(M("div",[M("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",si(e),!0}return!1}function _r(e,t){var n=e.display,r=er(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=An(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+_n(n),l=t.top<r,c=t.bottom>s-r;if(t.top<i)a.scrollTop=l?0:t.top;else if(t.bottom>i+o){var u=Math.min(t.top,(c?s:t.bottom)-o);u!=i&&(a.scrollTop=u)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,p=Tn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),d=t.right-t.left>p;return d&&(t.right=t.left+p),t.left<10?a.scrollLeft=0:t.left<f?a.scrollLeft=Math.max(0,t.left-(d?0:10)):t.right>p+f-3&&(a.scrollLeft=t.right+(d?0:10)-p),a}function Cr(e,t){null!=t&&(Ar(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Sr(e){Ar(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Tr(e,t,n){null==t&&null==n||Ar(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Ar(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Lr(e,Vn(e,t.from),Vn(e,t.to),t.margin))}function Lr(e,t,n,r){var i=_r(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Tr(e,i.scrollLeft,i.scrollTop)}function Mr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||ai(e,{top:t}),Fr(e,t,!0),n&&ai(e),ti(e,100))}function Fr(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Er(e,t,n,r){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,wr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Or(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+_n(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Sn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Dr=function(e,t,n){this.cm=n;var r=this.vert=M("div",[M("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=M("div",[M("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(r),e(i),Ze(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),Ze(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,a&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Dr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Dr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Dr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Dr.prototype.zeroWidthHack=function(){var e=y&&!d?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new q,this.disableVert=new q},Dr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)})},Dr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Nr=function(){};function Pr(e,t){t||(t=Or(e));var n=e.display.barWidth,r=e.display.barHeight;Rr(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&yr(e),Rr(e,Or(e)),n=e.display.barWidth,r=e.display.barHeight}function Rr(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Nr.prototype.update=function(){return{bottom:0,right:0}},Nr.prototype.setScrollLeft=function(){},Nr.prototype.setScrollTop=function(){},Nr.prototype.clear=function(){};var jr={native:Dr,null:Nr};function Ir(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&T(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new jr[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Ze(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Er(e,t):Mr(e,t)},e),e.display.scrollbars.addClass&&D(e.display.wrapper,e.display.scrollbars.addClass)}var qr=0;function Br(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++qr},t=e.curOp,on?on.ops.push(t):t.ownsGroup=on={ops:[t],delayedCallbacks:[]}}function zr(e){!function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{on=null,t(n)}}(e.curOp,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Hr(t[n]);for(var r=0;r<t.length;r++)(i=t[r]).updatedDisplay=i.mustUpdate&&ii(i.cm,i.update);var i;for(var o=0;o<t.length;o++)Wr(t[o]);for(var a=0;a<t.length;a++)$r(t[a]);for(var s=0;s<t.length;s++)Kr(t[s])}(e)})}function Hr(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Sn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Sn(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Ve(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new ri(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Wr(e){var t=e.cm,n=t.display;e.updatedDisplay&&yr(t),e.barMeasure=Or(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Mn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Sn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Tn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function $r(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Er(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==O();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Pr(t,e.barMeasure),e.updatedDisplay&&li(t,e.barMeasure),e.selectionChanged&&dr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&hr(e.cm)}function Kr(e){var t=e.cm,n=t.display,r=t.doc;(e.updatedDisplay&&oi(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Fr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Er(t,e.scrollLeft,!0,!0),e.scrollToPos)&&function(e,t){if(!rt(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!h){var o=M("div","â",null,"position: absolute;\\n                         top: "+(t.top-n.viewOffset-kn(e.display))+"px;\\n                         height: "+(t.bottom-t.top+Sn(e)+n.barHeight)+"px;\\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?me(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?me(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var a=!1,s=Un(e,t),l=n&&n!=t?Un(e,n):s,c=_r(e,i={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-r,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+r}),u=e.doc.scrollTop,f=e.doc.scrollLeft;if(null!=c.scrollTop&&(Mr(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(a=!0)),null!=c.scrollLeft&&(Er(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(a=!0)),!a)break}return i}(t,ke(r,e.scrollToPos.from),ke(r,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||nt(i[a],"hide");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&nt(o[s],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&nt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Ur(e,t){if(e.curOp)return t();Br(e);try{return t()}finally{zr(e)}}function Vr(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Br(e);try{return t.apply(e,arguments)}finally{zr(e)}}}function Gr(e){return function(){if(this.curOp)return e.apply(this,arguments);Br(this);try{return e.apply(this,arguments)}finally{zr(this)}}}function Xr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Br(t);try{return e.apply(this,arguments)}finally{zr(t)}}}function Jr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Se&&ze(e.doc,t)<i.viewTo&&Qr(e);else if(n<=i.viewFrom)Se&&He(e.doc,n+r)>i.viewFrom?Qr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Qr(e);else if(t<=i.viewFrom){var o=Zr(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):Qr(e)}else if(n>=i.viewTo){var a=Zr(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):Qr(e)}else{var s=Zr(e,t,t,-1),l=Zr(e,n,n+r,1);s&&l?(i.view=i.view.slice(0,s.index).concat(rn(e,s.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):Qr(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function Yr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[sr(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==B(a,n)&&a.push(n)}}}function Qr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Zr(e,t,n,r){var i,o=sr(e,t),a=e.display.view;if(!Se||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=e.display.viewFrom,l=0;l<o;l++)s+=a[l].size;if(s!=t){if(r>0){if(o==a.length-1)return null;i=s+a[o].size-t,o++}else i=s-t;t+=i,n+=i}for(;ze(e.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function ei(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function ti(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,R(ni,e))}function ni(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=jt(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(r.line>=e.display.viewFrom){var a=o.styles,s=o.text.length>e.options.maxHighlightLength?Mt(t.mode,r.state):null,l=Pt(e,o,r,!0);s&&(r.state=s),o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var f=!a||a.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),p=0;!f&&p<a.length;++p)f=a[p]!=o.styles[p];f&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=e.options.maxHighlightLength&&It(e,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ti(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Ur(e,function(){for(var t=0;t<i.length;t++)Yr(e,i[t],"text")})}}var ri=function(e,t,n){var r=e.display;this.viewport=t,this.visible=xr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Tn(e),this.force=n,this.dims=nr(e),this.events=[]};function ii(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Qr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==ei(e))return!1;kr(e)&&(Qr(e),t.dims=nr(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),Se&&(o=ze(e.doc,o),a=He(e.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=rn(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=rn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(sr(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(rn(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,sr(e,n)))),r.viewTo=n}(e,o,a),n.viewOffset=Ke(se(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var c=ei(e);if(!s&&0==c&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=function(e){if(e.hasFocus())return null;var t=O();if(!t||!E(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&E(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return c>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,a=o.firstChild;function s(t){var n=t.nextSibling;return l&&y&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=r.view,u=r.viewFrom,f=0;f<c.length;f++){var p=c[f];if(p.hidden);else if(p.node&&p.node.parentNode==o){for(;a!=p.node;)a=s(a);var d=i&&null!=t&&t<=u&&p.lineNumber;p.changes&&(B(p.changes,"gutter")>-1&&(d=!1),cn(e,p,u,n)),d&&(A(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(he(e.options,u)))),a=p.node.nextSibling}else{var h=gn(e,p,u,n);o.insertBefore(h,a)}u+=p.size}for(;a;)a=s(a)}(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=O()&&(e.activeElt.focus(),e.anchorNode&&E(document.body,e.anchorNode)&&E(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(u),A(n.cursorDiv),A(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ti(e,400)),n.updateLineNumbers=null,!0}function oi(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Tn(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+_n(e.display)-An(e),n.top)}),t.visible=xr(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&ii(e,t);r=!1){yr(e);var i=Or(e);lr(e),Pr(e,i),li(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ai(e,t){var n=new ri(e,t);if(ii(e,n)){yr(e),oi(e,n);var r=Or(e);lr(e),Pr(e,r),li(e,r),n.finish()}}function si(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function li(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Sn(e)+"px"}function ci(e){var t=e.display.gutters,n=e.options.gutters;A(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(M("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",si(e)}function ui(e){var t=B(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}ri.prototype.signal=function(e,t){ot(e,t)&&this.events.push(arguments)},ri.prototype.finish=function(){for(var e=0;e<this.events.length;e++)nt.apply(null,this.events[e])};var fi=0,pi=null;function di(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function hi(e){var t=di(e);return t.x*=pi,t.y*=pi,t}function mi(e,t){var r=di(t),i=r.x,o=r.y,a=e.display,s=a.scroller,c=s.scrollWidth>s.clientWidth,u=s.scrollHeight>s.clientHeight;if(i&&c||o&&u){if(o&&y&&l)e:for(var p=t.target,d=a.view;p!=s;p=p.parentNode)for(var h=0;h<d.length;h++)if(d[h].node==p){e.display.currentWheelTarget=p;break e}if(i&&!n&&!f&&null!=pi)return o&&u&&Mr(e,Math.max(0,s.scrollTop+o*pi)),Er(e,Math.max(0,s.scrollLeft+i*pi)),(!o||o&&u)&&st(t),void(a.wheelStartX=null);if(o&&null!=pi){var m=o*pi,g=e.doc.scrollTop,v=g+a.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):v=Math.min(e.doc.height,v+m+50),ai(e,{top:g,bottom:v})}fi<20&&(null==a.wheelStartX?(a.wheelStartX=s.scrollLeft,a.wheelStartY=s.scrollTop,a.wheelDX=i,a.wheelDY=o,setTimeout(function(){if(null!=a.wheelStartX){var e=s.scrollLeft-a.wheelStartX,t=s.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(pi=(pi*fi+n)/(fi+1),++fi)}},200)):(a.wheelDX+=i,a.wheelDY+=o))}}a?pi=-.53:n?pi=15:u?pi=-.7:p&&(pi=-1/3);var gi=function(e,t){this.ranges=e,this.primIndex=t};gi.prototype.primary=function(){return this.ranges[this.primIndex]},gi.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!ve(n.anchor,r.anchor)||!ve(n.head,r.head))return!1}return!0},gi.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new vi(ye(this.ranges[t].anchor),ye(this.ranges[t].head));return new gi(e,this.primIndex)},gi.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},gi.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ge(t,r.from())>=0&&ge(e,r.to())<=0)return n}return-1};var vi=function(e,t){this.anchor=e,this.head=t};function yi(e,t){var n=e[t];e.sort(function(e,t){return ge(e.from(),t.from())}),t=B(e,n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(ge(o.to(),i.from())>=0){var a=xe(o.from(),i.from()),s=be(o.to(),i.to()),l=o.empty()?i.from()==i.head:o.from()==o.head;r<=t&&--t,e.splice(--r,2,new vi(l?s:a,l?a:s))}}return new gi(e,t)}function bi(e,t){return new gi([new vi(e,t||e)],0)}function xi(e){return e.text?me(e.from.line+e.text.length-1,X(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function wi(e,t){if(ge(e,t.from)<0)return e;if(ge(e,t.to)<=0)return xi(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=xi(t).ch-t.to.ch),me(n,r)}function ki(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new vi(wi(i.anchor,t),wi(i.head,t)))}return yi(n,e.sel.primIndex)}function _i(e,t,n){return e.line==t.line?me(n.line,e.ch-t.ch+n.ch):me(n.line+(e.line-t.line),e.ch)}function Ci(e){e.doc.mode=Tt(e.options,e.doc.modeOption),Si(e)}function Si(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ti(e,100),e.state.modeGen++,e.curOp&&Jr(e)}function Ti(e,t){return 0==t.from.ch&&0==t.to.ch&&""==X(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ai(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){!function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ee(e),Oe(e,n);var i=r?r(e):1;i!=e.height&&ue(e,i)}(e,n,i,r),sn(e,"change",e,t)}function a(e,t){for(var n=[],o=e;o<t;++o)n.push(new Kt(c[o],i(o),r));return n}var s=t.from,l=t.to,c=t.text,u=se(e,s.line),f=se(e,l.line),p=X(c),d=i(c.length-1),h=l.line-s.line;if(t.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(Ti(e,t)){var m=a(0,c.length-1);o(f,f.text,d),h&&e.remove(s.line,h),m.length&&e.insert(s.line,m)}else if(u==f)if(1==c.length)o(u,u.text.slice(0,s.ch)+p+u.text.slice(l.ch),d);else{var g=a(1,c.length-1);g.push(new Kt(p+u.text.slice(l.ch),d,r)),o(u,u.text.slice(0,s.ch)+c[0],i(0)),e.insert(s.line+1,g)}else if(1==c.length)o(u,u.text.slice(0,s.ch)+c[0]+f.text.slice(l.ch),i(0)),e.remove(s.line+1,h);else{o(u,u.text.slice(0,s.ch)+c[0],i(0)),o(f,p+f.text.slice(l.ch),d);var v=a(1,c.length-1);h>1&&e.remove(s.line+1,h-1),e.insert(s.line+1,v)}sn(e,"change",e,t)}function Li(e,t,n){!function e(r,i,o){if(r.linked)for(var a=0;a<r.linked.length;++a){var s=r.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;n&&!l||(t(s.doc,l),e(s.doc,r,l))}}}(e,null,!0)}function Mi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,or(e),Ci(e),Fi(e),e.options.lineWrapping||Ve(e),e.options.mode=t.modeOption,Jr(e)}function Fi(e){("rtl"==e.doc.direction?D:T)(e.display.lineDiv,"CodeMirror-rtl")}function Ei(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Oi(e,t){var n={from:ye(t.from),to:xi(t),text:le(e,t.from,t.to)};return ji(e,n,t.from.line,t.to.line+1),Li(e,function(e){return ji(e,n,t.from.line,t.to.line+1)},!0),n}function Di(e){for(;e.length;){if(!X(e).ranges)break;e.pop()}}function Ni(e,t,n,r){var i=e.history;i.undone.length=0;var o,a,s=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>s-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Di(e.done),X(e.done)):e.done.length&&!X(e.done).ranges?X(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),X(e.done)):void 0}(i,i.lastOp==r)))a=X(o.changes),0==ge(t.from,t.to)&&0==ge(t.from,a.to)?a.to=xi(t):o.changes.push(Oi(e,t));else{var l=X(i.done);for(l&&l.ranges||Ri(e.sel,i.done),o={changes:[Oi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,a||nt(e,"historyAdded")}function Pi(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,X(i.done),t))?i.done[i.done.length-1]=t:Ri(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Di(i.undone)}function Ri(e,t){var n=X(t);n&&n.ranges&&n.equals(e)||t.push(e)}function ji(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function Ii(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function qi(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Ii(n[i]));return r}(e,t),r=Me(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else a&&(n[i]=a)}return n}function Bi(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?gi.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];r.push({changes:s});for(var l=0;l<a.length;++l){var c=a[l],u=void 0;if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var f in c)(u=f.match(/^spans_(\\d+)$/))&&B(t,Number(u[1]))>-1&&(X(s)[f]=c[f],delete c[f])}}}return r}function zi(e,t,n,r){if(r){var i=e.anchor;if(n){var o=ge(t,i)<0;o!=ge(n,i)<0?(i=t,t=n):o!=ge(t,n)<0&&(t=n)}return new vi(i,t)}return new vi(n||t,t)}function Hi(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Vi(e,new gi([zi(e.sel.primary(),t,n,i)],0),r)}function Wi(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=zi(e.sel.ranges[o],t[o],null,i);Vi(e,yi(r,e.sel.primIndex),n)}function $i(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Vi(e,yi(i,e.sel.primIndex),r)}function Ki(e,t,n,r){Vi(e,bi(t,n),r)}function Ui(e,t,n){var r=e.history.done,i=X(r);i&&i.ranges?(r[r.length-1]=t,Gi(e,t,n)):Vi(e,t,n)}function Vi(e,t,n){Gi(e,t,n),Pi(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Gi(e,t,n){(ot(e,"beforeSelectionChange")||e.cm&&ot(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new vi(ke(e,t[n].anchor),ke(e,t[n].head))},origin:n&&n.origin};return nt(e,"beforeSelectionChange",e,r),e.cm&&nt(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?yi(r.ranges,r.ranges.length-1):t}(e,t,n)),Xi(e,Yi(e,t,n&&n.bias||(ge(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!e.cm||Sr(e.cm)}function Xi(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,it(e.cm)),sn(e,"cursorActivity",e))}function Ji(e){Xi(e,Yi(e,e.sel,null,!1))}function Yi(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=Zi(e,a.anchor,s&&s.anchor,n,r),c=Zi(e,a.head,s&&s.head,n,r);(i||l!=a.anchor||c!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new vi(l,c))}return i?yi(i,t.primIndex):t}function Qi(e,t,n,r,i){var o=se(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker;if((null==s.from||(l.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(l.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(i&&(nt(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var c=l.find(r<0?1:-1),u=void 0;if((r<0?l.inclusiveRight:l.inclusiveLeft)&&(c=eo(e,c,-r,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(u=ge(c,n))&&(r<0?u<0:u>0))return Qi(e,c,t,r,i)}var f=l.find(r<0?-1:1);return(r<0?l.inclusiveLeft:l.inclusiveRight)&&(f=eo(e,f,r,f.line==t.line?o:null)),f?Qi(e,f,t,r,i):null}}return t}function Zi(e,t,n,r,i){var o=r||1,a=Qi(e,t,n,o,i)||!i&&Qi(e,t,n,o,!0)||Qi(e,t,n,-o,i)||!i&&Qi(e,t,n,-o,!0);return a||(e.cantEdit=!0,me(e.first,0))}function eo(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?ke(e,me(t.line-1)):null:n>0&&t.ch==(r||se(e,t.line)).text.length?t.line<e.first+e.size-1?me(t.line+1,0):null:new me(t.line,t.ch+n)}function to(e){e.setSelection(me(e.firstLine(),0),me(e.lastLine()),W)}function no(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,o){t&&(r.from=ke(e,t)),n&&(r.to=ke(e,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),nt(e,"beforeChange",e,r),e.cm&&nt(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function ro(e,t,n){if(e.cm){if(!e.cm.curOp)return Vr(e.cm,ro)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ot(e,"beforeChange")||e.cm&&ot(e.cm,"beforeChange"))||(t=no(e,t,!0))){var r=Ce&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=B(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),l=0;l<i.length;++l){var c=i[l];if(!(ge(c.to,s.from)<0||ge(c.from,s.to)>0)){var u=[l,1],f=ge(c.from,s.from),p=ge(c.to,s.to);(f<0||!a.inclusiveLeft&&!f)&&u.push({from:c.from,to:s.from}),(p>0||!a.inclusiveRight&&!p)&&u.push({from:s.to,to:c.to}),i.splice.apply(i,u),l+=u.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)io(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else io(e,t)}}function io(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ge(t.from,t.to)){var n=ki(e,t);Ni(e,t,n,e.cm?e.cm.curOp.id:NaN),so(e,t,n,Me(e,t));var r=[];Li(e,function(e,n){n||-1!=B(r,e.history)||(fo(e.history,t),r.push(e.history)),so(e,t,null,Me(e,t))})}}function oo(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var i,o=e.history,a=e.sel,s="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,c=0;c<s.length&&(i=s[c],n?!i.ranges||i.equals(e.sel):i.ranges);c++);if(c!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=s.pop()).ranges){if(r)return void s.push(i);break}if(Ri(i,l),n&&!i.equals(e.sel))return void Vi(e,i,{clearRedo:!1});a=i}var u=[];Ri(a,l),l.push({changes:u,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var f=ot(e,"beforeChange")||e.cm&&ot(e.cm,"beforeChange"),p=function(n){var r=i.changes[n];if(r.origin=t,f&&!no(e,r,!1))return s.length=0,{};u.push(Oi(e,r));var o=n?ki(e,r):X(s);so(e,r,o,qi(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:xi(r)});var a=[];Li(e,function(e,t){t||-1!=B(a,e.history)||(fo(e.history,r),a.push(e.history)),so(e,r,null,qi(e,r))})},d=i.changes.length-1;d>=0;--d){var h=p(d);if(h)return h.v}}}}function ao(e,t){if(0!=t&&(e.first+=t,e.sel=new gi(J(e.sel.ranges,function(e){return new vi(me(e.anchor.line+t,e.anchor.ch),me(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Jr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Yr(e.cm,r,"gutter")}}function so(e,t,n,r){if(e.cm&&!e.cm.curOp)return Vr(e.cm,so)(e,t,n,r);if(t.to.line<e.first)ao(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);ao(e,i),t={from:me(e.first,0),to:me(t.to.line+i,t.to.ch),text:[X(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:me(o,se(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=le(e,t.from,t.to),n||(n=ki(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,o=t.from,a=t.to,s=!1,l=o.line;e.options.lineWrapping||(l=fe(Be(se(r,o.line))),r.iter(l,a.line+1,function(e){if(e==i.maxLine)return s=!0,!0}));r.sel.contains(t.from,t.to)>-1&&it(e);Ai(r,t,n,ir(e)),e.options.lineWrapping||(r.iter(l,o.line+t.text.length,function(e){var t=Ue(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0));(function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=se(e,r).stateAfter;if(i&&(!(i instanceof Dt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}})(r,o.line),ti(e,400);var c=t.text.length-(a.line-o.line)-1;t.full?Jr(e):o.line!=a.line||1!=t.text.length||Ti(e.doc,t)?Jr(e,o.line,a.line+1,c):Yr(e,o.line,"text");var u=ot(e,"changes"),f=ot(e,"change");if(f||u){var p={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};f&&sn(e,"change",e,p),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}(e.cm,t,r):Ai(e,t,r),Gi(e,n,W)}}function lo(e,t,n,r,i){var o;(r||(r=n),ge(r,n)<0)&&(n=(o=[r,n])[0],r=o[1]);"string"==typeof t&&(t=e.splitLines(t)),ro(e,{from:n,to:r,text:t,origin:i})}function co(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function uo(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)co(o.ranges[s].anchor,t,n,r),co(o.ranges[s].head,t,n,r)}else{for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(n<c.from.line)c.from=me(c.from.line+r,c.from.ch),c.to=me(c.to.line+r,c.to.ch);else if(t<=c.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function fo(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;uo(e.done,n,r,i),uo(e.undone,n,r,i)}function po(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=se(e,we(e,t)):i=fe(t),null==i?null:(r(o,i)&&e.cm&&Yr(e.cm,i,n),o)}function ho(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function mo(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}vi.prototype.from=function(){return xe(this.anchor,this.head)},vi.prototype.to=function(){return be(this.anchor,this.head)},vi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ho.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Ut(i),sn(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},mo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof ho))){var s=[];this.collapse(s),this.children=[new ho(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,s=a;s<i.lines.length;){var l=new ho(i.lines.slice(s,s+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new mo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=B(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new mo(e.children);r.parent=e,e.children=[r,t],e=r}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var go=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function vo(e,t,n){Ke(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Cr(e,n)}go.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=fe(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=xn(this);ue(n,Math.max(0,n.height-o)),e&&(Ur(e,function(){vo(e,n,-o),Yr(e,r,"widget")}),sn(e,"lineWidgetCleared",e,this,r))}},go.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=xn(this)-t;i&&(ue(r,r.height+i),n&&Ur(n,function(){n.curOp.forceUpdate=!0,vo(n,r,i),sn(n,"lineWidgetChanged",n,e,fe(r))}))},at(go);var yo=0,bo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++yo};function xo(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=j(r)).shared=!1;var o=[xo(e,t,n,r,i)],a=o[0],s=r.widgetNode;return Li(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),o.push(xo(e,ke(e,t),ke(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=X(o)}),new wo(o,a)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Vr(e.cm,xo)(e,t,n,r,i);var o=new bo(e,i),a=ge(t,n);if(r&&j(r,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=F("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(qe(e,t.line,t,n,o)||t.line!=n.line&&qe(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Se=!0}o.addToHistory&&Ni(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&Be(e)==c.display.maxLine&&(s=!0),o.collapsed&&l!=t.line&&ue(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Te(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&e.iter(t.line,n.line+1,function(t){We(e,t)&&ue(t,0)}),o.clearOnEnter&&Ze(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(Ce=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++yo,o.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),o.collapsed)Jr(c,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=t.line;u<=n.line;u++)Yr(c,u,"text");o.atomic&&Ji(c.doc),sn(c,"markerAdded",c,o)}return o}bo.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Br(e),ot(this,"clear")){var n=this.find();n&&sn(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Ae(a.markedSpans,this);e&&!this.collapsed?Yr(e,fe(a),"text"):e&&(null!=s.to&&(i=fe(a)),null!=s.from&&(r=fe(a))),a.markedSpans=Le(a.markedSpans,s),null==s.from&&this.collapsed&&!We(this.doc,a)&&e&&ue(a,er(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=Be(this.lines[l]),u=Ue(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&Jr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ji(e.doc)),e&&sn(e,"markerCleared",e,this,r,i),t&&zr(e),this.parent&&this.parent.clear()}},bo.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],a=Ae(o.markedSpans,this);if(null!=a.from&&(n=me(t?o:fe(o),a.from),-1==e))return n;if(null!=a.to&&(r=me(t?o:fe(o),a.to),1==e))return r}return n&&{from:n,to:r}},bo.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&Ur(r,function(){var i=t.line,o=fe(t.line),a=Fn(r,o);if(a&&(jn(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!We(n.doc,i)&&null!=n.height){var s=n.height;n.height=null;var l=xn(n)-s;l&&ue(i,i.height+l)}sn(r,"markerChanged",r,e)})},bo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=B(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},bo.prototype.detachLine=function(e){if(this.lines.splice(B(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},at(bo);var wo=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function ko(e){return e.findMarks(me(e.first,0),e.clipPos(me(e.lastLine())),function(e){return e.parent})}function _o(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Li(n.primary.doc,function(e){return r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==B(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}wo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();sn(this,"clear")}},wo.prototype.find=function(e,t){return this.primary.find(e,t)},at(wo);var Co=0,So=function(e,t,n,r,i){if(!(this instanceof So))return new So(e,t,n,r,i);null==n&&(n=0),mo.call(this,[new ho([new Kt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=me(n,0);this.sel=bi(o),this.history=new Ei(null),this.id=++Co,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Ai(this,{from:o,to:o,text:e}),Vi(this,bi(o),W)};So.prototype=Q(mo.prototype,{constructor:So,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ce(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Xr(function(e){var t=me(this.first,0),n=this.first+this.size-1;ro(this,{from:t,to:me(n,se(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Tr(this.cm,0,0),Vi(this,bi(t),W)}),replaceRange:function(e,t,n,r){lo(this,e,t=ke(this,t),n=n?ke(this,n):t,r)},getRange:function(e,t,n){var r=le(this,ke(this,e),ke(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(de(this,e))return se(this,e)},getLineNumber:function(e){return fe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=se(this,e)),Be(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ke(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Xr(function(e,t,n){Ki(this,ke(this,"number"==typeof e?me(e,t||0):e),null,n)}),setSelection:Xr(function(e,t,n){Ki(this,ke(this,e),ke(this,t||e),n)}),extendSelection:Xr(function(e,t,n){Hi(this,ke(this,e),t&&ke(this,t),n)}),extendSelections:Xr(function(e,t){Wi(this,_e(this,e),t)}),extendSelectionsBy:Xr(function(e,t){Wi(this,_e(this,J(this.sel.ranges,e)),t)}),setSelections:Xr(function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new vi(ke(this,e[i].anchor),ke(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Vi(this,yi(r,t),n)}}),addSelection:Xr(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new vi(ke(this,e),ke(this,t||e))),Vi(this,yi(r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=le(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=le(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Xr(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}for(var s=t&&"end"!=t&&function(e,t,n){for(var r=[],i=me(e.first,0),o=i,a=0;a<t.length;a++){var s=t[a],l=_i(s.from,i,o),c=_i(xi(s),i,o);if(i=s.to,o=c,"around"==n){var u=e.sel.ranges[a],f=ge(u.head,u.anchor)<0;r[a]=new vi(f?c:l,f?l:c)}else r[a]=new vi(l,l)}return new gi(r,e.sel.primIndex)}(this,r,t),l=r.length-1;l>=0;l--)ro(this,r[l]);s?Ui(this,s):this.cm&&Sr(this.cm)}),undo:Xr(function(){oo(this,"undo")}),redo:Xr(function(){oo(this,"redo")}),undoSelection:Xr(function(){oo(this,"undo",!0)}),redoSelection:Xr(function(){oo(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Ei(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Bi(this.history.done),undone:Bi(this.history.undone)}},setHistory:function(e){var t=this.history=new Ei(this.history.maxGeneration);t.done=Bi(e.done.slice(0),null,!0),t.undone=Bi(e.undone.slice(0),null,!0)},setGutterMarker:Xr(function(e,t,n){return po(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&ne(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Xr(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&po(t,n,"gutter",function(){return n.gutterMarkers[e]=null,ne(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!de(this,e))return null;if(t=e,!(e=se(this,e)))return null}else if(null==(t=fe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Xr(function(e,t,n){return po(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(C(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:Xr(function(e,t,n){return po(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(C(n));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Xr(function(e,t,n){return function(e,t,n,r){var i=new go(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),po(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!We(e,t)){var r=Ke(t)<e.scrollTop;ue(t,t.height+xn(i)),r&&Cr(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&sn(o,"lineWidgetAdded",o,i,"number"==typeof t?t:fe(t)),i}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return xo(this,ke(this,e),ke(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return xo(this,e=ke(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=se(this,(e=ke(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=ke(this,e),t=ke(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;if(o>e)return t=e,!0;e-=o,++n}),ke(this,me(n,t))},indexFromPos:function(e){var t=(e=ke(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new So(ce(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new So(ce(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(ge(o,a)){var s=xo(e,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}(r,ko(this)),r},unlinkDoc:function(e){if(e instanceof ka&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),_o(ko(this));break}}if(e.history==this.history){var n=[e.id];Li(e,function(e){return n.push(e.id)},!0),e.history=new Ei(null),e.history.done=Bi(this.history.done,n),e.history.undone=Bi(this.history.undone,n)}},iterLinkedDocs:function(e){Li(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):bt(e)},lineSeparator:function(){return this.lineSep||"\\n"},setDirection:Xr(function(e){var t;("rtl"!=e&&(e="ltr"),e!=this.direction)&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Ur(t=this.cm,function(){Fi(t),Jr(t)}))})}),So.prototype.eachLine=So.prototype.iter;var To=0;function Ao(e){var t=this;if(Lo(t),!rt(t,e)&&!wn(t.display,e)){st(e),a&&(To=+new Date);var n=ar(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),s=0,l=function(e,r){if(!t.options.allowDropFileTypes||-1!=B(t.options.allowDropFileTypes,e.type)){var a=new FileReader;a.onload=Vr(t,function(){var e=a.result;if(/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(e)&&(e=""),o[r]=e,++s==i){var l={from:n=ke(t.doc,n),to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};ro(t.doc,l),Ui(t.doc,bi(n,xi(l)))}}),a.readAsText(e)}},c=0;c<i;++c)l(r[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var u=e.dataTransfer.getData("Text");if(u){var f;if(t.state.draggingText&&!t.state.draggingText.copy&&(f=t.listSelections()),Gi(t.doc,bi(n,n)),f)for(var p=0;p<f.length;++p)lo(t.doc,"",f[p].anchor,f[p].head,"drag");t.replaceSelection(u,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Lo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Mo(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}var Fo=!1;function Eo(){var e;Fo||(Ze(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Mo(Oo)},100))}),Ze(window,"blur",function(){return Mo(vr)}),Fo=!0)}function Oo(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}for(var Do={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\\\",221:"]",222:"\'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},No=0;No<10;No++)Do[No+48]=Do[No+96]=String(No);for(var Po=65;Po<=90;Po++)Do[Po]=String.fromCharCode(Po);for(var Ro=1;Ro<=12;Ro++)Do[Ro+111]=Do[Ro+63235]="F"+Ro;var jo={};function Io(e){var t,n,r,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function qo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=J(n.split(" "),Io),o=0;o<i.length;o++){var a=void 0,s=void 0;o==i.length-1?(s=i.join(" "),a=r):(s=i.slice(0,o+1).join(" "),a="...");var l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[n]}for(var c in t)e[c]=t[c];return e}function Bo(e,t,n,r){var i=(t=$o(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Bo(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var a=Bo(e,t.fallthrough[o],n,r);if(a)return a}}}function zo(e){var t="string"==typeof e?e:Do[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Ho(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(k?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(k?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function Wo(e,t){if(f&&34==e.keyCode&&e.char)return!1;var n=Do[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Ho(n,e,t))}function $o(e){return"string"==typeof e?jo[e]:e}function Ko(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&ge(o.from,X(r).to)<=0;){var a=r.pop();if(ge(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}Ur(e,function(){for(var t=r.length-1;t>=0;t--)lo(e.doc,"",r[t].from,r[t].to,"+delete");Sr(e)})}function Uo(e,t,n){var r=oe(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Vo(e,t,n){var r=Uo(e,t.ch,n);return null==r?null:new me(t.line,r,n<0?"after":"before")}function Go(e,t,n,r,i){if(e){var o=Ye(n,t.doc.direction);if(o){var a,s=i<0?X(o):o[0],l=i<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var c=En(t,n);a=i<0?n.text.length-1:0;var u=On(t,c,a).top;a=ae(function(e){return On(t,c,e).top==u},i<0==(1==s.level)?s.from:s.to-1,a),"before"==l&&(a=Uo(n,a,1))}else a=i<0?s.to:s.from;return new me(r,a,l)}}return new me(r,i<0?n.text.length:0,i<0?"before":"after")}jo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},jo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},jo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},jo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},jo.default=y?jo.macDefault:jo.pcDefault;var Xo={selectAll:to,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),W)},killLine:function(e){return Ko(e,function(t){if(t.empty()){var n=se(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:me(t.head.line+1,0)}:{from:t.head,to:me(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Ko(e,function(t){return{from:me(t.from().line,0),to:ke(e.doc,me(t.to().line+1,0))}})},delLineLeft:function(e){return Ko(e,function(e){return{from:me(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return Ko(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return Ko(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(me(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(me(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Jo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Yo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var n=se(e.doc,t),r=function(e){for(var t;t=Ie(e);)e=t.find(1,!0).line;return e}(n);r!=n&&(t=fe(r));return Go(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},K)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},K)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\\S/)?Yo(e,t.head):r},K)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=I(e.getLine(o.line),o.ch,r);t.push(G(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Ur(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,o=se(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new me(i.line,i.ch-1)),i.ch>0)i=new me(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),me(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=se(e.doc,i.line-1).text;a&&(i=new me(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),me(i.line-1,a.length-1),i,"+transpose"))}n.push(new vi(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return Ur(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Sr(e)})},openLine:function(e){return e.replaceSelection("\\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Jo(e,t){var n=se(e.doc,t),r=Be(n);return r!=n&&(t=fe(r)),Go(!0,e,r,t,1)}function Yo(e,t){var n=Jo(e,t.line),r=se(e.doc,n.line),i=Ye(r,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return me(n.line,a?0:o,n.sticky)}return n}function Qo(e,t,n){if("string"==typeof t&&!(t=Xo[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=H}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var Zo=new q;function ea(e,t,n,r){var i=e.state.keySeq;if(i){if(zo(t))return"handled";if(/\\\'$/.test(t)?e.state.keySeq=null:Zo.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),ta(e,i+" "+t,n,r))return!0}return ta(e,t,n,r)}function ta(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Bo(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Bo(t,e.options.extraKeys,n,e)||Bo(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&sn(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(st(n),dr(e)),!!i}function na(e,t){var n=Wo(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?ea(e,"Shift-"+n,t,function(t){return Qo(e,t,!0)})||ea(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Qo(e,t)}):ea(e,n,t,function(t){return Qo(e,t)}))}var ra=null;function ia(e){var t=this;if(t.curOp.focus=O(),!rt(t,e)){a&&s<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=na(t,e);f&&(ra=r?n:null,!r&&88==n&&!wt&&(y?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\\bCodeMirror-crosshair\\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(T(t,"CodeMirror-crosshair"),tt(document,"keyup",n),tt(document,"mouseover",n))}D(t,"CodeMirror-crosshair"),Ze(document,"keyup",n),Ze(document,"mouseover",n)}(t)}}function oa(e){16==e.keyCode&&(this.doc.sel.shift=!1),rt(this,e)}function aa(e){var t=this;if(!(wn(t.display,e)||rt(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(f&&n==ra)return ra=null,void st(e);if(!f||e.which&&!(e.which<10)||!na(t,e)){var i=String.fromCharCode(null==r?n:r);"\\b"!=i&&(function(e,t,n){return ea(e,"\'"+n+"\'",t,function(t){return Qo(e,t,!0)})}(t,e,i)||t.display.input.onKeyPress(e))}}}var sa,la,ca=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ua(e){var t=this,n=t.display;if(!(rt(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,wn(n,e))l||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!da(t,e)){var r=ar(t,e),i=pt(e),o=r?function(e,t){var n=+new Date;return la&&la.compare(n,e,t)?(sa=la=null,"triple"):sa&&sa.compare(n,e,t)?(la=new ca(n,e,t),sa=null,"double"):(sa=new ca(n,e,t),la=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){var o="Click";"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o);return ea(e,Ho(o=(1==t?"Left":2==t?"Middle":"Right")+o,i),i,function(t){if("string"==typeof t&&(t=Xo[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=H}finally{e.state.suppressEdits=!1}return r})}(t,i,r,o,e)||(1==i?r?function(e,t,n,r){a?setTimeout(R(hr,e),0):e.curOp.focus=O();var i,o=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){var o=b?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey);null==i.addNew&&(i.addNew=y?n.metaKey:n.ctrlKey);null==i.moveOnDrag&&(i.moveOnDrag=!(y?n.altKey:n.ctrlKey));return i}(e,n,r),c=e.doc.sel;e.options.dragDrop&&mt&&!e.isReadOnly()&&"single"==n&&(i=c.contains(t))>-1&&(ge((i=c.ranges[i]).from(),t)<0||t.xRel>0)&&(ge(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,o=!1,c=Vr(e,function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,tt(document,"mouseup",c),tt(document,"mousemove",u),tt(i.scroller,"dragstart",f),tt(i.scroller,"drop",c),o||(st(t),r.addNew||Hi(e.doc,n,null,null,r.extend),l||a&&9==s?setTimeout(function(){document.body.focus(),i.input.focus()},20):i.input.focus())}),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},f=function(){return o=!0};l&&(i.scroller.draggable=!0);e.state.draggingText=c,c.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop();Ze(document,"mouseup",c),Ze(document,"mousemove",u),Ze(i.scroller,"dragstart",f),Ze(i.scroller,"drop",c),mr(e),setTimeout(function(){return i.input.focus()},20)}(e,r,t,o):function(e,t,n,r){var i=e.display,o=e.doc;st(t);var a,s,l=o.sel,c=l.ranges;r.addNew&&!r.extend?(s=o.sel.contains(n),a=s>-1?c[s]:new vi(n,n)):(a=o.sel.primary(),s=o.sel.primIndex);if("rectangle"==r.unit)r.addNew||(a=new vi(n,n)),n=ar(e,t,!0,!0),s=-1;else{var u=fa(e,n,r.unit);a=r.extend?zi(a,u.anchor,u.head,r.extend):u}r.addNew?-1==s?(s=c.length,Vi(o,yi(c.concat([a]),s),{scroll:!1,origin:"*mouse"})):c.length>1&&c[s].empty()&&"char"==r.unit&&!r.extend?(Vi(o,yi(c.slice(0,s).concat(c.slice(s+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):$i(o,s,a,$):(s=0,Vi(o,new gi([a],0),$),l=o.sel);var f=n;function p(t){if(0!=ge(f,t))if(f=t,"rectangle"==r.unit){for(var i=[],c=e.options.tabSize,u=I(se(o,n.line).text,n.ch,c),p=I(se(o,t.line).text,t.ch,c),d=Math.min(u,p),h=Math.max(u,p),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var v=se(o,m).text,y=U(v,d,c);d==h?i.push(new vi(me(m,y),me(m,y))):v.length>y&&i.push(new vi(me(m,y),me(m,U(v,h,c))))}i.length||i.push(new vi(n,n)),Vi(o,yi(l.ranges.slice(0,s).concat(i),s),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,x=a,w=fa(e,t,r.unit),k=x.anchor;ge(w.anchor,k)>0?(b=w.head,k=xe(x.from(),w.anchor)):(b=w.anchor,k=be(x.to(),w.head));var _=l.ranges.slice(0);_[s]=function(e,t){var n=t.anchor,r=t.head,i=se(e.doc,n.line);if(0==ge(n,r)&&n.sticky==r.sticky)return t;var o=Ye(i);if(!o)return t;var a=Xe(o,n.ch,n.sticky),s=o[a];if(s.from!=n.ch&&s.to!=n.ch)return t;var l,c=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==c||c==o.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=Xe(o,r.ch,r.sticky),f=u-a||(r.ch-n.ch)*(1==s.level?-1:1);l=u==c-1||u==c?f<0:f>0}var p=o[c+(l?-1:0)],d=l==(1==p.level),h=d?p.from:p.to,m=d?"after":"before";return n.ch==h&&n.sticky==m?t:new vi(new me(n.line,h,m),r)}(e,new vi(ke(o,k),b)),Vi(o,yi(_,s),$)}}var d=i.wrapper.getBoundingClientRect(),h=0;function m(t){e.state.selectingText=!1,h=1/0,st(t),i.input.focus(),tt(document,"mousemove",g),tt(document,"mouseup",v),o.history.lastSelOrigin=null}var g=Vr(e,function(t){pt(t)?function t(n){var a=++h;var s=ar(e,n,!0,"rectangle"==r.unit);if(!s)return;if(0!=ge(s,f)){e.curOp.focus=O(),p(s);var l=xr(i,o);(s.line>=l.to||s.line<l.from)&&setTimeout(Vr(e,function(){h==a&&t(n)}),150)}else{var c=n.clientY<d.top?-20:n.clientY>d.bottom?20:0;c&&setTimeout(Vr(e,function(){h==a&&(i.scroller.scrollTop+=c,t(n))}),50)}}(t):m(t)}),v=Vr(e,m);e.state.selectingText=v,Ze(document,"mousemove",g),Ze(document,"mouseup",v)}(e,r,t,o)}(t,r,o,e):ft(e)==n.scroller&&st(e):2==i?(r&&Hi(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==i&&(_?ha(t,e):mr(t)))}}function fa(e,t,n){if("char"==n)return new vi(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new vi(me(t.line,0),ke(e.doc,me(t.line+1,0)));var r=n(e,t);return new vi(r.from,r.to)}function pa(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&st(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!ot(e,n))return ct(t);o-=s.top-a.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=a.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i)return nt(e,n,e,pe(e.doc,o),e.options.gutters[l],t),ct(t)}}function da(e,t){return pa(e,t,"gutterClick",!0)}function ha(e,t){wn(e.display,t)||function(e,t){if(!ot(e,"gutterContextMenu"))return!1;return pa(e,t,"gutterContextMenu",!1)}(e,t)||rt(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function ma(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\\s*cm-s-\\S+/g,"")+e.options.theme.replace(/(^|\\s)\\s*/g," cm-s-"),qn(e)}ca.prototype.compare=function(e,t,n){return this.time+400>e&&0==ge(t,this.pos)&&n==this.button};var ga={toString:function(){return"CodeMirror.Init"}},va={},ya={};function ba(e){ci(e),Jr(e),wr(e)}function xa(e,t,n){if(!t!=!(n&&n!=ga)){var r=e.display.dragFunctions,i=t?Ze:tt;i(e.display.scroller,"dragstart",r.start),i(e.display.scroller,"dragenter",r.enter),i(e.display.scroller,"dragover",r.over),i(e.display.scroller,"dragleave",r.leave),i(e.display.scroller,"drop",r.drop)}}function wa(e){e.options.lineWrapping?(D(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(T(e.display.wrapper,"CodeMirror-wrap"),Ve(e)),or(e),Jr(e),qn(e),setTimeout(function(){return Pr(e)},100)}function ka(e,t){var r=this;if(!(this instanceof ka))return new ka(e,t);this.options=t=t?j(t):{},j(va,t,!1),ui(t);var i=t.value;"string"==typeof i&&(i=new So(i,t.mode,null,t.lineSeparator,t.direction)),this.doc=i;var o=new ka.inputStyles[t.inputStyle](this),c=this.display=new function(e,t,r){var i=this;this.input=r,i.scrollbarFiller=M("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=M("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=F("div",null,"CodeMirror-code"),i.selectionDiv=M("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=M("div",null,"CodeMirror-cursors"),i.measure=M("div",null,"CodeMirror-measure"),i.lineMeasure=M("div",null,"CodeMirror-measure"),i.lineSpace=F("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=F("div",[i.lineSpace],"CodeMirror-lines");i.mover=M("div",[o],null,"position: relative"),i.sizer=M("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=M("div",null,null,"position: absolute; height: "+z+"px; width: 1px;"),i.gutters=M("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=M("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=M("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),a&&s<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),l||n&&v||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,r.init(i)}(e,i,o);for(var u in c.wrapper.CodeMirror=this,ci(this),ma(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ir(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new q,keySeq:null,specialChars:null},t.autofocus&&!v&&c.input.focus(),a&&s<11&&setTimeout(function(){return r.display.input.reset(!0)},20),function(e){var t=e.display;Ze(t.scroller,"mousedown",Vr(e,ua)),Ze(t.scroller,"dblclick",a&&s<11?Vr(e,function(t){if(!rt(e,t)){var n=ar(e,t);if(n&&!da(e,t)&&!wn(e.display,t)){st(t);var r=e.findWordAt(n);Hi(e.doc,r.anchor,r.head)}}}):function(t){return rt(e,t)||st(t)});_||Ze(t.scroller,"contextmenu",function(t){return ha(e,t)});var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(r=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}Ze(t.scroller,"touchstart",function(i){if(!rt(e,i)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(i)&&!da(e,i)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}}),Ze(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),Ze(t.scroller,"touchend",function(n){var r=t.activeTouch;if(r&&!wn(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var a,s=e.coordsChar(t.activeTouch,"page");a=!r.prev||o(r,r.prev)?new vi(s,s):!r.prev.prev||o(r,r.prev.prev)?e.findWordAt(s):new vi(me(s.line,0),ke(e.doc,me(s.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),st(n)}i()}),Ze(t.scroller,"touchcancel",i),Ze(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Mr(e,t.scroller.scrollTop),Er(e,t.scroller.scrollLeft,!0),nt(e,"scroll",e))}),Ze(t.scroller,"mousewheel",function(t){return mi(e,t)}),Ze(t.scroller,"DOMMouseScroll",function(t){return mi(e,t)}),Ze(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){rt(e,t)||ut(t)},over:function(t){rt(e,t)||(!function(e,t){var n=ar(e,t);if(n){var r=document.createDocumentFragment();ur(e,n,r),e.display.dragCursor||(e.display.dragCursor=M("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),L(e.display.dragCursor,r)}}(e,t),ut(t))},start:function(t){return function(e,t){if(a&&(!e.state.draggingText||+new Date-To<100))ut(t);else if(!rt(e,t)&&!wn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!p)){var n=M("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",f&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),f&&n.parentNode.removeChild(n)}}(e,t)},drop:Vr(e,Ao),leave:function(t){rt(e,t)||Lo(e)}};var l=t.input.getField();Ze(l,"keyup",function(t){return oa.call(e,t)}),Ze(l,"keydown",Vr(e,ia)),Ze(l,"keypress",Vr(e,aa)),Ze(l,"focus",function(t){return gr(e,t)}),Ze(l,"blur",function(t){return vr(e,t)})}(this),Eo(),Br(this),this.curOp.forceUpdate=!0,Mi(this,i),t.autofocus&&!v||this.hasFocus()?setTimeout(R(gr,this),20):vr(this),ya)ya.hasOwnProperty(u)&&ya[u](r,t[u],ga);kr(this),t.finishInit&&t.finishInit(this);for(var d=0;d<_a.length;++d)_a[d](r);zr(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(c.lineDiv).textRendering&&(c.lineDiv.style.textRendering="auto")}ka.defaults=va,ka.optionHandlers=ya;var _a=[];function Ca(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=jt(e,t).state:n="prev");var a=e.options.tabSize,s=se(o,t),l=I(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var c,u=s.text.match(/^\\s*/)[0];if(r||/\\S/.test(s.text)){if("smart"==n&&((c=o.mode.indent(i,s.text.slice(u.length),s.text))==H||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?I(se(o,t-1).text,null,a):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var f="",p=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/a);d;--d)p+=a,f+="\\t";if(p<c&&(f+=G(c-p)),f!=u)return lo(o,f,me(t,0),me(t,u.length),"+input"),s.stateAfter=null,!0;for(var h=0;h<o.sel.ranges.length;h++){var m=o.sel.ranges[h];if(m.head.line==t&&m.head.ch<u.length){var g=me(t,u.length);$i(o,h,new vi(g,g));break}}}ka.defineInitHook=function(e){return _a.push(e)};var Sa=null;function Ta(e){Sa=e}function Aa(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var a,s=e.state.pasteIncoming||"paste"==i,l=bt(t),c=null;if(s&&r.ranges.length>1)if(Sa&&Sa.text.join("\\n")==t){if(r.ranges.length%Sa.text.length==0){c=[];for(var u=0;u<Sa.text.length;u++)c.push(o.splitLines(Sa.text[u]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=J(l,function(e){return[e]}));for(var f=r.ranges.length-1;f>=0;f--){var p=r.ranges[f],d=p.from(),h=p.to();p.empty()&&(n&&n>0?d=me(d.line,d.ch-n):e.state.overwrite&&!s?h=me(h.line,Math.min(se(o,h.line).text.length,h.ch+X(l).length)):Sa&&Sa.lineWise&&Sa.text.join("\\n")==t&&(d=h=me(d.line,0))),a=e.curOp.updateInput;var m={from:d,to:h,text:c?c[f%c.length]:l,origin:i||(s?"paste":e.state.cutIncoming?"cut":"+input")};ro(e.doc,m),sn(e,"inputRead",e,m)}t&&!s&&Ma(e,t),Sr(e),e.curOp.updateInput=a,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function La(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Ur(t,function(){return Aa(t,n,0,null,"paste")}),!0}function Ma(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=Ca(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(se(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Ca(e,i.head.line,"smart"));a&&sn(e,"electricInput",e,i.head.line)}}}function Fa(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:me(i,0),head:me(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Ea(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Oa(){var e=M("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=M("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Ea(e),t}function Da(e,t,n,r,i){var o=t,a=n,s=se(e,t.line);function l(r){var o,a;if(null==(o=i?function(e,t,n,r){var i=Ye(t,e.doc.direction);if(!i)return Vo(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=Xe(i,n.ch,n.sticky),a=i[o];if("ltr"==e.doc.direction&&a.level%2==0&&(r>0?a.to>n.ch:a.from<n.ch))return Vo(t,n,r);var s,l=function(e,n){return Uo(t,e instanceof me?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(s=s||En(e,t),Yn(e,t,s,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var f=1==a.level==r<0,p=l(n,f?1:-1);if(null!=p&&(f?p<=a.to&&p<=u.end:p>=a.from&&p>=u.begin)){var d=f?"before":"after";return new me(n.line,p,d)}}var h=function(e,t,r){for(var o=function(e,t){return t?new me(n.line,l(e,1),"before"):new me(n.line,e,"after")};e>=0&&e<i.length;e+=t){var a=i[e],s=t>0==(1!=a.level),c=s?r.begin:l(r.end,-1);if(a.from<=c&&c<a.to)return o(c,s);if(c=s?a.from:l(a.to,-1),r.begin<=c&&c<r.end)return o(c,s)}},m=h(o+r,r,u);if(m)return m;var g=r>0?u.end:l(u.begin,-1);return null==g||r>0&&g==t.text.length||!(m=h(r>0?0:i.length-1,r,c(g)))?null:m}(e.cm,s,t,n):Vo(s,t,n))){if(r||(a=t.line+n)<e.first||a>=e.first+e.size||(t=new me(a,t.ch,t.sticky),!(s=se(e,a))))return!1;t=Go(i,e.cm,s,t.line,n)}else t=o;return!0}if("char"==r)l();else if("column"==r)l(!0);else if("word"==r||"group"==r)for(var c=null,u="group"==r,f=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(n<0)||l(!p);p=!1){var d=s.text.charAt(t.ch)||"\\n",h=te(d,f)?"w":u&&"\\n"==d?"n":!u||/\\s/.test(d)?null:"p";if(!u||p||h||(h="s"),c&&c!=h){n<0&&(n=1,l(),t.sticky="after");break}if(h&&(c=h),n>0&&!l(!p))break}var m=Zi(e,t,o,a,!0);return ve(o,m)&&(m.hitSide=!0),m}function Na(e,t,n,r){var i,o,a=e.doc,s=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*er(e.display),3);i=(n>0?t.bottom:t.top)+n*c}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(o=Xn(e,s,i)).outside;){if(n<0?i<=0:i>=a.height){o.hitSide=!0;break}i+=5*n}return o}var Pa=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new q,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ra(e,t){var n=Fn(e,t.line);if(!n||n.hidden)return null;var r=se(e.doc,t.line),i=Ln(n,r,t.line),o=Ye(r,e.doc.direction),a="left";o&&(a=Xe(o,t.ch)%2?"right":"left");var s=Pn(i.map,t.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function ja(e,t){return t&&(e.bad=!0),e}function Ia(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return ja(e.clipPos(me(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return qa(o,t,n)}}function qa(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!E(r,t))return ja(me(fe(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var o=e.rest?X(e.rest):e.line;return ja(me(fe(o),o.text.length),i)}var a=3==t.nodeType?t:null,s=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));s.parentNode!=r;)s=s.parentNode;var l=e.measure,c=l.maps;function u(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var o=i<0?l.map:c[i],a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==n){var u=fe(i<0?e.line:e.rest[i]),f=o[a]+r;return(r<0||s!=t)&&(f=o[a+(r?1:0)]),me(u,f)}}}var f=u(a,s,n);if(f)return ja(f,i);for(var p=s.nextSibling,d=a?a.nodeValue.length-n:0;p;p=p.nextSibling){if(f=u(p,p.firstChild,0))return ja(me(f.line,f.ch-d),i);d+=p.textContent.length}for(var h=s.previousSibling,m=n;h;h=h.previousSibling){if(f=u(h,h.firstChild,-1))return ja(me(f.line,f.ch+m),i);m+=h.textContent.length}}Pa.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function o(e){if(!rt(r,e)){if(r.somethingSelected())Ta({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Fa(r);Ta({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation(function(){r.setSelections(t.ranges,0,W),r.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var o=Sa.text.join("\\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var a=Oa(),s=a.firstChild;r.display.lineSpace.insertBefore(a,r.display.lineSpace.firstChild),s.value=Sa.text.join("\\n");var l=document.activeElement;P(s),setTimeout(function(){r.display.lineSpace.removeChild(a),l.focus(),l==i&&n.showPrimarySelection()},50)}}Ea(i,r.options.spellcheck),Ze(i,"paste",function(e){rt(r,e)||La(e,r)||s<=11&&setTimeout(Vr(r,function(){return t.updateFromDOM()}),20)}),Ze(i,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),Ze(i,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),Ze(i,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),Ze(i,"touchstart",function(){return n.forceCompositionEnd()}),Ze(i,"input",function(){t.composing||t.readFromDOMSoon()}),Ze(i,"copy",o),Ze(i,"cut",o)},Pa.prototype.prepareSelection=function(){var e=cr(this.cm,!1);return e.focus=this.cm.state.focused,e},Pa.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Pa.prototype.showPrimarySelection=function(){var e=window.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),o=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var a=Ia(t,e.anchorNode,e.anchorOffset),s=Ia(t,e.focusNode,e.focusOffset);if(!a||a.bad||!s||s.bad||0!=ge(xe(a,s),i)||0!=ge(be(a,s),o)){var l=t.display.view,c=i.line>=t.display.viewFrom&&Ra(t,i)||{node:l[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&Ra(t,o);if(!u){var f=l[l.length-1].measure,p=f.maps?f.maps[f.maps.length-1]:f.map;u={node:p[p.length-1],offset:p[p.length-2]-p[p.length-3]}}if(c&&u){var d,h=e.rangeCount&&e.getRangeAt(0);try{d=S(c.node,c.offset,u.offset,u.node)}catch(e){}d&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),d.collapsed||(e.removeAllRanges(),e.addRange(d))):(e.removeAllRanges(),e.addRange(d)),h&&null==e.anchorNode?e.addRange(h):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Pa.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Pa.prototype.showMultipleSelections=function(e){L(this.cm.display.cursorDiv,e.cursors),L(this.cm.display.selectionDiv,e.selection)},Pa.prototype.rememberSelection=function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Pa.prototype.selectionInEditor=function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return E(this.div,t)},Pa.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Pa.prototype.blur=function(){this.div.blur()},Pa.prototype.getField=function(){return this.div},Pa.prototype.supportsTouch=function(){return!0},Pa.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Ur(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},Pa.prototype.selectionChanged=function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Pa.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;if(g&&u&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Ia(t,e.anchorNode,e.anchorOffset),r=Ia(t,e.focusNode,e.focusOffset);n&&r&&Ur(t,function(){Vi(t.doc,bi(n,r),W),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},Pa.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),a=o.from(),s=o.to();if(0==a.ch&&a.line>r.firstLine()&&(a=me(a.line-1,se(r.doc,a.line-1).length)),s.ch==se(r.doc,s.line).text.length&&s.line<r.lastLine()&&(s=me(s.line+1,0)),a.line<i.viewFrom||s.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(e=sr(r,a.line))?(t=fe(i.view[0].line),n=i.view[0].node):(t=fe(i.view[e].line),n=i.view[e-1].node.nextSibling);var l,c,u=sr(r,s.line);if(u==i.view.length-1?(l=i.viewTo-1,c=i.lineDiv.lastChild):(l=fe(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!n)return!1;for(var f=r.doc.splitLines(function(e,t,n,r,i){var o="",a=!1,s=e.doc.lineSeparator();function l(){a&&(o+=s,a=!1)}function c(e){e&&(l(),o+=e)}function u(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return void c(n||t.textContent.replace(/\\u200b/g,""));var o,f=t.getAttribute("cm-marker");if(f){var p=e.findMarks(me(r,0),me(i+1,0),(m=+f,function(e){return e.id==m}));return void(p.length&&(o=p[0].find(0))&&c(le(e.doc,o.from,o.to).join(s)))}if("false"==t.getAttribute("contenteditable"))return;var d=/^(pre|div|p)$/i.test(t.nodeName);d&&l();for(var h=0;h<t.childNodes.length;h++)u(t.childNodes[h]);d&&(a=!0)}else 3==t.nodeType&&c(t.nodeValue);var m}for(;u(t),t!=n;)t=t.nextSibling;return o}(r,n,c,t,l)),p=le(r.doc,me(t,0),me(l,se(r.doc,l).text.length));f.length>1&&p.length>1;)if(X(f)==X(p))f.pop(),p.pop(),l--;else{if(f[0]!=p[0])break;f.shift(),p.shift(),t++}for(var d=0,h=0,m=f[0],g=p[0],v=Math.min(m.length,g.length);d<v&&m.charCodeAt(d)==g.charCodeAt(d);)++d;for(var y=X(f),b=X(p),x=Math.min(y.length-(1==f.length?d:0),b.length-(1==p.length?d:0));h<x&&y.charCodeAt(y.length-h-1)==b.charCodeAt(b.length-h-1);)++h;if(1==f.length&&1==p.length&&t==a.line)for(;d&&d>a.ch&&y.charCodeAt(y.length-h-1)==b.charCodeAt(b.length-h-1);)d--,h++;f[f.length-1]=y.slice(0,y.length-h).replace(/^\\u200b+/,""),f[0]=f[0].slice(d).replace(/\\u200b+$/,"");var w=me(t,d),k=me(l,p.length?X(p).length-h:0);return f.length>1||f[0]||ge(w,k)?(lo(r.doc,f,w,k,"+input"),!0):void 0},Pa.prototype.ensurePolled=function(){this.forceCompositionEnd()},Pa.prototype.reset=function(){this.forceCompositionEnd()},Pa.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Pa.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Pa.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Ur(this.cm,function(){return Jr(e.cm)})},Pa.prototype.setUneditable=function(e){e.contentEditable="false"},Pa.prototype.onKeyPress=function(e){0!=e.charCode&&(e.preventDefault(),this.cm.isReadOnly()||Vr(this.cm,Aa)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Pa.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Pa.prototype.onContextMenu=function(){},Pa.prototype.resetPosition=function(){},Pa.prototype.needsContentAttribute=!0;var Ba=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new q,this.hasSelection=!1,this.composing=null};Ba.prototype.init=function(e){var t=this,n=this,r=this.cm,i=this.wrapper=Oa(),o=this.textarea=i.firstChild;function l(e){if(!rt(r,e)){if(r.somethingSelected())Ta({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Fa(r);Ta({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,W):(n.prevInput="",o.value=t.text.join("\\n"),P(o))}"cut"==e.type&&(r.state.cutIncoming=!0)}}e.wrapper.insertBefore(i,e.wrapper.firstChild),m&&(o.style.width="0px"),Ze(o,"input",function(){a&&s>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),Ze(o,"paste",function(e){rt(r,e)||La(e,r)||(r.state.pasteIncoming=!0,n.fastPoll())}),Ze(o,"cut",l),Ze(o,"copy",l),Ze(e.scroller,"paste",function(t){wn(e,t)||rt(r,t)||(r.state.pasteIncoming=!0,n.focus())}),Ze(e.lineSpace,"selectstart",function(t){wn(e,t)||st(t)}),Ze(o,"compositionstart",function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),Ze(o,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Ba.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=cr(e);if(e.options.moveInputWithCursor){var i=Un(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},Ba.prototype.showSelection=function(e){var t=this.cm.display;L(t.cursorDiv,e.cursors),L(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ba.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&P(this.textarea),a&&s>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",a&&s>=9&&(this.hasSelection=null))}},Ba.prototype.getField=function(){return this.textarea},Ba.prototype.supportsTouch=function(){return!1},Ba.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||O()!=this.textarea))try{this.textarea.focus()}catch(e){}},Ba.prototype.blur=function(){this.textarea.blur()},Ba.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ba.prototype.receivedFocus=function(){this.slowPoll()},Ba.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ba.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},Ba.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||xt(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(a&&s>=9&&this.hasSelection===i||y&&/[\\uf700-\\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="â"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(r.length,i.length);l<c&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return Ur(t,function(){Aa(t,i.slice(l),r.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ba.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ba.prototype.onKeyPress=function(){a&&s>=9&&(this.hasSelection=null),this.fastPoll()},Ba.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea,o=ar(n,e),c=r.scroller.scrollTop;if(o&&!f){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&Vr(n,Vi)(n.doc,bi(o),W);var u=i.style.cssText,p=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var d,h=t.wrapper.getBoundingClientRect();if(i.style.cssText="position: absolute; width: 30px; height: 30px;\\n      top: "+(e.clientY-h.top-5)+"px; left: "+(e.clientX-h.left-5)+"px;\\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(d=window.scrollY),r.input.focus(),l&&window.scrollTo(null,d),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=!0,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),a&&s>=9&&g(),_){ut(e);var m=function(){tt(window,"mouseup",m),setTimeout(v,20)};Ze(window,"mouseup",m)}else setTimeout(v,50)}function g(){if(null!=i.selectionStart){var e=n.somethingSelected(),o="â"+(e?i.value:"");i.value="â",i.value=o,t.prevInput=e?"":"â",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending=!1,t.wrapper.style.cssText=p,i.style.cssText=u,a&&s<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=i.selectionStart){(!a||a&&s<9)&&g();var e=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"â"==t.prevInput?Vr(n,to)(n):e++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},Ba.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Ba.prototype.setUneditable=function(){},Ba.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,r,i,o){e.defaults[n]=r,i&&(t[n]=o?function(e,t,n){n!=ga&&i(e,t,n)}:i)}e.defineOption=n,e.Init=ga,n("value","",function(e,t){return e.setValue(t)},!0),n("mode",null,function(e,t){e.doc.modeOption=t,Ci(e)},!0),n("indentUnit",2,Ci,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(e){Si(e),qn(e),Jr(e)},!0),n("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(me(r,o))}r++});for(var i=n.length-1;i>=0;i--)lo(e.doc,t,n[i],me(n[i].line,n[i].ch+t.length))}}),n("specialChars",/[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\\t")?"":"|\\t"),"g"),n!=ga&&e.refresh()}),n("specialCharPlaceholder",Yt,function(e){return e.refresh()},!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),n("rtlMoveVisually",!x),n("wholeLineUpdateBefore",!0),n("theme","default",function(e){ma(e),ba(e)},!0),n("keyMap","default",function(e,t,n){var r=$o(t),i=n!=ga&&$o(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,wa,!0),n("gutters",[],function(e){ui(e.options),ba(e)},!0),n("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?rr(e.display)+"px":"0",e.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(e){return Pr(e)},!0),n("scrollbarStyle","native",function(e){Ir(e),Pr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),n("lineNumbers",!1,function(e){ui(e.options),ba(e)},!0),n("firstLineNumber",1,ba,!0),n("lineNumberFormatter",function(e){return e},ba,!0),n("showCursorWhenSelecting",!1,lr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("readOnly",!1,function(e,t){"nocursor"==t&&(vr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),n("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),n("dragDrop",!0,xa),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,lr,!0),n("singleCursorHeightPerLine",!0,lr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Si,!0),n("addModeClass",!1,Si,!0),n("pollInterval",100),n("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),n("historyEventDelay",1250),n("viewportMargin",10,function(e){return e.refresh()},!0),n("maxHighlightLength",1e4,Si,!0),n("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),n("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),n("autofocus",null),n("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0)}(ka),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&Vr(this,t[e])(this,n,i),nt(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"]($o(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Gr(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,Jr(this)}),removeOverlay:Gr(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void Jr(this)}}),indentLine:Gr(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),de(this.doc,e)&&Ca(this,e,t,n)}),indentSelection:Gr(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Ca(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Sr(this));else{var o=i.from(),a=i.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;l<n;++l)Ca(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[r].from().ch>0&&$i(this.doc,r,new vi(o,c[r].to()),W)}}}),getTokenAt:function(e,t){return Ht(this,e,t)},getLineTokens:function(e,t){return Ht(this,me(e),t,!0)},getTokenTypeAt:function(e){e=ke(this.doc,e);var t,n=Rt(this,se(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&r.push(i[o[t]]);else if(o[t])for(var a=0;a<o[t].length;a++){var s=i[o[t][a]];s&&r.push(s)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var l=0;l<i._global.length;l++){var c=i._global[l];c.pred(o,this)&&-1==B(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(e,t){var n=this.doc;return jt(this,(e=we(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Un(this,null==e?n.head:"object"==typeof e?ke(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Kn(this,ke(this.doc,e),t||"page")},coordsChar:function(e,t){return Xn(this,(e=$n(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=$n(this,{top:e,left:0},t||"page").top,pe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),r=se(this.doc,e)}else r=e;return Wn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Ke(r):0)},defaultTextHeight:function(){return er(this.display)},defaultCharWidth:function(){return tr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o,a,s,l=this.display,c=(e=Un(this,ke(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==r)c=e.top;else if("above"==r||"near"==r){var f=Math.max(l.wrapper.clientHeight,this.doc.height),p=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>f)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=f&&(c=e.bottom),u+t.offsetWidth>p&&(u=p-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==i?(u=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(o=this,a={left:u,top:c,right:u+t.offsetWidth,bottom:c+t.offsetHeight},null!=(s=_r(o,a)).scrollTop&&Mr(o,s.scrollTop),null!=s.scrollLeft&&Er(o,s.scrollLeft))},triggerOnKeyDown:Gr(ia),triggerOnKeyPress:Gr(aa),triggerOnKeyUp:oa,triggerOnMouseDown:Gr(ua),execCommand:function(e){if(Xo.hasOwnProperty(e))return Xo[e].call(null,this)},triggerElectric:Gr(function(e){Ma(this,e)}),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=ke(this.doc,e),a=0;a<t&&!(o=Da(this.doc,o,i,n,r)).hitSide;++a);return o},moveH:Gr(function(e,t){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Da(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},K)}),deleteH:Gr(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Ko(this,function(n){var i=Da(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var a=ke(this.doc,e),s=0;s<t;++s){var l=Un(this,a,"div");if(null==o?o=l.left:l.left=o,(a=Na(this,l,i,n)).hitSide)break}return a},moveV:Gr(function(e,t){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return e<0?a.from():a.to();var s=Un(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=Na(n,s,e,t);return"page"==t&&a==r.sel.primary()&&Cr(n,Kn(n,l,"div").top-s.top),l},K),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(e){var t=se(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!n?++r:--n;for(var o=t.charAt(n),a=te(o,i)?function(e){return te(e,i)}:/\\s/.test(o)?function(e){return/\\s/.test(e)}:function(e){return!/\\s/.test(e)&&!te(e)};n>0&&a(t.charAt(n-1));)--n;for(;r<t.length&&a(t.charAt(r));)++r}return new vi(me(e.line,n),me(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?D(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),nt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==O()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Gr(function(e,t){Tr(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Sn(this)-this.display.barHeight,width:e.scrollWidth-Sn(this)-this.display.barWidth,clientHeight:An(this),clientWidth:Tn(this)}},scrollIntoView:Gr(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:me(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Ar(e),e.curOp.scrollToPos=t}(this,e):Lr(this,e.from,e.to,e.margin)}),setSize:Gr(function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&In(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Yr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,nt(this,"refresh",this)}),operation:function(e){return Ur(this,e)},startOperation:function(){return Br(this)},endOperation:function(){return zr(this)},refresh:Gr(function(){var e=this.display.cachedTextHeight;Jr(this),this.curOp.forceUpdate=!0,qn(this),Tr(this,this.doc.scrollLeft,this.doc.scrollTop),si(this),(null==e||Math.abs(e-er(this.display))>.5)&&or(this),nt(this,"refresh",this)}),swapDoc:Gr(function(e){var t=this.doc;return t.cm=null,Mi(this,e),qn(this),this.display.input.reset(),Tr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,sn(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},at(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,o){e.registerHelper(t,r,o),n[t]._global.push({pred:i,val:o})}}(ka);var za,Ha="iter insert remove copy getEditor constructor".split(" ");for(var Wa in So.prototype)So.prototype.hasOwnProperty(Wa)&&B(Ha,Wa)<0&&(ka.prototype[Wa]=function(e){return function(){return e.apply(this.doc,arguments)}}(So.prototype[Wa]));return at(So),ka.inputStyles={textarea:Ba,contenteditable:Pa},ka.defineMode=function(e){ka.defaults.mode||"null"==e||(ka.defaults.mode=e),function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),_t[e]=t}.apply(this,arguments)},ka.defineMIME=function(e,t){Ct[e]=t},ka.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),ka.defineMIME("text/plain","null"),ka.defineExtension=function(e,t){ka.prototype[e]=t},ka.defineDocExtension=function(e,t){So.prototype[e]=t},ka.fromTextArea=function(e,t){if((t=t?j(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=O();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=s.getValue()}var i;if(e.form&&(Ze(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var a=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=a}}catch(e){}}t.finishInit=function(t){t.save=r,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,r(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(tt(e.form,"submit",r),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var s=ka(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return s},(za=ka).off=tt,za.on=Ze,za.wheelEventPixels=hi,za.Doc=So,za.splitLines=bt,za.countColumn=I,za.findColumn=U,za.isWordChar=ee,za.Pass=H,za.signal=nt,za.Line=Kt,za.changeEnd=xi,za.scrollbarModel=jr,za.Pos=me,za.cmpPos=ge,za.modes=_t,za.mimeModes=Ct,za.resolveMode=St,za.getMode=Tt,za.modeExtensions=At,za.extendMode=Lt,za.copyState=Mt,za.startState=Et,za.innerMode=Ft,za.commands=Xo,za.keyMap=jo,za.keyName=Wo,za.isModifierKey=zo,za.lookupKey=Bo,za.normalizeKeyMap=qo,za.StringStream=Ot,za.SharedTextMarker=wo,za.TextMarker=bo,za.LineWidget=go,za.e_preventDefault=st,za.e_stopPropagation=lt,za.e_stop=ut,za.addClass=D,za.contains=E,za.rmClass=T,za.keyNames=Do,ka.version="5.35.0",ka},e.exports=r()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(3),i=n.n(r),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(t,n){s(this,e),this.shell=t,this.options=n}return o(e,[{key:"environment",value:function(){return this.shell.environment()}},{key:"isProduction",value:function(){return this.shell.isProduction()}},{key:"serverInfo",value:function(){return this.shell.serverInfo()}},{key:"pause",value:function(){this.shell.pause()}},{key:"resume",value:function(){this.shell.resume()}},{key:"focus",value:function(){this.shell.focus()}},{key:"scrollToBottom",value:function(){this.shell.scrollToBottom()}},{key:"style",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.shell.style(e,t)}},{key:"echo",value:function(e){this.shell.echo(e)}},{key:"line",value:function(e){this.shell.line(e)}},{key:"error",value:function(e){this.shell.error(e)}},{key:"ask",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.shell.ask(e,t)}}]),e}(),c=function(e){function t(e,n,r){s(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r));return i.name=e,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l),o(t,[{key:"is",value:function(e){return e===this.name}},{key:"handle",value:function(){var e=a(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.sendRequest([\'--command="\'+t.join(" ")+\'"\']);case 3:n=e.sent,this.line(n),this.serverInfo(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),this.error(e.t0.message),this.serverInfo();case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"confirmToProceed",value:function(e){return this.shell.confirmToProceed(this.name).includes(e)}},{key:"sendRequest",value:function(){var e=a(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.shell.sendRequest(this.name,t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}()},function(e,t,n){var r;!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,i){"use strict";var o=[],a=n.document,s=Object.getPrototypeOf,l=o.slice,c=o.concat,u=o.push,f=o.indexOf,p={},d=p.toString,h=p.hasOwnProperty,m=h.toString,g=m.call(Object),v={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},b=function(e){return null!=e&&e===e.window},x={type:!0,src:!0,noModule:!0};function w(e,t,n){var r,i=(t=t||a).createElement("script");if(i.text=e,n)for(r in x)n[r]&&(i[r]=n[r]);t.head.appendChild(i).parentNode.removeChild(i)}function k(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?p[d.call(e)]||"object":typeof e}var _=function(e,t){return new _.fn.init(e,t)},C=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;function S(e){var t=!!e&&"length"in e&&e.length,n=k(e);return!y(e)&&!b(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}_.fn=_.prototype={jquery:"3.3.1",constructor:_,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=_.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return _.each(this,e)},map:function(e){return this.pushStack(_.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},_.extend=_.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(c&&r&&(_.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&_.isPlainObject(n)?n:{},a[t]=_.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},_.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e))&&(!(t=s(e))||"function"==typeof(n=h.call(t,"constructor")&&t.constructor)&&m.call(n)===g)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){w(e)},each:function(e,t){var n,r=0;if(S(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(C,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(S(Object(e))?_.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:f.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(S(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return c.apply([],a)},guid:1,support:v}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=o[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){p["[object "+t+"]"]=t.toLowerCase()});var T=function(e){var t,n,r,i,o,a,s,l,c,u,f,p,d,h,m,g,v,y,b,x="sizzle"+1*new Date,w=e.document,k=0,_=0,C=ae(),S=ae(),T=ae(),A=function(e,t){return e===t&&(f=!0),0},L={}.hasOwnProperty,M=[],F=M.pop,E=M.push,O=M.push,D=M.slice,N=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\\\x20\\\\t\\\\r\\\\n\\\\f]",j="(?:\\\\\\\\.|[\\\\w-]|[^\\0-\\\\xa0])+",I="\\\\["+R+"*("+j+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:\'((?:\\\\\\\\.|[^\\\\\\\\\'])*)\'|\\"((?:\\\\\\\\.|[^\\\\\\\\\\"])*)\\"|("+j+"))|)"+R+"*\\\\]",q=":("+j+")(?:\\\\(((\'((?:\\\\\\\\.|[^\\\\\\\\\'])*)\'|\\"((?:\\\\\\\\.|[^\\\\\\\\\\"])*)\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|"+I+")*)|.*)\\\\)|)",B=new RegExp(R+"+","g"),z=new RegExp("^"+R+"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)"+R+"+$","g"),H=new RegExp("^"+R+"*,"+R+"*"),W=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),$=new RegExp("="+R+"*([^\\\\]\'\\"]*?)"+R+"*\\\\]","g"),K=new RegExp(q),U=new RegExp("^"+j+"$"),V={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\("+R+"*(even|odd|(([+-]|)(\\\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\\\d+)|))"+R+"*\\\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\("+R+"*((?:-\\\\d)?\\\\d*)"+R+"*\\\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,X=/^h\\d$/i,J=/^[^{]+\\{\\s*\\[native \\w/,Y=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,Q=/[+~]/,Z=new RegExp("\\\\\\\\([\\\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ne=function(e,t){return t?"\\0"===e?"ï¿½":e.slice(0,-1)+"\\\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\\\"+e},re=function(){p()},ie=ye(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{O.apply(M=D.call(w.childNodes),w.childNodes),M[w.childNodes.length].nodeType}catch(e){O={apply:M.length?function(e,t){E.apply(e,D.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function oe(e,t,r,i){var o,s,c,u,f,h,v,y=t&&t.ownerDocument,k=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==k&&9!==k&&11!==k)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,m)){if(11!==k&&(f=Y.exec(e)))if(o=f[1]){if(9===k){if(!(c=t.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(y&&(c=y.getElementById(o))&&b(t,c)&&c.id===o)return r.push(c),r}else{if(f[2])return O.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!T[e+" "]&&(!g||!g.test(e))){if(1!==k)y=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(te,ne):t.setAttribute("id",u=x),s=(h=a(e)).length;s--;)h[s]="#"+u+" "+ve(h[s]);v=h.join(","),y=Q.test(e)&&me(t.parentNode)||t}if(v)try{return O.apply(r,y.querySelectorAll(v)),r}catch(e){}finally{u===x&&t.removeAttribute("id")}}}return l(e.replace(z,"$1"),t,r,i)}function ae(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function se(e){return e[x]=!0,e}function le(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function ue(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(h=(d=a).documentElement,m=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(d.getElementsByClassName),n.getById=le(function(e){return h.appendChild(e).id=x,!d.getElementsByName||!d.getElementsByName(x).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=J.test(d.querySelectorAll))&&(le(function(e){h.appendChild(e).innerHTML="<a id=\'"+x+"\'></a><select id=\'"+x+"-\\r\\\\\' msallowcapture=\'\'><option selected=\'\'></option></select>",e.querySelectorAll("[msallowcapture^=\'\']").length&&g.push("[*^$]="+R+"*(?:\'\'|\\"\\")"),e.querySelectorAll("[selected]").length||g.push("\\\\["+R+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+x+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href=\'\' disabled=\'disabled\'></a><select disabled=\'disabled\'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+R+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=J.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!=\'\']:x"),v.push("!=",q)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(h.compareDocumentPosition),b=t||J.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&b(w,e)?-1:t===d||t.ownerDocument===w&&b(w,t)?1:u?N(u,e)-N(u,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:u?N(u,e)-N(u,t):0;if(i===o)return ue(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ue(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace($,"=\'$1\']"),n.matchesSelector&&m&&!T[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,d,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),b(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&L.call(r.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==o?o:n.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(A),f){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return u=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&K.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&C(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(B," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,f,p,d,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(o){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(b=(d=(c=(u=(f=(p=g)[x]||(p[x]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===k&&c[1])&&c[2],p=d&&g.childNodes[d];p=++d&&p&&p[m]||(b=d=0)||h.pop();)if(1===p.nodeType&&++b&&p===t){u[e]=[k,d,b];break}}else if(y&&(b=d=(c=(u=(f=(p=t)[x]||(p[x]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===k&&c[1]),!1===b)for(;(p=++d&&p&&p[m]||(b=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++b||(y&&((u=(f=p[x]||(p[x]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[k,b]),p!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[x]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=N(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(z,"$1"));return r[x]?se(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return U.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ge(){}function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=_++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var c,u,f,p=[k,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(u=(f=t[x]||(t[x]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=u[o])&&c[0]===k&&c[1]===s)return p[2]=c[2];if(u[o]=p,p[2]=e(t,n,l))return!0}return!1}}function be(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xe(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function we(e,t,n,r,i,o){return r&&!r[x]&&(r=we(r)),i&&!i[x]&&(i=we(i,o)),se(function(o,a,s,l){var c,u,f,p=[],d=[],h=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:xe(m,p,e,s,l),v=n?i||(o?e:h||r)?[]:a:g;if(n&&n(g,v,s,l),r)for(c=xe(v,d),r(c,[],s,l),u=c.length;u--;)(f=c[u])&&(v[d[u]]=!(g[d[u]]=f));if(o){if(i||e){if(i){for(c=[],u=v.length;u--;)(f=v[u])&&c.push(g[u]=f);i(null,v=[],c,l)}for(u=v.length;u--;)(f=v[u])&&(c=i?N(o,f):p[u])>-1&&(o[c]=!(a[c]=f))}}else v=xe(v===a?v.splice(h,v.length):v),i?i(null,a,v,l):O.apply(a,v)})}function ke(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],l=a?1:0,u=ye(function(e){return e===t},s,!0),f=ye(function(e){return N(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==c)||((t=n).nodeType?u(e,n,r):f(e,n,r));return t=null,i}];l<o;l++)if(n=r.relative[e[l].type])p=[ye(be(p),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[x]){for(i=++l;i<o&&!r.relative[e[i].type];i++);return we(l>1&&be(p),l>1&&ve(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,l<i&&ke(e.slice(l,i)),i<o&&ke(e=e.slice(i)),i<o&&ve(e))}p.push(n)}return be(p)}return ge.prototype=r.filters=r.pseudos,r.setFilters=new ge,a=oe.tokenize=function(e,t){var n,i,o,a,s,l,c,u=S[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=r.preFilter;s;){for(a in n&&!(i=H.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=W.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(z," ")}),s=s.slice(n.length)),r.filter)!(i=V[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):S(e,l).slice(0)},s=oe.compile=function(e,t){var n,i=[],o=[],s=T[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=ke(t[n]))[x]?i.push(s):o.push(s);(s=T(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,l,u){var f,h,g,v=0,y="0",b=o&&[],x=[],w=c,_=o||i&&r.find.TAG("*",u),C=k+=null==w?1:Math.random()||.1,S=_.length;for(u&&(c=a===d||a||u);y!==S&&null!=(f=_[y]);y++){if(i&&f){for(h=0,a||f.ownerDocument===d||(p(f),s=!m);g=e[h++];)if(g(f,a||d,s)){l.push(f);break}u&&(k=C)}n&&((f=!g&&f)&&v--,o&&b.push(f))}if(v+=y,n&&y!==v){for(h=0;g=t[h++];)g(b,x,a,s);if(o){if(v>0)for(;y--;)b[y]||x[y]||(x[y]=F.call(l));x=xe(x)}O.apply(l,x),u&&!o&&x.length>0&&v+t.length>1&&oe.uniqueSort(l)}return u&&(k=C,c=w),b};return n?se(o):o}(o,i))).selector=e}return s},l=oe.select=function(e,t,n,i){var o,l,c,u,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((l=d[0]=d[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&r.relative[l[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(Z,ee),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=V.needsContext.test(e)?0:l.length;o--&&(c=l[o],!r.relative[u=c.type]);)if((f=r.find[u])&&(i=f(c.matches[0].replace(Z,ee),Q.test(l[0].type)&&me(t.parentNode)||t))){if(l.splice(o,1),!(e=i.length&&ve(l)))return O.apply(n,i),n;break}}return(p||s(e,d))(i,t,!m,n,!t||Q.test(e)&&me(t.parentNode)||t),n},n.sortStable=x.split("").sort(A).join("")===x,n.detectDuplicates=!!f,p(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href=\'#\'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ce(P,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(n);_.find=T,_.expr=T.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=T.uniqueSort,_.text=T.getText,_.isXMLDoc=T.isXML,_.contains=T.contains,_.escapeSelector=T.escape;var A=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&_(e).is(n))break;r.push(e)}return r},L=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},M=_.expr.match.needsContext;function F(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var E=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function O(e,t,n){return y(t)?_.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?_.grep(e,function(e){return e===t!==n}):"string"!=typeof t?_.grep(e,function(e){return f.call(t,e)>-1!==n}):_.filter(t,e,n)}_.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?_.find.matchesSelector(r,e)?[r]:[]:_.find.matches(e,_.grep(t,function(e){return 1===e.nodeType}))},_.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(_(e).filter(function(){for(t=0;t<r;t++)if(_.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)_.find(e,i[t],n);return r>1?_.uniqueSort(n):n},filter:function(e){return this.pushStack(O(this,e||[],!1))},not:function(e){return this.pushStack(O(this,e||[],!0))},is:function(e){return!!O(this,"string"==typeof e&&M.test(e)?_(e):e||[],!1).length}});var D,N=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(_.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:N.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof _?t[0]:t,_.merge(this,_.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:a,!0)),E.test(r[1])&&_.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=a.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(_):_.makeArray(e,this)}).prototype=_.fn,D=_(a);var P=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};function j(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}_.fn.extend({has:function(e){var t=_(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(_.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&_(e);if(!M.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&_.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?_.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?f.call(_(e),this[0]):f.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),_.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return A(e,"parentNode")},parentsUntil:function(e,t,n){return A(e,"parentNode",n)},next:function(e){return j(e,"nextSibling")},prev:function(e){return j(e,"previousSibling")},nextAll:function(e){return A(e,"nextSibling")},prevAll:function(e){return A(e,"previousSibling")},nextUntil:function(e,t,n){return A(e,"nextSibling",n)},prevUntil:function(e,t,n){return A(e,"previousSibling",n)},siblings:function(e){return L((e.parentNode||{}).firstChild,e)},children:function(e){return L(e.firstChild)},contents:function(e){return F(e,"iframe")?e.contentDocument:(F(e,"template")&&(e=e.content||e),_.merge([],e.childNodes))}},function(e,t){_.fn[e]=function(n,r){var i=_.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=_.filter(r,i)),this.length>1&&(R[e]||_.uniqueSort(i),P.test(e)&&i.reverse()),this.pushStack(i)}});var I=/[^\\x20\\t\\r\\n\\f]+/g;function q(e){return e}function B(e){throw e}function z(e,t,n,r){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(n):e&&y(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}_.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return _.each(e.match(I)||[],function(e,n){t[n]=!0}),t}(e):_.extend({},e);var t,n,r,i,o=[],a=[],s=-1,l=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){_.each(n,function(n,r){y(r)?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==k(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return _.each(arguments,function(e,t){for(var n;(n=_.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?_.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},_.extend({Deferred:function(e){var t=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return _.Deferred(function(n){_.each(t,function(t,r){var i=y(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,r,i){var o=0;function a(e,t,r,i){return function(){var s=this,l=arguments,c=function(){var n,c;if(!(e<o)){if((n=r.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(c)?i?c.call(n,a(o,t,q,i),a(o,t,B,i)):(o++,c.call(n,a(o,t,q,i),a(o,t,B,i),a(o,t,q,t.notifyWith))):(r!==q&&(s=void 0,l=[n]),(i||t.resolveWith)(s,l))}},u=i?c:function(){try{c()}catch(n){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(n,u.stackTrace),e+1>=o&&(r!==B&&(s=void 0,l=[n]),t.rejectWith(s,l))}};e?u():(_.Deferred.getStackHook&&(u.stackTrace=_.Deferred.getStackHook()),n.setTimeout(u))}}return _.Deferred(function(n){t[0][3].add(a(0,n,y(i)?i:q,n.notifyWith)),t[1][3].add(a(0,n,y(e)?e:q)),t[2][3].add(a(0,n,y(r)?r:B))}).promise()},promise:function(e){return null!=e?_.extend(e,i):i}},o={};return _.each(t,function(e,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add(function(){r=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=l.call(arguments),o=_.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?l.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(z(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();for(;n--;)z(i[n],a(n),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&H.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},_.readyException=function(e){n.setTimeout(function(){throw e})};var W=_.Deferred();function $(){a.removeEventListener("DOMContentLoaded",$),n.removeEventListener("load",$),_.ready()}_.fn.ready=function(e){return W.then(e).catch(function(e){_.readyException(e)}),this},_.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--_.readyWait:_.isReady)||(_.isReady=!0,!0!==e&&--_.readyWait>0||W.resolveWith(a,[_]))}}),_.ready.then=W.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(_.ready):(a.addEventListener("DOMContentLoaded",$),n.addEventListener("load",$));var K=function(e,t,n,r,i,o,a){var s=0,l=e.length,c=null==n;if("object"===k(n))for(s in i=!0,n)K(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,y(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(_(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):l?t(e[0],n):o},U=/^-ms-/,V=/-([a-z])/g;function G(e,t){return t.toUpperCase()}function X(e){return e.replace(U,"ms-").replace(V,G)}var J=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=_.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},J(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(I)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||_.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!_.isEmptyObject(t)}};var Q=new Y,Z=new Y,ee=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}_.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),_.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Z.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=X(r.slice(5)),ne(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Z.set(this,e)}):K(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=Z.get(o,e))?n:void 0!==(n=ne(o,e))?n:void 0;this.each(function(){Z.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),_.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,_.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=_.queue(e,t),r=n.length,i=n.shift(),o=_._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){_.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:_.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),_.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?_.queue(this[0],e):void 0===t?this:this.each(function(){var n=_.queue(this,e,t);_._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&_.dequeue(this,e)})},dequeue:function(e){return this.each(function(){_.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=_.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&_.contains(e.ownerDocument,e)&&"none"===_.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function le(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return _.css(e,t,"")},l=s(),c=n&&n[3]||(_.cssNumber[t]?"":"px"),u=(_.cssNumber[t]||"px"!==c&&+l)&&ie.exec(_.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)_.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,_.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}var ce={};function ue(e){var t,n=e.ownerDocument,r=e.nodeName,i=ce[r];return i||(t=n.body.appendChild(n.createElement(r)),i=_.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ce[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Q.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ue(r))):"none"!==n&&(i[o]="none",Q.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}_.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?_(this).show():_(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]+)/i,he=/^$|^module$|\\/(?:java|ecma)script/i,me={option:[1,"<select multiple=\'multiple\'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&F(e,t)?_.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td;var ye,be,xe=/<|&#?\\w+;/;function we(e,t,n,r,i){for(var o,a,s,l,c,u,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===k(o))_.merge(p,o.nodeType?[o]:o);else if(xe.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),l=me[s]||me._default,a.innerHTML=l[1]+_.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;_.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));for(f.textContent="",d=0;o=p[d++];)if(r&&_.inArray(o,r)>-1)i&&i.push(o);else if(c=_.contains(o.ownerDocument,o),a=ge(f.appendChild(o),"script"),c&&ve(a),n)for(u=0;o=a[u++];)he.test(o.type||"")&&n.push(o);return f}ye=a.createDocumentFragment().appendChild(a.createElement("div")),(be=a.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),ye.appendChild(be),v.checkClone=ye.cloneNode(!0).cloneNode(!0).lastChild.checked,ye.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ye.cloneNode(!0).lastChild.defaultValue;var ke=a.documentElement,_e=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\\.(.+)|)/;function Te(){return!0}function Ae(){return!1}function Le(){try{return a.activeElement}catch(e){}}function Me(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Me(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ae;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return _().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=_.guid++)),e.each(function(){_.event.add(this,t,i,r,n)})}_.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,c,u,f,p,d,h,m,g=Q.get(e);if(g)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&_.find.matchesSelector(ke,i),n.guid||(n.guid=_.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==_&&_.event.triggered!==t.type?_.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(I)||[""]).length;c--;)d=m=(s=Se.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=_.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=_.event.special[d]||{},u=_.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&_.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=l[d])||((p=l[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,u):p.push(u),_.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,c,u,f,p,d,h,m,g=Q.hasData(e)&&Q.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(I)||[""]).length;c--;)if(d=m=(s=Se.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),d){for(f=_.event.special[d]||{},p=l[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\\\.)"+h.join("\\\\.(?:.*\\\\.|)")+"(\\\\.|$)"),a=o=p.length;o--;)u=p[o],!i&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(p.splice(o,1),u.selector&&p.delegateCount--,f.remove&&f.remove.call(e,u));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,g.handle)||_.removeEvent(e,d,g.handle),delete l[d])}else for(d in l)_.event.remove(e,d+t[c],n,r,!0);_.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=_.event.fix(e),l=new Array(arguments.length),c=(Q.get(this,"events")||{})[s.type]||[],u=_.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,s)){for(a=_.event.handlers.call(this,s,c),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((_.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?_(i,this).index(c)>-1:_.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(_.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[_.expando]?e:new _.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Le()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Le()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&F(this,"input"))return this.click(),!1},_default:function(e){return F(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},_.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},_.Event=function(e,t){if(!(this instanceof _.Event))return new _.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Te:Ae,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&_.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:Ae,isPropagationStopped:Ae,isImmediatePropagationStopped:Ae,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Te,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Te,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Te,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},_.event.addProp),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){_.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||_.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),_.fn.extend({on:function(e,t,n,r){return Me(this,e,t,n,r)},one:function(e,t,n,r){return Me(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,_(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ae),this.each(function(){_.event.remove(this,e,n,t)})}});var Fe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)[^>]*)\\/>/gi,Ee=/<script|<style|<link/i,Oe=/checked\\s*(?:[^=]|=\\s*.checked.)/i,De=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function Ne(e,t){return F(e,"table")&&F(11!==t.nodeType?t:t.firstChild,"tr")&&_(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,t){var n,r,i,o,a,s,l,c;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),c=o.events))for(i in delete a.handle,a.events={},c)for(n=0,r=c[i].length;n<r;n++)_.event.add(t,i,c[i][n]);Z.hasData(e)&&(s=Z.access(e),l=_.extend({},s),Z.set(t,l))}}function Ie(e,t,n,r){t=c.apply([],t);var i,o,a,s,l,u,f=0,p=e.length,d=p-1,h=t[0],m=y(h);if(m||p>1&&"string"==typeof h&&!v.checkClone&&Oe.test(h))return e.each(function(i){var o=e.eq(i);m&&(t[0]=h.call(this,i,o.html())),Ie(o,t,n,r)});if(p&&(o=(i=we(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=_.map(ge(i,"script"),Pe)).length;f<p;f++)l=i,f!==d&&(l=_.clone(l,!0,!0),s&&_.merge(a,ge(l,"script"))),n.call(e[f],l,f);if(s)for(u=a[a.length-1].ownerDocument,_.map(a,Re),f=0;f<s;f++)l=a[f],he.test(l.type||"")&&!Q.access(l,"globalEval")&&_.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?_._evalUrl&&_._evalUrl(l.src):w(l.textContent.replace(De,""),u,l))}return e}function qe(e,t,n){for(var r,i=t?_.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||_.cleanData(ge(r)),r.parentNode&&(n&&_.contains(r.ownerDocument,r)&&ve(ge(r,"script")),r.parentNode.removeChild(r));return e}_.extend({htmlPrefilter:function(e){return e.replace(Fe,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,l,c,u=e.cloneNode(!0),f=_.contains(e.ownerDocument,e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||_.isXMLDoc(e)))for(a=ge(u),r=0,i=(o=ge(e)).length;r<i;r++)s=o[r],l=a[r],void 0,"input"===(c=l.nodeName.toLowerCase())&&pe.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ge(e),a=a||ge(u),r=0,i=o.length;r<i;r++)je(o[r],a[r]);else je(e,u);return(a=ge(u,"script")).length>0&&ve(a,!f&&ge(e,"script")),u},cleanData:function(e){for(var t,n,r,i=_.event.special,o=0;void 0!==(n=e[o]);o++)if(J(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?_.event.remove(n,r):_.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),_.fn.extend({detach:function(e){return qe(this,e,!0)},remove:function(e){return qe(this,e)},text:function(e){return K(this,function(e){return void 0===e?_.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(_.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return _.clone(this,e,t)})},html:function(e){return K(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ee.test(e)&&!me[(de.exec(e)||["",""])[1].toLowerCase()]){e=_.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(_.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ie(this,arguments,function(t){var n=this.parentNode;_.inArray(this,e)<0&&(_.cleanData(ge(this)),n&&n.replaceChild(t,this))},e)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){_.fn[e]=function(e){for(var n,r=[],i=_(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),_(i[a])[t](n),u.apply(r,n.get());return this.pushStack(r)}});var Be=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),ze=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},He=new RegExp(oe.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||ze(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||_.contains(e.ownerDocument,e)||(a=_.style(e,t)),!v.pixelBoxStyles()&&Be.test(a)&&He.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ke.appendChild(c).appendChild(u);var e=n.getComputedStyle(u);r="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",s=36===t(e.right),i=36===t(e.width),u.style.position="absolute",o=36===u.offsetWidth||"absolute",ke.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,s,l,c=a.createElement("div"),u=a.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===u.style.backgroundClip,_.extend(v,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o}}))}();var Ke=/^(none|table(?!-c[ea]).+)/,Ue=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},Xe=["Webkit","Moz","ms"],Je=a.createElement("div").style;function Ye(e){var t=_.cssProps[e];return t||(t=_.cssProps[e]=function(e){if(e in Je)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Xe.length;n--;)if((e=Xe[n]+t)in Je)return e}(e)||e),t}function Qe(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=_.css(e,n+oe[a],!0,i)),r?("content"===n&&(l-=_.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(l-=_.css(e,"border"+oe[a]+"Width",!0,i))):(l+=_.css(e,"padding"+oe[a],!0,i),"padding"!==n?l+=_.css(e,"border"+oe[a]+"Width",!0,i):s+=_.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))),l}function et(e,t,n){var r=ze(e),i=We(e,t,r),o="border-box"===_.css(e,"boxSizing",!1,r),a=o;if(Be.test(i)){if(!n)return i;i="auto"}return a=a&&(v.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===_.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?"border":"content"),a,r,i)+"px"}function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}_.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),l=Ue.test(t),c=e.style;if(l||(t=Ye(s)),a=_.cssHooks[t]||_.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:c[t];"string"===(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(_.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ue.test(t)||(t=Ye(s)),(a=_.cssHooks[t]||_.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),_.each(["height","width"],function(e,t){_.cssHooks[t]={get:function(e,n,r){if(n)return!Ke.test(_.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Ve,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=ze(e),a="border-box"===_.css(e,"boxSizing",!1,o),s=r&&Ze(e,t,r,a,o);return a&&v.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=_.css(e,t)),Qe(0,n,s)}}}),_.cssHooks.marginLeft=$e(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(e,t){_.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(_.cssHooks[e+t].set=Qe)}),_.fn.extend({css:function(e,t){return K(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=ze(e),i=t.length;a<i;a++)o[t[a]]=_.css(e,t[a],!1,r);return o}return void 0!==n?_.style(e,t,n):_.css(e,t)},e,t,arguments.length>1)}}),_.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||_.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(_.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=_.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=_.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){_.fx.step[e.prop]?_.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[_.cssProps[e.prop]]&&!_.cssHooks[e.prop]?e.elem[e.prop]=e.now:_.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},_.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},_.fx=tt.prototype.init,_.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===a.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(at):n.setTimeout(at,_.fx.interval),_.fx.tick())}function st(){return n.setTimeout(function(){nt=void 0}),nt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ut(e,t,n){var r,i,o=0,a=ut.prefilters.length,s=_.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(e,[c,r,n]),r<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:_.extend({},t),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=_.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=_.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(u,c.opts.specialEasing);o<a;o++)if(r=ut.prefilters[o].call(c,e,u,c.opts))return y(r.stop)&&(_._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return _.map(u,ct,c),y(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),_.fx.timer(_.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}_.Animation=_.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(I);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,l,c,u,f="width"in t||"height"in t,p=this,d={},h=e.style,m=e.nodeType&&ae(e),g=Q.get(e,"fxshow");for(r in n.queue||(null==(a=_._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,_.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}d[r]=g&&g[r]||_.style(e,r)}if((l=!_.isEmptyObject(t))||!_.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=g&&g.display)&&(c=Q.get(e,"display")),"none"===(u=_.css(e,"display"))&&(c?u=c:(fe([e],!0),c=e.style.display||c,u=_.css(e,"display"),fe([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===_.css(e,"float")&&(l||(p.done(function(){h.display=c}),null==c&&(u=h.display,c="none"===u?"":u)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),l=!1,d)l||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:c}),o&&(g.hidden=!m),m&&fe([e],!0),p.done(function(){for(r in m||fe([e]),Q.remove(e,"fxshow"),d)_.style(e,r,d[r])})),l=ct(m?g[r]:0,r,p),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),_.speed=function(e,t,n){var r=e&&"object"==typeof e?_.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return _.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in _.fx.speeds?r.duration=_.fx.speeds[r.duration]:r.duration=_.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&_.dequeue(this,r.queue)},r},_.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=_.isEmptyObject(e),o=_.speed(t,n,r),a=function(){var t=ut(this,_.extend({},e),o);(i||Q.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=_.timers,a=Q.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||_.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Q.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=_.timers,a=r?r.length:0;for(n.finish=!0,_.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),_.each(["toggle","show","hide"],function(e,t){var n=_.fn[t];_.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(lt(t,!0),e,r,i)}}),_.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){_.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),_.timers=[],_.fx.tick=function(){var e,t=0,n=_.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||_.fx.stop(),nt=void 0},_.fx.timer=function(e){_.timers.push(e),_.fx.start()},_.fx.interval=13,_.fx.start=function(){rt||(rt=!0,at())},_.fx.stop=function(){rt=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(e,t){return e=_.fx&&_.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}})},function(){var e=a.createElement("input"),t=a.createElement("select").appendChild(a.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=a.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var ft,pt=_.expr.attrHandle;_.fn.extend({attr:function(e,t){return K(this,_.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){_.removeAttr(this,e)})}}),_.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?_.prop(e,t,n):(1===o&&_.isXMLDoc(e)||(i=_.attrHooks[t.toLowerCase()]||(_.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void _.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=_.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&F(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(I);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?_.removeAttr(e,n):e.setAttribute(n,n),n}},_.each(_.expr.match.bool.source.match(/\\w+/g),function(e,t){var n=pt[t]||_.find.attr;pt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=pt[a],pt[a]=i,i=null!=n(e,t,r)?a:null,pt[a]=o),i}});var dt=/^(?:input|select|textarea|button)$/i,ht=/^(?:a|area)$/i;function mt(e){return(e.match(I)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(I)||[]}_.fn.extend({prop:function(e,t){return K(this,_.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[_.propFix[e]||e]})}}),_.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&_.isXMLDoc(e)||(t=_.propFix[t]||t,i=_.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=_.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||ht.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(_.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this}),_.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,l=0;if(y(e))return this.each(function(t){_(this).addClass(e.call(this,t,gt(this)))});if((t=vt(e)).length)for(;n=this[l++];)if(i=gt(n),r=1===n.nodeType&&" "+mt(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,l=0;if(y(e))return this.each(function(t){_(this).removeClass(e.call(this,t,gt(this)))});if(!arguments.length)return this.attr("class","");if((t=vt(e)).length)for(;n=this[l++];)if(i=gt(n),r=1===n.nodeType&&" "+mt(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):y(e)?this.each(function(n){_(this).toggleClass(e.call(this,n,gt(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=_(this),a=vt(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=gt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+mt(gt(n))+" ").indexOf(t)>-1)return!0;return!1}});var yt=/\\r/g;_.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=y(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,_(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=_.map(i,function(e){return null==e?"":e+""})),(t=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=_.valHooks[i.type]||_.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(yt,""):null==n?"":n:void 0}}),_.extend({valHooks:{option:{get:function(e){var t=_.find.attr(e,"value");return null!=t?t:mt(_.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!F(n.parentNode,"optgroup"))){if(t=_(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=_.makeArray(t),a=i.length;a--;)((r=i[a]).selected=_.inArray(_.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=_.inArray(_(e).val(),t)>-1}},v.checkOn||(_.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in n;var bt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};_.extend(_.event,{trigger:function(e,t,r,i){var o,s,l,c,u,f,p,d,m=[r||a],g=h.call(e,"type")?e.type:e,v=h.call(e,"namespace")?e.namespace.split("."):[];if(s=d=l=r=r||a,3!==r.nodeType&&8!==r.nodeType&&!bt.test(g+_.event.triggered)&&(g.indexOf(".")>-1&&(g=(v=g.split(".")).shift(),v.sort()),u=g.indexOf(":")<0&&"on"+g,(e=e[_.expando]?e:new _.Event(g,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\\\.)"+v.join("\\\\.(?:.*\\\\.|)")+"(\\\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:_.makeArray(t,[e]),p=_.event.special[g]||{},i||!p.trigger||!1!==p.trigger.apply(r,t))){if(!i&&!p.noBubble&&!b(r)){for(c=p.delegateType||g,bt.test(c+g)||(s=s.parentNode);s;s=s.parentNode)m.push(s),l=s;l===(r.ownerDocument||a)&&m.push(l.defaultView||l.parentWindow||n)}for(o=0;(s=m[o++])&&!e.isPropagationStopped();)d=s,e.type=o>1?c:p.bindType||g,(f=(Q.get(s,"events")||{})[e.type]&&Q.get(s,"handle"))&&f.apply(s,t),(f=u&&s[u])&&f.apply&&J(s)&&(e.result=f.apply(s,t),!1===e.result&&e.preventDefault());return e.type=g,i||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(m.pop(),t)||!J(r)||u&&y(r[g])&&!b(r)&&((l=r[u])&&(r[u]=null),_.event.triggered=g,e.isPropagationStopped()&&d.addEventListener(g,xt),r[g](),e.isPropagationStopped()&&d.removeEventListener(g,xt),_.event.triggered=void 0,l&&(r[u]=l)),e.result}},simulate:function(e,t,n){var r=_.extend(new _.Event,n,{type:e,isSimulated:!0});_.event.trigger(r,null,t)}}),_.fn.extend({trigger:function(e,t){return this.each(function(){_.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return _.event.trigger(e,t,n,!0)}}),v.focusin||_.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){_.event.simulate(t,e.target,_.event.fix(e))};_.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Q.access(r,t);i||r.addEventListener(e,n,!0),Q.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Q.access(r,t)-1;i?Q.access(r,t,i):(r.removeEventListener(e,n,!0),Q.remove(r,t))}}});var wt=n.location,kt=Date.now(),_t=/\\?/;_.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||_.error("Invalid XML: "+e),t};var Ct=/\\[\\]$/,St=/\\r?\\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function Lt(e,t,n,r){var i;if(Array.isArray(t))_.each(t,function(t,i){n||Ct.test(e)?r(e,i):Lt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==k(t))r(e,t);else for(i in t)Lt(e+"["+i+"]",t[i],n,r)}_.param=function(e,t){var n,r=[],i=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!_.isPlainObject(e))_.each(e,function(){i(this.name,this.value)});else for(n in e)Lt(n,e[n],t,i);return r.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=_.prop(this,"elements");return e?_.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!_(this).is(":disabled")&&At.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=_(this).val();return null==n?null:Array.isArray(n)?_.map(n,function(e){return{name:t.name,value:e.replace(St,"\\r\\n")}}):{name:t.name,value:n.replace(St,"\\r\\n")}}).get()}});var Mt=/%20/g,Ft=/#.*$/,Et=/([?&])_=[^&]*/,Ot=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Dt=/^(?:GET|HEAD)$/,Nt=/^\\/\\//,Pt={},Rt={},jt="*/".concat("*"),It=a.createElement("a");function qt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(I)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Bt(e,t,n,r){var i={},o=e===Rt;function a(s){var l;return i[s]=!0,_.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||o||i[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),l}return a(t.dataTypes[0])||!i["*"]&&a("*")}function zt(e,t){var n,r,i=_.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&_.extend(!0,e,r),e}It.href=wt.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,_.ajaxSettings),t):zt(_.ajaxSettings,e)},ajaxPrefilter:qt(Pt),ajaxTransport:qt(Rt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,l,c,u,f,p,d,h=_.ajaxSetup({},t),m=h.context||h,g=h.context&&(m.nodeType||m.jquery)?_(m):_.event,v=_.Deferred(),y=_.Callbacks("once memory"),b=h.statusCode||{},x={},w={},k="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(u){if(!s)for(s={};t=Ot.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==u&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)C.always(e[C.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||k;return r&&r.abort(t),S(0,t),this}};if(v.promise(C),h.url=((e||h.url||wt.href)+"").replace(Nt,wt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(I)||[""],null==h.crossDomain){c=a.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=It.protocol+"//"+It.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=_.param(h.data,h.traditional)),Bt(Pt,h,t,C),u)return C;for(p in(f=_.event&&h.global)&&0==_.active++&&_.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Dt.test(h.type),i=h.url.replace(Ft,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Mt,"+")):(d=h.url.slice(i.length),h.data&&(h.processData||"string"==typeof h.data)&&(i+=(_t.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(i=i.replace(Et,"$1"),d=(_t.test(i)?"&":"?")+"_="+kt+++d),h.url=i+d),h.ifModified&&(_.lastModified[i]&&C.setRequestHeader("If-Modified-Since",_.lastModified[i]),_.etag[i]&&C.setRequestHeader("If-None-Match",_.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&C.setRequestHeader("Content-Type",h.contentType),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+jt+"; q=0.01":""):h.accepts["*"]),h.headers)C.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(m,C,h)||u))return C.abort();if(k="abort",y.add(h.complete),C.done(h.success),C.fail(h.error),r=Bt(Rt,h,t,C)){if(C.readyState=1,f&&g.trigger("ajaxSend",[C,h]),u)return C;h.async&&h.timeout>0&&(l=n.setTimeout(function(){C.abort("timeout")},h.timeout));try{u=!1,r.send(x,S)}catch(e){if(u)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,a,s){var c,p,d,x,w,k=t;u||(u=!0,l&&n.clearTimeout(l),r=void 0,o=s||"",C.readyState=e>0?4:0,c=e>=200&&e<300||304===e,a&&(x=function(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(h,C,a)),x=function(e,t,n,r){var i,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(h,x,C,c),c?(h.ifModified&&((w=C.getResponseHeader("Last-Modified"))&&(_.lastModified[i]=w),(w=C.getResponseHeader("etag"))&&(_.etag[i]=w)),204===e||"HEAD"===h.type?k="nocontent":304===e?k="notmodified":(k=x.state,p=x.data,c=!(d=x.error))):(d=k,!e&&k||(k="error",e<0&&(e=0))),C.status=e,C.statusText=(t||k)+"",c?v.resolveWith(m,[p,k,C]):v.rejectWith(m,[C,k,d]),C.statusCode(b),b=void 0,f&&g.trigger(c?"ajaxSuccess":"ajaxError",[C,h,c?p:d]),y.fireWith(m,[C,k]),f&&(g.trigger("ajaxComplete",[C,h]),--_.active||_.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,n){return _.get(e,t,n,"json")},getScript:function(e,t){return _.get(e,void 0,t,"script")}}),_.each(["get","post"],function(e,t){_[t]=function(e,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),_.ajax(_.extend({url:e,type:t,dataType:i,data:n,success:r},_.isPlainObject(e)&&e))}}),_._evalUrl=function(e){return _.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},_.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=_(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return y(e)?this.each(function(t){_(this).wrapInner(e.call(this,t))}):this.each(function(){var t=_(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=y(e);return this.each(function(n){_(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(e){return!_.expr.pseudos.visible(e)},_.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},Wt=_.ajaxSettings.xhr();v.cors=!!Wt&&"withCredentials"in Wt,v.ajax=Wt=!!Wt,_.ajaxTransport(function(e){var t,r;if(v.cors||Wt&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),_.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{"text script":function(e){return _.globalEval(e),e}}}),_.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),_.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(r,i){t=_("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),a.head.appendChild(t[0])},abort:function(){n&&n()}}});var $t,Kt=[],Ut=/(=)\\?(?=&|$)|\\?\\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||_.expando+"_"+kt++;return this[e]=!0,e}}),_.ajaxPrefilter("json jsonp",function(e,t,r){var i,o,a,s=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ut,"$1"+i):!1!==e.jsonp&&(e.url+=(_t.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||_.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?_(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(i)),a&&y(o)&&o(a[0]),a=o=void 0}),"script"}),v.createHTMLDocument=(($t=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$t.childNodes.length),_.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,t.head.appendChild(r)):t=a),i=E.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&_(o).remove(),_.merge([],i.childNodes)));var r,i,o},_.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=mt(e.slice(s)),e=e.slice(0,s)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&_.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?_("<div>").append(_.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){_.fn[t]=function(e){return this.on(t,e)}}),_.expr.pseudos.animated=function(e){return _.grep(_.timers,function(t){return e===t.elem}).length},_.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,c=_.css(e,"position"),u=_(e),f={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=_.css(e,"top"),l=_.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(r=u.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),y(t)&&(t=t.call(e,n,_.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):u.css(f)}},_.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){_.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===_.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===_.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=_(e).offset()).top+=_.css(e,"borderTopWidth",!0),i.left+=_.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-_.css(r,"marginTop",!0),left:t.left-i.left-_.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===_.css(e,"position");)e=e.offsetParent;return e||ke})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;_.fn[e]=function(r){return K(this,function(e,r,i){var o;if(b(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),_.each(["top","left"],function(e,t){_.cssHooks[t]=$e(v.pixelPosition,function(e,n){if(n)return n=We(e,t),Be.test(n)?_(e).position()[t]+"px":n})}),_.each({Height:"height",Width:"width"},function(e,t){_.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){_.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return K(this,function(t,n,i){var o;return b(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?_.css(t,n,s):_.style(t,n,i,s)},t,a?i:void 0,a)}})}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){_.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),_.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),_.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),_.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=l.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(l.call(arguments)))}).guid=e.guid=e.guid||_.guid++,i},_.holdReady=function(e){e?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=F,_.isFunction=y,_.isWindow=b,_.camelCase=X,_.type=k,_.now=Date.now,_.isNumeric=function(e){var t=_.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(r=function(){return _}.apply(t,[]))||(e.exports=r);var Vt=n.jQuery,Gt=n.$;return _.noConflict=function(e){return n.$===_&&(n.$=Gt),e&&n.jQuery===_&&(n.jQuery=Vt),_},i||(n.jQuery=n.$=_),_})},function(e,t,n){e.exports=n(15)},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e){"use strict";var t,n,r=e.Pos;function i(e,t){for(var n=function(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}(e),r=n,i=0;i<t.length;i++)-1==r.indexOf(t.charAt(i))&&(r+=t.charAt(i));return n==r?e:new RegExp(e.source,r)}function o(e,t,n){t=i(t,"g");for(var o=n.line,a=n.ch,s=e.lastLine();o<=s;o++,a=0){t.lastIndex=a;var l=e.getLine(o),c=t.exec(l);if(c)return{from:r(o,c.index),to:r(o,c.index+c[0].length),match:c}}}function a(e,t){for(var n,r=0;;){t.lastIndex=r;var i=t.exec(e);if(!i)return n;if((r=(n=i).index+(n[0].length||1))==e.length)return n}}function s(e,t,n,r){if(e.length==t.length)return n;for(var i=0,o=n+Math.max(0,e.length-t.length);;){if(i==o)return i;var a=i+o>>1,s=r(e.slice(0,a)).length;if(s==n)return a;s>n?o=a:i=a+1}}function l(e,l,c,u){var f;this.atOccurrence=!1,this.doc=e,c=c?e.clipPos(c):r(0,0),this.pos={from:c,to:c},"object"==typeof u?f=u.caseFold:(f=u,u=null),"string"==typeof l?(null==f&&(f=!1),this.matches=function(i,o){return(i?function(e,i,o,a){if(!i.length)return null;var l=a?t:n,c=l(i).split(/\\r|\\n\\r?/);e:for(var u=o.line,f=o.ch,p=e.firstLine()-1+c.length;u>=p;u--,f=-1){var d=e.getLine(u);f>-1&&(d=d.slice(0,f));var h=l(d);if(1==c.length){var m=h.lastIndexOf(c[0]);if(-1==m)continue e;return{from:r(u,s(d,h,m,l)),to:r(u,s(d,h,m+c[0].length,l))}}var g=c[c.length-1];if(h.slice(0,g.length)==g){var v=1;for(o=u-c.length+1;v<c.length-1;v++)if(l(e.getLine(o+v))!=c[v])continue e;var y=e.getLine(u+1-c.length),b=l(y);if(b.slice(b.length-c[0].length)==c[0])return{from:r(u+1-c.length,s(y,b,y.length-c[0].length,l)),to:r(u,s(d,h,g.length,l))}}}}:function(e,i,o,a){if(!i.length)return null;var l=a?t:n,c=l(i).split(/\\r|\\n\\r?/);e:for(var u=o.line,f=o.ch,p=e.lastLine()+1-c.length;u<=p;u++,f=0){var d=e.getLine(u).slice(f),h=l(d);if(1==c.length){var m=h.indexOf(c[0]);if(-1==m)continue e;return o=s(d,h,m,l)+f,{from:r(u,s(d,h,m,l)+f),to:r(u,s(d,h,m+c[0].length,l)+f)}}var g=h.length-c[0].length;if(h.slice(g)==c[0]){for(var v=1;v<c.length-1;v++)if(l(e.getLine(u+v))!=c[v])continue e;var y=e.getLine(u+c.length-1),b=l(y),x=c[c.length-1];if(b.slice(0,x.length)==x)return{from:r(u,s(d,h,g,l)+f),to:r(u+c.length-1,s(y,b,x.length,l))}}}})(e,l,o,f)}):(l=i(l,"gm"),u&&!1===u.multiline?this.matches=function(t,n){return(t?function(e,t,n){t=i(t,"g");for(var o=n.line,s=n.ch,l=e.firstLine();o>=l;o--,s=-1){var c=e.getLine(o);s>-1&&(c=c.slice(0,s));var u=a(c,t);if(u)return{from:r(o,u.index),to:r(o,u.index+u[0].length),match:u}}}:o)(e,l,n)}:this.matches=function(t,n){return(t?function(e,t,n){t=i(t,"gm");for(var o,s=1,l=n.line,c=e.firstLine();l>=c;){for(var u=0;u<s;u++){var f=e.getLine(l--);o=null==o?f.slice(0,n.ch):f+"\\n"+o}s*=2;var p=a(o,t);if(p){var d=o.slice(0,p.index).split("\\n"),h=p[0].split("\\n"),m=l+d.length,g=d[d.length-1].length;return{from:r(m,g),to:r(m+h.length-1,1==h.length?g+h[0].length:h[h.length-1].length),match:p}}}}:function(e,t,n){if(!function(e){return/\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(e.source)}(t))return o(e,t,n);t=i(t,"gm");for(var a,s=1,l=n.line,c=e.lastLine();l<=c;){for(var u=0;u<s&&!(l>c);u++){var f=e.getLine(l++);a=null==a?f:a+"\\n"+f}s*=2,t.lastIndex=n.ch;var p=t.exec(a);if(p){var d=a.slice(0,p.index).split("\\n"),h=p[0].split("\\n"),m=n.line+d.length-1,g=d[d.length-1].length;return{from:r(m,g),to:r(m+h.length-1,1==h.length?g+h[0].length:h[h.length-1].length),match:p}}}})(e,l,n)})}String.prototype.normalize?(t=function(e){return e.normalize("NFD").toLowerCase()},n=function(e){return e.normalize("NFD")}):(t=function(e){return e.toLowerCase()},n=function(e){return e}),l.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var n=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));n&&0==e.cmpPos(n.from,n.to);)t?n.from.ch?n.from=r(n.from.line,n.from.ch-1):n=n.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(r(n.from.line-1))):n.to.ch<this.doc.getLine(n.to.line).length?n.to=r(n.to.line,n.to.ch+1):n=n.to.line==this.doc.lastLine()?null:this.matches(t,r(n.to.line+1,0));if(n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var i=r(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:i,to:i},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var i=e.splitLines(t);this.doc.replaceRange(i,this.pos.from,this.pos.to,n),this.pos.to=r(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,t,n){return new l(this.doc,e,t,n)}),e.defineDocExtension("getSearchCursor",function(e,t,n){return new l(this,e,t,n)}),e.defineExtension("selectMatches",function(t,n){for(var r=[],i=this.getSearchCursor(t,this.getCursor("from"),n);i.findNext()&&!(e.cmpPos(i.to(),this.getCursor("to"))>0);)r.push({anchor:i.from(),head:i.to()});r.length&&this.setSelections(r,0)})})(n(0))},function(e,t,n){(function(e){function t(e,t,n){var r;return(r=e.getWrapperElement().appendChild(document.createElement("div"))).className=n?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?r.innerHTML=t:r.appendChild(t),r}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(r,i,o){o||(o={}),n(this,null);var a=t(this,r,o.bottom),s=!1,l=this;function c(e){if("string"==typeof e)f.value=e;else{if(s)return;s=!0,a.parentNode.removeChild(a),l.focus(),o.onClose&&o.onClose(a)}}var u,f=a.getElementsByTagName("input")[0];return f?(f.focus(),o.value&&(f.value=o.value,!1!==o.selectValueOnOpen&&f.select()),o.onInput&&e.on(f,"input",function(e){o.onInput(e,f.value,c)}),o.onKeyUp&&e.on(f,"keyup",function(e){o.onKeyUp(e,f.value,c)}),e.on(f,"keydown",function(t){o&&o.onKeyDown&&o.onKeyDown(t,f.value,c)||((27==t.keyCode||!1!==o.closeOnEnter&&13==t.keyCode)&&(f.blur(),e.e_stop(t),c()),13==t.keyCode&&i(f.value,t))}),!1!==o.closeOnBlur&&e.on(f,"blur",c)):(u=a.getElementsByTagName("button")[0])&&(e.on(u,"click",function(){c(),l.focus()}),!1!==o.closeOnBlur&&e.on(u,"blur",c),u.focus()),c}),e.defineExtension("openConfirm",function(r,i,o){n(this,null);var a=t(this,r,o&&o.bottom),s=a.getElementsByTagName("button"),l=!1,c=this,u=1;function f(){l||(l=!0,a.parentNode.removeChild(a),c.focus())}s[0].focus();for(var p=0;p<s.length;++p){var d=s[p];!function(t){e.on(d,"click",function(n){e.e_preventDefault(n),f(),t&&t(c)})}(i[p]),e.on(d,"blur",function(){--u,setTimeout(function(){u<=0&&f()},200)}),e.on(d,"focus",function(){++u})}}),e.defineExtension("openNotification",function(r,i){n(this,c);var o,a=t(this,r,i&&i.bottom),s=!1,l=i&&void 0!==i.duration?i.duration:5e3;function c(){s||(s=!0,clearTimeout(o),a.parentNode.removeChild(a))}return e.on(a,"click",function(t){e.e_preventDefault(t),c()}),l&&(o=setTimeout(c,l)),c})})(n(0))},function(e,t,n){(function(e){var t=/MSIE \\d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=e.Pos,r={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function i(e,t,i){var a=e.getLineHandle(t.line),s=t.ch-1,l=i&&i.afterCursor;null==l&&(l=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));var c=!l&&s>=0&&r[a.text.charAt(s)]||r[a.text.charAt(++s)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(i&&i.strict&&u>0!=(s==t.ch))return null;var f=e.getTokenTypeAt(n(t.line,s+1)),p=o(e,n(t.line,s+(u>0?1:0)),u,f||null,i);return null==p?null:{from:n(t.line,s),to:p&&p.pos,match:p&&p.ch==c.charAt(0),forward:u>0}}function o(e,t,i,o,a){for(var s=a&&a.maxScanLineLength||1e4,l=a&&a.maxScanLines||1e3,c=[],u=a&&a.bracketRegex?a.bracketRegex:/[(){}[\\]]/,f=i>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),p=t.line;p!=f;p+=i){var d=e.getLine(p);if(d){var h=i>0?0:d.length-1,m=i>0?d.length:-1;if(!(d.length>s))for(p==t.line&&(h=t.ch-(i<0?1:0));h!=m;h+=i){var g=d.charAt(h);if(u.test(g)&&(void 0===o||e.getTokenTypeAt(n(p,h+1))==o))if(">"==r[g].charAt(1)==i>0)c.push(g);else{if(!c.length)return{pos:n(p,h),ch:g};c.pop()}}}}return p-i!=(i>0?e.lastLine():e.firstLine())&&null}function a(e,r,o){for(var a=e.state.matchBrackets.maxHighlightLineLength||1e3,s=[],l=e.listSelections(),c=0;c<l.length;c++){var u=l[c].empty()&&i(e,l[c].head,o);if(u&&e.getLine(u.from.line).length<=a){var f=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(e.markText(u.from,n(u.from.line,u.from.ch+1),{className:f})),u.to&&e.getLine(u.to.line).length<=a&&s.push(e.markText(u.to,n(u.to.line,u.to.ch+1),{className:f}))}}if(s.length){t&&e.state.focused&&e.focus();var p=function(){e.operation(function(){for(var e=0;e<s.length;e++)s[e].clear()})};if(!r)return p;setTimeout(p,800)}}function s(e){e.operation(function(){e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null),e.state.matchBrackets.currentlyHighlighted=a(e,!1,e.state.matchBrackets)})}e.defineOption("matchBrackets",!1,function(t,n,r){r&&r!=e.Init&&(t.off("cursorActivity",s),t.state.matchBrackets&&t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null)),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",s))}),e.defineExtension("matchBrackets",function(){a(this,!0)}),e.defineExtension("findMatchingBracket",function(e,t,n){return(n||"boolean"==typeof t)&&(n?(n.strict=t,t=n):t=t?{strict:!0}:null),i(this,e,t)}),e.defineExtension("scanForBracket",function(e,t,n,r){return o(this,e,t,n,r)})})(n(0))},function(e,t,n){(function(e){"use strict";function t(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.info=r,this.align=i,this.prev=o}function n(e,n,r,i){var o=e.indented;return e.context&&"statement"==e.context.type&&"statement"!=r&&(o=e.context.indented),e.context=new t(o,n,r,i,null,e.context)}function r(e){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}function i(e,t,n){return"variable"==t.prevToken||"type"==t.prevToken||(!!/\\S(?:[^- ]>|[*\\]])\\s*$|\\*$/.test(e.string.slice(0,n))||(!(!t.typeAtEndOfLine||e.column()!=e.indentation())||void 0))}function o(e){for(;;){if(!e||"top"==e.type)return!0;if("}"==e.type&&"namespace"!=e.prev.info)return!1;e=e.prev}}function a(e){for(var t={},n=e.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function s(e,t){return"function"==typeof e?e(t):e.propertyIsEnumerable(t)}e.defineMode("clike",function(a,l){var c,u,f=a.indentUnit,p=l.statementIndentUnit||f,d=l.dontAlignCalls,h=l.keywords||{},m=l.types||{},g=l.builtin||{},v=l.blockKeywords||{},y=l.defKeywords||{},b=l.atoms||{},x=l.hooks||{},w=l.multiLineStrings,k=!1!==l.indentStatements,_=!1!==l.indentSwitch,C=l.namespaceSeparator,S=l.isPunctuationChar||/[\\[\\]{}\\(\\),;\\:\\.]/,T=l.numberStart||/[\\d\\.]/,A=l.number||/^(?:0x[a-f\\d]+|0b[01]+|(?:\\d+\\.?\\d*|\\.\\d+)(?:e[-+]?\\d+)?)(u|ll?|l|f)?/i,L=l.isOperatorChar||/[+\\-*&%=<>!?|\\/]/,M=l.isIdentifierChar||/[\\w\\$_\\xa1-\\uffff]/;function F(e,t){var n,r=e.next();if(x[r]){var i=x[r](e,t);if(!1!==i)return i}if(\'"\'==r||"\'"==r)return t.tokenize=(n=r,function(e,t){for(var r,i=!1,o=!1;null!=(r=e.next());){if(r==n&&!i){o=!0;break}i=!i&&"\\\\"==r}return(o||!i&&!w)&&(t.tokenize=null),"string"}),t.tokenize(e,t);if(S.test(r))return c=r,null;if(T.test(r)){if(e.backUp(1),e.match(A))return"number";e.next()}if("/"==r){if(e.eat("*"))return t.tokenize=E,E(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(L.test(r)){for(;!e.match(/^\\/[\\/*]/,!1)&&e.eat(L););return"operator"}if(e.eatWhile(M),C)for(;e.match(C);)e.eatWhile(M);var o=e.current();return s(h,o)?(s(v,o)&&(c="newstatement"),s(y,o)&&(u=!0),"keyword"):s(m,o)?"type":s(g,o)?(s(v,o)&&(c="newstatement"),"builtin"):s(b,o)?"atom":"variable"}function E(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=null;break}r="*"==n}return"comment"}function O(e,t){l.typeFirstDefinitions&&e.eol()&&o(t.context)&&(t.typeAtEndOfLine=i(e,t,e.pos))}return{startState:function(e){return{tokenize:null,context:new t((e||0)-f,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(e,t){var a=t.context;if(e.sol()&&(null==a.align&&(a.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return O(e,t),null;c=u=null;var s=(t.tokenize||F)(e,t);if("comment"==s||"meta"==s)return s;if(null==a.align&&(a.align=!0),";"==c||":"==c||","==c&&e.match(/^\\s*(?:\\/\\/.*)?$/,!1))for(;"statement"==t.context.type;)r(t);else if("{"==c)n(t,e.column(),"}");else if("["==c)n(t,e.column(),"]");else if("("==c)n(t,e.column(),")");else if("}"==c){for(;"statement"==a.type;)a=r(t);for("}"==a.type&&(a=r(t));"statement"==a.type;)a=r(t)}else c==a.type?r(t):k&&(("}"==a.type||"top"==a.type)&&";"!=c||"statement"==a.type&&"newstatement"==c)&&n(t,e.column(),"statement",e.current());if("variable"==s&&("def"==t.prevToken||l.typeFirstDefinitions&&i(e,t,e.start)&&o(t.context)&&e.match(/^\\s*\\(/,!1))&&(s="def"),x.token){var f=x.token(e,t,s);void 0!==f&&(s=f)}return"def"==s&&!1===l.styleDefs&&(s="variable"),t.startOfLine=!1,t.prevToken=u?"def":s||c,O(e,t),s},indent:function(t,n){if(t.tokenize!=F&&null!=t.tokenize||t.typeAtEndOfLine)return e.Pass;var r=t.context,i=n&&n.charAt(0);if("statement"==r.type&&"}"==i&&(r=r.prev),l.dontIndentStatements)for(;"statement"==r.type&&l.dontIndentStatements.test(r.info);)r=r.prev;if(x.indent){var o=x.indent(t,r,n);if("number"==typeof o)return o}var a=i==r.type,s=r.prev&&"switch"==r.prev.info;if(l.allmanIndentation&&/[{(]/.test(i)){for(;"top"!=r.type&&"}"!=r.type;)r=r.prev;return r.indented}return"statement"==r.type?r.indented+("{"==i?0:p):!r.align||d&&")"==r.type?")"!=r.type||a?r.indented+(a?0:f)+(a||!s||/^(?:case|default)\\b/.test(n)?0:f):r.indented+p:r.column+(a?0:1)},electricInput:_?/^\\s*(?:case .*?:|default:|\\{\\}?|\\})$/:/^\\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:"//",fold:"brace"}});var l="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile",c="int long char short double float unsigned signed void size_t ptrdiff_t";function u(e,t){if(!t.startOfLine)return!1;for(var n,r=null;n=e.peek();){if("\\\\"==n&&e.match(/^.$/)){r=u;break}if("/"==n&&e.match(/^\\/[\\/\\*]/,!1))break;e.next()}return t.tokenize=r,"meta"}function f(e,t){return"type"==t.prevToken&&"type"}function p(e){return e.eatWhile(/[\\w\\.\']/),"number"}function d(e,t){if(e.backUp(1),e.match(/(R|u8R|uR|UR|LR)/)){var n=e.match(/"([^\\s\\\\()]{0,16})\\(/);return!!n&&(t.cpp11RawStringDelim=n[1],t.tokenize=m,m(e,t))}return e.match(/(u8|u|U|L)/)?!!e.match(/["\']/,!1)&&"string":(e.next(),!1)}function h(e,t){for(var n;null!=(n=e.next());)if(\'"\'==n&&!e.eat(\'"\')){t.tokenize=null;break}return"string"}function m(e,t){var n=t.cpp11RawStringDelim.replace(/[^\\w\\s]/g,"\\\\$&");return e.match(new RegExp(".*?\\\\)"+n+\'"\'))?t.tokenize=null:e.skipToEnd(),"string"}function g(t,n){"string"==typeof t&&(t=[t]);var r=[];function i(e){if(e)for(var t in e)e.hasOwnProperty(t)&&r.push(t)}i(n.keywords),i(n.types),i(n.builtin),i(n.atoms),r.length&&(n.helperType=t[0],e.registerHelper("hintWords",t[0],r));for(var o=0;o<t.length;++o)e.defineMIME(t[o],n)}function v(e,t){for(var n=!1;!e.eol();){if(!n&&e.match(\'"""\')){t.tokenize=null;break}n="\\\\"==e.next()&&!n}return"string"}g(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:a(l),types:a(c+" bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:a("case do else for if switch while struct"),defKeywords:a("struct"),typeFirstDefinitions:!0,atoms:a("NULL true false"),hooks:{"#":u,"*":f},modeProps:{fold:["brace","include"]}}),g(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:a(l+" asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),types:a(c+" bool wchar_t"),blockKeywords:a("catch class do else finally for if struct switch try while"),defKeywords:a("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:a("true false NULL"),dontIndentStatements:/^template$/,isIdentifierChar:/[\\w\\$_~\\xa1-\\uffff]/,hooks:{"#":u,"*":f,u:d,U:d,L:d,R:d,0:p,1:p,2:p,3:p,4:p,5:p,6:p,7:p,8:p,9:p,token:function(e,t,n){if("variable"==n&&"("==e.peek()&&(";"==t.prevToken||null==t.prevToken||"}"==t.prevToken)&&(r=e.current(),(i=/(\\w+)::~?(\\w+)$/.exec(r))&&i[1]==i[2]))return"def";var r,i}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),g("text/x-java",{name:"clike",keywords:a("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:a("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:a("catch class do else finally for if switch try while"),defKeywords:a("class interface enum @interface"),typeFirstDefinitions:!0,atoms:a("true false null"),number:/^(?:0x[a-f\\d_]+|0b[01_]+|(?:[\\d_]+\\.?\\d*|\\.\\d+)(?:e[-+]?[\\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(e){return!e.match("interface",!1)&&(e.eatWhile(/[\\w\\$_]/),"meta")}},modeProps:{fold:["brace","import"]}}),g("text/x-csharp",{name:"clike",keywords:a("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:a("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:a("catch class do else finally for foreach if struct switch try while"),defKeywords:a("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:a("true false null"),hooks:{"@":function(e,t){return e.eat(\'"\')?(t.tokenize=h,h(e,t)):(e.eatWhile(/[\\w\\$_]/),"meta")}}}),g("text/x-scala",{name:"clike",keywords:a("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:a("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:a("catch class enum do else finally for forSome if match switch try while"),defKeywords:a("class enum def object package trait type val var"),atoms:a("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\\-*&%=<>!?|\\/#:@]/,hooks:{"@":function(e){return e.eatWhile(/[\\w\\$_]/),"meta"},\'"\':function(e,t){return!!e.match(\'""\')&&(t.tokenize=v,t.tokenize(e,t))},"\'":function(e){return e.eatWhile(/[\\w\\$_\\xa1-\\uffff]/),"atom"},"=":function(e,n){var r=n.context;return!("}"!=r.type||!r.align||!e.eat(">"))&&(n.context=new t(r.indented,r.column,r.type,r.info,null,r.prev),"operator")},"/":function(e,t){return!!e.eat("*")&&(t.tokenize=function e(t){return function(n,r){for(var i;i=n.next();){if("*"==i&&n.eat("/")){if(1==t){r.tokenize=null;break}return r.tokenize=e(t-1),r.tokenize(n,r)}if("/"==i&&n.eat("*"))return r.tokenize=e(t+1),r.tokenize(n,r)}return"comment"}}(1),t.tokenize(e,t))}},modeProps:{closeBrackets:{triples:\'"\'}}}),g("text/x-kotlin",{name:"clike",keywords:a("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam"),types:a("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\\d_]+|0b[01_]+|(?:[\\d_]+(\\.\\d+)?|\\.\\d+)(?:e[-+]?[\\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:a("catch class do else finally for if where try while enum"),defKeywords:a("class val var object interface fun"),atoms:a("true false null this"),hooks:{\'"\':function(e,t){var n;return t.tokenize=(n=e.match(\'""\'),function(e,t){for(var r,i=!1,o=!1;!e.eol();){if(!n&&!i&&e.match(\'"\')){o=!0;break}if(n&&e.match(\'"""\')){o=!0;break}r=e.next(),!i&&"$"==r&&e.match("{")&&e.skipTo("}"),i=!i&&"\\\\"==r&&!n}return!o&&n||(t.tokenize=null),"string"}),t.tokenize(e,t)}},modeProps:{closeBrackets:{triples:\'"\'}}}),g(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:a("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:a("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:a("for while do if else struct"),builtin:a("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:a("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":u},modeProps:{fold:["brace","include"]}}),g("text/x-nesc",{name:"clike",keywords:a(l+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:a(c),blockKeywords:a("case do else for if switch while struct"),atoms:a("null true false"),hooks:{"#":u},modeProps:{fold:["brace","include"]}}),g("text/x-objectivec",{name:"clike",keywords:a(l+"inline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:a(c),atoms:a("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(e){return e.eatWhile(/[\\w\\$]/),"keyword"},"#":u,indent:function(e,t,n){if("statement"==t.type&&/^@\\w/.test(n))return t.indented}},modeProps:{fold:"brace"}}),g("text/x-squirrel",{name:"clike",keywords:a("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:a(c),blockKeywords:a("case catch class else for foreach if switch try while"),defKeywords:a("function local class"),typeFirstDefinitions:!0,atoms:a("true false null"),hooks:{"#":u},modeProps:{fold:["brace","include"]}});var y=null;g("text/x-ceylon",{name:"clike",keywords:a("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(e){var t=e.charAt(0);return t===t.toUpperCase()&&t!==t.toLowerCase()},blockKeywords:a("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:a("class dynamic function interface module object package value"),builtin:a("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\\[\\]{}\\(\\),;\\:\\.`]/,isOperatorChar:/[+\\-*&%=<>!?|^~:\\/]/,numberStart:/[\\d#$]/,number:/^(?:#[\\da-fA-F_]+|\\$[01_]+|[\\d_]+[kMGTPmunpf]?|[\\d_]+\\.[\\d_]+(?:[eE][-+]?\\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:a("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(e){return e.eatWhile(/[\\w\\$_]/),"meta"},\'"\':function(e,t){return t.tokenize=function e(t){return function(n,r){for(var i,o=!1,a=!1;!n.eol();){if(!o&&n.match(\'"\')&&("single"==t||n.match(\'""\'))){a=!0;break}if(!o&&n.match("``")){y=e(t),a=!0;break}i=n.next(),o="single"==t&&!o&&"\\\\"==i}return a&&(r.tokenize=null),"string"}}(e.match(\'""\')?"triple":"single"),t.tokenize(e,t)},"`":function(e,t){return!(!y||!e.match("`"))&&(t.tokenize=y,y=null,t.tokenize(e,t))},"\'":function(e){return e.eatWhile(/[\\w\\$_\\xa1-\\uffff]/),"atom"},token:function(e,t,n){if(("variable"==n||"type"==n)&&"."==t.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:\'"\'}}})})(n(0))},function(e,t,n){(function(e){"use strict";var t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};var n={};function r(e,t){var r=e.match(function(e){var t=n[e];return t||(n[e]=new RegExp("\\\\s+"+e+"\\\\s*=\\\\s*(\'|\\")?([^\'\\"]+)(\'|\\")?\\\\s*"))}(t));return r?/^\\s*(.*?)\\s*$/.exec(r[2])[1]:""}function i(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function o(e,t){for(var n in e)for(var r=t[n]||(t[n]=[]),i=e[n],o=i.length-1;o>=0;o--)r.unshift(i[o])}e.defineMode("htmlmixed",function(n,a){var s=e.getMode(n,{name:"xml",htmlMode:!0,multilineTagIndentFactor:a.multilineTagIndentFactor,multilineTagIndentPastTag:a.multilineTagIndentPastTag}),l={},c=a&&a.tags,u=a&&a.scriptTypes;if(o(t,l),c&&o(c,l),u)for(var f=u.length-1;f>=0;f--)l.script.unshift(["type",u[f].matches,u[f].mode]);function p(t,o){var a,c=s.token(t,o.htmlState),u=/\\btag\\b/.test(c);if(u&&!/[<>\\s\\/]/.test(t.current())&&(a=o.htmlState.tagName&&o.htmlState.tagName.toLowerCase())&&l.hasOwnProperty(a))o.inTag=a+" ";else if(o.inTag&&u&&/>$/.test(t.current())){var f=/^([\\S]+) (.*)/.exec(o.inTag);o.inTag=null;var d=">"==t.current()&&function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(!i[0]||i[1].test(r(t,i[0])))return i[2]}}(l[f[1]],f[2]),h=e.getMode(n,d),m=i(f[1],!0),g=i(f[1],!1);o.token=function(e,t){return e.match(m,!1)?(t.token=p,t.localState=t.localMode=null,null):function(e,t,n){var r=e.current(),i=r.search(t);return i>-1?e.backUp(r.length-i):r.match(/<\\/?$/)&&(e.backUp(r.length),e.match(t,!1)||e.match(r)),n}(e,g,t.localMode.token(e,t.localState))},o.localMode=h,o.localState=e.startState(h,s.indent(o.htmlState,""))}else o.inTag&&(o.inTag+=t.current(),t.eol()&&(o.inTag+=" "));return c}return{startState:function(){return{token:p,inTag:null,localMode:null,localState:null,htmlState:e.startState(s)}},copyState:function(t){var n;return t.localState&&(n=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:n,htmlState:e.copyState(s,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n,r){return!t.localMode||/^\\s*<\\//.test(n)?s.indent(t.htmlState,n):t.localMode.indent?t.localMode.indent(t.localState,n,r):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")})(n(0),n(10),n(11),n(12))},function(e,t,n){(function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",function(r,i){var o,a,s=r.indentUnit,l={},c=i.htmlMode?t:n;for(var u in c)l[u]=c[u];for(var u in i)l[u]=i[u];function f(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();return"<"==r?e.eat("!")?e.eat("[")?e.match("CDATA[")?n(d("atom","]]>")):null:e.match("--")?n(d("comment","--\\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\\w\\._\\-]/),n(function e(t){return function(n,r){for(var i;null!=(i=n.next());){if("<"==i)return r.tokenize=e(t+1),r.tokenize(n,r);if(">"==i){if(1==t){r.tokenize=f;break}return r.tokenize=e(t-1),r.tokenize(n,r)}}return"meta"}}(1))):null:e.eat("?")?(e.eatWhile(/[\\w\\._\\-]/),t.tokenize=d("meta","?>"),"meta"):(o=e.eat("/")?"closeTag":"openTag",t.tokenize=p,"tag bracket"):"&"==r?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\\d]/)&&e.eat(";"):e.eatWhile(/[\\d]/)&&e.eat(";"):e.eatWhile(/[\\w\\.\\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function p(e,t){var n,r,i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=f,o=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return o="equals",null;if("<"==i){t.tokenize=f,t.state=g,t.tagName=t.tagStart=null;var a=t.tokenize(e,t);return a?a+" tag error":"tag error"}return/[\\\'\\"]/.test(i)?(t.tokenize=(n=i,(r=function(e,t){for(;!e.eol();)if(e.next()==n){t.tokenize=p;break}return"string"}).isInAttribute=!0,r),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\\s\\u00a0=<>\\"\\\']*[^\\s\\u00a0=<>\\"\\\'\\/]/),"word")}function d(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=f;break}n.next()}return e}}function h(e){e.context&&(e.context=e.context.prev)}function m(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!l.contextGrabbers.hasOwnProperty(n)||!l.contextGrabbers[n].hasOwnProperty(t))return;h(e)}}function g(e,t,n){return"openTag"==e?(n.tagStart=t.column(),v):"closeTag"==e?y:g}function v(e,t,n){return"word"==e?(n.tagName=t.current(),a="tag",w):l.allowMissingTagName&&"endTag"==e?(a="tag bracket",w(e,t,n)):(a="error",v)}function y(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&l.implicitlyClosed.hasOwnProperty(n.context.tagName)&&h(n),n.context&&n.context.tagName==r||!1===l.matchClosing?(a="tag",b):(a="tag error",x)}return l.allowMissingTagName&&"endTag"==e?(a="tag bracket",b(e,t,n)):(a="error",x)}function b(e,t,n){return"endTag"!=e?(a="error",b):(h(n),g)}function x(e,t,n){return a="error",b(e,0,n)}function w(e,t,n){if("word"==e)return a="attribute",k;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||l.autoSelfClosers.hasOwnProperty(r)?m(n,r):(m(n,r),n.context=new function(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(l.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}(n,r,i==n.indented)),g}return a="error",w}function k(e,t,n){return"equals"==e?_:(l.allowMissing||(a="error"),w(e,0,n))}function _(e,t,n){return"string"==e?C:"word"==e&&l.allowUnquoted?(a="string",w):(a="error",w(e,0,n))}function C(e,t,n){return"string"==e?C:w(e,0,n)}return f.isInText=!0,{startState:function(e){var t={tokenize:f,state:g,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;o=null;var n=t.tokenize(e,t);return(n||o)&&"comment"!=n&&(a=null,t.state=t.state(o||n,e,t),a&&(n="error"==a?n+" error":a)),n},indent:function(t,n,r){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+s;if(i&&i.noIndent)return e.Pass;if(t.tokenize!=p&&t.tokenize!=f)return r?r.match(/^(\\s*)/)[0].length:0;if(t.tagName)return!1!==l.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+s*(l.multilineTagIndentFactor||1);if(l.alignCDATA&&/<!\\[CDATA\\[/.test(n))return 0;var o=n&&/^<(\\/)?([\\w_:\\.-]*)/.exec(n);if(o&&o[1])for(;i;){if(i.tagName==o[2]){i=i.prev;break}if(!l.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(o)for(;i;){var a=l.contextGrabbers[i.tagName];if(!a||!a.hasOwnProperty(o[2]))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+s:t.baseIndent||0},electricInput:/<\\/[\\s\\w:]+>$/,blockCommentStart:"\\x3c!--",blockCommentEnd:"--\\x3e",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(e){e.state==_&&(e.state=w)}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})})(n(0))},function(e,t,n){(function(e){"use strict";e.defineMode("javascript",function(t,n){var r,i,o=t.indentUnit,a=n.statementIndent,s=n.jsonld,l=n.json||s,c=n.typescript,u=n.wordCharacters||/[\\w$\\xa1-\\uffff]/,f=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("keyword d"),o=e("operator"),a={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:i,break:i,continue:i,new:e("new"),delete:r,void:r,throw:r,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:a,false:a,null:a,undefined:a,NaN:a,Infinity:a,this:e("this"),class:e("class"),super:e("atom"),yield:r,export:e("export"),import:e("import"),extends:r,await:r}}(),p=/[+\\-*&%=<>!?|~^@]/,d=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function h(e,t,n){return r=e,i=n,t}function m(e,t){var n,r=e.next();if(\'"\'==r||"\'"==r)return t.tokenize=(n=r,function(e,t){var r,i=!1;if(s&&"@"==e.peek()&&e.match(d))return t.tokenize=m,h("jsonld-keyword","meta");for(;null!=(r=e.next())&&(r!=n||i);)i=!i&&"\\\\"==r;return i||(t.tokenize=m),h("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\\d+(?:[eE][+\\-]?\\d+)?/))return h("number","number");if("."==r&&e.match(".."))return h("spread","meta");if(/[\\[\\]{}\\(\\),;\\:\\.]/.test(r))return h(r);if("="==r&&e.eat(">"))return h("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\\da-f]/i),h("number","number");if("0"==r&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),h("number","number");if("0"==r&&e.eat(/b/i))return e.eatWhile(/[01]/i),h("number","number");if(/\\d/.test(r))return e.match(/^\\d*(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/),h("number","number");if("/"==r)return e.eat("*")?(t.tokenize=g,g(e,t)):e.eat("/")?(e.skipToEnd(),h("comment","comment")):ze(e,t,1)?(function(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\\\"==t}}(e),e.match(/^\\b(([gimyu])(?![gimyu]*\\2))+\\b/),h("regexp","string-2")):(e.eat("="),h("operator","operator",e.current()));if("`"==r)return t.tokenize=v,v(e,t);if("#"==r)return e.skipToEnd(),h("error","error");if(p.test(r))return">"==r&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=r&&"="!=r||e.eat("="):/[<>*+\\-]/.test(r)&&(e.eat(r),">"==r&&e.eat(r))),h("operator","operator",e.current());if(u.test(r)){e.eatWhile(u);var i=e.current();if("."!=t.lastType){if(f.propertyIsEnumerable(i)){var o=f[i];return h(o.type,o.style,i)}if("async"==i&&e.match(/^(\\s|\\/\\*.*?\\*\\/)*[\\(\\w]/,!1))return h("async","keyword",i)}return h("variable","variable",i)}}function g(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=m;break}r="*"==n}return h("comment","comment")}function v(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=m;break}r=!r&&"\\\\"==n}return h("quasi","string-2",e.current())}var y="([{}])";function b(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(c){var r=/:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(e.string.slice(e.start,n));r&&(n=r.index)}for(var i=0,o=!1,a=n-1;a>=0;--a){var s=e.string.charAt(a),l=y.indexOf(s);if(l>=0&&l<3){if(!i){++a;break}if(0==--i){"("==s&&(o=!0);break}}else if(l>=3&&l<6)++i;else if(u.test(s))o=!0;else{if(/["\'\\/]/.test(s))return;if(o&&!i){++a;break}}}o&&!i&&(t.fatArrowAt=a)}}var x={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function w(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function k(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==t)return!0}var _={state:null,column:null,marked:null,cc:null};function C(){for(var e=arguments.length-1;e>=0;e--)_.cc.push(arguments[e])}function S(){return C.apply(null,arguments),!0}function T(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var r=_.state;if(_.marked="def",r.context){if(t(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(t(r.globalVars))return;n.globalVars&&(r.globalVars={name:e,next:r.globalVars})}}function A(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}var L={name:"this",next:{name:"arguments"}};function M(){_.state.context={prev:_.state.context,vars:_.state.localVars},_.state.localVars=L}function F(){_.state.localVars=_.state.context.vars,_.state.context=_.state.context.prev}function E(e,t){var n=function(){var n=_.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new w(r,_.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function O(){var e=_.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function D(e){return function t(n){return n==e?S():";"==e?C():S(t)}}function N(e,t){return"var"==e?S(E("vardef",t.length),de,D(";"),O):"keyword a"==e?S(E("form"),j,N,O):"keyword b"==e?S(E("form"),N,O):"keyword d"==e?_.stream.match(/^\\s*$/,!1)?S():S(E("stat"),q,D(";"),O):"debugger"==e?S(D(";")):"{"==e?S(E("}"),te,O):";"==e?S():"if"==e?("else"==_.state.lexical.info&&_.state.cc[_.state.cc.length-1]==O&&_.state.cc.pop()(),S(E("form"),j,N,O,ye)):"function"==e?S(Ce):"for"==e?S(E("form"),be,N,O):"class"==e||c&&"interface"==t?(_.marked="keyword",S(E("form"),Ae,O)):"variable"==e?c&&"declare"==t?(_.marked="keyword",S(N)):c&&("module"==t||"enum"==t||"type"==t)&&_.stream.match(/^\\s*\\w/,!1)?(_.marked="keyword","enum"==t?S(qe):"type"==t?S(oe,D("operator"),oe,D(";")):S(E("form"),he,D("{"),E("}"),te,O,O)):c&&"namespace"==t?(_.marked="keyword",S(E("form"),P,te,O)):S(E("stat"),G):"switch"==e?S(E("form"),j,D("{"),E("}","switch"),te,O,O):"case"==e?S(P,D(":")):"default"==e?S(D(":")):"catch"==e?S(E("form"),M,D("("),Se,D(")"),N,O,F):"export"==e?S(E("stat"),Ee,O):"import"==e?S(E("stat"),De,O):"async"==e?S(N):"@"==t?S(P,N):C(E("stat"),P,D(";"),O)}function P(e,t){return I(e,t,!1)}function R(e,t){return I(e,t,!0)}function j(e){return"("!=e?C():S(E(")"),P,D(")"),O)}function I(e,t,n){if(_.state.fatArrowAt==_.stream.start){var r=n?K:$;if("("==e)return S(M,E(")"),Z(Se,")"),O,D("=>"),r,F);if("variable"==e)return C(M,he,D("=>"),r,F)}var i=n?z:B;return x.hasOwnProperty(e)?S(i):"function"==e?S(Ce,i):"class"==e||c&&"interface"==t?(_.marked="keyword",S(E("form"),Te,O)):"keyword c"==e||"async"==e?S(n?R:P):"("==e?S(E(")"),q,D(")"),O,i):"operator"==e||"spread"==e?S(n?R:P):"["==e?S(E("]"),Ie,O,i):"{"==e?ee(J,"}",null,i):"quasi"==e?C(H,i):"new"==e?S(function(e){return function(t){return"."==t?S(e?V:U):"variable"==t&&c?S(ue,e?z:B):C(e?R:P)}}(n)):"import"==e?S(P):S()}function q(e){return e.match(/[;\\}\\)\\],]/)?C():C(P)}function B(e,t){return","==e?S(P):z(e,t,!1)}function z(e,t,n){var r=0==n?B:z,i=0==n?P:R;return"=>"==e?S(M,n?K:$,F):"operator"==e?/\\+\\+|--/.test(t)||c&&"!"==t?S(r):c&&"<"==t&&_.stream.match(/^([^>]|<.*?>)*>\\s*\\(/,!1)?S(E(">"),Z(oe,">"),O,r):"?"==t?S(P,D(":"),i):S(i):"quasi"==e?C(H,r):";"!=e?"("==e?ee(R,")","call",r):"."==e?S(X,r):"["==e?S(E("]"),q,D("]"),O,r):c&&"as"==t?(_.marked="keyword",S(oe,r)):"regexp"==e?(_.state.lastType=_.marked="operator",_.stream.backUp(_.stream.pos-_.stream.start-1),S(i)):void 0:void 0}function H(e,t){return"quasi"!=e?C():"${"!=t.slice(t.length-2)?S(H):S(P,W)}function W(e){if("}"==e)return _.marked="string-2",_.state.tokenize=v,S(H)}function $(e){return b(_.stream,_.state),C("{"==e?N:P)}function K(e){return b(_.stream,_.state),C("{"==e?N:R)}function U(e,t){if("target"==t)return _.marked="keyword",S(B)}function V(e,t){if("target"==t)return _.marked="keyword",S(z)}function G(e){return":"==e?S(O,N):C(B,D(";"),O)}function X(e){if("variable"==e)return _.marked="property",S()}function J(e,t){if("async"==e)return _.marked="property",S(J);if("variable"==e||"keyword"==_.style){return _.marked="property","get"==t||"set"==t?S(Y):(c&&_.state.fatArrowAt==_.stream.start&&(n=_.stream.match(/^\\s*:\\s*/,!1))&&(_.state.fatArrowAt=_.stream.pos+n[0].length),S(Q));var n}else{if("number"==e||"string"==e)return _.marked=s?"property":_.style+" property",S(Q);if("jsonld-keyword"==e)return S(Q);if(c&&A(t))return _.marked="keyword",S(J);if("["==e)return S(P,ne,D("]"),Q);if("spread"==e)return S(R,Q);if("*"==t)return _.marked="keyword",S(J);if(":"==e)return C(Q)}}function Y(e){return"variable"!=e?C(Q):(_.marked="property",S(Ce))}function Q(e){return":"==e?S(R):"("==e?C(Ce):void 0}function Z(e,t,n){function r(i,o){if(n?n.indexOf(i)>-1:","==i){var a=_.state.lexical;return"call"==a.info&&(a.pos=(a.pos||0)+1),S(function(n,r){return n==t||r==t?C():C(e)},r)}return i==t||o==t?S():S(D(t))}return function(n,i){return n==t||i==t?S():C(e,r)}}function ee(e,t,n){for(var r=3;r<arguments.length;r++)_.cc.push(arguments[r]);return S(E(t,n),Z(e,t),O)}function te(e){return"}"==e?S():C(N,te)}function ne(e,t){if(c){if(":"==e)return S(oe);if("?"==t)return S(ne)}}function re(e){if(c&&":"==e)return _.stream.match(/^\\s*\\w+\\s+is\\b/,!1)?S(P,ie,oe):S(oe)}function ie(e,t){if("is"==t)return _.marked="keyword",S()}function oe(e,t){return"variable"==e||"void"==t?"keyof"==t?(_.marked="keyword",S(oe)):(_.marked="type",S(ce)):"string"==e||"number"==e||"atom"==e?S(ce):"["==e?S(E("]"),Z(oe,"]",","),O,ce):"{"==e?S(E("}"),Z(se,"}",",;"),O,ce):"("==e?S(Z(le,")"),ae):void 0}function ae(e){if("=>"==e)return S(oe)}function se(e,t){return"variable"==e||"keyword"==_.style?(_.marked="property",S(se)):"?"==t?S(se):":"==e?S(oe):"["==e?S(P,ne,D("]"),se):void 0}function le(e){return"variable"==e?S(le):":"==e?S(oe):void 0}function ce(e,t){return"<"==t?S(E(">"),Z(oe,">"),O,ce):"|"==t||"."==e||"&"==t?S(oe):"["==e?S(D("]"),ce):"extends"==t||"implements"==t?(_.marked="keyword",S(oe)):void 0}function ue(e,t){if("<"==t)return S(E(">"),Z(oe,">"),O,ce)}function fe(){return C(oe,pe)}function pe(e,t){if("="==t)return S(oe)}function de(e,t){return"enum"==t?(_.marked="keyword",S(qe)):C(he,ne,ge,ve)}function he(e,t){return c&&A(t)?(_.marked="keyword",S(he)):"variable"==e?(T(t),S()):"spread"==e?S(he):"["==e?ee(he,"]"):"{"==e?ee(me,"}"):void 0}function me(e,t){return"variable"!=e||_.stream.match(/^\\s*:/,!1)?("variable"==e&&(_.marked="property"),"spread"==e?S(he):"}"==e?C():S(D(":"),he,ge)):(T(t),S(ge))}function ge(e,t){if("="==t)return S(R)}function ve(e){if(","==e)return S(de)}function ye(e,t){if("keyword b"==e&&"else"==t)return S(E("form","else"),N,O)}function be(e,t){return"await"==t?S(be):"("==e?S(E(")"),xe,D(")"),O):void 0}function xe(e){return"var"==e?S(de,D(";"),ke):";"==e?S(ke):"variable"==e?S(we):C(P,D(";"),ke)}function we(e,t){return"in"==t||"of"==t?(_.marked="keyword",S(P)):S(B,ke)}function ke(e,t){return";"==e?S(_e):"in"==t||"of"==t?(_.marked="keyword",S(P)):C(P,D(";"),_e)}function _e(e){")"!=e&&S(P)}function Ce(e,t){return"*"==t?(_.marked="keyword",S(Ce)):"variable"==e?(T(t),S(Ce)):"("==e?S(M,E(")"),Z(Se,")"),O,re,N,F):c&&"<"==t?S(E(">"),Z(fe,">"),O,Ce):void 0}function Se(e,t){return"@"==t&&S(P,Se),"spread"==e?S(Se):c&&A(t)?(_.marked="keyword",S(Se)):C(he,ne,ge)}function Te(e,t){return"variable"==e?Ae(e,t):Le(e,t)}function Ae(e,t){if("variable"==e)return T(t),S(Le)}function Le(e,t){return"<"==t?S(E(">"),Z(fe,">"),O,Le):"extends"==t||"implements"==t||c&&","==e?("implements"==t&&(_.marked="keyword"),S(c?oe:P,Le)):"{"==e?S(E("}"),Me,O):void 0}function Me(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||c&&A(t))&&_.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/,!1)?(_.marked="keyword",S(Me)):"variable"==e||"keyword"==_.style?(_.marked="property",S(c?Fe:Ce,Me)):"["==e?S(P,ne,D("]"),c?Fe:Ce,Me):"*"==t?(_.marked="keyword",S(Me)):";"==e?S(Me):"}"==e?S():"@"==t?S(P,Me):void 0}function Fe(e,t){return"?"==t?S(Fe):":"==e?S(oe,ge):"="==t?S(R):C(Ce)}function Ee(e,t){return"*"==t?(_.marked="keyword",S(je,D(";"))):"default"==t?(_.marked="keyword",S(P,D(";"))):"{"==e?S(Z(Oe,"}"),je,D(";")):C(N)}function Oe(e,t){return"as"==t?(_.marked="keyword",S(D("variable"))):"variable"==e?C(R,Oe):void 0}function De(e){return"string"==e?S():"("==e?C(P):C(Ne,Pe,je)}function Ne(e,t){return"{"==e?ee(Ne,"}"):("variable"==e&&T(t),"*"==t&&(_.marked="keyword"),S(Re))}function Pe(e){if(","==e)return S(Ne,Pe)}function Re(e,t){if("as"==t)return _.marked="keyword",S(Ne)}function je(e,t){if("from"==t)return _.marked="keyword",S(P)}function Ie(e){return"]"==e?S():C(Z(R,"]"))}function qe(){return C(E("form"),he,D("{"),E("}"),Z(Be,"}"),O,O)}function Be(){return C(he,ge)}function ze(e,t,n){return t.tokenize==m&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\\[{}\\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\\{\\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return O.lex=!0,{startState:function(e){var t={tokenize:m,lastType:"sof",cc:[],lexical:new w((e||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),b(e,t)),t.tokenize!=g&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==r?n:(t.lastType="operator"!=r||"++"!=i&&"--"!=i?r:"incdec",function(e,t,n,r,i){var o=e.cc;for(_.state=e,_.stream=i,_.marked=null,_.cc=o,_.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():l?P:N)(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return _.marked?_.marked:"variable"==n&&k(e,r)?"variable-2":t}}(t,n,r,i,e))},indent:function(t,r){if(t.tokenize==g)return e.Pass;if(t.tokenize!=m)return 0;var i,s=r&&r.charAt(0),l=t.lexical;if(!/^\\s*else\\b/.test(r))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==O)l=l.prev;else if(u!=ye)break}for(;("stat"==l.type||"form"==l.type)&&("}"==s||(i=t.cc[t.cc.length-1])&&(i==B||i==z)&&!/^[,\\.=+\\-*:?[\\(]/.test(r));)l=l.prev;a&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var f=l.type,d=s==f;return"vardef"==f?l.indented+("operator"==t.lastType||","==t.lastType?l.info+1:0):"form"==f&&"{"==s?l.indented:"form"==f?l.indented+o:"stat"==f?l.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||p.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,r)?a||o:0):"switch"!=l.info||d||0==n.doubleIndentSwitch?l.align?l.column+(d?0:1):l.indented+(d?0:o):l.indented+(/^(?:case|default)\\b/.test(r)?o:2*o)},electricInput:/^\\s*(?:case .*?:|default:|\\{|\\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}\'\'\\"\\"``",helperType:l?"json":"javascript",jsonldMode:s,jsonMode:l,expressionAllowed:ze,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=P&&t!=R||e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})})(n(0))},function(e,t,n){(function(e){"use strict";function t(e){for(var t={},n=0;n<e.length;++n)t[e[n].toLowerCase()]=!0;return t}e.defineMode("css",function(t,n){var r=n.inline;n.propertyKeywords||(n=e.resolveMode("text/css"));var i,o,a=t.indentUnit,s=n.tokenHooks,l=n.documentTypes||{},c=n.mediaTypes||{},u=n.mediaFeatures||{},f=n.mediaValueKeywords||{},p=n.propertyKeywords||{},d=n.nonStandardPropertyKeywords||{},h=n.fontProperties||{},m=n.counterDescriptors||{},g=n.colorKeywords||{},v=n.valueKeywords||{},y=n.allowNested,b=n.lineComment,x=!0===n.supportsAtComponent;function w(e,t){return i=t,e}function k(e){return function(t,n){for(var r,i=!1;null!=(r=t.next());){if(r==e&&!i){")"==e&&t.backUp(1);break}i=!i&&"\\\\"==r}return(r==e||!i&&")"!=e)&&(n.tokenize=null),w("string","string")}}function _(e,t){return e.next(),e.match(/\\s*[\\"\\\')]/,!1)?t.tokenize=null:t.tokenize=k(")"),w(null,"(")}function C(e,t,n){this.type=e,this.indent=t,this.prev=n}function S(e,t,n,r){return e.context=new C(n,t.indentation()+(!1===r?0:a),e.context),n}function T(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function A(e,t,n){return F[n.context.type](e,t,n)}function L(e,t,n,r){for(var i=r||1;i>0;i--)n.context=n.context.prev;return A(e,t,n)}function M(e){var t=e.current().toLowerCase();o=v.hasOwnProperty(t)?"atom":g.hasOwnProperty(t)?"keyword":"variable"}var F={top:function(e,t,n){if("{"==e)return S(n,t,"block");if("}"==e&&n.context.prev)return T(n);if(x&&/@component/i.test(e))return S(n,t,"atComponentBlock");if(/^@(-moz-)?document$/i.test(e))return S(n,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(e))return S(n,t,"atBlock");if(/^@(font-face|counter-style)/i.test(e))return n.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return S(n,t,"at");if("hash"==e)o="builtin";else if("word"==e)o="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return S(n,t,"interpolation");if(":"==e)return"pseudo";if(y&&"("==e)return S(n,t,"parens")}return n.context.type},block:function(e,t,n){if("word"==e){var r=t.current().toLowerCase();return p.hasOwnProperty(r)?(o="property","maybeprop"):d.hasOwnProperty(r)?(o="string-2","maybeprop"):y?(o=t.match(/^\\s*:(?:\\s|$)/,!1)?"property":"tag","block"):(o+=" error","maybeprop")}return"meta"==e?"block":y||"hash"!=e&&"qualifier"!=e?F.top(e,t,n):(o="error","block")},maybeprop:function(e,t,n){return":"==e?S(n,t,"prop"):A(e,t,n)},prop:function(e,t,n){if(";"==e)return T(n);if("{"==e&&y)return S(n,t,"propBlock");if("}"==e||"{"==e)return L(e,t,n);if("("==e)return S(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)M(t);else if("interpolation"==e)return S(n,t,"interpolation")}else o+=" error";return"prop"},propBlock:function(e,t,n){return"}"==e?T(n):"word"==e?(o="property","maybeprop"):n.context.type},parens:function(e,t,n){return"{"==e||"}"==e?L(e,t,n):")"==e?T(n):"("==e?S(n,t,"parens"):"interpolation"==e?S(n,t,"interpolation"):("word"==e&&M(t),"parens")},pseudo:function(e,t,n){return"meta"==e?"pseudo":"word"==e?(o="variable-3",n.context.type):A(e,t,n)},documentTypes:function(e,t,n){return"word"==e&&l.hasOwnProperty(t.current())?(o="tag",n.context.type):F.atBlock(e,t,n)},atBlock:function(e,t,n){if("("==e)return S(n,t,"atBlock_parens");if("}"==e||";"==e)return L(e,t,n);if("{"==e)return T(n)&&S(n,t,y?"block":"top");if("interpolation"==e)return S(n,t,"interpolation");if("word"==e){var r=t.current().toLowerCase();o="only"==r||"not"==r||"and"==r||"or"==r?"keyword":c.hasOwnProperty(r)?"attribute":u.hasOwnProperty(r)?"property":f.hasOwnProperty(r)?"keyword":p.hasOwnProperty(r)?"property":d.hasOwnProperty(r)?"string-2":v.hasOwnProperty(r)?"atom":g.hasOwnProperty(r)?"keyword":"error"}return n.context.type},atComponentBlock:function(e,t,n){return"}"==e?L(e,t,n):"{"==e?T(n)&&S(n,t,y?"block":"top",!1):("word"==e&&(o="error"),n.context.type)},atBlock_parens:function(e,t,n){return")"==e?T(n):"{"==e||"}"==e?L(e,t,n,2):F.atBlock(e,t,n)},restricted_atBlock_before:function(e,t,n){return"{"==e?S(n,t,"restricted_atBlock"):"word"==e&&"@counter-style"==n.stateArg?(o="variable","restricted_atBlock_before"):A(e,t,n)},restricted_atBlock:function(e,t,n){return"}"==e?(n.stateArg=null,T(n)):"word"==e?(o="@font-face"==n.stateArg&&!h.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==n.stateArg&&!m.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(e,t,n){return"word"==e?(o="variable","keyframes"):"{"==e?S(n,t,"top"):A(e,t,n)},at:function(e,t,n){return";"==e?T(n):"{"==e||"}"==e?L(e,t,n):("word"==e?o="tag":"hash"==e&&(o="builtin"),"at")},interpolation:function(e,t,n){return"}"==e?T(n):"{"==e||";"==e?L(e,t,n):("word"==e?o="variable":"variable"!=e&&"("!=e&&")"!=e&&(o="error"),"interpolation")}};return{startState:function(e){return{tokenize:null,state:r?"block":"top",stateArg:null,context:new C(r?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||function(e,t){var n=e.next();if(s[n]){var r=s[n](e,t);if(!1!==r)return r}return"@"==n?(e.eatWhile(/[\\w\\\\\\-]/),w("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?w(null,"compare"):\'"\'==n||"\'"==n?(t.tokenize=k(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\\w\\\\\\-]/),w("atom","hash")):"!"==n?(e.match(/^\\s*\\w*/),w("keyword","important")):/\\d/.test(n)||"."==n&&e.eat(/\\d/)?(e.eatWhile(/[\\w.%]/),w("number","unit")):"-"!==n?/[,+>*\\/]/.test(n)?w(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?w("qualifier","qualifier"):/[:;{}\\[\\]\\(\\)]/.test(n)?w(null,n):("u"==n||"U"==n)&&e.match(/rl(-prefix)?\\(/i)||("d"==n||"D"==n)&&e.match("omain(",!0,!0)||("r"==n||"R"==n)&&e.match("egexp(",!0,!0)?(e.backUp(1),t.tokenize=_,w("property","word")):/[\\w\\\\\\-]/.test(n)?(e.eatWhile(/[\\w\\\\\\-]/),w("property","word")):w(null,null):/[\\d.]/.test(e.peek())?(e.eatWhile(/[\\w.%]/),w("number","unit")):e.match(/^-[\\w\\\\\\-]+/)?(e.eatWhile(/[\\w\\\\\\-]/),e.match(/^\\s*:/,!1)?w("variable-2","variable-definition"):w("variable-2","variable")):e.match(/^\\w+-/)?w("meta","meta"):void 0})(e,t);return n&&"object"==typeof n&&(i=n[1],n=n[0]),o=n,"comment"!=i&&(t.state=F[t.state](i,e,t)),o},indent:function(e,t){var n=e.context,r=t&&t.charAt(0),i=n.indent;return"prop"!=n.type||"}"!=r&&")"!=r||(n=n.prev),n.prev&&("}"!=r||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"restricted_atBlock"!=n.type?(")"!=r||"parens"!=n.type&&"atBlock_parens"!=n.type)&&("{"!=r||"at"!=n.type&&"atBlock"!=n.type)||(i=Math.max(0,n.indent-a)):i=(n=n.prev).indent),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:b,fold:"brace"}});var n=["domain","regexp","url","url-prefix"],r=t(n),i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=t(i),a=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],s=t(a),l=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],c=t(l),u=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],f=t(u),p=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],d=t(p),h=t(["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),m=t(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),g=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],v=t(g),y=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],b=t(y),x=n.concat(i).concat(a).concat(l).concat(u).concat(p).concat(g).concat(y);function w(e,t){for(var n,r=!1;null!=(n=e.next());){if(r&&"/"==n){t.tokenize=null;break}r="*"==n}return["comment","comment"]}e.registerHelper("hintWords","css",x),e.defineMIME("text/css",{documentTypes:r,mediaTypes:o,mediaFeatures:s,mediaValueKeywords:c,propertyKeywords:f,nonStandardPropertyKeywords:d,fontProperties:h,counterDescriptors:m,colorKeywords:v,valueKeywords:b,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=w,w(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:s,mediaValueKeywords:c,propertyKeywords:f,nonStandardPropertyKeywords:d,colorKeywords:v,valueKeywords:b,fontProperties:h,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=w,w(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\\s*\\{/,!1)&&[null,null]},$:function(e){return e.match(/^[\\w-]+/),e.match(/^\\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:s,mediaValueKeywords:c,propertyKeywords:f,nonStandardPropertyKeywords:d,colorKeywords:v,valueKeywords:b,fontProperties:h,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=w,w(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\\b/i,!1)&&(e.eatWhile(/[\\w\\\\\\-]/),e.match(/^\\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:r,mediaTypes:o,mediaFeatures:s,propertyKeywords:f,nonStandardPropertyKeywords:d,fontProperties:h,counterDescriptors:m,colorKeywords:v,valueKeywords:b,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=w,w(e,t))}},name:"css",helperType:"gss"})})(n(0))},function(e,t,n){n(14),e.exports=n(32)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n.n(r),o=(n(17),n(2)),a=n.n(o),s=n(1),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var u=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"artisan",e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["a"]),l(t,[{key:"handle",value:function(){var e,n=(e=i.a.mark(function e(n){var r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n[0]?n[0]:"",!1!==n.includes("--force")||!0!==this.isProduction()||!0!==this.confirmToProceed(r)){e.next=11;break}return o=this.style(["**************************************","*     Application In Production!     *","**************************************","\\n"].join("\\n"),"comment"),e.next=5,this.ask([this.style("Do you really wish to run this command? [y/N] (yes/no)","info"),this.style("[no]","comment")].join(" "),o);case 5:if(!1!==e.sent){e.next=11;break}return this.line(),this.echo(this.style("Command Cancelled!","comment")),this.line(),e.abrupt("return");case 11:return e.abrupt("return",c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handle",this).call(this,n));case 12:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})});return function(e){return n.apply(this,arguments)}}()}]),t}();var f=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"composer",e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["a"]),t}(),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var d=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"help",e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["a"]),p(t,[{key:"is",value:function(e){return["list","help"].includes(e)}},{key:"handle",value:function(){this.line(),this.line(this.options.helpInfo),this.serverInfo()}}]),t}();var h=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"mysql",e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["a"]),t}(),m=n(24),g=n.n(m),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"white",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];y(this,e),Object.assign(this,{options:r,colorList:{30:"black",31:"red",32:"green",33:"yellow",34:"blue",35:"magenta",36:"cyan",37:"white",39:"white"},backgroundList:{40:"black",41:"red",42:"green",43:"yellow",44:"blue",45:"magenta",46:"cyan",47:"white",49:"black"},colors:Object.assign(a.a.terminal.ansi_colors.bold,{white:a.a.terminal.ansi_colors.normal.white,red:a.a.terminal.ansi_colors.normal.red})}),this.foreground=this.getColor(t),this.background=this.getColor(n)}return v(e,[{key:"getColor",value:function(e){return this.colors[e]?this.colors[e]:e}},{key:"apply",value:function(e){return"[[;"+this.foreground+";"+this.background+"]"+a.a.terminal.escape_brackets(e)+"]"}}]),e}(),x=new(function(){function e(){y(this,e),Object.assign(this,{formatters:{black:new b("black"),red:new b("red"),green:new b("green"),yellow:new b("yellow"),blue:new b("blue"),magenta:new b("magenta"),cyan:new b("cyan"),white:new b("white"),error:new b("white","red"),info:new b("green"),comment:new b("yellow"),question:new b("magenta")}})}return v(e,[{key:"error",value:function(e){return this.formatters.error.apply(e)}},{key:"info",value:function(e){return this.formatters.info.apply(e)}},{key:"comment",value:function(e){return this.formatters.comment.apply(e)}},{key:"question",value:function(e){return this.formatters.question.apply(e)}},{key:"black",value:function(e){return this.formatters.black.apply(e)}},{key:"red",value:function(e){return this.formatters.red.apply(e)}},{key:"green",value:function(e){return this.formatters.green.apply(e)}},{key:"yellow",value:function(e){return this.formatters.yellow.apply(e)}},{key:"blue",value:function(e){return this.formatters.blue.apply(e)}},{key:"magenta",value:function(e){return this.formatters.magenta.apply(e)}},{key:"cyan",value:function(e){return this.formatters.cyan.apply(e)}},{key:"white",value:function(e){return this.formatters.white.apply(e)}}]),e}()),w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var _={info:x.blue("i"),success:x.green("â"),warning:x.yellow("â¼"),error:x.red("Ã")},C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({text:"",color:"cyan"},t);var n=this.options.spinner;this.spinner="object"===(void 0===n?"undefined":w(n))?n:g.a.dots,this.text=this.options.text,this.interval=this.options.interval||this.spinner.interval||100,this.stream=this.options.stream,this.id=null,this.frameIndex=0,this.enabled=!0}return k(e,[{key:"frame",value:function(){var e=this.spinner.frames,t=e[this.frameIndex];return this.frameIndex=++this.frameIndex%e.length,t+" "+this.text}},{key:"clear",value:function(){return this.enabled?(this.stream.clearLine(),this.stream.cursorTo(0),this):this}},{key:"render",value:function(){return this.clear(),this.stream.write(this.frame(),!0),this}},{key:"start",value:function(e){return e&&(this.text=e),!this.enabled||this.id?this:(this.stream.hideCursor(),this.render(),this.id=setInterval(this.render.bind(this),this.interval),this)}},{key:"stop",value:function(){return this.enabled?(clearInterval(this.id),this.id=null,this.frameIndex=0,this.clear(),this.stream.showCursor(),this):this}},{key:"succeed",value:function(e){return this.stopAndPersist({symbol:_.success,text:e})}},{key:"fail",value:function(e){return this.stopAndPersist({symbol:_.error,text:e})}},{key:"warn",value:function(e){return this.stopAndPersist({symbol:_.warning,text:e})}},{key:"info",value:function(e){return this.stopAndPersist({symbol:_.info,text:e})}},{key:"stopAndPersist",value:function(e){return"string"==typeof e&&(e={symbol:e}),e=e||{},this.stop(),this.stream.write((e.symbol||" ")+" "+(e.text||this.text)+"\\n"),this}}]),e}();var S=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"tinker",e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["a"]),t}(),T=(n(26),n(6),n(5),n(7),n(27),n(8),n(28),n(29),n(12),n(11),n(9),n(10),n(0)),A=n.n(T),L=n(30),M=n.n(L),F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var E=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"vi",e,n));return r.textarea=document.createElement("textarea"),r.textarea=M()(document.createElement("textarea"),function(e){document.body.appendChild(e)}),r.editor=M()(A.a.fromTextArea(r.textarea,{lineNumbers:!0,matchBrackets:!0,styleActiveLine:!0,keyMap:"vim",showCursorWhenSelecting:!0,theme:"monokai"}),function(e){e.getWrapperElement().className+=" CodeMirror-fullscreen"}),r.doc=r.editor.getDoc(),r.cm=r.doc.cm,r.hide(),A.a.Vim.defineEx("q","q",function(){r.quit()}),A.a.Vim.defineEx("w","w",function(){r.save()}),A.a.Vim.defineEx("wq","wq",function(){r.save().then(function(){r.quit()}).catch(function(e){return r.error(e)})}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["a"]),F(t,[{key:"show",value:function(){var e=this;this.editor.getWrapperElement().style.display="block",setTimeout(function(){e.cm.focus()},200)}},{key:"hide",value:function(){this.editor.getWrapperElement().style.display="none"}},{key:"setOption",value:function(e,t){this.editor.setOption(e,t)}},{key:"setValue",value:function(e){this.doc.setValue(e)}},{key:"setCursor",value:function(e){this.doc.setCursor(e)}},{key:"save",value:function(){var e=JSON.stringify(this.doc.getValue().replace(/\\n$/,""));return this.sendRequest([this.file,"--text="+e])}},{key:"quit",value:function(){var e=this;this.setValue(""),this.hide(),setTimeout(function(){e.resume(),e.focus()},200)}},{key:"info",value:function(){var e=this.file.match(/.+\\.([^.]+)$/);return e.length>0?A.a.findModeByExtension(e[1]):/\\//.test(this.file)?A.a.findModeByMIME(this.file):{mode:"php",mime:"application/x-httpd-php"}}},{key:"open",value:function(){var e,t=(e=i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendRequest([this.file]);case 2:n=e.sent,r=this.info(),this.setOption("mode",r.mode),this.pause(),this.show(),this.setValue(n),this.setCursor(0);case 9:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})});return function(e){return t.apply(this,arguments)}}()},{key:"handle",value:function(e){this.file=e[0]?e[0]:"",this.open()}}]),t}(),O=n(31);n.d(t,"Terminal",function(){return N});var D=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var N=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=document.querySelector(t),this.callBacks=r,this.options=n,this.requestId=0,this.formatter=x,this.prompt="$ ",this.fit(),this.shell=a()(this.element).terminal(this.handle.bind(this),{onClear:this.serverInfo.bind(this),onPop:function(){i.prompt="$ "},prompt:this.prompt,greetings:this.greetings()}),this.commands=[new d(this,n),new u(this,n),new S(this,n),new h(this,n),new f(this,n),new E(this,n),new O.a(this,n)],this.serverInfo(),this.spinner=new C({stream:this}),window.addEventListener("resize",this.fit.bind(this))}return D(e,[{key:"handle",value:function(){var e,t=(e=i.a.mark(function e(t){var n,r,o,s,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=t.trim(),e.t0=i.a.keys(this.options.interpreters);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(n=e.t1.value,t!==n){e.next=7;break}return this.interpreter(this.options.interpreters[n]),e.abrupt("return");case 7:e.next=2;break;case 9:r=a.a.terminal.parse_command(t),o=0;case 11:if(!(o<this.commands.length)){e.next=19;break}if(!0!==(s=this.commands[o]).is(r.name)){e.next=16;break}return s.handle(r.args.map(function(e,t){var n=r.args_quotes[t];return String(""+n+e+n).replace(/[\\\\"\']/g,"\\\\$&").replace(/\\u0000/g,"\\\\0")})),e.abrupt("return");case 16:o++,e.next=11;break;case 19:return e.prev=19,e.next=22,this.sendRequest(t);case 22:l=e.sent,"function"==typeof this.callBacks[r.name]?this.callBacks[r.name](l):this.line(l),this.serverInfo(),e.next=31;break;case 27:e.prev=27,e.t2=e.catch(19),this.error(e.t2.message),this.serverInfo();case 31:case"end":return e.stop()}},e,this,[[19,27]])}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})});return function(e){return t.apply(this,arguments)}}()},{key:"write",value:function(e){!0===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?this.shell.set_prompt(e):this.echo(e)}},{key:"showCursor",value:function(){this.element.querySelector(".cursor").style.display="",this.shell.set_prompt(this.prompt),this.shell.enable()}},{key:"hideCursor",value:function(){this.element.querySelector(".cursor").style.display="none",this.shell.disable()}},{key:"clearLine",value:function(){}},{key:"cursorTo",value:function(e){}},{key:"environment",value:function(){return this.options.environment}},{key:"isProduction",value:function(){return"production"===this.environment()}},{key:"confirmToProceed",value:function(e){return this.options.confirmToProceed[e]?this.options.confirmToProceed[e]:[]}},{key:"sendRequest",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(r,i){a.a.ajax({url:t.options.endpoint,dataType:"json",type:"post",data:{jsonrpc:"2.0",id:++t.requestId,command:e,parameters:n},beforeSend:function(e){e.setRequestHeader("X-CSRF-TOKEN",t.options.csrfToken),t.spinner.start("")},success:function(e){var t=e.result?e.result:e.error;r(t||e)},error:function(e,t,n){i(new Error(e.status+": "+n))},complete:function(){t.spinner.stop()}})})}},{key:"greetings",value:function(){return""}},{key:"interpreter",value:function(e){var t=this;this.prompt=e+"> ",this.shell.push(function(n){t.handle(e.replace(/\\s+/g,"-")+" "+n)},{prompt:this.prompt})}},{key:"fit",value:function(){var e=this.element.parentNode;"BODY"===e.tagName?(this.element.style.width=window.innerWidth+"px",this.element.style.height=window.innerHeight+"px"):(this.element.style.width=e.offsetWidth+"px",this.element.style.height=e.offsetHeight+"px")}},{key:"serverInfo",value:function(){var e=this;if(!(this.shell.level()>1)){var t=[this.options.username,"@",this.options.hostname].reduce(function(t,n){return t+e.style(n,"info")},""),n=this.style(this.options.os,"question"),r=this.style(this.options.basePath,"comment");this.echo(t+" "+n+" "+r)}}},{key:"pause",value:function(){this.shell.pause()}},{key:"resume",value:function(){this.shell.resume()}},{key:"focus",value:function(){this.shell.focus()}},{key:"scrollToBottom",value:function(){this.shell.scroll_to_bottom()}},{key:"style",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.formatter[t](e)}},{key:"messageType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.shell.echo(this.style(e,t))}},{key:"echo",value:function(e){this.shell.echo(e)}},{key:"line",value:function(e){var t=this;if(e&&e.replace){var n,r=(n=/((([^<>(\'")[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))/g,function(e){return e.replace(n,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0].replace("@","&commat;")})});(function(){var e=new RegExp(["[Â][[()#;?]*(?:([0-9]{1,4})(?:;([0-9]{0,4}))*)?[0-9A-PRZcf-nqry=><]","(.*)","[Â][[()#;?]*(?:([0-9]{1,4})(?:;([0-9]{0,4}))*)?[0-9A-PRZcf-nqry=><]"].join(""),"g");return function(n){return n.replace(e,function(){switch(arguments.length<=1?void 0:arguments[1]){case"32":return t.style(a.a.terminal.escape_brackets(r(arguments.length<=3?void 0:arguments[3])),"info");case"33":return t.style(a.a.terminal.escape_brackets(r(arguments.length<=3?void 0:arguments[3])),"comment");case"37":return t.style(a.a.terminal.escape_brackets(r(arguments.length<=3?void 0:arguments[3])),"error")}return arguments.length<=0?void 0:arguments[0]})}})()(e).split("\\n").forEach(function(e){t.shell.echo(""===e?" ":e)})}else this.shell.echo(" ")}},{key:"error",value:function(e){this.shell.error(e)}},{key:"ask",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise(function(r,i){var o=t.shell.history();o.disable(),""!==n&&t.echo(n),t.echo(e),t.scrollToBottom(),t.shell.push(function(e){["y","yes","true"].includes(e.toLowerCase())?r(!0):(r(!1),t.serverInfo()),t.shell.pop(),t.scrollToBottom(),o.enable()},{prompt:" > "})})}}]),e}();window.Terminal=N},function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(16),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",c="object"==typeof e,u=t.regeneratorRuntime;if(u)c&&(e.exports=u);else{(u=t.regeneratorRuntime=c?e.exports:{}).wrap=x;var f="suspendedStart",p="suspendedYield",d="executing",h="completed",m={},g={};g[a]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==r&&i.call(y,a)&&(g=y);var b=C.prototype=k.prototype=Object.create(g);_.prototype=b.constructor=C,C.constructor=_,C[l]=_.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(b),e},u.awrap=function(e){return{__await:e}},S(T.prototype),T.prototype[s]=function(){return this},u.AsyncIterator=T,u.async=function(e,t,n,r){var i=new T(x(e,t,n,r));return u.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(b),b[l]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},u.values=E,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function x(e,t,n,r){var i=t&&t.prototype instanceof k?t:k,o=Object.create(i.prototype),a=new F(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return O()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var l=w(e,t,n);if("normal"===l.type){if(r=n.done?h:p,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=h,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function k(){}function _(){}function C(){}function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function T(e){var t;this._invoke=function(n,r){function o(){return new Promise(function(t,o){!function t(n,r,o,a){var s=w(e[n],e,r);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(c).then(function(e){l.value=e,o(l)},a)}a(s.arg)}(n,r,t,o)})}return t=t?t.then(o,o):o()}}function A(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,A(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a \'throw\' method")}return m}var i=w(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function E(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){var r=window.jQuery;window.jQuery=n(2),n(18),n(19),n(23),r&&(window.jQuery=window.$=r)},function(e,t,n){var r,i,o,a;a=function(e){var t,n,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice;if(e.event.fixHooks)for(var a=r.length;a;)e.event.fixHooks[r[--a]]=e.event.mouseHooks;var s=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],l,!1);else this.onmousewheel=l;e.data(this,"mousewheel-line-height",s.getLineHeight(this)),e.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],l,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),r=n["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function l(r){var i,a=r||window.event,l=o.call(arguments,1),f=0,p=0,d=0,h=0,m=0;if((r=e.event.fix(a)).type="mousewheel","detail"in a&&(d=-1*a.detail),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(p=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(p=-1*d,d=0),f=0===d?p:d,"deltaY"in a&&(f=d=-1*a.deltaY),"deltaX"in a&&(p=a.deltaX,0===d&&(f=-1*p)),0!==d||0!==p){if(1===a.deltaMode){var g=e.data(this,"mousewheel-line-height");f*=g,d*=g,p*=g}else if(2===a.deltaMode){var v=e.data(this,"mousewheel-page-height");f*=v,d*=v,p*=v}if(i=Math.max(Math.abs(d),Math.abs(p)),(!n||i<n)&&(n=i,u(a,i)&&(n/=40)),u(a,i)&&(f/=40,p/=40,d/=40),f=Math[f>=1?"floor":"ceil"](f/n),p=Math[p>=1?"floor":"ceil"](p/n),d=Math[d>=1?"floor":"ceil"](d/n),s.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();h=r.clientX-y.left,m=r.clientY-y.top}return r.deltaX=p,r.deltaY=d,r.deltaFactor=n,r.offsetX=h,r.offsetY=m,r.deltaMode=0,l.unshift(r,f,p,d),t&&clearTimeout(t),t=setTimeout(c,200),(e.event.dispatch||e.event.handle).apply(this,l)}}function c(){n=null}function u(e,t){return s.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},i=[n(2)],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){(function(r,i){var o,a,s,l;!function(e){var t=function(){return t.cache.hasOwnProperty(arguments[0])||(t.cache[arguments[0]]=t.parse(arguments[0])),t.format.call(null,t.cache[arguments[0]],arguments)};t.format=function(e,i){var o,a,s,l,c,u,f,p=1,d=e.length,h="",m=[];for(a=0;a<d;a++)if("string"===(h=n(e[a])))m.push(e[a]);else if("array"===h){if((l=e[a])[2])for(o=i[p],s=0;s<l[2].length;s++){if(!o.hasOwnProperty(l[2][s]))throw t(\'[sprintf] property "%s" does not exist\',l[2][s]);o=o[l[2][s]]}else o=l[1]?i[l[1]]:i[p++];if(/[^s]/.test(l[8])&&"number"!==n(o))throw t("[sprintf] expecting number but found %s",n(o));switch(l[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=l[7]?o.toExponential(l[7]):o.toExponential();break;case"f":o=l[7]?parseFloat(o).toFixed(l[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&l[7]?o.substring(0,l[7]):o;break;case"u":o>>>=0;break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(l[8])&&l[3]&&o>=0?" +"+o:o,u=l[4]?"0"===l[4]?"0":l[4].charAt(1):" ",f=l[6]-String(o).length,c=l[6]?r(u,f):"",m.push(l[5]?o+c:c+o)}return m.join("")},t.cache={},t.parse=function(e){for(var t=e,n=[],r=[],i=0;t;){if(null!==(n=/^[^\\x25]+/.exec(t)))r.push(n[0]);else if(null!==(n=/^\\x25{2}/.exec(t)))r.push("%");else{if(null===(n=/^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|\'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(n[2]){i|=1;var o=[],a=n[2],s=[];if(null===(s=/^([a-z_][a-z_\\d]*)/i.exec(a)))throw"[sprintf] huh?";for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\\.([a-z_][a-z_\\d]*)/i.exec(a)))o.push(s[1]);else{if(null===(s=/^\\[(\\d+)\\]/.exec(a)))throw"[sprintf] huh?";o.push(s[1])}n[2]=o}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(n)}t=t.substring(n[0].length)}return r};function n(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function r(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}e.sprintf=t,e.vsprintf=function(e,n,r){return(r=n.slice(0)).splice(0,0,e),t.apply(null,r)}}(void 0!==r?r:window),l=function(e,t){"use strict";function n(){var t=e.Callbacks(),n=!1;this.resolve=function(){t.fire(),n=!0},this.add=function(e){n?e():t.add(e)}}e.omap=function(t,n){var r={};return e.each(t,function(e,i){r[e]=n.call(t,e,i)}),r},e.fn.text_length=function(){return this.map(function(){return e(this).text().length}).get().reduce(function(e,t){return e+t},0)};var r,o={clone_object:function(t){var n={};if("object"==typeof t){if(e.isArray(t))return this.clone_array(t);if(null===t)return t;for(var r in t)e.isArray(t[r])?n[r]=this.clone_array(t[r]):"object"==typeof t[r]?n[r]=this.clone_object(t[r]):n[r]=t[r]}return n},clone_array:function(t){if(!e.isFunction(Array.prototype.map))throw new Error("Your browser don\'t support ES5 array map use es5-shim");return t.slice(0).map(function(e){return"object"==typeof e?this.clone_object(e):e}.bind(this))}},a=function(e){return o.clone_object(e)},s=function(){try{var e=window.localStorage;return e.setItem("test","1"),e.removeItem("test"),!0}catch(e){return!1}}();function l(e,t){var n;if("string"==typeof e&&"string"==typeof t)return r[e]=t,!0;if("object"==typeof e&&void 0===t){for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return!0}return!1}function c(e,t){var n,r,i;if((n=new Date).setTime(n.getTime()+31536e6),r="; expires="+n.toGMTString(),"string"==typeof e&&"string"==typeof t)return document.cookie=e+"="+t+r+"; path=/",!0;if("object"==typeof e&&void 0===t){for(i in e)e.hasOwnProperty(i)&&(document.cookie=i+"="+e[i]+r+"; path=/");return!0}return!1}function u(e){return r[e]}function f(e){return delete r[e]}(function(){try{return document.cookie.split(";"),!0}catch(e){return!1}})()||s?(s&&(r=window.localStorage),e.extend({Storage:{set:s?l:c,get:s?u:function(e){var t,n,r,i;for(t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},remove:s?f:function(e){return c(e,"")}}})):(r={},e.extend({Storage:{set:l,get:u,remove:f}}));var p=e;p.fn.extend({everyTime:function(e,t,n,r,i){return this.each(function(){p.timer.add(this,e,t,n,r,i)})},oneTime:function(e,t,n){return this.each(function(){p.timer.add(this,e,t,n,1)})},stopTime:function(e,t){return this.each(function(){p.timer.remove(this,e,t)})}}),p.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(e===t||null===e)return null;var n=this.regex.exec(p.trim(e.toString()));return n[2]?parseInt(n[1],10)*(this.powers[n[2]]||1):e},add:function(e,t,n,r,i,o){var a=0;if(p.isFunction(n)&&(i||(i=r),r=n,n=t),!("number"!=typeof(t=p.timer.timeParse(t))||isNaN(t)||t<=0)){i&&i.constructor!==Number&&(o=!!i,i=0),i=i||0,o=o||!1,e.$timers||(e.$timers={}),e.$timers[n]||(e.$timers[n]={}),r.$timerID=r.$timerID||this.guid++;var s=function(){o&&s.inProgress||(s.inProgress=!0,(++a>i&&0!==i||!1===r.call(e,a))&&p.timer.remove(e,n,r),s.inProgress=!1)};s.$timerID=r.$timerID,e.$timers[n][r.$timerID]||(e.$timers[n][r.$timerID]=window.setInterval(s,t)),this.global[n]||(this.global[n]=[]),this.global[n].push(e)}},remove:function(e,t,n){var r,i=e.$timers;if(i){if(t){if(i[t]){if(n)n.$timerID&&(window.clearInterval(i[t][n.$timerID]),delete i[t][n.$timerID]);else for(var o in i[t])i[t].hasOwnProperty(o)&&(window.clearInterval(i[t][o]),delete i[t][o]);for(r in i[t])if(i[t].hasOwnProperty(r))break;r||(r=null,delete i[t])}}else for(var a in i)i.hasOwnProperty(a)&&this.remove(e,a,n);for(r in i)if(i.hasOwnProperty(r))break;r||(e.$timers=null)}}}}),/(msie) ([\\w.]+)/.exec(navigator.userAgent.toLowerCase())&&e(window).one("unload",function(){var e=p.timer.global;for(var t in e)if(e.hasOwnProperty(t))for(var n=e[t],r=n.length;--r;)p.timer.remove(n[r],t)}),function(e){if(String.prototype.split.toString().match(/\\[native/)){var t,n=String.prototype.split,r=void 0===/()??/.exec("")[1];t=function(e,t,i){if("[object RegExp]"!==Object.prototype.toString.call(t))return n.call(e,t,i);var o,a,s,l,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),f=0;for(t=new RegExp(t.source,u+"g"),e+="",r||(o=new RegExp("^"+t.source+"$(?!\\\\s)",u)),i=void 0===i?-1>>>0:i>>>0;(a=t.exec(e))&&!((s=a.index+a[0].length)>f&&(c.push(e.slice(f,a.index)),!r&&a.length>1&&a[0].replace(o,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)}),a.length>1&&a.index<e.length&&Array.prototype.push.apply(c,a.slice(1)),l=a[0].length,f=s,c.length>=i));)t.lastIndex===a.index&&t.lastIndex++;return f===e.length?!l&&t.test("")||c.push(""):c.push(e.slice(f)),c.length>i?c.slice(0,i):c},String.prototype.split=function(e,n){return t(this,e,n)}}}(),e.fn.caret=function(e){var t=this[0],n="true"===t.contentEditable;if(0===arguments.length){if(window.getSelection)return n?(t.focus(),(i=(r=window.getSelection().getRangeAt(0)).cloneRange()).selectNodeContents(t),i.setEnd(r.endContainer,r.endOffset),i.toString().length):t.selectionStart;if(document.selection){if(t.focus(),n){var r=document.selection.createRange();return(i=document.body.createTextRange()).moveToElementText(t),i.setEndPoint("EndToEnd",r),i.text.length}e=0;var i,o=t.createTextRange(),a=(i=document.selection.createRange().duplicate()).getBookmark();for(o.moveToBookmark(a);0!==o.moveStart("character",-1);)e++;return e}return 0}if(-1===e&&(e=this[n?"text":"val"]().length),window.getSelection)n?(t.focus(),window.getSelection().collapse(t.firstChild,e)):t.setSelectionRange(e,e);else if(document.body.createTextRange){(o=document.body.createTextRange()).moveToElementText(t),o.moveStart("character",e),o.collapse(!0),o.select()}return n||this.is(":focus")||t.focus(),e};var d=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return setTimeout(e,20)};function h(e){e.attr({role:"presentation","aria-hidden":"true"})}e.fn.resizer=function(t){var n="unbind"===arguments[0];if(!n&&!e.isFunction(t))throw new Error(\'Invalid argument, it need to a function or string "unbind".\');return n&&(t=e.isFunction(arguments[1])?arguments[1]:null),this.each(function(){var r,i=e(this);if(n){if(r=i.data("callbacks"),t&&r?(r.remove(t),r.has()||(r=null)):r=null,!r)if(i.removeData("callbacks"),window.ResizeObserver){var o=i.data("observer");o&&(o.unobserve(this),i.removeData("observer"))}else i.find(".resizer").remove()}else if(i.data("callbacks"))e(this).data("callbacks").add(t);else{var a;(r=e.Callbacks()).add(t),i.data("callbacks",r);var s=!0;if(window.ResizeObserver)return(a=new ResizeObserver(function(){s||i.data("callbacks").fire();s=!1})).observe(this),void i.data("observer",a);var l=this,c="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",u="position: absolute; left: 0; top: 0; transition: 0s;";(a=e("<div/>").addClass("resizer").appendTo(this)[0]).style.cssText=c,a.innerHTML=\'<div class="resize-sensor-expand" style="\'+c+\'"><div style="\'+u+\'"></div></div><div class="resize-sensor-shrink" style="\'+c+\'"><div style="\'+u+\' width: 200%; height: 200%"></div></div>\';var f,p,h,m,g=a.childNodes[0],v=g.childNodes[0],y=a.childNodes[1],b=l.offsetWidth,x=l.offsetHeight,w=function(){v.style.width="100000px",v.style.height="100000px",g.scrollLeft=1e5,g.scrollTop=1e5,y.scrollLeft=1e5,y.scrollTop=1e5};w();var k=function(){p=0,f&&(b=h,x=m,r.fire())},_=function(){h=l.offsetWidth,m=l.offsetHeight,(f=h!==b||m!==x)&&!p&&(p=d(k)),w()};e(g).on("scroll",_),e(y).on("scroll",_)}})};var m=[];function g(e,t){var n=(e?e+": ":"")+v(t);-1===m.indexOf(n)&&(m.push(n),alert(n+(t.stack?"\\n"+t.stack:"")))}function v(e){return"string"==typeof e?e:"string"==typeof e.fileName?e.fileName+": "+e.message:e.message}function y(){var t=[].slice.call(arguments),n=0;e.extend(this,{get:function(){return t},index:function(){return n},rotate:function(e){if(!e&&!t.filter(function(e){return void 0!==e}).length)return;return 1===t.length?t[0]:(n===t.length-1?n=0:++n,void 0!==t[n]?t[n]:this.rotate(!0))},length:function(){return t.length},remove:function(e){delete t[e]},set:function(e){for(var r=t.length;r--;)if(t[r]===e)return void(n=r);this.append(e),n=t.length-1},front:function(){if(t.length){for(var e=n,r=!1;!t[e];)if(++e>t.length){if(r)break;e=0,r=!0}return t[e]}},map:function(e){return t.filter(Boolean).map(e)},forEach:function(e){t.filter(Boolean).forEach(e)},append:function(e){t.push(e)}})}function b(t){var n=t instanceof Array?t:t?[t]:[];e.extend(this,{data:function(){return n},map:function(t){return e.map(n,t)},size:function(){return n.length},pop:function(){if(0===n.length)return null;var e=n[n.length-1];return n=n.slice(0,n.length-1),e},push:function(e){return n=n.concat([e]),e},top:function(){return n.length>0?n[n.length-1]:null},clone:function(){return new b(n.slice(0))}})}function x(t,n,r){var i,o=!0,a="";"string"==typeof t&&""!==t&&(a=t+"_"),a+="commands";var s=(i=r?[]:(i=e.Storage.get(a))?JSON.parse(i):[]).length-1;e.extend(this,{append:function(t){o&&i[i.length-1]!==t&&(i.push(t),n&&i.length>n&&(i=i.slice(-n)),s=i.length-1,r||e.Storage.set(a,JSON.stringify(i)))},set:function(t){t instanceof Array&&(i=t,r||e.Storage.set(a,JSON.stringify(i)))},data:function(){return i},reset:function(){s=i.length-1},last:function(){return i[i.length-1]},end:function(){return s===i.length-1},position:function(){return s},current:function(){return i[s]},next:function(){var e=s;if(s<i.length-1&&++s,e!==s)return i[s]},previous:function(){var e=s;if(s>0&&--s,e!==s)return i[s]},clear:function(){i=[],this.purge()},enabled:function(){return o},enable:function(){o=!0},purge:function(){r||e.Storage.remove(a)},disable:function(){o=!1}})}var w=0;e.fn.cmd=function(n){var r=this,i=r.data("cmd");if(i)return i;var o=w++;r.addClass("cmd"),r.append(\'<span class="prompt"></span>\'),r.append(\'<div class="cursor-line"><span></span><span class="cursor">&nbsp;</span><span></span></div>\'),h(r.find(".cursor-line"));var a,s,l=e("<textarea>").attr({autocapitalize:"off",spellcheck:"false",tabindex:1}).addClass("clipboard").appendTo(r).val(" ");n.width&&r.width(n.width);var c,u,f,p,d,m,v,y,b=r.find(".prompt"),k=!1,_="",C=null,S=n.mask||!1,T="",A="",L=0,M=0,F=n.historySize||60,E=r.find(".cursor"),O=0;var D,N={SPACEBAR:" ",UP:"ARROWUP",DOWN:"ARROWDOWN",LEFT:"ARROWLEFT",RIGHT:"ARROWRIGHT",DEL:"DELETE",MULTIPLY:"*",DIVIDE:"/",SUBTRACT:"-",ADD:"+"};var P={"ALT+D":function(){return r.set(T.slice(0,L)+T.slice(L).replace(/ *[^ ]+ *(?= )|[^ ]+$/,""),!0),!1},ENTER:function(){(m&&T&&!S&&e.isFunction(n.historyFilter)&&n.historyFilter(T)||n.historyFilter instanceof RegExp&&T.match(n.historyFilter)||!n.historyFilter)&&m.append(T);var t=T;return m.reset(),Ae="",Ce=!0,r.set(""),n.commands&&n.commands(t),e.isFunction(f)&&de(),l.val(""),!1},"SHIFT+ENTER":function(){return r.insert("\\n"),!0},BACKSPACE:function(){k?(_=_.slice(0,-1),ne()):""!==T&&L>0&&r.delete(-1),r.oneTime(1,function(){Ce=!0})},TAB:function(){r.insert("\\t")},"CTRL+D":function(){return r.delete(1),!1},DELETE:function(){return r.delete(1),!0},ARROWUP:I,"CTRL+P":I,ARROWDOWN:q,"CTRL+N":q,ARROWLEFT:B,"CTRL+B":B,"CTRL+ARROWLEFT":function(){var e=L-1,t=0;" "===T[e]&&--e;for(var n=e;n>0;--n){if(" "===T[n]&&" "!==T[n+1]){t=n+1;break}if("\\n"===T[n]&&"\\n"!==T[n+1]){t=n;break}}r.position(t)},"CTRL+R":function(){return k?re(!0):(c=f,ne(),u=T,r.set(""),pe(),k=!0),!1},"CTRL+G":function(){if(k)return f=c,de(),r.set(u),pe(),k=!1,_="",!1},ARROWRIGHT:$,"CTRL+F":$,"CTRL+ARROWRIGHT":function(){" "===T[L]&&++L;var e=T.slice(L).match(/\\S[\\n\\s]{2,}|[\\n\\s]+\\S?/);!e||e[0].match(/^\\s+$/)?r.position(T.length):" "!==e[0][0]?L+=e.index+1:(L+=e.index+e[0].length-1," "!==e[0][e[0].length-1]&&--L),pe()},F12:R,END:G,"CTRL+E":G,HOME:V,"CTRL+A":V,"SHIFT+INSERT":j,"CTRL+SHIFT+T":R,"CTRL+W":function(){if(""!==T&&0!==L){var e=T.slice(0,L).match(/([^ ]+ *$)/);e[0].length&&(A=r.delete(-e[0].length),Y(r,A))}return!1},"CTRL+H":function(){return""!==T&&L>0&&r.delete(-1),!1},"CTRL+X":R,"CTRL+C":R,"CTRL+T":R,"CTRL+Y":function(){""!==A&&r.insert(A)},"CTRL+V":j,"META+V":j,"CTRL+K":function(){return T.length-L&&(A=r.delete(T.length-L),Y(r,A)),!1},"CTRL+U":function(){return""!==T&&0!==L&&(A=r.delete(-L),Y(r,A)),!1},"CTRL+TAB":function(){return!1},"META+`":R,"META+R":R,"META+L":R};function R(){return!0}function j(){return l.val(""),O=0,r.isenabled()&&!l.is(":focus")&&l.trigger("focus",[!0]),l.one("input",he),!0}function I(){return ye?(u=T,r.set(m.current())):r.set(m.previous()),ye=!1,!1}function q(){return r.set(m.end()?u:m.next()),!1}function B(){L>0&&(r.position(-1,!0),pe())}function $(){return L<T.length&&r.position(1,!0),!1}function V(){r.position(0)}function G(){r.position(T.length)}function Q(){var e=l.is(":focus");p?r.oneTime(10,function(){!l.is(":focus")&&p&&l.trigger("focus",[!0])}):!e||!X&&p||l.trigger("blur",[!0])}function Z(e){r.isenabled()&&r.oneTime(10,function(){l.val()===T||e||l.val(" "+T),p&&r.oneTime(10,function(){try{l.caret()!==L+1&&l.caret(L+1)}catch(e){}})})}if(z&&!H)v=function(e){e?E.addClass("blink"):E.removeClass("blink")},y=function(){var e=E.clone();e.insertBefore(E),E.remove(),E=e};else{var ee=!1;v=function(e){e&&!ee?(ee=!0,E.addClass("inverted blink"),r.everyTime(500,"blink",te)):ee&&!e&&(ee=!1,r.stopTime("blink",te),E.removeClass("inverted blink"))},y=function(){v(!1),v(!0)}}function te(){E.toggleClass("inverted")}function ne(){f="(reverse-i-search)`"+_+"\': ",de()}function re(t){var n,i,o=m.data(),a=o.length;if(t&&C>0&&(a-=C),_.length>0)for(var s=_.length;s>0;s--){i=e.terminal.escape_regex(_.substring(0,s)),n=new RegExp(i);for(var l=a;l--;)if(n.test(o[l]))return C=o.length-l,r.position(o[l].indexOf(i)),r.set(o[l],!0),pe(),void(_.length!==s&&(_=_.substring(0,s),ne()))}_=""}function ie(t){function n(t){return e.terminal.split_equal(t,a)}function r(t){return t.filter(function(t){return!e.terminal.strip(t).match(/^ $/)})}var i,o=b.text(),l=new RegExp("^"+e.terminal.escape_regex(o));if(t.match(/\\n/)){for(var c=t.split("\\n"),u=a-s-1,f=0;f<c.length-1;++f)c[f]+=" ";for(W(c[0])>u?((i=n(o+c[0]))[0]=i[0].replace(l,""),i=r(i)):i=[c[0]],f=1;f<c.length;++f)if(W(c[f])>a){var p=n(c[f]);f<c.length-1&&(p=r(p)),i=i.concat(p)}else i.push(c[f])}else(i=n(o+t))[0]=i[0].replace(l,"");return i}function oe(t){t=e.terminal.escape_formatting(t);try{return e.terminal.apply_formatters(t)}catch(e){g("[Formatting]",e)}}function ae(t){return e.terminal.format(e.terminal.encode(function(t){function n(t){return e.terminal.is_formatting(t)?t.match(/\\]\\\\\\]/)&&(t=t.replace(/\\]\\\\\\]/g,"]\\\\\\\\]")):(t.match(/\\\\$/)&&(t+="\\\\"),t="[[;;]"+t+"]"),t}var r=se(t);if(1===r)return n(t);for(var i=[],o=0;o<r;++o){var a=e.terminal.substring(t,o,o+1);i.push(n(a))}return i.join("")}(t)))}function se(t){return e.terminal.length(t)}function le(t,n,r){return e.terminal.substring(t,n,r)}function ce(t){var n=e.terminal.defaults.formatters.filter(function(e){return e instanceof Array});return 0===t?t:n.length?n.reduce(function(e,t){var n=e[0],r=e[1];return function(e,t,n,r){var i,o,a,s="",l=0,c=r;t.lastIndex=0;for(;i=t.exec(e);){var u=se(le(e,0,t.lastIndex));a=u-se(i[0]),l<a&&(s+=le(e,l,a)),l=u,o=n.replace(/\\$(\\$|\\d)/g,function(e,t){return"$"===t?"$":i[t]}),s+=o,a<r&&(u<r?c=Math.max(0,c+se(o)-se(i[0])):c+=se(o)-(r-a))}l<se(e)&&(s+=le(e,l));return[s,c]}(n,t[0],t[1],r)},[T,t])[1]:t}window.get_splitted_command_line=ie;var ue,fe,pe=function(){var n=E.prev(),i=E.next(),o=E.parent();function l(t,r){var o=se(t);if(r===o)n.html(ae(t)),E.html("&nbsp;"),i.html("");else if(0===r)n.html(""),E.html(ae(le(t,0,1))),i.html(ae(le(t,1)));else{var a=e.terminal.substring(t,0,r);n.html(ae(a));var s=le(t,r,r+1);E.html(ae(s)),r===o-1?i.html(""):i.html(ae(le(t,r+1)))}}function c(e){return\'<div role="presentation" aria-hidden="true">\'+ae(e)+"</div>"}function u(t){var n=o;e.each(t,function(t,r){n=e(c(r)).insertAfter(n)})}function f(t){e.each(t,function(e,t){o.before(c(t))})}return function(){var p;switch(typeof S){case"boolean":p=S?T.replace(/./g,"*"):T;break;case"string":p=T.replace(/./g,S)}var d,h=M;if(p=oe(U(p.replace(/&/g,"&amp;"))),r.find("div:not(.cursor-line,.clipboard-wrapper)").remove(),n.html(""),W(K(p))>a-s-1||p.match(/\\n/)){var m=p.match(/\\t/g),g=m?3*m.length:0;m&&(p=p.replace(/\\t/g,"\\0\\0\\0\\0"));var v=ie(p);m&&(v=e.map(v,function(e){return e.replace(/\\x00\\x00\\x00\\x00/g,"\\t")}));var y=se(v[0]);if(0===y&&1===v.length);else if(h<y)l(v[0],h),u(v.slice(1));else if(h===y)o.before(c(v[0])),l(v[1]||"",0),v.length>1&&u(v.slice(2));else if(h<y)l(v[0],h),u(v.slice(1));else if(h===y)o.before(c(v[0])),l(v[1],0),u(v.slice(2));else{var b=v.slice(-1)[0],x=se(p)-h-g,w=se(b),k=0;if(-1===x&&(x=0),x<=w)f(v.slice(0,-1)),l(b,k=w===x?0:w-x);else{var _,C;for(k=h,d=0;d<v.length;++d){var A=e.terminal.length(v[d]);if(!(k>A))break;k-=A}if(_=d,k===se(C=v[d])&&(k=0,(C=v[++_])===t)){var L=e.terminal.defaults.strings.redrawError;throw new Error(L)}l(C,k),f(v.slice(0,_)),u(v.slice(_+1))}}}else""===p?(n.html(""),E.html("&nbsp;"),i.html("")):l(p,h)}}(),de=function(){function t(t){var n=e.terminal.split_equal(e.terminal.encode(t),a),r=e.terminal.format(n[n.length-1]),i=n.slice(0,-1).map(function(t){return\'<span class="line">\'+e.terminal.format(t)+"</span>"}).concat([r]).join("\\n");b.html()!==i&&(b.html(i),s=W(e("<span>"+r+"</span>").text()))}return function(){switch(typeof f){case"string":t(f);break;case"function":f(t)}}}();function he(){O++>0||r.isenabled()&&r.oneTime(100,function(){r.insert(l.val()),l.val(T),Z()})}function me(){e.isFunction(n.onCommandChange)&&n.onCommandChange(T)}function ge(e){return e.replace(/[\\r\\n]{2}/g,"\\n")}e.extend(r,{name:function(e){if(e!==t){d=e;var i=m&&m.enabled()||!m;return m=new x(e,F,"memory"===n.history),i||m.disable(),r}return d},purge:function(){return m.clear(),r},history:function(){return m},delete:function(e,t){var n;return 0===e?r:(e<0?L>0&&(n=T.slice(0,L).slice(e),T=T.slice(0,L+e)+T.slice(L,T.length),t||r.position(L+e),me()):""!==T&&L<T.length&&(n=T.slice(L).slice(0,e),T=T.slice(0,L)+T.slice(L+e,T.length),me()),pe(),Z(),n)},set:function(e,n,i){return e!==t&&(T=ge(e),n||r.position(T.length),pe(),Z(),i||me()),r},keymap:function(t,n){function i(e,t){return function(n){return t(n,P[e])}}if(void 0===t)return D;if("string"!=typeof t)return D=e.extend({},P,e.omap(t||{},i)),r;if(void 0===n){if(D[t])return D[t];if(P[t])return P[t]}else D[t]=i(t,n)},insert:function(e,t){return e=ge(e),L===T.length?T+=e:T=0===L?e+T:T.slice(0,L)+e+T.slice(L),t?Z():r.position(e.length,!0),pe(),me(),Z(),r},get:function(){return T},commands:function(e){return e?(n.commands=e,r):e},destroy:function(){return Ee.unbind("keypress.cmd",Oe),Ee.unbind("keydown.cmd",Le),Ee.unbind("input.cmd",Pe),r.stopTime("blink",te),r.find(".cursor").next().remove().end().prev().remove().end().remove(),r.find(".prompt, .clipboard").remove(),r.removeClass("cmd").removeData("cmd").off(".cmd"),r},prompt:function(e){if(e===t)return f;if("string"!=typeof e&&"function"!=typeof e)throw new Error("prompt must be a function or string");return f=e,de(),pe(),r},kill_text:function(){return A},position:function(t,i){return"number"==typeof t?(i?L+=t:L=t<0?0:t>T.length?T.length:t,M=ce(L),e.isFunction(n.onPositionChange)&&n.onPositionChange(L),pe(),Z(!0),r):L},display_position:function(n,i){if(n===t)return M;var o,a=oe(T),s=e.terminal.length(a),l=e.terminal.length(T);if(s===l)return r.position(n);if((o=i?M+n:n>s?s:n)===s)r.position(e.terminal.length(T));else for(var c=0;c<l;++c)o===ce(c)&&r.position(c);return r},visible:(fe=r.visible,function(){fe.apply(r,[]),pe(),de()}),show:(ue=r.show,function(){ue.apply(r,[]),pe(),de()}),resize:function(e){var t,n,i;return e?a=e:(t=r.find(".prompt").text("&nbsp;"),n=r.width(),i=t[0].getBoundingClientRect().width,a=Math.floor(n/i),de()),pe(),de(),r},enable:function(){if(!p){p=!0,r.addClass("enabled");try{l.caret(L)}catch(e){}v(!0),de()}return Q(),r},isenabled:function(){return p},disable:function(e){return p=!1,r.removeClass("enabled"),v(!1),e||Q(),r},mask:function(e){return void 0===e?S:(S=e,pe(),r)}}),r.name(n.name||n.prompt||""),f="string"==typeof n.prompt?n.prompt:"> ",de(),n.enabled!==t&&!0!==n.enabled||r.enable(),n.history||m.disable();var ve,ye=!0,be=!1,xe=!1,we=!1,ke=!1,_e=!1,Ce=!0,Se=!1,Te=!1,Ae="";function Le(i){var o;Ne(\'keydown "\'+i.key+\'" \'+i.fake+" "+i.which),Te="process"===(i.key||"").toLowerCase()||0===i.which,xe=ke&&we;try{i.fake||(we=i.key&&1===i.key.length&&!i.ctrlKey,_e="unidentified"===String(i.key).toLowerCase(),Se="BACKSPACE"===i.key.toUpperCase()||8===i.which)}catch(e){}if("Unidentified"!==i.key){i.fake||(ke=!0,Ce=!1),l.off("input",he);var a=function(e){if(e.key){var t=e.key.toUpperCase();if(N[t]&&(t=N[t]),"CONTROL"===t)return"CTRL";var n=[];return e.ctrlKey&&n.push("CTRL"),e.metaKey&&"META"!==t&&n.push("META"),e.shiftKey&&"SHIFT"!==t&&n.push("SHIFT"),e.altKey&&"ALT"!==t&&n.push("ALT"),n.length&&" "===t&&(t="SPACEBAR"),e.key&&n.push(t),n.join("+")}}(i);if(e.isFunction(n.keydown)&&(o=n.keydown(i))!==t)return o||(ve=!0),o;if(p)if(y(),ve=-1!==["CTRL+V","META+V"].indexOf(a),38===i.which||80===i.which&&i.ctrlKey||(ye=!0),!k||35!==i.which&&36!==i.which&&37!==i.which&&38!==i.which&&39!==i.which&&40!==i.which&&13!==i.which&&27!==i.which){if(!e.isFunction(D[a]))return i.altKey?void 0:void(be=!1);if(!0===(o=D[a]()))return;if(o!==t)return o}else f=c,k=!1,C=null,_="",de(),27===i.which&&r.set(""),pe(),Le.call(this,i)}else Ce=!0}var Me,Fe,Ee=e(document.documentElement||window);function Oe(i){var o;if(Ne(\'keypress "\'+i.key+\'" \'+i.fake),i.fake||(ke=!1),(!i.ctrlKey&&!i.metaKey||i.altKey)&&!be){if(e.isFunction(n.keypress)&&(o=n.keypress(i))!==t)return o||(ve=!0),o;if(p){if(i.fake)return;var a;if(function(){if(!("KeyboardEvent"in window&&"key"in window.KeyboardEvent.prototype))return!1;var e=window.KeyboardEvent.prototype;return Object.getOwnPropertyDescriptor(e,"key").get.toString().match(/\\[native code\\]/)}()||i.fake){var s=(a=i.key).toUpperCase();N[s]&&(a=N[s])}if(a&&!_e||(a=String.fromCharCode(i.which)),e.inArray(i.which,[13,0,8])>-1){if(123===i.keyCode)return;return!1}!a||!(!i.ctrlKey||i.ctrlKey&&i.ctrlKey)||i.altKey&&100===i.which&&!i.altKey||xe||(k?(_+=a,re(),ne()):1===a.length&&r.insert(a))}}}function De(t,n,r){var i=e.Event(t);i.which=r,i.key=n,i.fake=!0,Ee.trigger(i)}function Ne(e){0}function Pe(e){Ne(),Ne(JSON.stringify({data:e.originalEvent.data,inputType:e.originalEvent.data}));var t=l.val();if((Ce||Te||(ke||xe)&&!ve&&(we||_e)&&!Se)&&t!==T){var n=L;if(Ce){var i=Ae;Se=i.substring(0,i.length-1).length===t.length}if(k)_=t,re(),ne();else{var o=t.substring(L);if(1===o.length||Se){var a;if(Ce)a=Se?8:o.toUpperCase().charCodeAt(0),De("keydown",Se?"Backspace":o,a);ke&&!Se&&De("keypress",o,o.charCodeAt(0))}if(Se)return void(Ae=T);if(ve)return void(ve=!1);r.set(t)}Se?r.position(n-1):r.position(n+Math.abs(t.length-Ae.length))}Ae=T,ve=!1,Ce=!0}return r.keymap(n.keymap||{}),Ee.bind("keypress.cmd",Oe).bind("keydown.cmd",Le).bind("input.cmd",Pe),Me=!1,Fe=0,r.on("mousedown.cmd",function(){Me=!0}).on("mouseup.cmd",function(t){if(0===t.originalEvent.button&&""===J()){var i="click_"+o;if(1==++Fe){var a=Me;p?r.oneTime(n.clickTimeout,i,function(){var n=e(t.target);!n.is(".prompt")&&a&&p&&(n.is(".cmd")?r.position(T.length):r.display_position(function(t){var n=e(t.target);if(n.is("span"))return n.index()+n.parents("span").prevAll().text_length()+n.closest(\'[role="presentation"]\').prevUntil(".prompt").text_length();if(n.is(\'div[role="presentation"]\')){var r=n.index(),i=T.split(/\\n/).slice(0,r);return i.reduce(function(e,t){return e+se(t)},0)+(i.length-1)}}(t))),Fe=0}):Fe=0}else r.stopTime(i),Fe=0}Me=!1}),r.data("cmd",r),"KeyboardEvent"in window&&"key"in window.KeyboardEvent.prototype||setTimeout(function(){throw new Error("key event property not supported try https://github.com/cvan/keyboardevent-key-polyfill")},0),r};var k=/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,_=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i,C=/(\\[\\[[!gbiuso]*;[^;]*;[^\\]]*\\](?:[^\\]]*[^\\\\](\\\\\\\\)*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]?)/i,S=/\\[\\[([!gbiuso]*);([^;]*);([^;\\]]*);?([^;\\]]*);?([^\\]]*)\\]([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]?/gi,T=/\\[\\[([!gbiuso]*;[^;\\]]*;[^;\\]]*(?:;|[^\\]()]*);?[^\\]]*)\\]([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]?/gi,A=/\\[\\[([!gbiuso]*;[^;\\]]*;[^;\\]]*(?:;|[^\\]()]*);?[^\\]]*)\\]([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]/gi,L=/^\\[\\[([!gbiuso]*;[^;\\]]*;[^;\\]]*(?:;|[^\\]()]*);?[^\\]]*)\\]([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]$/gi,M=/^#([0-9a-f]{3}|[0-9a-f]{6})$/i,F=/(\\bhttps?:\\/\\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\\s"\'<>\\][)])+\\b)/gi,E=/\\b(https?:\\/\\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\\s"\'<>\\][)])+)\\b(?![^[\\]]*])/gi,O=/((([^<>(\'")[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))/g,D=/((?:"[^"\\\\]*(?:\\\\[\\S\\s][^"\\\\]*)*"|\'[^\'\\\\]*(?:\\\\[\\S\\s][^\'\\\\]*)*\'|\\/[^\\/\\\\]*(?:\\\\[\\S\\s][^\\/\\\\]*)*\\/[gimy]*(?=\\s|$)|(?:\\\\\\s|\\S))+)(?=\\s|$)/gi,N=/(\\[\\[[!gbiuso]*;[^;]*;[^\\]]*\\])/i,P=/^(\\[\\[[!gbiuso]*;[^;]*;[^\\]]*\\])/i,R=/\\[\\[[!gbiuso]*;[^;]*;[^\\]]*\\]?$/i,j=/(\\[\\[(?:[^\\]]|\\\\\\])+\\]\\])/,I=/^[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$/,q=/^\\/((?:\\\\\\/|[^/]|\\[[^\\]]*\\/[^\\]]*\\])+)\\/([gimy]*)$/,B=/^(?=((?:[^"\']+|"[^"\\\\]*(?:\\\\[^][^"\\\\]*)*"|\'[^\'\\\\]*(?:\\\\[^][^\'\\\\]*)*\')*))\\1./,z=function(){var e=!1,n="Webkit Moz O ms Khtml".split(" "),r=document.createElement("div");if(r.style.animationName&&(e=!0),!1===e)for(var i=0;i<n.length;i++){var o=n[i]+"AnimationName";if(r.style[o]!==t){e=!0;break}}return r=null,e}(),H=-1!==navigator.userAgent.toLowerCase().indexOf("android"),W="undefined"==typeof wcwidth?function(e){return e.length}:wcwidth;function $(t){return t.match(/&/)?e("<span>"+U(t)+"</span>").text():t}function K(t){return $(e.terminal.strip(t))}function U(e){return e.match(/[<>]/)?e.replace(/>/g,"&gt;").replace(/</g,"&lt;"):e}var V,G,X=(V=navigator.userAgent||navigator.vendor||window.opera,G=!1,(k.test(V)||_.test(V.substr(0,4)))&&(G=!0),G),J=window.getSelection||document.getSelection?function(){var e=(window.getSelection||document.getSelection)();return e.text?e.text:e.toString()}:document.selection&&"Control"!==document.selection.type?function(){return document.selection.createRange().text}:function(){return""};function Y(t,n){var r=e("<div>"+n.replace(/\\n/,"<br/>")+"<div>");r.appendTo("body"),function(e){if(window.getSelection){var t=window.getSelection();if(t.setBaseAndExtent)t.setBaseAndExtent(e,0,e,1);else if(document.createRange){var n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}}(r[0]);try{document.execCommand("copy")}catch(e){}r.remove()}var Q,Z,ee=(Q=document.createElement("textarea"),Z="selectionStart"in Q,Q=null,Z?function(e){var t=e.selectionEnd-e.selectionStart;return e.value.substr(e.selectionStart,t)}:document.selection?function(){return document.selection.createRange().text()}:function(){return""});var te=window.getSelection?window.getSelection().setBaseAndExtent?function(e,t){window.getSelection().setBaseAndExtent(e,0,t,1)}:function(e,t){var n=window.getSelection(),r=document.createRange();r.setStart(e,0),r.setEnd(t,t.childNodes.length),n.removeAllRanges(),n.addRange(r)}:e.noop;function ne(t,n){var r=t.match(D)||[];if(r.length){var i=r.shift(),o=e.map(r,function(e){return e.match(/^["\']/)?(e=e.replace(/\\n/g,"\\\\u0000\\\\u0000\\\\u0000\\\\u0000"),(e=n(e)).replace(/\\x00\\x00\\x00\\x00/g,"\\n")):n(e)}),a=e.map(r,function(e){var t=e.match(/^([\'"]).*\\1$/);return t&&t[1]||""});return{command:t,name:i,args:o,args_quotes:a,rest:t.substring(i.length).trim()}}return{command:t,name:"",args:[],args_quotes:a,rest:""}}e.terminal={version:"1.11.4",date:"Sat, 27 Jan 2018 15:44:36 +0000",color_names:["transparent","currentcolor","black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],Cycle:y,History:x,Stack:b,valid_color:function(t){return!!t.match(M)||-1!==e.inArray(t.toLowerCase(),e.terminal.color_names)},unclosed_strings:function(e){return!!e.match(B)},escape_regex:function(e){if("string"==typeof e){return e.replace(/([-\\\\^$[\\]()+{}?*.|])/g,"\\\\$1")}},have_formatting:function(e){return"string"==typeof e&&!!e.match(A)},is_formatting:function(e){return"string"==typeof e&&!!e.match(L)},format_split:function(e){return e.split(C).filter(Boolean)},iterate_formatting:function(e,n){function r(t){return"&nbsp;"===e.substring(t-6,t)||e.substring(t-1,t).match(/\\s/)}for(var i,o,a,s=!1,l=!1,c=0,u=-1,f=0,p=0;p<e.length;p++){(i=e.substring(p).match(P))?(s=i[1],l=!1):s?"]"===e[p]&&(l?(s="",l=!1):l=!0):l=!0;var d=s&&l||!s,h="["===e[p]&&"["===e[p+1];r(p)&&(d||h)&&(-1===u&&o!==p||-1!==u)&&(u=p);var m=e[p].match(/[[\\]]/);if(d)if("&"===e[p]){if(a=p,i=e.substring(a).match(/^(&[^;]+;)/)){p+=i[1].length-2;continue}++c,++f}else"]"===e[p]&&"\\\\"===e[p-1]?(--c,--f):m||(++c,++f);if(d&&"]"!==e[p]&&!h){2===W(e[p])&&f++;var g=n({count:c,index:p,formatting:s,length:f,text:l,space:u});if(!1===g)break;g&&(g.count!==t&&(c=g.count),g.length!==t&&(f=g.length),g.space!==t&&(o=u,u=g.space),g.index!==t&&(p=g.index))}}},substring:function(t,n,r){if(""===K(t).substring(n,r))return"";var i,o,a=t.length,s="",l="",c=/(&[^;]+);$/;return e.terminal.iterate_formatting(t,function(e){var u;n&&e.count===n+1&&(i=e.index,(u=t.substring(0,i+1).match(c))&&(i-=u[1].length),e.formatting&&(s=e.formatting)),r&&e.count===r+1&&(a=e.index,(u=t.substring(0,a+1).match(c))&&(a-=u[1].length),e.formatting&&(a=o+1)),r&&e.count===r&&(l=e.formatting,o=e.index)}),n&&!i?"":(t=s+t.substring(i,a),l&&(t=t.replace(/(\\[\\[^\\]]+)?\\]$/,""),t+="]"),t)},normalize:function(e){return e.replace(T,function(e,t,n){if(""===n)return"";var r=t.match(/;/g).length;if(r>=4){var i=t.split(/;/);return"[["+i.slice(0,4).join(";")+";"+(i.slice(4).join(";")||n)+"]"+n+"]"}return"[["+t+(r=2===r?";;":3===r?";":"")+n.replace(/\\\\\\]/g,"&#93;").replace(/\\n/g,"\\\\n").replace(/&nbsp;/g," ")+"]"+n+"]"})},split_equal:function(t,n,r){for(var i="",o=[],a=e.terminal.normalize(t).split(/\\n/g),s=0,l=a.length;s<l;++s)if(""!==a[s]){var c,u=a[s],f=0,p=u.length;e.terminal.iterate_formatting(u,function(t){var a=t.index===p-2&&"]"===u[t.index+1],s=t.index===p-1||a;if(t.length>=n||s||t.length===n-1&&2===W(u[t.index+1])){var l=!1;if(r&&-1!==t.space){var d=e.terminal.strip(u.substring(t.space)),h=(d=e("<span>"+d+"</span>").text()).length,m=t.index+n+1;((d=d.substring(0,m)).match(/\\s|&nbsp;/)||m>h)&&(l=!0)}if(r&&!a&&-1!==t.space&&t.index!==p-1&&l){c=u.substring(f,t.space);var g=t.space-1}else c=u.substring(f,t.index+1);if(r&&(c=c.replace(/^(&nbsp;|\\s)+|(&nbsp;|\\s)+$/g,"")),f=(g||t.index)+1,i){var v=c.match(/^[^\\]]*\\]/);c=i+c,v&&(i="")}a&&(c+="]",i="");var y=c.match(T);if(y){var b=y[y.length-1];"]"!==b[b.length-1]?(i=b.match(N)[1],c+="]"):c.match(R)&&(c=c.replace(R,""),i=b.match(N)[1])}return c=c.replace(/^(\\[\\[[^\\]]+\\])?\\]/,""),o.push(c),{index:g,length:0,space:-1}}})}else o.push("");return o},amp:function(e){return e.replace(/&(?!#[0-9]+;|[a-zA-Z]+;)/g,"&amp;")},encode:function(t){return e.terminal.amp(t).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")},nested_formatting:function(t){if(!e.terminal.have_formatting(t))return t;var n=[],r=/(\\[\\[(?:[^\\]]|\\\\\\])+\\])[\\s\\S]*/;return t.split(/((?:\\[\\[(?:[^\\]]|\\\\\\])+\\])?(?:[^\\][]|\\\\\\])*\\]?)/).filter(Boolean).map(function(t){if(t.match(/^\\[\\[/))e.terminal.is_formatting(t)||(t+="]",n.push(t.replace(r,"$1")));else{var i=!1;t.match(/\\]/)&&(i=!0),n.length&&(t=n[n.length-1]+t),i?n.pop():n.length&&(t+="]")}return t}).join("")},escape_formatting:function(t){return e.terminal.escape_brackets(t)},apply_formatters:function(t){var n=e.terminal.defaults.formatters,r=0;try{return n.reduce(function(t,n){if(r++,"function"!=typeof n||!n.__meta__)return e.terminal.format_split(t).map(function(t){if(e.terminal.is_formatting(t))return t;if(n instanceof Array)return t.replace(n[0],n[1]);if("function"==typeof n){var r=n(t);if("string"==typeof r)return r}return t}).join("");var i=n(t);return"string"==typeof i?i:t},t)}catch(e){throw new Error("Error in formatter ["+(r-1)+"]")}},format:function(t,n){function r(e){return e.match(/\\\\]/)&&(e=e.replace(/(\\\\+)]/g,function(e,t){return t.length%2==1?"]":t.replace(/../,"\\\\")})),U(e)}var i=e.extend({},{linksNoReferrer:!1},n||{});if("string"==typeof t){var o=e.terminal.format_split(t);return(t=e.map(o,function(t){if(""===t)return t;if(e.terminal.is_formatting(t))return(t=t.replace(/\\[\\[[^\\]]+\\]/,function(e){return e.replace(/&nbsp;/g," ")})).replace(S,function(t,n,o,a,s,l,c){if(""===c)return"";c=r(c);var u="";-1!==n.indexOf("b")&&(u+="font-weight:bold;");var f,p,d=[];if(-1!==n.indexOf("u")&&d.push("underline"),-1!==n.indexOf("s")&&d.push("line-through"),-1!==n.indexOf("o")&&d.push("overline"),d.length&&(u+="text-decoration:"+d.join(" ")+";"),-1!==n.indexOf("i")&&(u+="font-style:italic;"),"undefined"!=typeof wcwidth){var h=$(c),m=W(h);m!==h.length&&(u+="--length: "+m+";")}return e.terminal.valid_color(o)&&(u+="color:"+o+";",-1!==n.indexOf("g")&&(u+="text-shadow:0 0 5px "+o+";")),e.terminal.valid_color(a)&&(u+="background-color:"+a),f=""===l?c:l.replace(/&#93;/g,"]").replace(/>/g,"&gt;").replace(/</g,"&lt;"),-1!==n.indexOf("!")?(f.match(O)?p=\'<a href="mailto:\'+f+\'"\':(p=\'<a target="_blank" href="\'+f+\'"\',i.linksNoReferrer?p+=\' rel="noreferrer noopener"\':p+=\' rel="noopener"\'),p+=\' tabindex="1000"\'):p="<span",""!==u&&(p+=\' style="\'+u+\'"\'),""!==s&&(p+=\' class="\'+s+\'"\'),-1!==n.indexOf("!")?p+=">"+c+"</a>":p+=\' data-text="\'+f.replace(/"/g,"&quote;")+\'">\'+c+"</span>",p});t=r(t);var n="";if("undefined"!=typeof wcwidth){var o=$(t),a=W(o);o.length!==a&&(n=\' style="--length: \'+a+\'"\')}return"<span"+n+">"+t+"</span>"}).join("")).replace(/<span><br\\s*\\/?><\\/span>/gi,"<br/>")}return""},escape_brackets:function(e){return e.replace(/\\[/g,"&#91;").replace(/\\]/g,"&#93;")},length:function(e){return K(e).length},columns:function(e,t,n){var r=e.map(function(e){return e.length}),i=Math.max.apply(null,r)+n;void 0===n&&(n=4);var o,a=Math.floor(t/i),s=[];function l(t){var n=new Array(i-e[t].length).join(" ");o.push(e[t]+(t%a==0?"":n))}if(a<2)return e.join("\\n");for(var c=0;c<e.length;++c)c%a==0?(o&&(l(c),s.push(o.join(""))),o=[]):l(c);return s.join("\\n")},strip:function(e){return(e=e.replace(S,"$6")).replace(/(\\\\?)([[\\]])/g,function(e,t){return t?e:""})},active:function(){return ye.front()},last_id:function(){var e=ye.length();if(e)return e-1},parse_argument:function(e,t){function n(e){if(e.match(/^[\'"]/)){var t=e[0],n=new RegExp("((^|[^\\\\\\\\])(?:\\\\\\\\\\\\\\\\)*)"+t,"g");e=e.replace(n,"$1")}return JSON.parse(\'"\'+e+\'"\')}if(!1===t)return"\'"===e[0]&&"\'"===e[e.length-1]?e.replace(/^\'|\'$/g,""):\'"\'===e[0]&&\'"\'===e[e.length-1]?e.replace(/^"|"$/g,"").replace(/\\\\([" ])/g,"$1"):e.match(/\\/.*\\/[gimy]*$/)?e:e.match(/[\'"]]/)?n(e):e.replace(/\\\\ /g," ");var r=e.match(q);return r?new RegExp(r[1],r[2]):e.match(/[\'"]/)?n(e):e.match(/^-?[0-9]+$/)?parseInt(e,10):e.match(I)?parseFloat(e):e.replace(/\\\\([\'"() ])/g,"$1")},parse_arguments:function(t){return e.map(t.match(D)||[],e.terminal.parse_argument)},split_arguments:function(t){return e.map(t.match(D)||[],function(t){return e.terminal.parse_argument(t,!1)})},parse_command:function(t){return ne(t,e.terminal.parse_argument)},split_command:function(t){return ne(t,function(t){return e.terminal.parse_argument(t,!1)})},extended_command:function(e,t){try{xe=!1,e.exec(t,!0).done(function(){xe=!0})}catch(e){}},formatter:new function(){try{this[Symbol.split]=function(t){return e.terminal.format_split(t)},this[Symbol.match]=function(e){return e.match(T)},this[Symbol.replace]=function(e,t){return e.replace(S,t)},this[Symbol.search]=function(e){return e.search(T)}}catch(e){}}},e.fn.visible=function(){return this.css("visibility","visible")},e.fn.hidden=function(){return this.css("visibility","hidden")},e.fn.scroll_element=function(){var t=e.fn.scroll_element.defaults;return this.map(function(){if(e(this).is("body")){if("scrollingElement"in document)return document.scrollingElement;if(e.fn.scroll_element.cache)return e.fn.scroll_element.cache;var n,r=e("html"),i=e("body"),o=i.scrollTop()||r.scrollTop(),a=e("<pre/>").css(t.pre).appendTo("body");return e("body,html").scrollTop(10),10===i.scrollTop()?(i.scrollTop(o),n=i[0]):10===r.scrollTop()&&(r.scrollTop(o),n=r[0]),a.remove(),e.fn.scroll_element.cache=n,n}return this})},e.fn.scroll_element.defaults={lines:2e3,pre:{height:"99999em"}},e.fn.scroll_element.cache;var re={};function ie(t){var n=e(\'<div class="terminal temp"><div class="cmd"><span class="prompt">&nbsp;</span></div></div>\').appendTo("body");if(n.addClass(t.attr("class")),t){var r=t.attr("style");r&&(r=r.split(/\\s*;\\s*/).filter(function(e){return!e.match(/display\\s*:\\s*none/i)}).join(";"),n.attr("style",r))}var i=n.find("span")[0].getBoundingClientRect(),o={width:i.width,height:i.height};return n.remove(),o}function oe(e,t){var n=e.find(".terminal-fill").width();return Math.floor(n/t.width)||1e3}function ae(e,t){return Math.floor(e.find(".terminal-fill").height()/t.height)}function se(e,t){return e.filter(function(e){return e[t]()===e}).length===e.length}function le(e){var t=e.split("");return se(t,"toLowerCase")?"lower":se(t,"toUpperCase")?"upper":"mixed"}function ce(e){return"mixed"!==le(e)}e.jrpc=function(t,n,r,i,o){var a;a=e.isPlainObject(t)?t:{url:t,method:n,params:r,success:i,error:o},re[a.url]=re[a.url]||0;var s={jsonrpc:"2.0",method:a.method,params:a.params,id:++re[a.url]};return e.ajax({url:a.url,beforeSend:function(t,n){e.isFunction(a.request)&&a.request(t,s),n.data=JSON.stringify(s)},success:function(t,n,r){var i,o;r.getResponseHeader("Content-Type").match(/(application|text)\\/json/)||(i="[jQuery Terminal] "+(i="Response Content-Type is neither application/json nor text/json"),console&&console.warn?console.warn(i):setTimeout(function(){throw new Error("WARN: "+i)},0));try{o=JSON.parse(t)}catch(e){if(!a.error)throw new Error("Invalid JSON");return void a.error(r,"Invalid JSON",e)}if(e.isFunction(a.response)&&a.response(r,o),function(t){return e.isNumeric(t.id)&&(void 0!==t.result||void 0!==t.error)}(o)||"system.describe"===a.method)a.success(o,n,r);else{if(!a.error)throw new Error("Invalid JSON-RPC");a.error(r,"Invalid JSON-RPC")}},error:a.error,contentType:"application/json",dataType:"text",async:!0,cache:!1,type:"POST"})};var ue=!e.terminal.version.match(/^\\{\\{/),fe="Copyright (c) 2011-2018 Jakub Jankiewicz <http://jcubic.pl/me>",pe=ue?" v. "+e.terminal.version:" ",de=new RegExp(" {"+pe.length+"}$"),he="jQuery Terminal Emulator"+(ue?pe:""),me=[["jQuery Terminal","(c) 2011-2018 jcubic"],[he,fe.replace(/^Copyright | *<.*>/g,"")],[he,fe.replace(/^Copyright /,"")],["      _______                 ________                        __","     / / _  /_ ____________ _/__  ___/______________  _____  / /"," __ / / // / // / _  / _/ // / / / _  / _/     / /  \\\\/ / _ \\\\/ /","/  / / // / // / ___/ // // / / / ___/ // / / / / /\\\\  / // / /__","\\\\___/____ \\\\\\\\__/____/_/ \\\\__ / /_/____/_//_/_/_/ /_/  \\\\/\\\\__\\\\_\\\\___/","         \\\\/          /____/                                   ".replace(de," ")+pe,fe],["      __ _____                     ________                              __","     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /"," __ / // // // // // _  // _// // / / // _  // _//     // //  \\\\/ // _ \\\\/ /","/  / // // // // // ___// / / // / / // ___// / / / / // // /\\\\  // // / /__","\\\\___//____ \\\\\\\\___//____//_/ _\\\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\\\__\\\\_\\\\___/","          \\\\/              /____/                                          ".replace(de,"")+pe,fe]];e.terminal.nested_formatting.__meta__=!0,e.terminal.defaults={prompt:"> ",history:!0,exit:!0,clear:!0,enabled:!0,maskChar:"*",wrap:!0,checkArity:!0,raw:!1,exceptionHandler:null,pauseEvents:!0,softPause:!1,memory:!1,cancelableAjax:!0,processArguments:!0,linksNoReferrer:!1,processRPCResponse:null,completionEscape:!0,convertLinks:!0,extra:{},tabs:4,historySize:60,historyState:!1,importHistory:!1,historyFilter:null,echoCommand:!0,scrollOnEcho:!0,login:null,outputLimit:-1,formatters:[e.terminal.nested_formatting],onAjaxError:null,pasteImage:!0,scrollBottomOffset:20,wordAutocomplete:!0,caseSensitiveAutocomplete:!0,clickTimeout:200,request:e.noop,response:e.noop,describe:"procs",onRPCError:null,completion:!1,onInit:e.noop,onClear:e.noop,onBlur:e.noop,onFocus:e.noop,onTerminalChange:e.noop,onExit:e.noop,onPush:e.noop,onPop:e.noop,keypress:e.noop,keydown:e.noop,onAfterRedraw:e.noop,onEchoCommand:e.noop,onFlush:e.noop,strings:{comletionParameters:"From version 1.0.0 completion function need to have two arguments",wrongPasswordTryAgain:"Wrong password try again!",wrongPassword:"Wrong password!",ajaxAbortError:"Error while aborting ajax call!",wrongArity:"Wrong number of arguments. Function \'%s\' expects %s got %s!",commandNotFound:"Command \'%s\' Not Found!",oneRPCWithIgnore:"You can use only one rpc with describe == false or rpc without system.describe",oneInterpreterFunction:"You can\'t use more than one function (rpc without system.describe or with option describe == false counts as one)",loginFunctionMissing:"You didn\'t specify a login function",noTokenError:"Access denied (no token)",serverResponse:"Server responded",wrongGreetings:"Wrong value of greetings parameter",notWhileLogin:"You can\'t call `%s\' function while in login",loginIsNotAFunction:"Authenticate must be a function",canExitError:"You can\'t exit from main interpreter",invalidCompletion:"Invalid completion",invalidSelector:\'Sorry, but terminal said that "%s" is not valid selector!\',invalidTerminalId:"Invalid Terminal ID",login:"login",password:"password",recursiveCall:"Recursive call detected, skip",notAString:"%s function: argument is not a string",redrawError:"Internal error, wrong position in cmd redraw",invalidStrings:"Command %s have unclosed strings"}};var ge,ve=[],ye=new y,be=[],xe=!1,we=!0,ke=!0;e.fn.terminal=function(r,o){function s(t){if(e.terminal.unclosed_strings(t)){var n=e.terminal.escape_brackets(t);throw new Error(sprintf(G().invalidStrings,"`"+n+"`"))}return e.isFunction(qe.processArguments)?ne(t,qe.processArguments):qe.processArguments?e.terminal.parse_command(t):e.terminal.split_command(t)}function l(t){"string"==typeof t?Z.echo(t):t instanceof Array?Z.echo(e.map(t,function(e){return JSON.stringify(e)}).join(" ")):"object"==typeof t?Z.echo(JSON.stringify(t)):Z.echo(t)}function c(t){if(e.isFunction(qe.onRPCError))qe.onRPCError.call(Z,t);else if(Z.error("&#91;RPC&#93; "+t.message),t.error&&t.error.message){var n="\\t"+(t=t.error).message;t.file&&(n+=\' in file "\'+t.file.replace(/.*\\//,"")+\'"\'),t.at&&(n+=" at line "+t.at),Z.error(n)}}function u(t,n){var r=function(n,r){Z.pause(qe.softPause),e.jrpc({url:t,method:n,params:r,request:function(e,t){try{qe.request.call(Z,e,t,Z)}catch(e){x(e,"USER")}},response:function(e,t){try{qe.response.call(Z,e,t,Z)}catch(e){x(e,"USER")}},success:function(t){t.error?c(t.error):e.isFunction(qe.processRPCResponse)?qe.processRPCResponse.call(Z,t.result,Z):l(t.result),Z.resume()},error:p})};return function(e,t){if(""!==e){try{e=s(e)}catch(e){return void x(e,"TERMINAL (get_processed_command)")}if(n&&"help"!==e.name){var i=t.token();i?r(e.name,[i].concat(e.args)):t.error("&#91;AUTH&#93; "+G().noTokenError)}else r(e.name,e.args)}}}function f(n,r,i,o){return function(a,l){if(""!==a){var c;try{c=s(a)}catch(t){return void(e.isFunction(qe.exception)?qe.exception(t,Z):Z.error(t.toString()))}var u=n[c.name],p=e.type(u);if("function"===p){if(!r||u.length===c.args.length)return u.apply(Z,c.args);Z.error("&#91;Arity&#93; "+sprintf(G().wrongArity,c.name,u.length,c.args.length))}else if("object"===p||"string"===p){var d=[];"object"===p&&(d=Object.keys(u),u=f(u,r,i)),l.push(u,{prompt:c.name+"> ",name:c.name,completion:"object"===p?d:t})}else e.isFunction(o)?o(a,Z):e.isFunction(qe.onCommandNotFound)?qe.onCommandNotFound.call(Z,a,Z):l.error(sprintf(G().commandNotFound,c.name))}}}function p(t,n,r){Z.resume(),e.isFunction(qe.onAjaxError)?qe.onAjaxError.call(Z,t,n,r):"abort"!==n&&Z.error("&#91;AJAX&#93; "+n+" - "+G().serverResponse+":\\n"+e.terminal.escape_brackets(t.responseText))}function d(t,n,r){function i(t){t.error?c(t.error):e.isFunction(qe.processRPCResponse)?qe.processRPCResponse.call(Z,t.result,Z):l(t.result),Z.resume()}function o(e,t){try{qe.request.call(Z,e,t,Z)}catch(e){x(e,"USER")}}function a(e,t){try{qe.response.call(Z,e,t,Z)}catch(e){x(e,"USER")}}return e.jrpc({url:t,method:"system.describe",params:[],success:function(s){var l=s;if(""!==qe.describe&&qe.describe.split(".").forEach(function(e){l=l[e]}),l&&l.length){var c={};e.each(l,function(r,s){e.isPlainObject(s)&&"string"==typeof s.name&&(c[s.name]=function(){var r=n&&"help"!==s.name,l=Array.prototype.slice.call(arguments),c=l.length+(r?1:0);if(qe.checkArity&&s.params&&s.params.length!==c)Z.error("&#91;Arity&#93; "+sprintf(G().wrongArity,s.name,s.params.length,c));else{if(Z.pause(qe.softPause),r){var u=Z.token(!0);u?l=[u].concat(l):Z.error("&#91;AUTH&#93; "+G().noTokenError)}e.jrpc({url:t,method:s.name,params:l,request:o,response:a,success:i,error:p})}})});var u="string"==typeof n?n:"login";c.help=c.help||function(t){if(void 0===t){var r=s.procs.map(function(e){return e.name}).join(", ")+", help";Z.echo("Available commands: "+r)}else{var i=!1;if(e.each(l,function(e,r){if(r.name===t){i=!0;var o="";if(o+="[[bu;;]"+r.name+"]",r.params){var a=r.params;n&&r.name!==u&&(a=a.slice(1)),o+=" "+a.join(" ")}return r.help&&(o+="\\n"+r.help),Z.echo(o),!1}}),!i)if("help"===t)Z.echo("[[bu;;]help] [method]\\ndisplay help for the method or list of methods if not specified");else{var o="Method `"+t+"\' not found ";Z.error(o)}}},r(c)}else r(null)},request:o,response:a,error:function(){r(null)}})}function m(t,n,r){r=r||e.noop;var i,o,a=e.type(t),s={},l=0;if("array"===a)i={},function t(r,a){if(r.length){var s=r[0],c=r.slice(1),f=e.type(s);"string"===f?(Z.pause(qe.softPause),!1===qe.describe?(1==++l?o=u(s,n):Z.error(G().oneRPCWithIgnore),t(c,a)):d(s,n,function(r){r?e.extend(i,r):1==++l?o=u(s,n):Z.error(G().oneRPCWithIgnore),Z.resume(),t(c,a)})):"function"===f?(o?Z.error(G().oneInterpreterFunction):o=s,t(c,a)):"object"===f&&(e.extend(i,s),t(c,a))}else a()}(t,function(){r({interpreter:f(i,!1,n,o.bind(Z)),completion:Object.keys(i)})});else if("string"===a)qe.ignoreSystemDescribe?(i={interpreter:u(t,n)},e.isArray(qe.completion)&&(i.completion=qe.completion),r(i)):(Z.pause(qe.softPause),d(t,n,function(e){e?(s.interpreter=f(e,!1,n),s.completion=Object.keys(e)):s.interpreter=u(t,n),r(s),Z.resume()}));else if("object"===a)r({interpreter:f(t,qe.checkArity),completion:Object.keys(t)});else{if("undefined"===a)t=e.noop;else if("function"!==a)throw new Error(a+" is invalid interpreter value");r({interpreter:t,completion:qe.completion})}}function y(t,n){var r="boolean"===e.type(n)?"login":n;return function(n,i,o){Z.pause(qe.softPause),e.jrpc({url:t,method:r,params:[n,i],request:function(e,t){try{qe.request.call(Z,e,t,Z)}catch(e){x(e,"USER")}},response:function(e,t){try{qe.response.call(Z,e,t,Z)}catch(e){x(e,"USER")}},success:function(e){!e.error&&e.result?o(e.result):o(null),Z.resume()},error:p})}}function x(t,n,r){e.isFunction(qe.exceptionHandler)?qe.exceptionHandler.call(Z,t,n):(Z.exception(t,n),r||setTimeout(function(){throw t},0))}function w(){var e;e=Y.prop?Y.prop("scrollHeight"):Y.attr("scrollHeight"),Y.scrollTop(e)}var k=[],_=1;function C(n,r,i){var o,a;if(k.push(_),""===n);else if(i.raw)k.push(n);else if((W(n)>se||n.match(/\\n/))&&(!0===qe.wrap&&i.wrap===t||!1===qe.wrap&&!0===i.wrap)){var s=i.keepWords,l=e.terminal.split_equal(n,se,s);for(o=0,a=l.length;o<a;++o)""===l[o]||"\\r"===l[o]?k.push("<span></span>"):k.push(e.terminal.format(l[o],{linksNoReferrer:qe.linksNoReferrer}))}else n=e.terminal.normalize(n),(n=e.terminal.format(n,{linksNoReferrer:qe.linksNoReferrer})).split(/\\n/).forEach(function(e){k.push(e)});k.push({finalize:i.finalize,index:r})}function S(t){try{var n,r=e.extend({exec:!0,raw:!1,finalize:e.noop},t.options||{}),i=t.string,o="function"===e.type(i);if(o&&(i=i()),"string"!==e.type(i))if(e.isFunction(qe.parseObject)){var a=qe.parseObject(i);"string"===e.type(a)&&(n=a)}else n=i instanceof Array?e.terminal.columns(i,Z.cols(),qe.tabs):String(i);else n=i;if(""!==n&&""!==(n=e.map(n.split(j),function(t){return t&&t.match(j)&&!e.terminal.is_formatting(t)?(t=t.replace(/^\\[\\[|\\]\\]$/g,""),r.exec&&(Q&&Q.command===t?Z.error(G().recursiveCall):e.terminal.extended_command(Z,t)),""):t}).join(""))){if(!r.raw){if(qe.convertLinks&&(n=n.replace(O,"[[!;;]$1]").replace(E,"[[!;;]$1]")),r.formatters)try{n=e.terminal.apply_formatters(n)}catch(e){x(e,"FORMATTING")}n=e.terminal.encode(n)}C(n,t.index,r)}""===n&&o&&C(n,t.index,r)}catch(t){k=[],e.isFunction(qe.exceptionHandler)?qe.exceptionHandler.call(Z,t,"TERMINAL"):g("[Internal Exception(process_line)]",t)}}function T(t){if(!(t=e.extend({},{update:!1,scroll:!0},t||{})).update){_e.resize(se);var n=re.empty().detach()}var r,i=[];qe.outputLimit>=0?(r=0===qe.outputLimit?Z.rows():qe.outputLimit,Le.forEach(function(t,n){var r=t[0],o=t[1];"function"===e.type(r)&&(r=r()),"string"!==e.type(r)&&(r=String(r)),i.push({string:r,index:n,options:o})}),i=i.slice(i.length-r-1)):i=Le.map(function(e,t){return{string:e[0],index:t,options:e[1]}});try{k=[],e.each(i,function(e,t){S(t)}),t.update||_e.before(n),Z.flush(t);try{qe.onAfterRedraw.call(Z)}catch(t){qe.onAfterRedraw=e.noop,x(t,"onAfterRedraw")}}catch(t){e.isFunction(qe.exceptionHandler)?qe.exceptionHandler.call(Z,t,"TERMINAL (redraw)"):g("[redraw]",t)}}function A(){if(qe.greetings===t)Z.echo(Z.signature,{finalize:h,formatters:!1});else if(qe.greetings){var e=typeof qe.greetings;if("string"===e)Z.echo(qe.greetings);else if("function"===e)try{qe.greetings.call(Z,Z.echo)}catch(e){qe.greetings=null,x(e,"greetings")}else Z.error(G().wrongGreetings)}}function L(t){void 0===t&&(t=Z.get_command());var n=_e.prompt(),r=_e.mask();switch(typeof r){case"string":t=t.replace(/./g,r);break;case"boolean":t=r?t.replace(/./g,qe.maskChar):e.terminal.escape_formatting(t)}var i={finalize:function(n){h(n.addClass("command"));try{qe.onEchoCommand.call(Z,n,t)}catch(t){qe.onEchoCommand=e.noop,Z.exception(t)}}};if(e.isFunction(n)){var o=n(function(e){Z.echo(e+t,i)});o&&o.then&&o.then(function(e){"string"==typeof e&&Z.echo(e+t,i)})}else Z.echo(n+t,i)}var M=!0,D=[];function N(n,r,i){function o(){i||(xe=!0,qe.historyState&&Z.save_state(n,!1),xe=u),c.resolve(),e.isFunction(qe.onAfterCommand)&&qe.onAfterCommand.call(Z,Z,n)}function a(e){void 0!==e&&l(e),o(),Z.resume()}M&&(M=!1,(qe.historyState||qe.execHash&&i)&&(be.length?Z.save_state(null):Z.save_state()));try{if(e.isFunction(qe.onBeforeCommand)&&!1===qe.onBeforeCommand.call(Z,Z,n))return;i||(Q=e.terminal.split_command(n)),B()||i&&(e.isFunction(qe.historyFilter)&&qe.historyFilter(n)||n.match(qe.historyFilter))&&_e.history().append(n);var s=he.top();!r&&qe.echoCommand&&L(n);var c=new e.Deferred,u=xe;if(n.match(/^\\s*login\\s*$/)&&Z.token(!0))Z.level()>1?Z.logout(!0):Z.logout(),o();else if(qe.exit&&n.match(/^\\s*exit\\s*$/)&&!Re){var f=Z.level();(1===f&&Z.get_token()||f>1)&&(Z.get_token(!0)&&Z.set_token(t,!0),Z.pop()),o()}else if(qe.clear&&n.match(/^\\s*clear\\s*$/)&&!Re)Z.clear(),o();else{var p=s.interpreter.call(Z,n,Z);if(p){if(Z.pause(qe.softPause),!p.then)return e.when(p).done(a);p.then(a)}else We?D.push(function(){o()}):o()}return c.promise()}catch(e){x(e,"USER"),Z.resume()}}function P(){var e=Z.prefix_name(!0)+"_";Be.remove(e+"token"),Be.remove(e+"login")}function R(t){var n,r,i,o=he.top(),a=Z.prefix_name(!0);B()||(n=a,r=Z.prefix_name()+"_interpreters",i=(i=Be.get(r))?JSON.parse(i):[],-1===e.inArray(n,i)&&(i.push(n),Be.set(r,JSON.stringify(i)))),_e.name(a),e.isFunction(o.prompt)?_e.prompt(function(e){var t=o.prompt.call(Z,e,Z);t&&t.then&&t.then(function(t){"string"==typeof t&&e(t)})}):_e.prompt(o.prompt),e.isPlainObject(o.keymap)&&_e.keymap(e.omap(o.keymap,function(e,t){return function(){var e=[].slice.call(arguments);try{return t.apply(Z,e)}catch(e){x(e,"USER KEYMAP")}}})),_e.set(""),Oe.resolve(),!t&&e.isFunction(o.onStart)&&o.onStart.call(Z,Z)}function I(){if(we&&qe.execHash)try{if(location.hash){var e=location.hash.replace(/^#/,"");ge=JSON.parse(decodeURIComponent(e))}else ge=[];ge.length?function(e){var t=ye.get()[e[0]];if(!t)throw new Error(G().invalidTerminalId);var n=e[1];if(be[n])t.import_view(be[n]);else{xe=!1;var r=e[2];r&&t.exec(r).done(function(){xe=!0,be[n]=t.export_view()})}}(ge[ge.length-1]):be[0]&&Z.import_view(be[0])}catch(e){x(e,"TERMINAL")}}function q(){R(),A(),Le.length&&Z.refresh();var t=!1;if(e.isFunction(qe.onInit)){je=function(){t=!0};try{qe.onInit.call(Z,Z)}catch(e){x(e,"OnInit")}finally{je=e.noop,!t&&Z.enabled()&&Z.resume()}}ke&&(ke=!1,e(window).on("hashchange",I))}function B(){return Re||!1!==_e.mask()}function z(e){ye.forEach(function(t){t.settings().onTerminalChange.call(t,e)})}function $(n){var r,i=he.top();if(e.isFunction(i.keydown)){if((r=i.keydown.call(Z,n,Z))!==t)return r}else if(e.isFunction(qe.keydown)&&(r=qe.keydown.call(Z,n,Z))!==t)return r}var K={"CTRL+D":function(t,n){return Re||(""===_e.get()?he.size()>1||e.isFunction(Ue)?Z.pop(""):(Z.resume(),Z.echo("")):n()),!1},"CTRL+C":function(){""===J()&&(L(Z.get_command()+"^C"),Z.set_command(""))},"CTRL+L":function(){Z.clear()},TAB:function(n,r){var i,o,a=he.top();if(o=void 0!==a.caseSensitiveAutocomplete?a.caseSensitiveAutocomplete:qe.caseSensitiveAutocomplete,"settings"===(i=qe.completion&&"boolean"!==e.type(qe.completion)&&a.completion===t?qe.completion:a.completion)&&(i=qe.completion),i)switch(e.type(i)){case"function":var s=Z.before_cursor(qe.wordAutocomplete);if(3===i.length)return x(new Error(G().comletionParameters),"USER"),!1;i.call(Z,s,function(e){Z.complete(e,{echo:!0,word:qe.wordAutocomplete,escape:qe.completionEscape,caseSensitive:o})});break;case"array":Z.complete(i,{echo:!0,word:qe.wordAutocomplete,escape:qe.completionEscape,caseSensitive:o});break;default:throw new Error(G().invalidCompletion)}else r();return!1},"CTRL+V":function(e,t){return t(e),Z.oneTime(200,function(){w()}),!0},"CTRL+TAB":function(){if(ye.length()>1)return Z.focus(!1),!1},PAGEDOWN:function(){Z.scroll(Z.height())},PAGEUP:function(){Z.scroll(-Z.height())}};function U(n){var r,i;if(Z.enabled()){if(Z.paused()){if(!qe.pauseEvents&&(r=$(n))!==t)return r;if(68===n.which&&n.ctrlKey){if(qe.pauseEvents&&(r=$(n))!==t)return r;if(ve.length){for(i=ve.length;i--;){var o=ve[i];if(4!==o.readyState)try{o.abort()}catch(t){e.isFunction(qe.exceptionHandler)?qe.exceptionHandler.call(Z,n,"AJAX ABORT"):Z.error(G().ajaxAbortError)}}ve=[]}Z.resume()}return!1}if((r=$(n))!==t)return r;9!==n.which&&(Ae=0),Z.attr({scrollTop:Z.attr("scrollHeight")})}}function V(e){return function(t){e.add(t)}}function G(){return e.extend({},e.terminal.defaults.strings,qe&&qe.strings||{})}var Y,Q,Z=this;if(this.length>1)return this.each(function(){e.fn.terminal.call(e(this),r,e.extend({name:Z.selector},o))});if(Z.data("terminal"))return Z.data("terminal");if(0===Z.length)throw new Error(sprintf(G().invalidSelector,Z.selector));var re,se,ue,fe,pe,de,he,_e,Ce,Se,Te,Ae=0,Le=[],Me=ye.length(),Fe=new b,Ee=new n,Oe=new n,De=V(Oe),Ne=ie(Z),Pe=V(Ee),Re=!1,je=e.noop,Ie=[],qe=e.extend({},e.terminal.defaults,{name:Z.selector},o||{}),Be=new function(t){t&&(this.storage={}),this.set=function(n,r){t?this.storage[n]=r:e.Storage.set(n,r)},this.get=function(n){return t?this.storage[n]:e.Storage.get(n)},this.remove=function(n){t?delete this.storage[n]:e.Storage.remove(n)}}(qe.memory),ze=qe.enabled,He=!1,We=!1,$e=!0;e.extend(Z,e.omap({id:function(){return Me},clear:function(){re.html(""),Le=[];try{qe.onClear.call(Z,Z)}catch(e){x(e,"onClear")}return Z.attr({scrollTop:0}),Z},export_view:function(){var t={};if(e.isFunction(qe.onExport))try{t=qe.onExport.call(Z)}catch(e){x(e,"onExport")}return e.extend({},{focus:ze,mask:_e.mask(),prompt:Z.get_prompt(),command:Z.get_command(),position:_e.position(),lines:a(Le),interpreters:he.clone(),history:_e.history().data},t)},import_view:function(t){if(Re)throw new Error(sprintf(G().notWhileLogin,"import_view"));if(e.isFunction(qe.onImport))try{qe.onImport.call(Z,t)}catch(t){qe.onImport=e.noop,x(t,"onImport")}return De(function(){Z.set_prompt(t.prompt),Z.set_command(t.command),_e.position(t.position),_e.mask(t.mask),t.focus&&Z.focus(),Le=a(t.lines),he=t.interpreters,qe.importHistory&&_e.history().set(t.history),T()}),Z},save_state:function(n,r,i){if(void 0!==i?be[i]=Z.export_view():be.push(Z.export_view()),e.isArray(ge)||(ge=[]),n!==t&&!r){var o=[Me,be.length-1,n];ge.push(o),xe&&(we=!1,location.hash="#"+JSON.stringify(ge),setTimeout(function(){we=!0},100))}},exec:function(t,n,r){var i=r||new e.Deferred;return Pe(function(){e.isArray(t)?function e(){var r=t.shift();r?Z.exec(r,n).done(e):i.resolve()}():We?Ie.push([t,n,i]):N(t,n,!0).done(function(){i.resolve(Z)})}),i.promise()},autologin:function(e,t,n){return Z.trigger("terminal.autologin",[e,t,n]),Z},login:function(n,r,i,o){if(Fe.push([].slice.call(arguments)),Re)throw new Error(sprintf(G().notWhileLogin,"login"));if(!e.isFunction(n))throw new Error(G().loginIsNotAFunction);if(Re=!0,Z.token()&&1===Z.level()&&!$e)Re=!1,Z.logout(!0);else if(Z.token(!0)&&Z.login_name(!0))return Re=!1,e.isFunction(i)&&i(),Z;qe.history&&_e.history().disable();var a=Z.level();function s(n,s,l){if(s){for(;Z.level()>a;)Z.pop(t,!0);qe.history&&_e.history().enable();var c=Z.prefix_name(!0)+"_";Be.set(c+"token",s),Be.set(c+"login",n),Re=!1,e.isFunction(i)&&i()}else r?(l||Z.error(G().wrongPasswordTryAgain),Z.pop(t,!0).set_mask(!1)):(Re=!1,l||Z.error(G().wrongPassword),Z.pop(t,!0).pop(t,!0)),e.isFunction(o)&&o();Z.off("terminal.autologin")}return Z.on("terminal.autologin",function(e,t,n,r){s(t,n,r)}),Z.push(function(e){Z.set_mask(qe.maskChar).push(function(t){try{n.call(Z,e,t,function(t,n){s(e,t,n)})}catch(e){x(e,"AUTH")}},{prompt:G().password+": ",name:"password"})},{prompt:G().login+": ",name:"login"}),Z},settings:function(){return qe},before_cursor:function(e){var t,n=_e.position(),r=_e.get().substring(0,n),i=r.split(" ");if(e)if(1===i.length)t=i[0];else{var o=r.match(/(\\\\?")/g),a=o?o.filter(function(e){return!e.match(/^\\\\/)}).length:0;if(((o=r.match(/\'/g))?o.length:0)%2==1)t=r.match(/(\'[^\']*)$/)[0];else if(a%2==1)t=r.match(/("(?:[^"]|\\\\")*)$/)[0];else for(t=i[i.length-1],Je=i.length-1;Je>0;Je--){var s=i[Je-1];if("\\\\"!==s[s.length-1])break;t=i[Je-1]+" "+t}}else t=r;return t},complete:function(t,n){var r=(n=e.extend({word:!0,echo:!1,escape:!0,caseSensitive:!0},n||{})).caseSensitive,i=Z.before_cursor(n.word).replace(/\\\\"/g,\'"\'),o=!1;if(n.word&&(i.match(/^"/)?o=\'"\':i.match(/^\'/)&&(o="\'"),o&&(i=i.replace(/^["\']/,""))),t=t.slice(),qe.clear&&-1===e.inArray("clear",t)&&t.push("clear"),qe.exit&&-1===e.inArray("exit",t)&&t.push("exit"),Ae%2==0)fe=Z.before_cursor(n.word);else if(Z.before_cursor(n.word)!==fe)return;var a=e.terminal.escape_regex(i);n.escape&&(a=a.replace(/(\\\\+)(["\'() ])/g,function(e,t,n){return n.match(/[()]/)?t+"\\\\?\\\\"+n:t+"?"+n}));var s=new RegExp("^"+a,r?"":"i"),l=function(){for(var e=[],a=t.length;a--;)if(s.test(t[a])){var l=t[a];\'"\'===o&&(l=l.replace(/"/g,\'\\\\"\')),!o&&n.escape&&(l=l.replace(/(["\'() ])/g,"\\\\$1")),!r&&ce(l)&&(i.toLowerCase()===i?l=l.toLowerCase():i.toUpperCase()===i&&(l=l.toUpperCase())),e.push(l)}return e}();function c(e,t){var n=Z.get_command(),r=Z.get_position(),i=new RegExp("^"+e,"i"),a=n.substring(0,r),s=n.substring(r),l=t.replace(i,"")+(o||"");Z.set_command(a+l+s),Z.set_position((a+l).length)}if(1===l.length)return n.escape?c(a,l[0]):Z.insert(l[0].replace(s,"")+(o||"")),fe=Z.before_cursor(n.word),!0;if(l.length>1)if(++Ae>=2){if(Ae=0,n.echo){L();var u=l.reverse().join("\\t");return Z.echo(e.terminal.escape_brackets(u),{keepWords:!0,formatters:!1}),!0}}else{var f=function(e,t,n){if(!t.length)return"";for(var r=le(e),i=[],o=e.length;o<t[0].length;++o){for(var a=!1,s=t[0].charAt(o),l=s.toLowerCase(),c=1;c<t.length;++c){a=!0;var u=t[c].charAt(o),f=u.toLowerCase();if(s!==u){if(n||"mixed"===r){a=!1;break}if(l!==f){a=!1;break}if("lower"===r)s=s.toLowerCase();else{if("upper"!==r){a=!1;break}s=s.toUpperCase()}}}if(!a)break;i.push(s)}return e+i.join("")}(i,l,r);if(f)return c(i,f),fe=Z.before_cursor(n.word),!0}},commands:function(){return he.top().interpreter},set_interpreter:function(t,n){function r(){Z.pause(qe.softPause),m(t,n,function(t){Z.resume();var n=he.top();e.extend(n,t),R(!0)})}return"string"===e.type(t)&&n?Z.login(y(t,n),!0,r):r(),Z},greetings:function(){return A(),Z},paused:function(){return We},pause:function(t){return Pe(function(){je(),We=!0,_e.disable(t||H),t||_e.find(".prompt").hidden(),e.isFunction(qe.onPause)&&qe.onPause.call(Z)}),Z},resume:function(){return Pe(function(){We=!1,ze&&ye.front()===Z&&_e.enable(),_e.find(".prompt").visible();var t=Ie;Ie=[];for(var n=0;n<t.length;++n)Z.exec.apply(Z,t[n]);Z.trigger("resume");var r=D.shift();r&&r(),w(),e.isFunction(qe.onResume)&&qe.onResume.call(Z)}),Z},cols:function(){return qe.numChars?qe.numChars:(void 0===se&&(se=oe(Z,Ne)),se)},rows:function(){return qe.numRows?qe.numRows:(void 0===ue&&(ue=ae(Z,Ne)),ue)},history:function(){return _e.history()},history_state:function(e){function t(){qe.historyState=!0,be.length?ye.length()>1&&Z.save_state(null):Z.save_state()}return e?void 0===window.setImmediate?setTimeout(t,0):i(t):qe.historyState=!1,Z},clear_history_state:function(){return ge=[],be=[],Z},next:function(){if(1===ye.length())return Z;ye.front().disable();var t=ye.rotate().enable(),n=t.offset().top-50;e("html,body").animate({scrollTop:n},500);try{z(t)}catch(e){x(e,"onTerminalChange")}return t},focus:function(e,t){return Pe(function(){if(1===ye.length())!1===e?Z.disable(t):Z.enable(t);else if(!1===e)Z.next();else{if(ye.front()!==Z&&(ye.forEach(function(e){e!==Z&&e.enabled()&&e.disable(t)}),!t))try{z(Z)}catch(e){x(e,"onTerminalChange")}ye.set(Z),Z.enable(t)}}),Z},freeze:function(e){De(function(){e?(Z.disable(),He=!0):(He=!1,Z.enable())})},frozen:function(){return He},enable:function(n){return ze||He||(se===t&&Z.resize(),Pe(function(){var r;if(!n&&!ze)try{r=qe.onFocus.call(Z,Z)}catch(t){qe.onFocus=e.noop,x(t,"onFocus")}(!n&&r===t||n)&&(ze=!0,Z.paused()||_e.enable())})),Z},disable:function(n){return Pe(function(){var r;if(!n&&ze)try{r=qe.onBlur.call(Z,Z)}catch(t){qe.onBlur=e.noop,x(t,"onBlur")}(!n&&r===t||n)&&(ze=!1,_e.disable())}),Z},enabled:function(){return ze},signature:function(){for(var e=Z.cols(),t=me.length;t--;){var n=me[t].map(function(e){return e.length});if(Math.max.apply(null,n)<=e)return me[t].join("\\n")+"\\n"}return""},version:function(){return e.terminal.version},cmd:function(){return _e},get_command:function(){return _e.get()},set_command:function(e,n){return De(function(){_e.set(e,t,n)}),Z},set_position:function(e,t){return De(function(){_e.position(e,t)}),Z},get_position:function(){return _e.position()},insert:function(e,t){if("string"==typeof e)return De(function(){var n=Z.is_bottom();_e.insert(e,t),(qe.scrollOnEcho||n)&&w()}),Z;throw new Error(sprintf(G().notAString,"insert"))},set_prompt:function(t){return De(function(){(function(t,n){try{if(e.isFunction(n))n.call(Z,e.noop,Z);else if("string"!=typeof n)throw t+" must be string or function"}catch(e){return x(e,t.toUpperCase()),!1}return!0})("prompt",t)&&(e.isFunction(t)?_e.prompt(function(e){t(e,Z)}):_e.prompt(t),he.top().prompt=t)}),Z},get_prompt:function(){return he.top().prompt},set_mask:function(e){return De(function(){_e.mask(!0===e?qe.maskChar:e)}),Z},get_output:function(t){return t?Le:e.map(Le,function(t){return e.isFunction(t[0])?t[0]():t[0]}).join("\\n")},resize:function(t,n){if(Z.is(":visible")){if(t&&n&&(Z.width(t),Z.height(n)),t=Z.width(),n=Z.height(),void 0!==qe.numChars||void 0!==qe.numRows)return _e.resize(qe.numChars),void Z.refresh();var r=oe(Z,Ne),i=ae(Z,Ne);if(r!==se||i!==ue){se=r,ue=i,_e.resize(se),Z.refresh();var o=he.top();e.isFunction(o.resize)?o.resize.call(Z,Z):e.isFunction(qe.onResize)&&qe.onResize.call(Z,Z)}}else Z.stopTime("resize"),Z.oneTime(500,"resize",function(){Z.resize(t,n)});return Z},refresh:function(){return 0!==Ne.width&&Z[0].style.setProperty("--char-width",Ne.width),T({scroll:!1,update:!0}),Z},flush:function(t){t=e.extend({},{update:!1,scroll:!0},t||{});try{var n,r=Z.is_bottom();e.each(k,function(r,i){if(i===_)n=e("<div></div>");else if(e.isPlainObject(i)&&e.isFunction(i.finalize)){if(t.update){var o="> div[data-index="+i.index+"]",a=re.find(o);a.html()!==n.html()&&a.replaceWith(n)}else n.appendTo(re);i.finalize(n.attr("data-index",i.index))}else e("<div/>").html(i).appendTo(n).width("100%")}),function(){if(qe.outputLimit>=0){var t;t=0===qe.outputLimit?Z.rows():qe.outputLimit;var n=re.find("> div > div");if(n.length+1>t){var r=n.length-t+1,i=n.slice(0,r),o=i.parent();i.remove(),o.each(function(){var t=e(this);t.is(":empty")&&t.remove()})}}}();try{qe.onFlush.call(Z,Z)}catch(t){qe.onFlush=e.noop,x(t,"onFlush")}(qe.scrollOnEcho&&t.scroll||r)&&w(),k=[]}catch(t){e.isFunction(qe.exceptionHandler)?qe.exceptionHandler.call(Z,t,"TERMINAL (Flush)"):g("[Flush]",t)}return Z},update:function(e,t,n){return De(function(){e<0&&(e=Le.length+e),Le[e]?null===t?(Le.splice(e,1),re.find("[data-index="+e+"]").remove()):(Le[e][0]=t,n&&(Le[e][1]=n),S({string:t,index:e,options:n}),Z.flush({scroll:!1,update:!0})):Z.error("Invalid line number "+e)}),Z},remove:function(e,t){return Z.update(e,null,t)},last_index:function(){return Le.length-1},echo:function(t,n){function r(t){try{var r=e.extend({flush:!0,raw:qe.raw,finalize:e.noop,keepWords:!1,formatters:!0},n||{});i=r.finalize,r.finalize=function(t){r.raw&&t.addClass("raw");try{e.isFunction(i)&&i(t)}catch(e){x(e,"USER:echo(finalize)"),i=null}},r.flush&&(k.length&&Z.flush(),k=[]),"function"==typeof t&&(t=t.bind(Z)),S({string:t,options:r,index:Le.length}),Le.push([t,e.extend(r,{exec:!1})]),r.flush&&Z.flush()}catch(t){e.isFunction(qe.exceptionHandler)?qe.exceptionHandler.call(Z,t,"TERMINAL (echo)"):g("[Terminal.echo]",t)}var i}return e.isFunction(t.then)?e.when(t).done(r):r(t),Z},error:function(t,n){function r(t){return"string"!=typeof t&&(t=String(t)),"[[;;;error]"+e.terminal.escape_brackets(t).replace(/\\\\$/,"&#92;").replace(F,"]$1[[;;;error]")+"]"}return n=e.extend({},n,{raw:!1,formatters:!1}),"function"==typeof t?Z.echo(function(){return r(t.call(Z))},n):Z.echo(r(t),n)},exception:function(t,n){var r=v(t);if(n&&(r="&#91;"+n+"&#93;: "+r),r&&Z.error(r,{finalize:function(e){e.addClass("exception message")},keepWords:!0}),"string"==typeof t.fileName&&(Z.pause(qe.softPause),e.get(t.fileName,function(e){var n=t.lineNumber-1,r=e.split("\\n")[n];r&&Z.error("["+t.lineNumber+"]: "+r),Z.resume()},"text")),t.stack){var i=e.terminal.escape_brackets(t.stack);Z.echo(i.split(/\\n/g).map(function(e){return"[[;;;error]"+e.replace(F,function(e){return"]"+e+"[[;;;error]"})+"]"}).join("\\n"),{finalize:function(e){e.addClass("exception stack-trace")},formatters:!1})}},scroll:function(e){var t;return e=Math.round(e),Y.prop?(e>Y.prop("scrollTop")&&e>0&&Y.prop("scrollTop",0),t=Y.prop("scrollTop"),Y.scrollTop(t+e)):(e>Y.attr("scrollTop")&&e>0&&Y.attr("scrollTop",0),t=Y.attr("scrollTop"),Y.scrollTop(t+e)),Z},logout:function(e){if(Re)throw new Error(sprintf(G().notWhileLogin,"logout"));return De(function(){if(e){var n=Fe.pop();Z.set_token(t,!0),Z.login.apply(Z,n)}else if(1===he.size()&&Z.token())Z.logout(!0);else for(;he.size()>1;)Z.token()?Z.logout(!0).pop().pop():Z.pop()}),Z},token:function(e){return Be.get(Z.prefix_name(e)+"_token")},set_token:function(e,t){var n=Z.prefix_name(t)+"_token";return void 0===e?Be.remove(n,e):Be.set(n,e),Z},get_token:function(e){return Z.token(e)},login_name:function(e){return Be.get(Z.prefix_name(e)+"_login")},name:function(){return he.top().name},prefix_name:function(e){var t=(qe.name?qe.name+"_":"")+Me;if(e&&he.size()>1){var n=he.map(function(e){return e.name||""}).slice(1).join("_");n&&(t+="_"+n)}return t},read:function(t,n){var r=new e.Deferred;return Z.push(function(t){Z.pop(),e.isFunction(n)&&n(t),r.resolve(t)},{prompt:t}),r.promise()},push:function(n,r){return Pe(function(){r=r||{};var i=e.extend({},{infiniteLogin:!1},r);!i.name&&Q&&(i.name=Q.name),i.prompt===t&&(i.prompt=(i.name||">")+" ");var o=he.top();o&&(o.mask=_e.mask());var a=We;function s(){qe.onPush.call(Z,o,he.top(),Z),R()}m(n,r.login,function(t){if(he.push(e.extend({},t,i)),!0===i.completion&&(e.isArray(t.completion)?he.top().completion=t.completion:t.completion||(he.top().completion=!1)),i.login){var r,o=e.type(i.login);"function"===o?(r=i.infiniteLogin?e.noop:Z.pop,Z.login(i.login,i.infiniteLogin,s,r)):("string"===e.type(n)&&"string"===o||"boolean"===o)&&(r=i.infiniteLogin?e.noop:Z.pop,Z.login(y(n,i.login),i.infiniteLogin,s,r))}else s();!a&&Z.enabled()&&Z.resume()})}),Z},pop:function(n,r){n!==t&&L(n);var i,o=Z.token(!0);if(1===he.size())if(i=he.top(),qe.login){if(r||qe.onPop.call(Z,i,null,Z),function(){if(e.isFunction(qe.onBeforeLogout))try{if(!1===qe.onBeforeLogout.call(Z,Z))return}catch(e){x(e,"onBeforeLogout")}if(P(),e.isFunction(qe.onAfterLogout))try{qe.onAfterLogout.call(Z,Z)}catch(e){x(e,"onAfterlogout")}Z.login(Ue,!0,q)}(),e.isFunction(qe.onExit))try{qe.onExit.call(Z,Z)}catch(t){qe.onExit=e.noop,x(t,"onExit")}}else Z.error(G().canExitError);else{o&&P();var a=he.pop();if(i=he.top(),R(),r||qe.onPop.call(Z,a,i),Re&&Z.get_prompt()!==G().login+": "&&(Re=!1),e.isFunction(a.onExit))try{a.onExit.call(Z,Z)}catch(t){a.onExit=e.noop,x(t,"onExit")}Z.set_mask(i.mask)}return Z},option:function(t,n){if(void 0===n){if("string"==typeof t)return qe[t];"object"==typeof t&&e.each(t,function(e,t){qe[e]=t})}else qe[t]=n,t.match(/^num(Chars|Rows)$/)&&T();return Z},level:function(){return he.size()},reset:function(){return De(function(){for(Z.clear();he.size()>1;)he.pop();q()}),Z},purge:function(){return De(function(){var t=Z.prefix_name()+"_",n=Be.get(t+"interpreters");n&&e.each(JSON.parse(n),function(e,t){Be.remove(t+"_commands"),Be.remove(t+"_token"),Be.remove(t+"_login")}),_e.purge(),Be.remove(t+"interpreters")}),Z},destroy:function(){return De(function(){_e.destroy().remove(),re.remove(),Ve.remove(),e(document).unbind(".terminal_"+Z.id()),e(window).unbind(".terminal_"+Z.id()),Z.unbind("click wheel mousewheel mousedown mouseup"),Z.removeData("terminal").removeClass("terminal").unbind(".terminal"),qe.width&&Z.css("width",""),qe.height&&Z.css("height",""),e(window).off("blur",Ze).off("focus",Qe),Z.find(".terminal-fill").remove(),Z.stopTime(),ye.remove(Me),Se&&Se.unobserve(Z[0]),Te&&Te.disconnect(),Z.resizer("unbind"),Ge.resizer("unbind").remove(),ye.length()||e(window).off("hashchange")}),Z},scroll_to_bottom:function(){return w(),Z},is_bottom:function(){return-1!==qe.scrollBottomOffset&&(Z.is("body")?(t=e(document).height(),n=e(window).scrollTop(),r=window.innerHeight):(t=Y[0].scrollHeight,n=Y.scrollTop(),r=Y.outerHeight()),n+r>t-qe.scrollBottomOffset);var t,n,r}},function(e,t){return function(){try{return t.apply(Z,[].slice.apply(arguments))}catch(t){if("exec"!==e&&"resume"!==e&&x(t,"TERMINAL",!0),!qe.exceptionHandler)throw t}}})),!0===qe.ignoreSystemDescribe&&(qe.describe=!1),qe.width&&Z.width(qe.width),qe.height&&Z.height(qe.height),Y=Z.scroll_element(),e(document).bind("ajaxSend.terminal_"+Z.id(),function(e,t){ve.push(t)});var Ke,Ue,Ve=e(\'<div class="terminal-wrapper"/>\').appendTo(Z),Ge=e(\'<div class="font"/>\').appendTo(Z),Xe=e(\'<div class="terminal-fill"/>\').appendTo(Z);if(re=e("<div>").addClass("terminal-output").attr("role","log").appendTo(Ve),Z.addClass("terminal"),qe.login&&e.isFunction(qe.onBeforeLogin))try{!1===qe.onBeforeLogin.call(Z,Z)&&($e=!1)}catch(t){qe.onBeforeLogin=e.noop,x(t,"onBeforeLogin")}if("string"==typeof r)Ke=r;else if(r instanceof Array)for(var Je=0,Ye=r.length;Je<Ye;++Je)if("string"==typeof r[Je]){Ke=r[Je];break}function Qe(){Ce&&Z.focus()}function Ze(){Ce=ze,Z.disable().find("textarea").trigger("blur",[!0])}return e.isFunction(qe.login)?Ue=qe.login:!Ke||"string"!=typeof qe.login&&!0!==qe.login||(Ue=y(Ke,qe.login)),ye.append(Z),e(document).on("paste.terminal_"+Z.id(),function(e){function t(e,t){return-1!==e.type.indexOf(t)}if((e=e.originalEvent).clipboardData&&Z.enabled()){var n=e.clipboardData.items;if(n)for(var r=0;r<n.length;r++)if(t(n[r],"image")&&qe.pasteImage){var i=n[r].getAsFile(),o=(window.URL||window.webkitURL).createObjectURL(i);Z.echo(\'<img src="\'+o+\'"/>\',{raw:!0})}else t(n[r],"text/plain")&&n[r].getAsString(Z.insert);else if(e.clipboardData.getData){var a=e.clipboardData.getData("text/plain");Z.insert(a)}return!1}}),m(r,qe.login,function(n){(qe.completion&&"boolean"!=typeof qe.completion||!qe.completion)&&(n.completion="settings");var r=e.extend({},K,e.omap(qe.keymap||{},function(e,t){return K[e]?function(n,r){return t.call(Z,n,function(){return K[e](n,r)})}:t.bind(Z)}));function i(t){if(t=t.originalEvent){var n=document.elementFromPoint(t.clientX,t.clientY);!e(n).closest(".terminal").length&&Z.enabled()&&Z.disable()}}he=new b(e.extend({},qe.extra,{name:qe.name,prompt:qe.prompt,keypress:qe.keypress,keydown:qe.keydown,resize:qe.onResize,greetings:qe.greetings,mousewheel:qe.mousewheel,keymap:r},n)),_e=e("<div/>").appendTo(Ve).cmd({prompt:qe.prompt,history:qe.memory?"memory":qe.history,historyFilter:qe.historyFilter,historySize:qe.historySize,width:"100%",enabled:!1,keydown:U,keymap:r,clickTimeout:qe.clickTimeout,keypress:function(t){var n=he.top();if(ze&&(!We||!qe.pauseEvents)){if(e.isFunction(n.keypress))return n.keypress.call(Z,t,Z);if(e.isFunction(qe.keypress))return qe.keypress.call(Z,t,Z)}},onCommandChange:function(t){if(e.isFunction(qe.onCommandChange))try{qe.onCommandChange.call(Z,t,Z)}catch(t){qe.onCommandChange=e.noop,x(t,"onCommandChange")}w()},commands:N}),Z.oneTime(100,function(){e(document).bind("click.terminal_"+Z.id(),i).bind("contextmenu.terminal_"+Z.id(),i)});var o,a=e(window);function s(){if(Z.is(":visible")){var e=Z.width(),t=Z.height();de===t&&pe===e||Z.resize(),de=t,pe=e}}function l(){Z.resizer("unbind").resizer(s),Ge.resizer("unbind").resizer(function(){Ne=ie(Z),Z.resize()})}function c(){Se&&Se.unobserve(Z[0]);var t=Z.enabled(),n=Z.is(":visible");n&&l(),(Se=new IntersectionObserver(function(){Z.is(":visible")&&!n?(n=!0,l(),Ne=ie(Z),s(),t&&Z.enable()):n&&!Z.is(":visible")&&(n=!1,t=e.terminal.active()===Z&&Z.enabled(),Z.disable())},{root:document.body})).observe(Z[0])}document.addEventListener("resume",function(){Z.disable()}),X?Z.click(function(){He||(Z.enabled()?Z.disable():(Z.focus(),_e.enable()))}):(a.on("focus.terminal_"+Z.id(),Qe).on("blur.terminal_"+Z.id(),Ze),function(){var t,n=0,r="click_"+Z.id();function i(){if(t.is(".terminal")||t.is(".terminal-wrapper")){var e=Z.get_command().length;Z.set_position(e)}else t.closest(".prompt").length&&Z.set_position(0);o()}function o(){n=0,t=null}Z.mousedown(function(n){(function(e,t){var n=t.offset().left;return t.outerWidth()<=e.clientX-n})(n,Xe)||(t=e(n.target))}).mouseup(function(){if(""===J()&&t)if(1==++n){if(!He){if(ze){var e=qe.clickTimeout;return void Z.oneTime(e,r,i)}Z.focus()}}else Z.stopTime(r);o()}).dblclick(function(){o(),Z.stopTime(r)})}(),o=Z.find("textarea"),Z.on("contextmenu.terminal",function(t){if(""===J()&&!e(t.target).is("img,value,audio,object,canvas,a")){Z.enabled()||Z.enable();var n=_e.offset();o.css({left:t.pageX-n.left-20,top:t.pageY-n.top-20,width:"5em",height:"4em"}),o.is(":focus")||o.focus(),Z.stopTime("textarea"),Z.oneTime(100,"textarea",function(){o.css({left:"",top:"",width:"",height:""})}),Z.stopTime("selection"),Z.everyTime(20,"selection",function(){var e;o[0].selection!==o[0].value&&ee(o[0])&&((e=o[0]).selectionStart=e.selectionEnd=0,te(Z.find(".terminal-output")[0],Z.find(".cmd div:last-of-type")[0]),Z.stopTime("selection"))})}})),Z.delegate(".exception a","click",function(t){var n,r=e(this).attr("href");r.match(/:[0-9]+$/)&&(t.preventDefault(),(n=r.match(/(.*):([0-9]+):([0-9]+)$/))&&(Z.pause(qe.softPause),e.get(n[1],function(t){var r=location.href.replace(/[^/]+$/,""),i=n[1].replace(r,"");Z.echo("[[b;white;]"+i+"]");var o=t.split("\\n"),a=+n[2]-1;Z.echo(o.slice(a-2,a+3).map(function(t,n){return 2===n&&(t="[[;#f00;]"+e.terminal.escape_brackets(t)+"]"),"["+(a+n)+"]: "+t}).join("\\n")).resume()},"text")))}),Z.is(":visible")&&(se=Z.cols(),_e.resize(se),Ne||(Ne=ie(Z)),ue=ae(Z,Ne)),Z.is(":visible")&&l();var u=!!Z.closest("body").length,f=window.MutationObserver||window.WebKitMutationObserver;window.IntersectionObserver&&(f&&(Te=new f(function(){Z.closest("body").length?(u||(Z.scroll_to_bottom(),c()),u=!0):u&&(u=!1)})).observe(document.body,{childList:!0}),u&&c()),Ee.resolve(),ze&&Z.is(":visible")&&!X?Z.focus(t,!0):Z.disable(),e.isFunction(Ue)?Z.login(Ue,!0,q):q(),qe.execHash&&location.hash?setTimeout(function(){try{var t=location.hash.replace(/^#/,"");ge=JSON.parse(decodeURIComponent(t));var n=0;!function t(){var r=ge[n++];r?function(t){var n=ye.get()[t[0]];if(n&&Me===n.id()&&t[2])try{if(We){var r=e.Deferred();return D.push(function(){return n.exec(t[2]).done(function(){n.save_state(t[2],!0,t[1]),r.resolve()})}),r.promise()}return n.exec(t[2]).done(function(){n.save_state(t[2],!0,t[1])})}catch(t){var i=n.settings();if(e.isFunction(i.exceptionHandler))i.exceptionHandler.call(Z,t,"EXEC HASH");else{var o="Error while exec with command "+e.terminal.escape_brackets(fe);n.error(o).exception(t)}}}(r).done(t):xe=!0}()}catch(e){}}):xe=!0;var p=!1;function d(t,n){if(!p){var r,i=he.top();if(e.isFunction(i.mousewheel)?r=i.mousewheel(t,n,Z):e.isFunction(qe.mousewheel)&&(r=qe.mousewheel(t,n,Z)),Xe.outerWidth()===Z.outerWidth()&&!1!==r||t.preventDefault(),!1===r)return;n>0?Z.scroll(-40):Z.scroll(40)}}if(e(document).bind("keydown.terminal_"+Z.id(),function(e){e.shiftKey&&(p=!0)}).bind("keyup.terminal_"+Z.id(),function(e){(e.shiftKey||16===e.which)&&(p=!1)}),e.event.special.mousewheel)Z.on("mousewheel",d);else{var h,m=document.createElement("div");h="onwheel"in m?"wheel":document.onmousewheel!==t?"mousewheel":"DOMMouseScroll",m=null,Z.on(h,function(e){d(e,-("mousewheel"===h?-.025*e.originalEvent.wheelDelta:e.originalEvent.deltaY||e.originalEvent.detail))})}}),Z.data("terminal",Z),Z}},a=[n(2)],void 0===(s="function"==typeof(o=l)?o.apply(t,a):o)||(e.exports=s)}).call(t,n(4),n(20).setImmediate)},function(e,t,n){(function(e){var r=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(21),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(4))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,l=1,c={},u=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[l]=i,r(l),l++},p.clearImmediate=d}function d(e){delete c[e]}function h(e){if(u)setTimeout(h,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{d(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(4),n(22))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,c=[],u=!1,f=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):f=-1,c.length&&d())}function d(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++f<t;)l&&l[f].run();f=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){!function(e){if(!e.terminal)throw new Error("$.terminal is not defined");e.terminal.overtyping=function(e){return e.replace(/((?:_\\x08.|.\\x08_)+)/g,function(e){return"[[u;;]"+e.replace(/_x08|\\x08_|_\\u0008|\\u0008_/g,"")+"]"}).replace(/((?:.\\x08.)+)/g,function(e){return"[[b;#fff;]"+e.replace(/(.)(?:\\x08|\\u0008)\\1/g,function(e,t){return t})+"]"})},e.terminal.ansi_colors={normal:{black:"#000",red:"#A00",green:"#008400",yellow:"#A50",blue:"#00A",magenta:"#A0A",cyan:"#0AA",white:"#AAA"},faited:{black:"#000",red:"#640000",green:"#006100",yellow:"#737300",blue:"#000087",magenta:"#650065",cyan:"#008787",white:"#818181"},bold:{black:"#000",red:"#F55",green:"#44D544",yellow:"#FF5",blue:"#55F",magenta:"#F5F",cyan:"#5FF",white:"#FFF"},palette:["#000000","#AA0000","#00AA00","#AA5500","#0000AA","#AA00AA","#00AAAA","#AAAAAA","#555555","#FF5555","#55FF55","#FFFF55","#5555FF","#FF55FF","#55FFFF","#FFFFFF","#000000","#00005F","#000087","#0000AF","#0000D7","#0000FF","#005F00","#005F5F","#005F87","#005FAF","#005FD7","#005FFF","#008700","#00875F","#008787","#0087AF","#0087D7","#0087FF","#00AF00","#00AF5F","#00AF87","#00AFAF","#00AFD7","#00AFFF","#00D700","#00D75F","#00D787","#00D7AF","#00D7D7","#00D7FF","#00FF00","#00FF5F","#00FF87","#00FFAF","#00FFD7","#00FFFF","#5F0000","#5F005F","#5F0087","#5F00AF","#5F00D7","#5F00FF","#5F5F00","#5F5F5F","#5F5F87","#5F5FAF","#5F5FD7","#5F5FFF","#5F8700","#5F875F","#5F8787","#5F87AF","#5F87D7","#5F87FF","#5FAF00","#5FAF5F","#5FAF87","#5FAFAF","#5FAFD7","#5FAFFF","#5FD700","#5FD75F","#5FD787","#5FD7AF","#5FD7D7","#5FD7FF","#5FFF00","#5FFF5F","#5FFF87","#5FFFAF","#5FFFD7","#5FFFFF","#870000","#87005F","#870087","#8700AF","#8700D7","#8700FF","#875F00","#875F5F","#875F87","#875FAF","#875FD7","#875FFF","#878700","#87875F","#878787","#8787AF","#8787D7","#8787FF","#87AF00","#87AF5F","#87AF87","#87AFAF","#87AFD7","#87AFFF","#87D700","#87D75F","#87D787","#87D7AF","#87D7D7","#87D7FF","#87FF00","#87FF5F","#87FF87","#87FFAF","#87FFD7","#87FFFF","#AF0000","#AF005F","#AF0087","#AF00AF","#AF00D7","#AF00FF","#AF5F00","#AF5F5F","#AF5F87","#AF5FAF","#AF5FD7","#AF5FFF","#AF8700","#AF875F","#AF8787","#AF87AF","#AF87D7","#AF87FF","#AFAF00","#AFAF5F","#AFAF87","#AFAFAF","#AFAFD7","#AFAFFF","#AFD700","#AFD75F","#AFD787","#AFD7AF","#AFD7D7","#AFD7FF","#AFFF00","#AFFF5F","#AFFF87","#AFFFAF","#AFFFD7","#AFFFFF","#D70000","#D7005F","#D70087","#D700AF","#D700D7","#D700FF","#D75F00","#D75F5F","#D75F87","#D75FAF","#D75FD7","#D75FFF","#D78700","#D7875F","#D78787","#D787AF","#D787D7","#D787FF","#D7AF00","#D7AF5F","#D7AF87","#D7AFAF","#D7AFD7","#D7AFFF","#D7D700","#D7D75F","#D7D787","#D7D7AF","#D7D7D7","#D7D7FF","#D7FF00","#D7FF5F","#D7FF87","#D7FFAF","#D7FFD7","#D7FFFF","#FF0000","#FF005F","#FF0087","#FF00AF","#FF00D7","#FF00FF","#FF5F00","#FF5F5F","#FF5F87","#FF5FAF","#FF5FD7","#FF5FFF","#FF8700","#FF875F","#FF8787","#FF87AF","#FF87D7","#FF87FF","#FFAF00","#FFAF5F","#FFAF87","#FFAFAF","#FFAFD7","#FFAFFF","#FFD700","#FFD75F","#FFD787","#FFD7AF","#FFD7D7","#FFD7FF","#FFFF00","#FFFF5F","#FFFF87","#FFFFAF","#FFFFD7","#FFFFFF","#080808","#121212","#1C1C1C","#262626","#303030","#3A3A3A","#444444","#4E4E4E","#585858","#626262","#6C6C6C","#767676","#808080","#8A8A8A","#949494","#9E9E9E","#A8A8A8","#B2B2B2","#BCBCBC","#C6C6C6","#D0D0D0","#DADADA","#E4E4E4","#EEEEEE"]},e.terminal.from_ansi=function(){var t={30:"black",31:"red",32:"green",33:"yellow",34:"blue",35:"magenta",36:"cyan",37:"white",39:"inherit"},n={40:"black",41:"red",42:"green",43:"yellow",44:"blue",45:"magenta",46:"cyan",47:"white",49:"transparent"};function r(r){var i,o,a,s,l,c=r.split(";"),u=!1,f=!1,p=!1,d=[],h="",m="",g=!1,v=!1,y=!1,b=e.terminal.ansi_colors.palette;function x(e){switch(e){case 1:d.push("b"),p=!0,u=!1;break;case 4:d.push("u");break;case 3:d.push("i");break;case 5:y=!0;break;case 38:g=!0;break;case 48:v=!0;break;case 2:u=!0,p=!1;break;case 7:f=!0;break;default:-1===c.indexOf("5")&&(t[e]&&(h=t[e]),n[e]&&(m=n[e]))}}for(var w in c)c.hasOwnProperty(w)&&(i=parseInt(c[w],10),y&&(v||g)?(g&&b[i]&&(h=b[i]),v&&b[i]&&(m=b[i])):x(i));if(f)if(h||m){var k=m;m=h,h=k}else h="black",m="white";return o=l=p?e.terminal.ansi_colors.bold:u?e.terminal.ansi_colors.faited:e.terminal.ansi_colors.normal,a=g?h:"inherit"===h?h:o[h],s=v?m:"transparent"===m?m:l[m],[d.join(""),a,s]}return function(e){var t=e.split(/(\\x1B\\[[0-9;]*[A-Za-z])/g);if(1===t.length)return e;var n,i,o,a,s=[];t.length>3&&(t.slice(0,3).join("").match(/^\\[0*m$/)&&(t=t.slice(3)));for(var l=!1,c=0;c<t.length;++c)if(a=t[c].match(/^\\x1B\\[([0-9;]*)([A-Za-z])$/))switch(a[2]){case"m":0!=+a[1]&&(o=r(a[1])),l?(s.push("]"),0==+a[1]?(l=!1,n=i=""):(o[1]=o[1]||n,o[2]=o[2]||i,s.push("[["+o.join(";")+"]"),o[1]&&(n=o[1]),o[2]&&(i=o[2]))):0!=+a[1]&&(l=!0,o[1]=o[1]||n,o[2]=o[2]||i,s.push("[["+o.join(";")+"]"),o[1]&&(n=o[1]),o[2]&&(i=o[2]))}else s.push(t[c]);return l&&s.push("]"),s.join("")}}(),e.terminal.defaults.formatters.unshift(e.terminal.overtyping),e.terminal.defaults.formatters.unshift(e.terminal.from_ansi)}(jQuery)},function(e,t,n){"use strict";e.exports=n(25)},function(e,t){e.exports={dots:{interval:80,frames:["â ","â ","â ¹","â ¸","â ¼","â ´","â ¦","â §","â ","â "]},dots2:{interval:80,frames:["â£¾","â£½","â£»","â¢¿","â¡¿","â£","â£¯","â£·"]},dots3:{interval:80,frames:["â ","â ","â ","â ","â ","â ¦","â ´","â ²","â ³","â "]},dots4:{interval:80,frames:["â ","â ","â ","â ","â ","â ¸","â °","â  ","â °","â ¸","â ","â ","â ","â "]},dots5:{interval:80,frames:["â ","â ","â ","â ","â ","â ","â ","â ²","â ´","â ¦","â ","â ","â ","â ","â ","â ","â "]},dots6:{interval:80,frames:["â ","â ","â ","â ","â ","â ","â ","â ","â ²","â ´","â ¤","â ","â ","â ¤","â ´","â ²","â ","â ","â ","â ","â ","â ","â ","â "]},dots7:{interval:80,frames:["â ","â ","â ","â ","â ","â ","â ","â ","â ","â ¦","â ¤","â  ","â  ","â ¤","â ¦","â ","â ","â ","â ","â ","â ","â ","â ","â "]},dots8:{interval:80,frames:["â ","â ","â ","â ","â ","â ","â ","â ","â ","â ²","â ´","â ¤","â ","â ","â ¤","â  ","â  ","â ¤","â ¦","â ","â ","â ","â ","â ","â ","â ","â ","â ","â "]},dots9:{interval:80,frames:["â¢¹","â¢º","â¢¼","â£¸","â£","â¡§","â¡","â¡"]},dots10:{interval:80,frames:["â¢","â¢","â¢","â¡","â¡","â¡","â¡ "]},dots11:{interval:100,frames:["â ","â ","â ","â¡","â¢","â  ","â ","â "]},line:{interval:130,frames:["-","\\\\","|","/"]},line2:{interval:100,frames:["â ","-","â","â","â","-"]},pipe:{interval:100,frames:["â¤","â","â´","â","â","â","â¬","â"]},simpleDots:{interval:400,frames:[".  ",".. ","...","   "]},simpleDotsScrolling:{interval:200,frames:[".  ",".. ","..."," ..","  .","   "]},star:{interval:70,frames:["â¶","â¸","â¹","âº","â¹","â·"]},hamburger:{interval:100,frames:["â±","â²","â´"]},grow:{interval:120,frames:["â","â","â","â","â","â","â","â","â","â"]},grow2:{interval:120,frames:["â","â","â","â","â","â","â","â","â","â","â","â"]},balloon:{interval:140,frames:[" ",".","o","O","@","*"," "]},balloon2:{interval:120,frames:[".","o","O","Â°","O","o","."]},noise:{interval:100,frames:["â","â","â"]},bounce:{interval:120,frames:["â ","â ","â ","â "]},triangle:{interval:50,frames:["â¢","â£","â¤","â¥"]},square:{interval:120,frames:["â","â","â","â"]},square2:{interval:100,frames:["â","â","â","â"]},circle:{interval:100,frames:["â","â ","â","â","â¡","â"]},circle2:{interval:120,frames:["â¡","â","â "]},spin:{interval:180,frames:["â°","â³","â²","â±"]},spin2:{interval:120,frames:["â´","â·","â¶","âµ"]},spin3:{interval:50,frames:["â","â","â","â"]},spin4:{interval:100,frames:["â«","âª"]},toggle:{interval:250,frames:["â¶","â·"]},toggle2:{interval:80,frames:["â«","âª"]},toggle3:{interval:120,frames:["â¡","â "]},toggle4:{interval:100,frames:["â ","â¡","âª","â«"]},toggle5:{interval:100,frames:["â®","â¯"]},toggle6:{interval:300,frames:["á","á"]},toggle7:{interval:80,frames:["â¦¾","â¦¿"]},toggle8:{interval:100,frames:["â","â"]},toggle9:{interval:100,frames:["â","â"]},toggle10:{interval:100,frames:["ã","ã","ã"]},toggle11:{interval:50,frames:["â§","â§"]},toggle12:{interval:120,frames:["â","â"]},toggle13:{interval:80,frames:["=","*","-"]},arrow:{interval:100,frames:["â","â","â","â","â","â","â","â"]},arrow2:{interval:80,frames:["â¬ï¸ ","âï¸ ","â¡ï¸ ","âï¸ ","â¬ï¸ ","âï¸ ","â¬ï¸ ","âï¸ "]},arrow3:{interval:120,frames:["â¹â¹â¹â¹â¹","â¸â¹â¹â¹â¹","â¹â¸â¹â¹â¹","â¹â¹â¸â¹â¹","â¹â¹â¹â¸â¹","â¹â¹â¹â¹â¸"]},bouncing:{interval:80,frames:["[    ]","[   =]","[  ==]","[ ===]","[====]","[=== ]","[==  ]","[=   ]"]},bouncingBall:{interval:80,frames:["( â    )","(  â   )","(   â  )","(    â )","(     â)","(    â )","(   â  )","(  â   )","( â    )","(â     )"]},smiley:{interval:200,frames:["ð ","ð "]},monkey:{interval:300,frames:["ð ","ð ","ð ","ð "]},hearts:{interval:100,frames:["ð ","ð ","ð ","ð ","â¤ï¸ "]},clock:{interval:100,frames:["ð ","ð ","ð ","ð ","ð ","ð ","ð ","ð ","ð ","ð ","ð "]},earth:{interval:180,frames:["ð ","ð ","ð "]},moon:{interval:80,frames:["ð ","ð ","ð ","ð ","ð ","ð ","ð ","ð "]},runner:{interval:140,frames:["ð¶ ","ð "]}}},function(e,t,n){(function(e){"use strict";var t=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"\'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]\'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"[\'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0}},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:\'"<character>\',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],n=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"global",shortName:"g"}],r=e.Pos;e.Vim=function(){function i(t,n){this==e.keyMap.vim&&(e.rmClass(t.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==t.getOption("inputStyle")&&null!=document.body.style.caretColor&&(function(e){var t=e.state.fatCursorMarks;if(t)for(var n=0;n<t.length;n++)t[n].clear();e.state.fatCursorMarks=null,e.off("cursorActivity",s)}(t),t.getInputField().style.caretColor="")),n&&n.attach==o||function(t){t.setOption("disableInput",!1),t.off("cursorActivity",Xe),e.off(t.getInputField(),"paste",f(t)),t.state.vim=null}(t)}function o(t,n){this==e.keyMap.vim&&(e.addClass(t.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==t.getOption("inputStyle")&&null!=document.body.style.caretColor&&(function(e){e.state.fatCursorMarks=a(e),e.on("cursorActivity",s)}(t),t.getInputField().style.caretColor="transparent")),n&&n.attach==o||function(t){t.setOption("disableInput",!0),t.setOption("showCursorWhenSelecting",!1),e.signal(t,"vim-mode-change",{mode:"normal"}),t.on("cursorActivity",Xe),P(t),e.on(t.getInputField(),"paste",f(t))}(t)}function a(e){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){var o=t[i];if(o.empty())if(o.anchor.ch<e.getLine(o.anchor.line).length)n.push(e.markText(o.anchor,r(o.anchor.line,o.anchor.ch+1),{className:"cm-fat-cursor-mark"}));else{var a=document.createElement("span");a.textContent="Â ",a.className="cm-fat-cursor-mark",n.push(e.setBookmark(o.anchor,{widget:a}))}}return n}function s(e){var t=e.state.fatCursorMarks;if(t)for(var n=0;n<t.length;n++)t[n].clear();e.state.fatCursorMarks=a(e)}function l(t,n){if(n){if(this[t])return this[t];var r=function(e){if("\'"==e.charAt(0))return e.charAt(1);var t=e.split(/-(?!$)/),n=t[t.length-1];if(1==t.length&&1==t[0].length)return!1;if(2==t.length&&"Shift"==t[0]&&1==n.length)return!1;for(var r=!1,i=0;i<t.length;i++){var o=t[i];o in c?t[i]=c[o]:r=!0,o in u&&(t[i]=u[o])}return!!r&&(_(n)&&(t[t.length-1]=n.toLowerCase()),"<"+t.join("-")+">")}(t);if(!r)return!1;var i=e.Vim.findKey(n,r);return"function"==typeof i&&e.signal(n,"vim-keypress",r),i}}e.defineOption("vimMode",!1,function(t,n,r){n&&"vim"!=t.getOption("keyMap")?t.setOption("keyMap","vim"):!n&&r!=e.Init&&/^vim/.test(t.getOption("keyMap"))&&t.setOption("keyMap","default")});var c={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A"},u={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"};function f(e){var t=e.state.vim;return t.onPasteFn||(t.onPasteFn=function(){t.insertMode||(e.setCursor(J(e.getCursor(),0,1)),V.enterInsertMode(e,{},t))}),t.onPasteFn}var p=/[\\d]/,d=[e.isWordChar,function(t){return t&&!e.isWordChar(t)&&!/\\s/.test(t)}],h=[function(e){return/\\S/.test(e)}];function m(e,t){for(var n=[],r=e;r<e+t;r++)n.push(String.fromCharCode(r));return n}var g=m(65,26),v=m(97,26),y=m(48,10),b=[].concat(g,v,y,["<",">"]),x=[].concat(g,v,y,["-",\'"\',".",":","/"]);function w(e,t){return t>=e.firstLine()&&t<=e.lastLine()}function k(e){return/^[a-z]$/.test(e)}function _(e){return/^[A-Z]$/.test(e)}function C(e){return/^\\s*$/.test(e)}function S(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}var T={};function A(e,t,n,r,i){if(void 0===t&&!i)throw Error("defaultValue is required unless callback is provided");if(n||(n="string"),T[e]={type:n,defaultValue:t,callback:i},r)for(var o=0;o<r.length;o++)T[r[o]]=T[e];t&&L(e,t)}function L(e,t,n,r){var i=T[e],o=(r=r||{}).scope;if(!i)return new Error("Unknown option: "+e);if("boolean"==i.type){if(t&&!0!==t)return new Error("Invalid argument: "+e+"="+t);!1!==t&&(t=!0)}i.callback?("local"!==o&&i.callback(t,void 0),"global"!==o&&n&&i.callback(t,n)):("local"!==o&&(i.value="boolean"==i.type?!!t:t),"global"!==o&&n&&(n.state.vim.options[e]={value:t}))}function M(e,t,n){var r=T[e],i=(n=n||{}).scope;if(!r)return new Error("Unknown option: "+e);if(r.callback){var o=t&&r.callback(void 0,t);return"global"!==i&&void 0!==o?o:"local"!==i?r.callback():void 0}return((o="global"!==i&&t&&t.state.vim.options[e])||"local"!==i&&r||{}).value}A("filetype",void 0,"string",["ft"],function(e,t){if(void 0!==t){if(void 0===e)return"null"==(n=t.getOption("mode"))?"":n;var n=""==e?"null":e;t.setOption("mode",n)}});var F,E,O=function(){var e=100,t=-1,n=0,r=0,i=new Array(e);return{cachedCursor:void 0,add:function(o,a,s){var l=i[t%e];function c(n){var r=++t%e,a=i[r];a&&a.clear(),i[r]=o.setBookmark(n)}if(l){var u=l.find();u&&!ee(u,a)&&c(a)}else c(a);c(s),n=t,(r=t-e+1)<0&&(r=0)},move:function(o,a){(t+=a)>n?t=n:t<r&&(t=r);var s=i[(e+t)%e];if(s&&!s.find()){var l,c=a>0?1:-1,u=o.getCursor();do{if((s=i[(e+(t+=c))%e])&&(l=s.find())&&!ee(u,l))break}while(t<n&&t>r)}return s}}},D=function(e){return e?{changes:e.changes,expectCursorActivityForChange:e.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function N(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=D()}function P(e){return e.state.vim||(e.state.vim={inputState:new I,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),e.state.vim}function R(){for(var e in F={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:O(),macroModeState:new N,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new z({}),searchHistoryController:new H,exCommandHistoryController:new H},T){var t=T[e];t.value=t.defaultValue}}N.prototype={exitMacroRecordMode:function(){var e=F.macroModeState;e.onRecordingDone&&e.onRecordingDone(),e.onRecordingDone=void 0,e.isRecording=!1},enterMacroRecordMode:function(e,t){var n=F.registerController.getRegister(t);n&&(n.clear(),this.latestRegister=t,e.openDialog&&(this.onRecordingDone=e.openDialog("(recording)["+t+"]",null,{bottom:!0})),this.isRecording=!0)}};var j={buildKeyMap:function(){},getRegisterController:function(){return F.registerController},resetVimGlobalState_:R,getVimGlobalState_:function(){return F},maybeInitVimState_:P,suppressErrorLogging:!1,InsertModeKey:Ye,map:function(e,t,n){$e.map(e,t,n)},unmap:function(e,t){$e.unmap(e,t)},setOption:L,getOption:M,defineOption:A,defineEx:function(e,t,n){if(t){if(0!==e.indexOf(t))throw new Error(\'(Vim.defineEx) "\'+t+\'" is not a prefix of "\'+e+\'", command not registered\')}else t=e;We[e]=n,$e.commandMap_[t]={name:e,shortName:t,type:"api"}},handleKey:function(e,t,n){var r=this.findKey(e,t,n);if("function"==typeof r)return r()},findKey:function(n,r,i){var o,a=P(n);function s(){var e=F.macroModeState;if(e.isRecording){if("q"==r)return e.exitMacroRecordMode(),q(n),!0;"mapping"!=i&&function(e,t){if(!e.isPlaying){var n=e.latestRegister,r=F.registerController.getRegister(n);r&&r.pushText(t)}}(e,r)}}function l(){if("<Esc>"==r)return q(n),a.visualMode?de(n):a.insertMode&&Ke(n),!0}return!1===(o=a.insertMode?function(){if(l())return!0;for(var e=a.inputState.keyBuffer=a.inputState.keyBuffer+r,i=1==r.length,o=W.matchCommand(e,t,a.inputState,"insert");e.length>1&&"full"!=o.type;){e=a.inputState.keyBuffer=e.slice(1);var s=W.matchCommand(e,t,a.inputState,"insert");"none"!=s.type&&(o=s)}if("none"==o.type)return q(n),!1;if("partial"==o.type)return E&&window.clearTimeout(E),E=window.setTimeout(function(){a.insertMode&&a.inputState.keyBuffer&&q(n)},M("insertModeEscKeysTimeout")),!i;if(E&&window.clearTimeout(E),i){for(var c=n.listSelections(),u=0;u<c.length;u++){var f=c[u].head;n.replaceRange("",J(f,0,-(e.length-1)),f,"+input")}F.macroModeState.lastInsertModeChanges.changes.pop()}return q(n),o.command}():function(){if(s()||l())return!0;var e=a.inputState.keyBuffer=a.inputState.keyBuffer+r;if(/^[1-9]\\d*$/.test(e))return!0;if(!(i=/^(\\d*)(.*)$/.exec(e)))return q(n),!1;var i,o=a.visualMode?"visual":"normal",c=W.matchCommand(i[2]||i[1],t,a.inputState,o);return"none"==c.type?(q(n),!1):"partial"==c.type||(a.inputState.keyBuffer="",(i=/^(\\d*)(.*)$/.exec(e))[1]&&"0"!=i[1]&&a.inputState.pushRepeatDigit(i[1]),c.command)}())?void 0:!0===o?function(){return!0}:function(){return n.operation(function(){n.curOp.isVimOp=!0;try{"keyToKey"==o.type?function(t){for(var i;t;)i=/<\\w+-.+?>|<\\w+>|./.exec(t),r=i[0],t=t.substring(i.index+r.length),e.Vim.handleKey(n,r,"mapping")}(o.toKeys):W.processCommand(n,a,o)}catch(t){throw n.state.vim=void 0,P(n),e.Vim.suppressErrorLogging||console.log(t),t}return!0})}},handleEx:function(e,t){$e.processCommand(e,t)},defineMotion:function(e,t){$[e]=t},defineAction:function(e,t){V[e]=t},defineOperator:function(e,t){U[e]=t},mapCommand:function(e,t,n,r,i){var o={keys:e,type:t};for(var a in o[t]=n,o[t+"Args"]=r,i)o[a]=i[a];Ue(o)},_mapCommand:Ue,defineRegister:function(e,t){var n=F.registerController.registers;if(!e||1!=e.length)throw Error("Register name must be 1 character");if(n[e])throw Error("Register already defined "+e);n[e]=t,x.push(e)},exitVisualMode:de,exitInsertMode:Ke};function I(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function q(t,n){t.state.vim.inputState=new I,e.signal(t,"vim-command-done",n)}function B(e,t,n){this.clear(),this.keyBuffer=[e||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!t,this.blockwise=!!n}function z(e){this.registers=e,this.unnamedRegister=e[\'"\']=new B,e["."]=new B,e[":"]=new B,e["/"]=new B}function H(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}I.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},I.prototype.getRepeat=function(){var e=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10))),e},B.prototype={setText:function(e,t,n){this.keyBuffer=[e||""],this.linewise=!!t,this.blockwise=!!n},pushText:function(e,t){t&&(this.linewise||this.keyBuffer.push("\\n"),this.linewise=!0),this.keyBuffer.push(e)},pushInsertModeChanges:function(e){this.insertModeChanges.push(D(e))},pushSearchQuery:function(e){this.searchQueries.push(e)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},z.prototype={pushText:function(e,t,n,r,i){r&&"\\n"!==n.charAt(n.length-1)&&(n+="\\n");var o=this.isValidRegister(e)?this.getRegister(e):null;if(o)_(e)?o.pushText(n,r):o.setText(n,r,i),this.unnamedRegister.setText(o.toString(),r);else{switch(t){case"yank":this.registers[0]=new B(n,r,i);break;case"delete":case"change":-1==n.indexOf("\\n")?this.registers["-"]=new B(n,r):(this.shiftNumericRegisters_(),this.registers[1]=new B(n,r))}this.unnamedRegister.setText(n,r,i)}},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new B),this.registers[e]):this.unnamedRegister},isValidRegister:function(e){return e&&S(e,x)},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}},H.prototype={nextMatch:function(e,t){var n=this.historyBuffer,r=t?-1:1;null===this.initialPrefix&&(this.initialPrefix=e);for(var i=this.iterator+r;t?i>=0:i<n.length;i+=r)for(var o=n[i],a=0;a<=o.length;a++)if(this.initialPrefix==o.substring(0,a))return this.iterator=i,o;return i>=n.length?(this.iterator=n.length,this.initialPrefix):i<0?e:void 0},pushInput:function(e){var t=this.historyBuffer.indexOf(e);t>-1&&this.historyBuffer.splice(t,1),e.length&&this.historyBuffer.push(e)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var W={matchCommand:function(e,t,n,r){var i,o=function(e,t,n,r){for(var i,o=[],a=[],s=0;s<t.length;s++){var l=t[s];"insert"==n&&"insert"!=l.context||l.context&&l.context!=n||r.operator&&"action"==l.type||!(i=Y(e,l.keys))||("partial"==i&&o.push(l),"full"==i&&a.push(l))}return{partial:o.length&&o,full:a.length&&a}}(e,t,r,n);if(!o.full&&!o.partial)return{type:"none"};if(!o.full&&o.partial)return{type:"partial"};for(var a=0;a<o.full.length;a++){var s=o.full[a];i||(i=s)}if("<character>"==i.keys.slice(-11)){var l=function(e){var t=/^.*(<[^>]+>)$/.exec(e),n=t?t[1]:e.slice(-1);if(n.length>1)switch(n){case"<CR>":n="\\n";break;case"<Space>":n=" ";break;default:n=""}return n}(e);if(!l)return{type:"none"};n.selectedCharacter=l}return{type:"full",command:i}},processCommand:function(e,t,n){switch(t.inputState.repeatOverride=n.repeatOverride,n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action":this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n)}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=X(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var r=t.inputState;if(r.operator){if(r.operator==n.operator)return r.motion="expandToLine",r.motionArgs={linewise:!0},void this.evalInput(e,t);q(e)}r.operator=n.operator,r.operatorArgs=X(n.operatorArgs),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var r=t.visualMode,i=X(n.operatorMotionArgs);i&&r&&i.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),r||this.processMotion(e,t,n)},processAction:function(e,t,n){var r=t.inputState,i=r.getRepeat(),o=!!i,a=X(n.actionArgs)||{};r.selectedCharacter&&(a.selectedCharacter=r.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),a.repeat=i||1,a.repeatIsExplicit=o,a.registerName=r.registerName,q(e),t.lastMotion=null,n.isEdit&&this.recordLastEdit(t,r,n),V[n.action](e,a,t)},processSearch:function(t,n,r){if(t.getSearchCursor){var i=r.searchArgs.forward,o=r.searchArgs.wholeWordOnly;Te(t).setReversed(!i);var a=i?"/":"?",s=Te(t).getQuery(),l=t.getScrollInfo();switch(r.searchArgs.querySrc){case"prompt":var c=F.macroModeState;c.isPlaying?d(p=c.replaySearchQueries.shift(),!0,!1):Pe(t,{onClose:function(e){t.scrollTo(l.left,l.top),d(e,!0,!0);var n=F.macroModeState;n.isRecording&&function(e,t){if(!e.isPlaying){var n=e.latestRegister,r=F.registerController.getRegister(n);r&&r.pushSearchQuery&&r.pushSearchQuery(t)}}(n,e)},prefix:a,desc:Ne,onKeyUp:function(n,r,o){var a,s,c,u=e.keyName(n);"Up"==u||"Down"==u?(a="Up"==u,s=n.target?n.target.selectionEnd:0,o(r=F.searchHistoryController.nextMatch(r,a)||""),s&&n.target&&(n.target.selectionEnd=n.target.selectionStart=Math.min(s,n.target.value.length))):"Left"!=u&&"Right"!=u&&"Ctrl"!=u&&"Alt"!=u&&"Shift"!=u&&F.searchHistoryController.reset();try{c=Re(t,r,!0,!0)}catch(n){}c?t.scrollIntoView(Ie(t,!i,c),30):(qe(t),t.scrollTo(l.left,l.top))},onKeyDown:function(n,r,i){var o=e.keyName(n);"Esc"==o||"Ctrl-C"==o||"Ctrl-["==o||"Backspace"==o&&""==r?(F.searchHistoryController.pushInput(r),F.searchHistoryController.reset(),Re(t,s),qe(t),t.scrollTo(l.left,l.top),e.e_stop(n),q(t),i(),t.focus()):"Up"==o||"Down"==o?e.e_stop(n):"Ctrl-U"==o&&(e.e_stop(n),i(""))}});break;case"wordUnderCursor":var u=me(t,!1,0,!1,!0),f=!0;if(u||(u=me(t,!1,0,!1,!1),f=!1),!u)return;var p=t.getLine(u.start.line).substring(u.start.ch,u.end.ch);p=f&&o?"\\\\b"+p+"\\\\b":p.replace(/([.?*+$\\[\\]\\/\\\\(){}|\\-])/g,"\\\\$1"),F.jumpList.cachedCursor=t.getCursor(),t.setCursor(u.start),d(p,!0,!1)}}function d(e,i,o){F.searchHistoryController.pushInput(e),F.searchHistoryController.reset();try{Re(t,e,i,o)}catch(n){return De(t,"Invalid regex: "+e),void q(t)}W.processMotion(t,n,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:r.searchArgs.toJumplist}})}},processEx:function(t,n,r){function i(e){F.exCommandHistoryController.pushInput(e),F.exCommandHistoryController.reset(),$e.processCommand(t,e)}function o(n,r,i){var o,a,s=e.keyName(n);("Esc"==s||"Ctrl-C"==s||"Ctrl-["==s||"Backspace"==s&&""==r)&&(F.exCommandHistoryController.pushInput(r),F.exCommandHistoryController.reset(),e.e_stop(n),q(t),i(),t.focus()),"Up"==s||"Down"==s?(e.e_stop(n),o="Up"==s,a=n.target?n.target.selectionEnd:0,i(r=F.exCommandHistoryController.nextMatch(r,o)||""),a&&n.target&&(n.target.selectionEnd=n.target.selectionStart=Math.min(a,n.target.value.length))):"Ctrl-U"==s?(e.e_stop(n),i("")):"Left"!=s&&"Right"!=s&&"Ctrl"!=s&&"Alt"!=s&&"Shift"!=s&&F.exCommandHistoryController.reset()}"keyToEx"==r.type?$e.processCommand(t,r.exArgs.input):n.visualMode?Pe(t,{onClose:i,prefix:":",value:"\'<,\'>",onKeyDown:o,selectValueOnOpen:!1}):Pe(t,{onClose:i,prefix:":",onKeyDown:o})},evalInput:function(e,t){var n,i,o,a=t.inputState,s=a.motion,l=a.motionArgs||{},c=a.operator,u=a.operatorArgs||{},f=a.registerName,p=t.sel,d=Z(t.visualMode?G(e,p.head):e.getCursor("head")),h=Z(t.visualMode?G(e,p.anchor):e.getCursor("anchor")),m=Z(d),g=Z(h);if(c&&this.recordLastEdit(t,a),(o=void 0!==a.repeatOverride?a.repeatOverride:a.getRepeat())>0&&l.explicitRepeat?l.repeatIsExplicit=!0:(l.noRepeat||!l.explicitRepeat&&0===o)&&(o=1,l.repeatIsExplicit=!1),a.selectedCharacter&&(l.selectedCharacter=u.selectedCharacter=a.selectedCharacter),l.repeat=o,q(e),s){var v=$[s](e,d,l,t);if(t.lastMotion=$[s],!v)return;if(l.toJumplist){var y=F.jumpList,b=y.cachedCursor;b?(ge(e,b,v),delete y.cachedCursor):ge(e,d,v)}v instanceof Array?(i=v[0],n=v[1]):n=v,n||(n=Z(d)),t.visualMode?(t.visualBlock&&n.ch===1/0||(n=G(e,n,t.visualBlock)),i&&(i=G(e,i,!0)),i=i||g,p.anchor=i,p.head=n,fe(e),ke(e,t,"<",te(i,n)?i:n),ke(e,t,">",te(i,n)?n:i)):c||(n=G(e,n),e.setCursor(n.line,n.ch))}if(c){if(u.lastSel){i=g;var x=u.lastSel,w=Math.abs(x.head.line-x.anchor.line),k=Math.abs(x.head.ch-x.anchor.ch);n=x.visualLine?r(g.line+w,g.ch):x.visualBlock?r(g.line+w,g.ch+k):x.head.line==x.anchor.line?r(g.line,g.ch+k):r(g.line+w,g.ch),t.visualMode=!0,t.visualLine=x.visualLine,t.visualBlock=x.visualBlock,p=t.sel={anchor:i,head:n},fe(e)}else t.visualMode&&(u.lastSel={anchor:Z(p.anchor),head:Z(p.head),visualBlock:t.visualBlock,visualLine:t.visualLine});var _,S,T,A,L;if(t.visualMode){if(_=ne(p.head,p.anchor),S=re(p.head,p.anchor),T=t.visualLine||u.linewise,L=pe(e,{anchor:_,head:S},A=t.visualBlock?"block":T?"line":"char"),T){var M=L.ranges;if("block"==A)for(var E=0;E<M.length;E++)M[E].head.ch=oe(e,M[E].head.line);else"line"==A&&(M[0].head=r(M[0].head.line+1,0))}}else{if(_=Z(i||g),te(S=Z(n||m),_)){var O=_;_=S,S=O}(T=l.linewise||u.linewise)?function(e,t,n){t.ch=0,n.ch=0,n.line++}(0,_,S):l.forward&&function(e,t,n){var r=e.getRange(t,n);if(/\\n\\s*$/.test(r)){var i=r.split("\\n");i.pop();for(var o=i.pop();i.length>0&&o&&C(o);o=i.pop())n.line--,n.ch=0;o?(n.line--,n.ch=oe(e,n.line)):n.ch=0}}(e,_,S),L=pe(e,{anchor:_,head:S},A="char",!l.inclusive||T)}e.setSelections(L.ranges,L.primary),t.lastMotion=null,u.repeat=o,u.registerName=f,u.linewise=T;var D=U[c](e,u,L.ranges,g,n);t.visualMode&&de(e,null!=D),D&&e.setCursor(D)}},recordLastEdit:function(e,t,n){var r=F.macroModeState;r.isPlaying||(e.lastEditInputState=t,e.lastEditActionCommand=n,r.lastInsertModeChanges.changes=[],r.lastInsertModeChanges.expectCursorActivityForChange=!1)}},$={moveToTopLine:function(e,t,n){var i=Be(e).top+n.repeat-1;return r(i,he(e.getLine(i)))},moveToMiddleLine:function(e){var t=Be(e),n=Math.floor(.5*(t.top+t.bottom));return r(n,he(e.getLine(n)))},moveToBottomLine:function(e,t,n){var i=Be(e).bottom-n.repeat+1;return r(i,he(e.getLine(i)))},expandToLine:function(e,t,n){return r(t.line+n.repeat-1,1/0)},findNext:function(e,t,n){var r=Te(e),i=r.getQuery();if(i){var o=!n.forward;return o=r.isReversed()?!o:o,je(e,i),Ie(e,o,i,n.repeat)}},goToMark:function(e,t,n,r){var i=ze(e,r,n.selectedCharacter);return i?n.linewise?{line:i.line,ch:he(e.getLine(i.line))}:i:null},moveToOtherHighlightedEnd:function(e,t,n,i){if(i.visualBlock&&n.sameLine){var o=i.sel;return[G(e,r(o.anchor.line,o.head.ch)),G(e,r(o.head.line,o.anchor.ch))]}return[i.sel.head,i.sel.anchor]},jumpToMark:function(e,t,n,i){for(var o=t,a=0;a<n.repeat;a++){var s=o;for(var l in i.marks)if(k(l)){var c=i.marks[l].find();if(!((n.forward?te(c,s):te(s,c))||n.linewise&&c.line==s.line)){var u=ee(s,o),f=n.forward?ie(s,c,o):ie(o,c,s);(u||f)&&(o=c)}}}return n.linewise&&(o=r(o.line,he(e.getLine(o.line)))),o},moveByCharacters:function(e,t,n){var i=t,o=n.repeat,a=n.forward?i.ch+o:i.ch-o;return r(i.line,a)},moveByLines:function(e,t,n,i){var o=t,a=o.ch;switch(i.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:a=i.lastHPos;break;default:i.lastHPos=a}var s=n.repeat+(n.repeatOffset||0),l=n.forward?o.line+s:o.line-s,c=e.firstLine(),u=e.lastLine();return l<c&&o.line==c?this.moveToStartOfLine(e,t,n,i):l>u&&o.line==u?this.moveToEol(e,t,n,i):(n.toFirstChar&&(a=he(e.getLine(l)),i.lastHPos=a),i.lastHSPos=e.charCoords(r(l,a),"div").left,r(l,a))},moveByDisplayLines:function(e,t,n,i){var o=t;switch(i.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:i.lastHSPos=e.charCoords(o,"div").left}var a=n.repeat;if((l=e.findPosV(o,n.forward?a:-a,"line",i.lastHSPos)).hitSide)if(n.forward)var s={top:e.charCoords(l,"div").top+8,left:i.lastHSPos},l=e.coordsChar(s,"div");else{var c=e.charCoords(r(e.firstLine(),0),"div");c.left=i.lastHSPos,l=e.coordsChar(c,"div")}return i.lastHPos=l.ch,l},moveByPage:function(e,t,n){var r=t,i=n.repeat;return e.findPosV(r,n.forward?i:-i,"page")},moveByParagraph:function(e,t,n){var r=n.forward?1:-1;return Ce(e,t,n.repeat,r)},moveByScroll:function(e,t,n,r){var i=e.getScrollInfo(),o=null,a=n.repeat;a||(a=i.clientHeight/(2*e.defaultTextHeight()));var s=e.charCoords(t,"local");if(n.repeat=a,!(o=$.moveByDisplayLines(e,t,n,r)))return null;var l=e.charCoords(o,"local");return e.scrollTo(null,i.top+l.top-s.top),o},moveByWords:function(e,t,n){return function(e,t,n,i,o,a){var s=Z(t),l=[];(i&&!o||!i&&o)&&n++;for(var c=!(i&&o),u=0;u<n;u++){var f=xe(e,t,i,a,c);if(!f){var p=oe(e,e.lastLine());l.push(i?{line:e.lastLine(),from:p,to:p}:{line:0,from:0,to:0});break}l.push(f),t=r(f.line,i?f.to-1:f.from)}var d=l.length!=n,h=l[0],m=l.pop();return i&&!o?(d||h.from==s.ch&&h.line==s.line||(m=l.pop()),r(m.line,m.from)):i&&o?r(m.line,m.to-1):!i&&o?(d||h.to==s.ch&&h.line==s.line||(m=l.pop()),r(m.line,m.to)):r(m.line,m.from)}(e,t,n.repeat,!!n.forward,!!n.wordEnd,!!n.bigWord)},moveTillCharacter:function(e,t,n){var r=we(e,n.repeat,n.forward,n.selectedCharacter),i=n.forward?-1:1;return ve(i,n),r?(r.ch+=i,r):null},moveToCharacter:function(e,t,n){var r=n.repeat;return ve(0,n),we(e,r,n.forward,n.selectedCharacter)||t},moveToSymbol:function(e,t,n){return function(e,t,n,i){var o=Z(e.getCursor()),a=n?1:-1,s=n?e.lineCount():-1,l=o.ch,c=o.line,u=e.getLine(c),f={lineText:u,nextCh:u.charAt(l),lastCh:null,index:l,symb:i,reverseSymb:(n?{")":"(","}":"{"}:{"(":")","{":"}"})[i],forward:n,depth:0,curMoveThrough:!1},p=ye[i];if(!p)return o;var d=be[p].init,h=be[p].isComplete;for(d&&d(f);c!==s&&t;){if(f.index+=a,f.nextCh=f.lineText.charAt(f.index),!f.nextCh){if(c+=a,f.lineText=e.getLine(c)||"",a>0)f.index=0;else{var m=f.lineText.length;f.index=m>0?m-1:0}f.nextCh=f.lineText.charAt(f.index)}h(f)&&(o.line=c,o.ch=f.index,t--)}return f.nextCh||f.curMoveThrough?r(c,f.index):o}(e,n.repeat,n.forward,n.selectedCharacter)||t},moveToColumn:function(e,t,n,i){var o=n.repeat;return i.lastHPos=o-1,i.lastHSPos=e.charCoords(t,"div").left,function(e,t){var n=e.getCursor().line;return G(e,r(n,t-1))}(e,o)},moveToEol:function(e,t,n,i){var o=t;i.lastHPos=1/0;var a=r(o.line+n.repeat-1,1/0),s=e.clipPos(a);return s.ch--,i.lastHSPos=e.charCoords(s,"div").left,a},moveToFirstNonWhiteSpaceCharacter:function(e,t){var n=t;return r(n.line,he(e.getLine(n.line)))},moveToMatchedSymbol:function(e,t){for(var n,i=t,o=i.line,a=i.ch,s=e.getLine(o);a<s.length;a++)if((n=s.charAt(a))&&-1!="()[]{}".indexOf(n)){var l=e.getTokenTypeAt(r(o,a+1));if("string"!==l&&"comment"!==l)break}return a<s.length?e.findMatchingBracket(r(o,a)).to:i},moveToStartOfLine:function(e,t){return r(t.line,0)},moveToLineOrEdgeOfDocument:function(e,t,n){var i=n.forward?e.lastLine():e.firstLine();return n.repeatIsExplicit&&(i=n.repeat-e.getOption("firstLineNumber")),r(i,he(e.getLine(i)))},textObjectManipulation:function(e,t,n,i){var o=n.selectedCharacter;"b"==o?o="(":"B"==o&&(o="{");var a,s=!n.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"["}[o])a=function(e,t,n,i){var o,a,s=t,l={"(":/[()]/,")":/[()]/,"[":/[[\\]]/,"]":/[[\\]]/,"{":/[{}]/,"}":/[{}]/}[n],c={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{"}[n],u=e.getLine(s.line).charAt(s.ch)===c?1:0;if(o=e.scanForBracket(r(s.line,s.ch+u),-1,null,{bracketRegex:l}),a=e.scanForBracket(r(s.line,s.ch+u),1,null,{bracketRegex:l}),!o||!a)return{start:s,end:s};if(o=o.pos,a=a.pos,o.line==a.line&&o.ch>a.ch||o.line>a.line){var f=o;o=a,a=f}return i?a.ch+=1:o.ch+=1,{start:o,end:a}}(e,t,o,s);else if({"\'":!0,\'"\':!0}[o])a=function(e,t,n,i){var o,a,s,l,c=Z(t),u=e.getLine(c.line).split(""),f=u.indexOf(n);if(c.ch<f?c.ch=f:f<c.ch&&u[c.ch]==n&&(a=c.ch,--c.ch),u[c.ch]!=n||a)for(s=c.ch;s>-1&&!o;s--)u[s]==n&&(o=s+1);else o=c.ch+1;if(o&&!a)for(s=o,l=u.length;s<l&&!a;s++)u[s]==n&&(a=s);return o&&a?(i&&(--o,++a),{start:r(c.line,o),end:r(c.line,a)}):{start:c,end:c}}(e,t,o,s);else if("W"===o)a=me(e,s,0,!0);else if("w"===o)a=me(e,s,0,!1);else{if("p"!==o)return null;if(a=Ce(e,t,n.repeat,0,s),n.linewise=!0,i.visualMode)i.visualLine||(i.visualLine=!0);else{var l=i.inputState.operatorArgs;l&&(l.linewise=!0),a.end.line--}}return e.state.vim.visualMode?function(e,t,n){var i,o=e.state.vim.sel,a=o.head,s=o.anchor;return te(n,t)&&(i=n,n=t,t=i),te(a,s)?(a=ne(t,a),s=re(s,n)):(s=ne(t,s),-1==(a=J(a=re(a,n),0,-1)).ch&&a.line!=e.firstLine()&&(a=r(a.line-1,oe(e,a.line-1)))),[s,a]}(e,a.start,a.end):[a.start,a.end]},repeatLastCharacterSearch:function(e,t,n){var r=F.lastCharacterSearch,i=n.repeat,o=n.forward===r.forward,a=(r.increment?1:0)*(o?-1:1);e.moveH(-a,"char"),n.inclusive=!!o;var s=we(e,i,o,r.selectedCharacter);return s?(s.ch+=a,s):(e.moveH(a,"char"),t)}};function K(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n}var U={change:function(t,n,i){var o,a,s=t.state.vim;if(F.macroModeState.lastInsertModeChanges.inVisualBlock=s.visualBlock,s.visualMode){a=t.getSelection();var l=K("",i.length);t.replaceSelections(l),o=ne(i[0].head,i[0].anchor)}else{var c=i[0].anchor,u=i[0].head;a=t.getRange(c,u);var f=s.lastEditInputState||{};if("moveByWords"==f.motion&&!C(a)){var p=/\\s+$/.exec(a);p&&f.motionArgs&&f.motionArgs.forward&&(u=J(u,0,-p[0].length),a=a.slice(0,-p[0].length))}var d=new r(c.line-1,Number.MAX_VALUE),h=t.firstLine()==t.lastLine();u.line>t.lastLine()&&n.linewise&&!h?t.replaceRange("",d,u):t.replaceRange("",c,u),n.linewise&&(h||(t.setCursor(d),e.commands.newlineAndIndent(t)),c.ch=Number.MAX_VALUE),o=c}F.registerController.pushText(n.registerName,"change",a,n.linewise,i.length>1),V.enterInsertMode(t,{head:o},t.state.vim)},delete:function(e,t,n){var i,o,a=e.state.vim;if(a.visualBlock){o=e.getSelection();var s=K("",n.length);e.replaceSelections(s),i=n[0].anchor}else{var l=n[0].anchor,c=n[0].head;t.linewise&&c.line!=e.firstLine()&&l.line==e.lastLine()&&l.line==c.line-1&&(l.line==e.firstLine()?l.ch=0:l=r(l.line-1,oe(e,l.line-1))),o=e.getRange(l,c),e.replaceRange("",l,c),i=l,t.linewise&&(i=$.moveToFirstNonWhiteSpaceCharacter(e,l))}return F.registerController.pushText(t.registerName,"delete",o,t.linewise,a.visualBlock),G(e,i,a.insertMode)},indent:function(e,t,n){var r=e.state.vim,i=n[0].anchor.line,o=r.visualBlock?n[n.length-1].anchor.line:n[0].head.line,a=r.visualMode?t.repeat:1;t.linewise&&o--;for(var s=i;s<=o;s++)for(var l=0;l<a;l++)e.indentLine(s,t.indentRight);return $.moveToFirstNonWhiteSpaceCharacter(e,n[0].anchor)},changeCase:function(e,t,n,r,i){for(var o=e.getSelections(),a=[],s=t.toLower,l=0;l<o.length;l++){var c=o[l],u="";if(!0===s)u=c.toLowerCase();else if(!1===s)u=c.toUpperCase();else for(var f=0;f<c.length;f++){var p=c.charAt(f);u+=_(p)?p.toLowerCase():p.toUpperCase()}a.push(u)}return e.replaceSelections(a),t.shouldMoveCursor?i:!e.state.vim.visualMode&&t.linewise&&n[0].anchor.line+1==n[0].head.line?$.moveToFirstNonWhiteSpaceCharacter(e,r):t.linewise?r:ne(n[0].anchor,n[0].head)},yank:function(e,t,n,r){var i=e.state.vim,o=e.getSelection(),a=i.visualMode?ne(i.sel.anchor,i.sel.head,n[0].head,n[0].anchor):r;return F.registerController.pushText(t.registerName,"yank",o,t.linewise,i.visualBlock),a}};var V={jumpListWalk:function(e,t,n){if(!n.visualMode){var r=t.repeat,i=t.forward,o=F.jumpList.move(e,i?r:-r),a=o?o.find():void 0;a=a||e.getCursor(),e.setCursor(a)}},scroll:function(e,t,n){if(!n.visualMode){var r=t.repeat||1,i=e.defaultTextHeight(),o=e.getScrollInfo().top,a=i*r,s=t.forward?o+a:o-a,l=Z(e.getCursor()),c=e.charCoords(l,"local");if(t.forward)s>c.top?(l.line+=(s-c.top)/i,l.line=Math.ceil(l.line),e.setCursor(l),c=e.charCoords(l,"local"),e.scrollTo(null,c.top)):e.scrollTo(null,s);else{var u=s+e.getScrollInfo().clientHeight;u<c.bottom?(l.line-=(c.bottom-u)/i,l.line=Math.floor(l.line),e.setCursor(l),c=e.charCoords(l,"local"),e.scrollTo(null,c.bottom-e.getScrollInfo().clientHeight)):e.scrollTo(null,s)}}},scrollToCursor:function(e,t){var n=e.getCursor().line,i=e.charCoords(r(n,0),"local"),o=e.getScrollInfo().clientHeight,a=i.top,s=i.bottom-a;switch(t.position){case"center":a=a-o/2+s;break;case"bottom":a=a-o+s}e.scrollTo(null,a)},replayMacro:function(e,t,n){var r=t.selectedCharacter,i=t.repeat,o=F.macroModeState;for("@"==r&&(r=o.latestRegister);i--;)Ve(e,n,o,r)},enterMacroRecordMode:function(e,t){var n=F.macroModeState,r=t.selectedCharacter;F.registerController.isValidRegister(r)&&n.enterMacroRecordMode(e,r)},toggleOverwrite:function(t){t.state.overwrite?(t.toggleOverwrite(!1),t.setOption("keyMap","vim-insert"),e.signal(t,"vim-mode-change",{mode:"insert"})):(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),e.signal(t,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(t,n,i){if(!t.getOption("readOnly")){i.insertMode=!0,i.insertModeRepeat=n&&n.repeat||1;var o=n?n.insertAt:null,a=i.sel,s=n.head||t.getCursor("head"),l=t.listSelections().length;if("eol"==o)s=r(s.line,oe(t,s.line));else if("charAfter"==o)s=J(s,0,1);else if("firstNonBlank"==o)s=$.moveToFirstNonWhiteSpaceCharacter(t,s);else if("startOfSelectedArea"==o)i.visualBlock?(s=r(Math.min(a.head.line,a.anchor.line),Math.min(a.head.ch,a.anchor.ch)),l=Math.abs(a.head.line-a.anchor.line)+1):s=a.head.line<a.anchor.line?a.head:r(a.anchor.line,0);else if("endOfSelectedArea"==o)i.visualBlock?(s=r(Math.min(a.head.line,a.anchor.line),Math.max(a.head.ch+1,a.anchor.ch)),l=Math.abs(a.head.line-a.anchor.line)+1):s=a.head.line>=a.anchor.line?J(a.head,0,1):r(a.anchor.line,0);else if("inplace"==o&&i.visualMode)return;t.setOption("disableInput",!1),n&&n.replace?(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),e.signal(t,"vim-mode-change",{mode:"replace"})):(t.toggleOverwrite(!1),t.setOption("keyMap","vim-insert"),e.signal(t,"vim-mode-change",{mode:"insert"})),F.macroModeState.isPlaying||(t.on("change",Ge),e.on(t.getInputField(),"keydown",Qe)),i.visualMode&&de(t),ce(t,s,l)}},toggleVisualMode:function(t,n,i){var o,a=n.repeat,s=t.getCursor();i.visualMode?i.visualLine^n.linewise||i.visualBlock^n.blockwise?(i.visualLine=!!n.linewise,i.visualBlock=!!n.blockwise,e.signal(t,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""}),fe(t)):de(t):(i.visualMode=!0,i.visualLine=!!n.linewise,i.visualBlock=!!n.blockwise,o=G(t,r(s.line,s.ch+a-1),!0),i.sel={anchor:s,head:o},e.signal(t,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":i.visualBlock?"blockwise":""}),fe(t),ke(t,i,"<",ne(s,o)),ke(t,i,">",re(s,o)))},reselectLastSelection:function(t,n,r){var i=r.lastSelection;if(r.visualMode&&ue(t,r),i){var o=i.anchorMark.find(),a=i.headMark.find();if(!o||!a)return;r.sel={anchor:o,head:a},r.visualMode=!0,r.visualLine=i.visualLine,r.visualBlock=i.visualBlock,fe(t),ke(t,r,"<",ne(o,a)),ke(t,r,">",re(o,a)),e.signal(t,"vim-mode-change",{mode:"visual",subMode:r.visualLine?"linewise":r.visualBlock?"blockwise":""})}},joinLines:function(e,t,n){var i,o;if(n.visualMode){if(i=e.getCursor("anchor"),te(o=e.getCursor("head"),i)){var a=o;o=i,i=a}o.ch=oe(e,o.line)-1}else{var s=Math.max(t.repeat,2);i=e.getCursor(),o=G(e,r(i.line+s-1,1/0))}for(var l=0,c=i.line;c<o.line;c++){l=oe(e,i.line),a=r(i.line+1,oe(e,i.line+1));var u=e.getRange(i,a);u=u.replace(/\\n\\s*/g," "),e.replaceRange(u,i,a)}var f=r(i.line,l);n.visualMode&&de(e,!1),e.setCursor(f)},newLineAndEnterInsertMode:function(t,n,i){i.insertMode=!0;var o=Z(t.getCursor());o.line!==t.firstLine()||n.after?(o.line=n.after?o.line:o.line-1,o.ch=oe(t,o.line),t.setCursor(o),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(t)):(t.replaceRange("\\n",r(t.firstLine(),0)),t.setCursor(t.firstLine(),0)),this.enterInsertMode(t,{repeat:n.repeat},i)},paste:function(e,t,n){var i=Z(e.getCursor()),o=F.registerController.getRegister(t.registerName);if(d=o.toString()){if(t.matchIndent){var a=e.getOption("tabSize"),s=function(e){var t=e.split("\\t").length-1,n=e.split(" ").length-1;return t*a+1*n},l=e.getLine(e.getCursor().line),c=s(l.match(/^\\s*/)[0]),u=d.replace(/\\n$/,""),f=d!==u,p=s(d.match(/^\\s*/)[0]),d=u.replace(/^\\s*/gm,function(t){var n=c+(s(t)-p);if(n<0)return"";if(e.getOption("indentWithTabs")){var r=Math.floor(n/a);return Array(r+1).join("\\t")}return Array(n+1).join(" ")});d+=f?"\\n":""}t.repeat>1&&(d=Array(t.repeat+1).join(d));var h,m,g=o.linewise,v=o.blockwise;if(g)n.visualMode?d=n.visualLine?d.slice(0,-1):"\\n"+d.slice(0,d.length-1)+"\\n":t.after?(d="\\n"+d.slice(0,d.length-1),i.ch=oe(e,i.line)):i.ch=0;else{if(v){d=d.split("\\n");for(var y=0;y<d.length;y++)d[y]=""==d[y]?" ":d[y]}i.ch+=t.after?1:0}if(n.visualMode){var b;n.lastPastedText=d;var x=function(e,t){var n,i,o,a,s,l=t.lastSelection;return t.visualMode?(n=e.listSelections(),i=n[0],o=n[n.length-1],a=te(i.anchor,i.head)?i.anchor:i.head,s=te(o.anchor,o.head)?o.head:o.anchor,[a,s]):function(){var t=e.getCursor(),n=e.getCursor(),i=l.visualBlock;if(i){var o=i.width,a=i.height;n=r(t.line+a,t.ch+o);for(var s=[],c=t.line;c<n.line;c++){var u=r(c,t.ch),f=r(c,n.ch),p={anchor:u,head:f};s.push(p)}e.setSelections(s)}else{var d=l.anchorMark.find(),h=l.headMark.find(),m=h.line-d.line,g=h.ch-d.ch;n={line:n.line+m,ch:m?n.ch:g+n.ch},l.visualLine&&(t=r(t.line,0),n=r(n.line,oe(e,n.line))),e.setSelection(t,n)}return[t,n]}()}(e,n),w=x[0],k=x[1],_=e.getSelection(),C=e.listSelections(),S=new Array(C.length).join("1").split("1");n.lastSelection&&(b=n.lastSelection.headMark.find()),F.registerController.unnamedRegister.setText(_),v?(e.replaceSelections(S),k=r(w.line+d.length-1,w.ch),e.setCursor(w),le(e,k),e.replaceSelections(d),h=w):n.visualBlock?(e.replaceSelections(S),e.setCursor(w),e.replaceRange(d,w,w),h=w):(e.replaceRange(d,w,k),h=e.posFromIndex(e.indexFromPos(w)+d.length-1)),b&&(n.lastSelection.headMark=e.setBookmark(b)),g&&(h.ch=0)}else if(v){for(e.setCursor(i),y=0;y<d.length;y++){var T=i.line+y;T>e.lastLine()&&e.replaceRange("\\n",r(T,0)),oe(e,T)<i.ch&&se(e,T,i.ch)}e.setCursor(i),le(e,r(i.line+d.length-1,i.ch)),e.replaceSelections(d),h=i}else e.replaceRange(d,i),g&&t.after?h=r(i.line+1,he(e.getLine(i.line+1))):g&&!t.after?h=r(i.line,he(e.getLine(i.line))):!g&&t.after?(m=e.indexFromPos(i),h=e.posFromIndex(m+d.length-1)):(m=e.indexFromPos(i),h=e.posFromIndex(m+d.length));n.visualMode&&de(e,!1),e.setCursor(h)}},undo:function(t,n){t.operation(function(){Q(t,e.commands.undo,n.repeat)(),t.setCursor(t.getCursor("anchor"))})},redo:function(t,n){Q(t,e.commands.redo,n.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},setMark:function(e,t,n){ke(e,n,t.selectedCharacter,e.getCursor())},replace:function(t,n,i){var o,a,s=n.selectedCharacter,l=t.getCursor(),c=t.listSelections();if(i.visualMode)l=t.getCursor("start"),a=t.getCursor("end");else{var u=t.getLine(l.line);(o=l.ch+n.repeat)>u.length&&(o=u.length),a=r(l.line,o)}if("\\n"==s)i.visualMode||t.replaceRange("",l,a),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(t);else{var f=t.getRange(l,a);if(f=f.replace(/[^\\n]/g,s),i.visualBlock){var p=new Array(t.getOption("tabSize")+1).join(" ");f=(f=t.getSelection()).replace(/\\t/g,p).replace(/[^\\n]/g,s).split("\\n"),t.replaceSelections(f)}else t.replaceRange(f,l,a);i.visualMode?(l=te(c[0].anchor,c[0].head)?c[0].anchor:c[0].head,t.setCursor(l),de(t,!1)):t.setCursor(J(a,0,-1))}},incrementNumberToken:function(e,t){for(var n,i,o,a,s=e.getCursor(),l=e.getLine(s.line),c=/(-?)(?:(0x)([\\da-f]+)|(0b|0|)(\\d+))/gi;null!==(n=c.exec(l))&&(o=(i=n.index)+n[0].length,!(s.ch<o)););if((t.backtrack||!(o<=s.ch))&&n){var u=n[2]||n[4],f=n[3]||n[5],p=t.increase?1:-1,d={"0b":2,0:8,"":10,"0x":16}[u.toLowerCase()];a=(parseInt(n[1]+f,d)+p*t.repeat).toString(d);var h=u?new Array(f.length-a.length+1+n[1].length).join("0"):"";a="-"===a.charAt(0)?"-"+u+h+a.substr(1):u+h+a;var m=r(s.line,i),g=r(s.line,o);e.replaceRange(a,m,g),e.setCursor(r(s.line,i+a.length-1))}},repeatLastEdit:function(e,t,n){if(n.lastEditInputState){var r=t.repeat;r&&t.repeatIsExplicit?n.lastEditInputState.repeatOverride=r:r=n.lastEditInputState.repeatOverride||r,Ze(e,n,r,!1)}},indent:function(e,t){e.indentLine(e.getCursor().line,t.indentRight)},exitInsertMode:Ke};function G(e,t,n){var i=Math.min(Math.max(e.firstLine(),t.line),e.lastLine()),o=oe(e,i)-1;o=n?o+1:o;var a=Math.min(Math.max(0,t.ch),o);return r(i,a)}function X(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function J(e,t,n){return"object"==typeof t&&(n=t.ch,t=t.line),r(e.line+t,e.ch+n)}function Y(e,t){if("<character>"==t.slice(-11)){var n=t.length-11,r=e.slice(0,n),i=t.slice(0,n);return r==i&&e.length>n?"full":0==i.indexOf(r)&&"partial"}return e==t?"full":0==t.indexOf(e)&&"partial"}function Q(e,t,n){return function(){for(var r=0;r<n;r++)t(e)}}function Z(e){return r(e.line,e.ch)}function ee(e,t){return e.ch==t.ch&&e.line==t.line}function te(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function ne(e,t){return arguments.length>2&&(t=ne.apply(void 0,Array.prototype.slice.call(arguments,1))),te(e,t)?e:t}function re(e,t){return arguments.length>2&&(t=re.apply(void 0,Array.prototype.slice.call(arguments,1))),te(e,t)?t:e}function ie(e,t,n){var r=te(e,t),i=te(t,n);return r&&i}function oe(e,t){return e.getLine(t).length}function ae(e){return e.trim?e.trim():e.replace(/^\\s+|\\s+$/g,"")}function se(e,t,n){var i=oe(e,t),o=new Array(n-i+1).join(" ");e.setCursor(r(t,i)),e.replaceRange(o,e.getCursor())}function le(e,t){var n=[],i=e.listSelections(),o=Z(e.clipPos(t)),a=!ee(t,o),s=function(e,t,n){for(var r=0;r<e.length;r++){var i="head"!=n&&ee(e[r].anchor,t),o="anchor"!=n&&ee(e[r].head,t);if(i||o)return r}return-1}(i,e.getCursor("head")),l=ee(i[s].head,i[s].anchor),c=i.length-1,u=c-s>s?c:0,f=i[u].anchor,p=Math.min(f.line,o.line),d=Math.max(f.line,o.line),h=f.ch,m=o.ch,g=i[u].head.ch-h,v=m-h;g>0&&v<=0?(h++,a||m--):g<0&&v>=0?(h--,l||m++):g<0&&-1==v&&(h--,m++);for(var y=p;y<=d;y++){var b={anchor:new r(y,h),head:new r(y,m)};n.push(b)}return e.setSelections(n),t.ch=m,f.ch=h,f}function ce(e,t,n){for(var r=[],i=0;i<n;i++){var o=J(t,i,0);r.push({anchor:o,head:o})}e.setSelections(r,0)}function ue(e,t){var n=t.sel.anchor,r=t.sel.head;t.lastPastedText&&(r=e.posFromIndex(e.indexFromPos(n)+t.lastPastedText.length),t.lastPastedText=null),t.lastSelection={anchorMark:e.setBookmark(n),headMark:e.setBookmark(r),anchor:Z(n),head:Z(r),visualMode:t.visualMode,visualLine:t.visualLine,visualBlock:t.visualBlock}}function fe(e,t,n){var r=e.state.vim,i=pe(e,t=t||r.sel,n=n||r.visualLine?"line":r.visualBlock?"block":"char");e.setSelections(i.ranges,i.primary),Je(e)}function pe(e,t,n,i){var o=Z(t.head),a=Z(t.anchor);if("char"==n){var s=i||te(t.head,t.anchor)?0:1,l=te(t.head,t.anchor)?1:0;return o=J(t.head,0,s),{ranges:[{anchor:a=J(t.anchor,0,l),head:o}],primary:0}}if("line"==n){if(te(t.head,t.anchor))o.ch=0,a.ch=oe(e,a.line);else{a.ch=0;var c=e.lastLine();o.line>c&&(o.line=c),o.ch=oe(e,o.line)}return{ranges:[{anchor:a,head:o}],primary:0}}if("block"==n){for(var u=Math.min(a.line,o.line),f=Math.min(a.ch,o.ch),p=Math.max(a.line,o.line),d=Math.max(a.ch,o.ch)+1,h=p-u+1,m=o.line==u?0:h-1,g=[],v=0;v<h;v++)g.push({anchor:r(u+v,f),head:r(u+v,d)});return{ranges:g,primary:m}}}function de(t,n){var r=t.state.vim;!1!==n&&t.setCursor(G(t,r.sel.head)),ue(t,r),r.visualMode=!1,r.visualLine=!1,r.visualBlock=!1,e.signal(t,"vim-mode-change",{mode:"normal"}),r.fakeCursor&&r.fakeCursor.clear()}function he(e){if(!e)return 0;var t=e.search(/\\S/);return-1==t?e.length:t}function me(e,t,n,i,o){for(var a=function(e){var t=e.getCursor("head");return 1==e.getSelection().length&&(t=ne(t,e.getCursor("anchor"))),t}(e),s=e.getLine(a.line),l=a.ch,c=o?d[0]:h[0];!c(s.charAt(l));)if(++l>=s.length)return null;i?c=h[0]:(c=d[0])(s.charAt(l))||(c=d[1]);for(var u=l,f=l;c(s.charAt(u))&&u<s.length;)u++;for(;c(s.charAt(f))&&f>=0;)f--;if(f++,t){for(var p=u;/\\s/.test(s.charAt(u))&&u<s.length;)u++;if(p==u){for(var m=f;/\\s/.test(s.charAt(f-1))&&f>0;)f--;f||(f=m)}}return{start:r(a.line,f),end:r(a.line,u)}}function ge(e,t,n){ee(t,n)||F.jumpList.add(e,t,n)}function ve(e,t){F.lastCharacterSearch.increment=e,F.lastCharacterSearch.forward=t.forward,F.lastCharacterSearch.selectedCharacter=t.selectedCharacter}var ye={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},be={bracket:{isComplete:function(e){if(e.nextCh===e.symb){if(e.depth++,e.depth>=1)return!0}else e.nextCh===e.reverseSymb&&e.depth--;return!1}},section:{init:function(e){e.curMoveThrough=!0,e.symb=(e.forward?"]":"[")===e.symb?"{":"}"},isComplete:function(e){return 0===e.index&&e.nextCh===e.symb}},comment:{isComplete:function(e){var t="*"===e.lastCh&&"/"===e.nextCh;return e.lastCh=e.nextCh,t}},method:{init:function(e){e.symb="m"===e.symb?"{":"}",e.reverseSymb="{"===e.symb?"}":"{"},isComplete:function(e){return e.nextCh===e.symb}},preprocess:{init:function(e){e.index=0},isComplete:function(e){if("#"===e.nextCh){var t=e.lineText.match(/#(\\w+)/)[1];if("endif"===t){if(e.forward&&0===e.depth)return!0;e.depth++}else if("if"===t){if(!e.forward&&0===e.depth)return!0;e.depth--}if("else"===t&&0===e.depth)return!0}return!1}}};function xe(e,t,n,r,i){var o=t.line,a=t.ch,s=e.getLine(o),l=n?1:-1,c=r?h:d;if(i&&""==s){if(o+=l,s=e.getLine(o),!w(e,o))return null;a=n?0:s.length}for(;;){if(i&&""==s)return{from:0,to:0,line:o};for(var u=l>0?s.length:-1,f=u,p=u;a!=u;){for(var m=!1,g=0;g<c.length&&!m;++g)if(c[g](s.charAt(a))){for(f=a;a!=u&&c[g](s.charAt(a));)a+=l;if(m=f!=(p=a),f==t.ch&&o==t.line&&p==f+l)continue;return{from:Math.min(f,p+1),to:Math.max(f,p),line:o}}m||(a+=l)}if(!w(e,o+=l))return null;s=e.getLine(o),a=l>0?0:s.length}}function we(e,t,n,i){for(var o,a=e.getCursor(),s=a.ch,l=0;l<t;l++){if(-1==(o=_e(s,e.getLine(a.line),i,n,!0)))return null;s=o}return r(e.getCursor().line,o)}function ke(e,t,n,r){S(n,b)&&(t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(r))}function _e(e,t,n,r,i){var o;return r?-1==(o=t.indexOf(n,e+1))||i||(o-=1):-1==(o=t.lastIndexOf(n,e-1))||i||(o+=1),o}function Ce(e,t,n,i,o){var a,s=t.line,l=e.firstLine(),c=e.lastLine(),u=s;function f(t){return!e.getLine(t)}function p(e,t,n){return n?f(e)!=f(e+t):!f(e)&&f(e+t)}if(i){for(;l<=u&&u<=c&&n>0;)p(u,i)&&n--,u+=i;return new r(u,0)}var d=e.state.vim;if(d.visualLine&&p(s,1,!0)){var h=d.sel.anchor;p(h.line,-1,!0)&&(o&&h.line==s||(s+=1))}var m=f(s);for(u=s;u<=c&&n;u++)p(u,1,!0)&&(o&&f(u)==m||n--);for(a=new r(u,0),u>c&&!m?m=!0:o=!1,u=s;u>l&&(o&&f(u)!=m&&u!=s||!p(u,-1,!0));u--);return{start:new r(u,0),end:a}}function Se(){}function Te(e){var t=e.state.vim;return t.searchState_||(t.searchState_=new Se)}function Ae(e,t,n,r,i){e.openDialog?e.openDialog(t,r,{bottom:!0,value:i.value,onKeyDown:i.onKeyDown,onKeyUp:i.onKeyUp,selectValueOnOpen:!1}):r(prompt(n,""))}function Le(e,t){var n=Me(e,t)||[];if(!n.length)return[];var r=[];if(0===n[0]){for(var i=0;i<n.length;i++)"number"==typeof n[i]&&r.push(e.substring(n[i]+1,n[i+1]));return r}}function Me(e,t){t||(t="/");for(var n=!1,r=[],i=0;i<e.length;i++){var o=e.charAt(i);n||o!=t||r.push(i),n=!n&&"\\\\"==o}return r}A("pcre",!0,"boolean"),Se.prototype={getQuery:function(){return F.query},setQuery:function(e){F.query=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return F.isReversed},setReversed:function(e){F.isReversed=e},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(e){this.annotate=e}};var Fe={"\\\\n":"\\n","\\\\r":"\\r","\\\\t":"\\t"};var Ee={"\\\\/":"/","\\\\\\\\":"\\\\","\\\\n":"\\n","\\\\r":"\\r","\\\\t":"\\t"};function Oe(e,t,n){if(F.registerController.getRegister("/").setText(e),e instanceof RegExp)return e;var r,i,o=Me(e,"/");return o.length?(r=e.substring(0,o[0]),i=-1!=e.substring(o[0]).indexOf("i")):r=e,r?(M("pcre")||(r=function(e){for(var t=!1,n=[],r=-1;r<e.length;r++){var i=e.charAt(r)||"",o=e.charAt(r+1)||"",a=o&&-1!="|(){".indexOf(o);t?("\\\\"===i&&a||n.push(i),t=!1):"\\\\"===i?(t=!0,o&&-1!="}".indexOf(o)&&(a=!0),a&&"\\\\"!==o||n.push(i)):(n.push(i),a&&"\\\\"!==o&&n.push("\\\\"))}return n.join("")}(r)),n&&(t=/^[^A-Z]*$/.test(r)),new RegExp(r,t||i?"i":void 0)):null}function De(e,t){e.openNotification?e.openNotification(\'<span style="color: red">\'+t+"</span>",{bottom:!0,duration:5e3}):alert(t)}var Ne="(Javascript regexp)";function Pe(e,t){var n,r,i,o=(t.prefix||"")+" "+(t.desc||"");Ae(e,(n=t.prefix,r=t.desc,i=\'<span style="font-family: monospace; white-space: pre">\'+(n||"")+\'<input type="text"></span>\',r&&(i+=\' <span style="color: #888">\'+r+"</span>"),i),o,t.onClose,t)}function Re(e,t,n,r){if(t){var i=Te(e),o=Oe(t,!!n,!!r);if(o)return je(e,o),function(e,t){if(e instanceof RegExp&&t instanceof RegExp){for(var n=["global","multiline","ignoreCase","source"],r=0;r<n.length;r++){var i=n[r];if(e[i]!==t[i])return!1}return!0}return!1}(o,i.getQuery())?o:(i.setQuery(o),o)}}function je(e,t){var n=Te(e),r=n.getOverlay();r&&t==r.query||(r&&e.removeOverlay(r),r=function(e){if("^"==e.source.charAt(0))var t=!0;return{token:function(n){if(!t||n.sol()){var r=n.match(e,!1);if(r)return 0==r[0].length?(n.next(),"searching"):n.sol()||(n.backUp(1),e.exec(n.next()+r[0]))?(n.match(e),"searching"):(n.next(),null);for(;!n.eol()&&(n.next(),!n.match(e,!1)););}else n.skipToEnd()},query:e}}(t),e.addOverlay(r),e.showMatchesOnScrollbar&&(n.getScrollbarAnnotate()&&n.getScrollbarAnnotate().clear(),n.setScrollbarAnnotate(e.showMatchesOnScrollbar(t))),n.setOverlay(r))}function Ie(e,t,n,i){return void 0===i&&(i=1),e.operation(function(){for(var o=e.getCursor(),a=e.getSearchCursor(n,o),s=0;s<i;s++){var l=a.find(t);if(0==s&&l&&ee(a.from(),o)&&(l=a.find(t)),!l&&!(a=e.getSearchCursor(n,t?r(e.lastLine()):r(e.firstLine(),0))).find(t))return}return a.from()})}function qe(e){var t=Te(e);e.removeOverlay(Te(e).getOverlay()),t.setOverlay(null),t.getScrollbarAnnotate()&&(t.getScrollbarAnnotate().clear(),t.setScrollbarAnnotate(null))}function Be(e){var t=e.getScrollInfo(),n=e.coordsChar({left:0,top:6+t.top},"local"),r=t.clientHeight-10+t.top,i=e.coordsChar({left:0,top:r},"local");return{top:n.line,bottom:i.line}}function ze(e,t,n){if("\'"==n){var r=e.doc.history.done,i=r[r.length-2];return i&&i.ranges&&i.ranges[0].head}if("."==n){if(0==e.doc.history.lastModTime)return;var o=e.doc.history.done.filter(function(e){if(void 0!==e.changes)return e});return o.reverse(),o[0].changes[0].to}var a=t.marks[n];return a&&a.find()}var He=function(){this.buildCommandMap_()};He.prototype={processCommand:function(e,t,n){var r=this;e.operation(function(){e.curOp.isVimOp=!0,r._processCommand(e,t,n)})},_processCommand:function(t,n,r){var i=t.state.vim,o=F.registerController.getRegister(":"),a=o.toString();i.visualMode&&de(t);var s=new e.StringStream(n);o.setText(n);var l,c,u=r||{};u.input=n;try{this.parseInput_(t,s,u)}catch(e){throw De(t,e),e}if(u.commandName){if(l=this.matchCommand_(u.commandName)){if(c=l.name,l.excludeFromCommandHistory&&o.setText(a),this.parseCommandArgs_(s,u,l),"exToKey"==l.type){for(var f=0;f<l.toKeys.length;f++)e.Vim.handleKey(t,l.toKeys[f],"mapping");return}if("exToEx"==l.type)return void this.processCommand(t,l.toInput)}}else void 0!==u.line&&(c="move");if(c)try{We[c](t,u),l&&l.possiblyAsync||!u.callback||u.callback()}catch(e){throw De(t,e),e}else De(t,\'Not an editor command ":\'+n+\'"\')},parseInput_:function(e,t,n){t.eatWhile(":"),t.eat("%")?(n.line=e.firstLine(),n.lineEnd=e.lastLine()):(n.line=this.parseLineSpec_(e,t),void 0!==n.line&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t)));var r=t.match(/^(\\w+)/);return n.commandName=r?r[1]:t.match(/.*/)[0],n},parseLineSpec_:function(e,t){var n=t.match(/^(\\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return this.parseLineSpecOffset_(t,e.getCursor().line);case"$":return this.parseLineSpecOffset_(t,e.lastLine());case"\'":var r=t.next(),i=ze(e,e.state.vim,r);if(!i)throw new Error("Mark not set");return this.parseLineSpecOffset_(t,i.line);case"-":case"+":return t.backUp(1),this.parseLineSpecOffset_(t,e.getCursor().line);default:return void t.backUp(1)}},parseLineSpecOffset_:function(e,t){var n=e.match(/^([+-])?(\\d+)/);if(n){var r=parseInt(n[2],10);"-"==n[1]?t-=r:t+=r}return t},parseCommandArgs_:function(e,t,n){if(!e.eol()){t.argString=e.match(/.*/)[0];var r=n.argDelimiter||/\\s+/,i=ae(t.argString).split(r);i.length&&i[0]&&(t.args=i)}},matchCommand_:function(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var r=this.commandMap_[n];if(0===r.name.indexOf(e))return r}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<n.length;e++){var t=n[e],r=t.shortName||t.name;this.commandMap_[r]=t}},map:function(e,n,r){if(":"!=e&&":"==e.charAt(0)){if(r)throw Error("Mode not supported for ex mappings");var i=e.substring(1);":"!=n&&":"==n.charAt(0)?this.commandMap_[i]={name:i,type:"exToEx",toInput:n.substring(1),user:!0}:this.commandMap_[i]={name:i,type:"exToKey",toKeys:n,user:!0}}else if(":"!=n&&":"==n.charAt(0)){var o={keys:e,type:"keyToEx",exArgs:{input:n.substring(1)}};r&&(o.context=r),t.unshift(o)}else o={keys:e,type:"keyToKey",toKeys:n},r&&(o.context=r),t.unshift(o)},unmap:function(e,n){if(":"!=e&&":"==e.charAt(0)){if(n)throw Error("Mode not supported for ex mappings");var r=e.substring(1);if(this.commandMap_[r]&&this.commandMap_[r].user)return void delete this.commandMap_[r]}else for(var i=e,o=0;o<t.length;o++)if(i==t[o].keys&&t[o].context===n)return void t.splice(o,1);throw Error("No such mapping.")}};var We={colorscheme:function(e,t){!t.args||t.args.length<1?De(e,e.getOption("theme")):e.setOption("theme",t.args[0])},map:function(e,t,n){var r=t.args;!r||r.length<2?e&&De(e,"Invalid mapping: "+t.input):$e.map(r[0],r[1],n)},imap:function(e,t){this.map(e,t,"insert")},nmap:function(e,t){this.map(e,t,"normal")},vmap:function(e,t){this.map(e,t,"visual")},unmap:function(e,t,n){var r=t.args;!r||r.length<1?e&&De(e,"No such mapping: "+t.input):$e.unmap(r[0],n)},move:function(e,t){W.processCommand(e,e.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:t.line+1})},set:function(e,t){var n=t.args,r=t.setCfg||{};if(!n||n.length<1)e&&De(e,"Invalid mapping: "+t.input);else{var i=n[0].split("="),o=i[0],a=i[1],s=!1;if("?"==o.charAt(o.length-1)){if(a)throw Error("Trailing characters: "+t.argString);o=o.substring(0,o.length-1),s=!0}void 0===a&&"no"==o.substring(0,2)&&(o=o.substring(2),a=!1);var l=T[o]&&"boolean"==T[o].type;if(l&&void 0==a&&(a=!0),!l&&void 0===a||s){var c=M(o,e,r);c instanceof Error?De(e,c.message):De(e,!0===c||!1===c?" "+(c?"":"no")+o:"  "+o+"="+c)}else{var u=L(o,a,e,r);u instanceof Error&&De(e,u.message)}}},setlocal:function(e,t){t.setCfg={scope:"local"},this.set(e,t)},setglobal:function(e,t){t.setCfg={scope:"global"},this.set(e,t)},registers:function(e,t){var n=t.args,r=F.registerController.registers,i="----------Registers----------<br><br>";if(n){n=n.join("");for(var o=0;o<n.length;o++)a=n.charAt(o),F.registerController.isValidRegister(a)&&(i+=\'"\'+a+"    "+(r[a]||new B).toString()+"<br>")}else for(var a in r){var s=r[a].toString();s.length&&(i+=\'"\'+a+"    "+s+"<br>")}De(e,i)},sort:function(t,n){var i,o,a,s,l,c=function(){if(n.argString){var t=new e.StringStream(n.argString);if(t.eat("!")&&(i=!0),t.eol())return;if(!t.eatSpace())return"Invalid arguments";var r=t.match(/([dinuox]+)?\\s*(\\/.+\\/)?\\s*/);if(!r&&!t.eol())return"Invalid arguments";if(r[1]){o=-1!=r[1].indexOf("i"),a=-1!=r[1].indexOf("u");var c=-1!=r[1].indexOf("d")||-1!=r[1].indexOf("n")&&1,u=-1!=r[1].indexOf("x")&&1,f=-1!=r[1].indexOf("o")&&1;if(c+u+f>1)return"Invalid arguments";s=(c?"decimal":u&&"hex")||f&&"octal"}r[2]&&(l=new RegExp(r[2].substr(1,r[2].length-2),o?"i":""))}}();if(c)De(t,c+": "+n.argString);else{var u=n.line||t.firstLine(),f=n.lineEnd||n.line||t.lastLine();if(u!=f){var p=r(u,0),d=r(f,oe(t,f)),h=t.getRange(p,d).split("\\n"),m=l||("decimal"==s?/(-?)([\\d]+)/:"hex"==s?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==s?/([0-7]+)/:null),g="decimal"==s?10:"hex"==s?16:"octal"==s?8:null,v=[],y=[];if(s||l)for(var b=0;b<h.length;b++){var x=l?h[b].match(l):null;x&&""!=x[0]?v.push(x):!l&&m.exec(h[b])?v.push(h[b]):y.push(h[b])}else y=h;if(v.sort(l?function(e,t){var n;return i&&(n=e,e=t,t=n),o&&(e[0]=e[0].toLowerCase(),t[0]=t[0].toLowerCase()),e[0]<t[0]?-1:1}:_),l)for(b=0;b<v.length;b++)v[b]=v[b].input;else s||y.sort(_);if(h=i?v.concat(y):y.concat(v),a){var w,k=h;for(h=[],b=0;b<k.length;b++)k[b]!=w&&h.push(k[b]),w=k[b]}t.replaceRange(h.join("\\n"),p,d)}}function _(e,t){var n;i&&(n=e,e=t,t=n),o&&(e=e.toLowerCase(),t=t.toLowerCase());var r=s&&m.exec(e),a=s&&m.exec(t);return r?(r=parseInt((r[1]+r[2]).toLowerCase(),g))-(a=parseInt((a[1]+a[2]).toLowerCase(),g)):e<t?-1:1}},global:function(e,t){var n=t.argString;if(n){var r,i=void 0!==t.line?t.line:e.firstLine(),o=t.lineEnd||t.line||e.lastLine(),a=function(e){return Le(e,"/")}(n),s=n;if(a.length&&(s=a[0],r=a.slice(1,a.length).join("/")),s)try{Re(e,s,!0,!0)}catch(t){return void De(e,"Invalid regex: "+s)}for(var l=Te(e).getQuery(),c=[],u="",f=i;f<=o;f++)l.test(e.getLine(f))&&(c.push(f+1),u+=e.getLine(f)+"<br>");if(r){var p=0,d=function(){if(p<c.length){var t=c[p]+r;$e.processCommand(e,t,{callback:d})}p++};d()}else De(e,u)}else De(e,"Regular Expression missing from global")},substitute:function(t,n){if(!t.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var i,o,a,s,l=n.argString,c=l?Le(l,l[0]):[],u="",f=!1,d=!1;if(c.length)i=c[0],u=c[1],i&&"$"===i[i.length-1]&&(i=i.slice(0,i.length-1)+"\\\\n",u=u?u+"\\n":"\\n"),void 0!==u&&(u=M("pcre")?function(t){for(var n=new e.StringStream(t),r=[];!n.eol();){for(;n.peek()&&"\\\\"!=n.peek();)r.push(n.next());var i=!1;for(var o in Ee)if(n.match(o,!0)){i=!0,r.push(Ee[o]);break}i||r.push(n.next())}return r.join("")}(u):function(e){for(var t,n=!1,r=[],i=-1;i<e.length;i++){var o=e.charAt(i)||"",a=e.charAt(i+1)||"";Fe[o+a]?(r.push(Fe[o+a]),i++):n?(r.push(o),n=!1):"\\\\"===o?(n=!0,t=a,p.test(t)||"$"===a?r.push("$"):"/"!==a&&"\\\\"!==a&&r.push("\\\\")):("$"===o&&r.push("$"),r.push(o),"/"===a&&r.push("\\\\"))}return r.join("")}(u),F.lastSubstituteReplacePart=u),o=c[2]?c[2].split(" "):[];else if(l&&l.length)return void De(t,"Substitutions should be of the form :s/pattern/replace/");if(o&&(a=o[0],s=parseInt(o[1]),a&&(-1!=a.indexOf("c")&&(f=!0,a.replace("c","")),-1!=a.indexOf("g")&&(d=!0,a.replace("g","")),i=i.replace(/\\//g,"\\\\/")+"/"+a)),i)try{Re(t,i,!0,!0)}catch(e){return void De(t,"Invalid regex: "+i)}if(void 0!==(u=u||F.lastSubstituteReplacePart)){var h=Te(t).getQuery(),m=void 0!==n.line?n.line:t.getCursor().line,g=n.lineEnd||m;m==t.firstLine()&&g==t.lastLine()&&(g=1/0),s&&(g=(m=g)+s-1);var v=G(t,r(m,0));!function(t,n,r,i,o,a,s,l,c){t.state.vim.exMode=!0;var u=!1,f=a.from();function p(){t.operation(function(){for(;!u;)d(),h();m()})}function d(){var e=t.getRange(a.from(),a.to()),n=e.replace(s,l);a.replace(n)}function h(){for(;a.findNext()&&(e=a.from(),n=i,s=o,"number"!=typeof e&&(e=e.line),n instanceof Array?S(e,n):s?e>=n&&e<=s:e==n);)if(r||!f||a.from().line!=f.line)return t.scrollIntoView(a.from(),30),t.setSelection(a.from(),a.to()),f=a.from(),void(u=!1);var e,n,s;u=!0}function m(e){if(e&&e(),t.focus(),f){t.setCursor(f);var n=t.state.vim;n.exMode=!1,n.lastHPos=n.lastHSPos=f.ch}c&&c()}if(h(),!u)return n?void Pe(t,{prefix:"replace with <strong>"+l+"</strong> (y/n/a/q/l)",onKeyDown:function(n,r,i){switch(e.e_stop(n),e.keyName(n)){case"Y":d(),h();break;case"N":h();break;case"A":var o=c;c=void 0,t.operation(p),c=o;break;case"L":d();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":m(i)}return u&&m(i),!0}}):(p(),void(c&&c()));De(t,"No matches for "+s.source)}(t,f,d,m,g,t.getSearchCursor(h,v),h,u,n.callback)}else De(t,"No previous substitute regular expression")},redo:e.commands.redo,undo:e.commands.undo,write:function(t){e.commands.save?e.commands.save(t):t.save&&t.save()},nohlsearch:function(e){qe(e)},yank:function(e){var t=Z(e.getCursor()).line,n=e.getLine(t);F.registerController.pushText("0","yank",n,!0,!0)},delmarks:function(t,n){if(n.argString&&ae(n.argString))for(var r=t.state.vim,i=new e.StringStream(ae(n.argString));!i.eol();){i.eatSpace();var o=i.pos;if(!i.match(/[a-zA-Z]/,!1))return void De(t,"Invalid argument: "+n.argString.substring(o));var a=i.next();if(i.match("-",!0)){if(!i.match(/[a-zA-Z]/,!1))return void De(t,"Invalid argument: "+n.argString.substring(o));var s=a,l=i.next();if(!(k(s)&&k(l)||_(s)&&_(l)))return void De(t,"Invalid argument: "+s+"-");var c=s.charCodeAt(0),u=l.charCodeAt(0);if(c>=u)return void De(t,"Invalid argument: "+n.argString.substring(o));for(var f=0;f<=u-c;f++){var p=String.fromCharCode(c+f);delete r.marks[p]}}else delete r.marks[a]}else De(t,"Argument required")}},$e=new He;function Ke(t){var n=t.state.vim,r=F.macroModeState,i=F.registerController.getRegister("."),o=r.isPlaying,a=r.lastInsertModeChanges,s=[];if(!o){for(var l=a.inVisualBlock&&n.lastSelection?n.lastSelection.visualBlock.height:1,c=a.changes,u=(s=[],0);u<c.length;)s.push(c[u]),c[u]instanceof Ye?u++:u+=l;a.changes=s,t.off("change",Ge),e.off(t.getInputField(),"keydown",Qe)}!o&&n.insertModeRepeat>1&&(Ze(t,n,n.insertModeRepeat-1,!0),n.lastEditInputState.repeatOverride=n.insertModeRepeat),delete n.insertModeRepeat,n.insertMode=!1,t.setCursor(t.getCursor().line,t.getCursor().ch-1),t.setOption("keyMap","vim"),t.setOption("disableInput",!0),t.toggleOverwrite(!1),i.setText(a.changes.join("")),e.signal(t,"vim-mode-change",{mode:"normal"}),r.isRecording&&function(e){if(!e.isPlaying){var t=e.latestRegister,n=F.registerController.getRegister(t);n&&n.pushInsertModeChanges&&n.pushInsertModeChanges(e.lastInsertModeChanges)}}(r)}function Ue(e){t.unshift(e)}function Ve(t,n,r,i){var o=F.registerController.getRegister(i);if(":"==i)return o.keyBuffer[0]&&$e.processCommand(t,o.keyBuffer[0]),void(r.isPlaying=!1);var a=o.keyBuffer,s=0;r.isPlaying=!0,r.replaySearchQueries=o.searchQueries.slice(0);for(var l=0;l<a.length;l++)for(var c,u,f=a[l];f;)if(u=(c=/<\\w+-.+?>|<\\w+>|./.exec(f))[0],f=f.substring(c.index+u.length),e.Vim.handleKey(t,u,"macro"),n.insertMode){var p=o.insertModeChanges[s++].changes;F.macroModeState.lastInsertModeChanges.changes=p,et(t,p,1),Ke(t)}r.isPlaying=!1}function Ge(e,t){var n=F.macroModeState,r=n.lastInsertModeChanges;if(!n.isPlaying)for(;t;){if(r.expectCursorActivityForChange=!0,"+input"==t.origin||"paste"==t.origin||void 0===t.origin){var i=t.text.join("\\n");r.maybeReset&&(r.changes=[],r.maybeReset=!1),e.state.overwrite&&!/\\n/.test(i)?r.changes.push([i]):r.changes.push(i)}t=t.next}}function Xe(t){var n=t.state.vim;if(n.insertMode){var r=F.macroModeState;if(r.isPlaying)return;var i=r.lastInsertModeChanges;i.expectCursorActivityForChange?i.expectCursorActivityForChange=!1:i.maybeReset=!0}else t.curOp.isVimOp||function(t,n){var r=t.getCursor("anchor"),i=t.getCursor("head");if(n.visualMode&&!t.somethingSelected()?de(t,!1):n.visualMode||n.insertMode||!t.somethingSelected()||(n.visualMode=!0,n.visualLine=!1,e.signal(t,"vim-mode-change",{mode:"visual"})),n.visualMode){var o=te(i,r)?0:-1,a=te(i,r)?-1:0;i=J(i,0,o),r=J(r,0,a),n.sel={anchor:r,head:i},ke(t,n,"<",ne(i,r)),ke(t,n,">",re(i,r))}else n.insertMode||(n.lastHPos=t.getCursor().ch)}(t,n);n.visualMode&&Je(t)}function Je(e){var t=e.state.vim,n=G(e,Z(t.sel.head)),r=J(n,0,1);t.fakeCursor&&t.fakeCursor.clear(),t.fakeCursor=e.markText(n,r,{className:"cm-animate-fat-cursor"})}function Ye(e){this.keyName=e}function Qe(t){var n=F.macroModeState.lastInsertModeChanges,r=e.keyName(t);r&&(-1==r.indexOf("Delete")&&-1==r.indexOf("Backspace")||e.lookupKey(r,"vim-insert",function(){return n.maybeReset&&(n.changes=[],n.maybeReset=!1),n.changes.push(new Ye(r)),!0}))}function Ze(e,t,n,r){var i=F.macroModeState;i.isPlaying=!0;var o=!!t.lastEditActionCommand,a=t.inputState;function s(){o?W.processAction(e,t,t.lastEditActionCommand):W.evalInput(e,t)}function l(n){if(i.lastInsertModeChanges.changes.length>0){n=t.lastEditActionCommand?n:1;var r=i.lastInsertModeChanges;et(e,r.changes,n)}}if(t.inputState=t.lastEditInputState,o&&t.lastEditActionCommand.interlaceInsertRepeat)for(var c=0;c<n;c++)s(),l(1);else r||s(),l(n);t.inputState=a,t.insertMode&&!r&&Ke(e),i.isPlaying=!1}function et(t,n,r){function i(n){return"string"==typeof n?e.commands[n](t):n(t),!0}var o=t.getCursor("head"),a=F.macroModeState.lastInsertModeChanges.inVisualBlock;if(a){var s=t.state.vim.lastSelection,l=function(e,t){return{line:t.line-e.line,ch:t.line-e.line}}(s.anchor,s.head);ce(t,o,l.line+1),r=t.listSelections().length,t.setCursor(o)}for(var c=0;c<r;c++){a&&t.setCursor(J(o,c,0));for(var u=0;u<n.length;u++){var f=n[u];if(f instanceof Ye)e.lookupKey(f.keyName,"vim-insert",i);else if("string"==typeof f){var p=t.getCursor();t.replaceRange(f,p,p)}else{var d=t.getCursor(),h=J(d,0,f[0].length);t.replaceRange(f[0],d,h)}}}a&&t.setCursor(J(o,0,1))}return e.keyMap.vim={attach:o,detach:i,call:l},A("insertModeEscKeysTimeout",200,"number"),e.keyMap["vim-insert"]={fallthrough:["default"],attach:o,detach:i,call:l},e.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:o,detach:i,call:l},R(),j}()})(n(0),n(5),n(6),n(7))},function(e,t,n){(function(e){"use strict";e.defineOption("fullScreen",!1,function(t,n,r){r==e.Init&&(r=!1),!r!=!n&&(n?function(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}(t):function(e){var t=e.getWrapperElement();t.className=t.className.replace(/\\s*CodeMirror-fullscreen\\b/,""),document.documentElement.style.overflow="";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}(t))})})(n(0))},function(e,t,n){(function(e){"use strict";e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var t=0;t<e.modeInfo.length;t++){var n=e.modeInfo[t];n.mimes&&(n.mime=n.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.mime==t)return r;if(r.mimes)for(var i=0;i<r.mimes.length;i++)if(r.mimes[i]==t)return r}return/\\+xml$/.test(t)?e.findModeByMIME("application/xml"):/\\+json$/.test(t)?e.findModeByMIME("application/json"):void 0},e.findModeByExtension=function(t){for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.ext)for(var i=0;i<r.ext.length;i++)if(r.ext[i]==t)return r}},e.findModeByFileName=function(t){for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.file&&r.file.test(t))return r}var i=t.lastIndexOf("."),o=i>-1&&t.substring(i+1,t.length);if(o)return e.findModeByExtension(o)},e.findModeByName=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.name.toLowerCase()==t)return r;if(r.alias)for(var i=0;i<r.alias.length;i++)if(r.alias[i].toLowerCase()==t)return r}}})(n(0))},function(e,t,n){(function(e){"use strict";function t(e){for(var t={},n=e.split(" "),r=0;r<n.length;++r)t[n[r]]=!0;return t}function n(e,t,i){return 0==e.length?r(t):function(o,a){for(var s=e[0],l=0;l<s.length;l++)if(o.match(s[l][0]))return a.tokenize=n(e.slice(1),t),s[l][1];return a.tokenize=r(t,i),"string"}}function r(e,t){return function(r,i){return function(e,t,r,i){if(!1!==i&&e.match("${",!1)||e.match("{$",!1))return t.tokenize=null,"string";if(!1!==i&&e.match(/^\\$[a-zA-Z_][a-zA-Z0-9_]*/))return e.match("[",!1)&&(t.tokenize=n([[["[",null]],[[/\\d[\\w\\.]*/,"number"],[/\\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\\w\\$]+/,"variable"]],[["]",null]]],r,i)),e.match(/\\-\\>\\w/,!1)&&(t.tokenize=n([[["->",null]],[[/[\\w]+/,"variable"]]],r,i)),"variable-2";var o=!1;for(;!e.eol()&&(o||!1===i||!e.match("{$",!1)&&!e.match(/^(\\$[a-zA-Z_][a-zA-Z0-9_]*|\\$\\{)/,!1));){if(!o&&e.match(r)){t.tokenize=null,t.tokStack.pop(),t.tokStack.pop();break}o="\\\\"==e.next()&&!o}return"string"}(r,i,e,t)}}var i="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally",o="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",a="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists array_intersect_key array_combine array_column pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count";e.registerHelper("hintWords","php",[i,o,a].join(" ").split(" ")),e.registerHelper("wordChars","php",/[\\w$]/);var s={name:"clike",helperType:"php",keywords:t(i),blockKeywords:t("catch do else elseif for foreach if switch try while finally"),defKeywords:t("class function interface namespace trait"),atoms:t(o),builtin:t(a),multiLineStrings:!0,hooks:{$:function(e){return e.eatWhile(/[\\w\\$_]/),"variable-2"},"<":function(e,t){var n;if(n=e.match(/<<\\s*/)){var i=e.eat(/[\'"]/);e.eatWhile(/[\\w\\.]/);var o=e.current().slice(n[0].length+(i?2:1));if(i&&e.eat(i),o)return(t.tokStack||(t.tokStack=[])).push(o,0),t.tokenize=r(o,"\'"!=i),"string"}return!1},"#":function(e){for(;!e.eol()&&!e.match("?>",!1);)e.next();return"comment"},"/":function(e){if(e.eat("/")){for(;!e.eol()&&!e.match("?>",!1);)e.next();return"comment"}return!1},\'"\':function(e,t){return(t.tokStack||(t.tokStack=[])).push(\'"\',0),t.tokenize=r(\'"\'),"string"},"{":function(e,t){return t.tokStack&&t.tokStack.length&&t.tokStack[t.tokStack.length-1]++,!1},"}":function(e,t){return t.tokStack&&t.tokStack.length>0&&!--t.tokStack[t.tokStack.length-1]&&(t.tokenize=r(t.tokStack[t.tokStack.length-2])),!1}}};e.defineMode("php",function(t,n){var r=e.getMode(t,n&&n.htmlMode||"text/html"),i=e.getMode(t,s);return{startState:function(){var t=e.startState(r),o=n.startOpen?e.startState(i):null;return{html:t,php:o,curMode:n.startOpen?i:r,curState:n.startOpen?o:t,pending:null}},copyState:function(t){var n,o=t.html,a=e.copyState(r,o),s=t.php,l=s&&e.copyState(i,s);return n=t.curMode==r?a:l,{html:a,php:l,curMode:t.curMode,curState:n,pending:t.pending}},token:function(t,n){var o=n.curMode==i;if(t.sol()&&n.pending&&\'"\'!=n.pending&&"\'"!=n.pending&&(n.pending=null),o)return o&&null==n.php.tokenize&&t.match("?>")?(n.curMode=r,n.curState=n.html,n.php.context.prev||(n.php=null),"meta"):i.token(t,n.curState);if(t.match(/^<\\?\\w*/))return n.curMode=i,n.php||(n.php=e.startState(i,r.indent(n.html,""))),n.curState=n.php,"meta";if(\'"\'==n.pending||"\'"==n.pending){for(;!t.eol()&&t.next()!=n.pending;);var a="string"}else n.pending&&t.pos<n.pending.end?(t.pos=n.pending.end,a=n.pending.style):a=r.token(t,n.curState);n.pending&&(n.pending=null);var s,l=t.current(),c=l.search(/<\\?/);return-1!=c&&("string"==a&&(s=l.match(/[\\\'\\"]$/))&&!/\\?>/.test(l)?n.pending=s[0]:n.pending={end:t.pos,style:a},t.backUp(l.length-c)),a},indent:function(e,t){return e.curMode!=i&&/^\\s*<\\//.test(t)||e.curMode==i&&/^\\?>/.test(t)?r.indent(e.html,t):e.curMode.indent(e.curState,t)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(e){return{state:e.curState,mode:e.curMode}}}},"htmlmixed","clike"),e.defineMIME("application/x-httpd-php","php"),e.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),e.defineMIME("text/x-php",s)})(n(0),n(9),n(8))},function(e,t){e.exports=function(e,t){return t(e),e}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Js});var __WEBPACK_IMPORTED_MODULE_0__command__=__webpack_require__(1),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Js=function(_Command){function Js(e,t){_classCallCheck(this,Js);var n=_possibleConstructorReturn(this,(Js.__proto__||Object.getPrototypeOf(Js)).call(this,"js",e,t));return n.par=e,n}return _inherits(Js,_Command),_createClass(Js,[{key:"is",value:function(e){return["js"].includes(e)}},{key:"handle",value:function handle(str){try{var result=eval(str.join(" "));this.echo(result)}catch(e){this.error(e)}}}]),Js}(__WEBPACK_IMPORTED_MODULE_0__command__.a)},function(e,t){}]);'},function(e,t,i){function n(e){return i(r(e))}function r(e){var t=o[e];if(!(t+1))throw Error("Cannot find module '"+e+"'.");return t}var o={"./link.js":30,"./webix.js":12};n.keys=function(){return Object.keys(o)},n.resolve=r,e.exports=n,n.id=29},function(e,t,i){"use strict";(function(t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=i(1);i(3),i(31),i(32);e.exports=function(e,a,s){var l=e.getElement(),h=[],c=function(){t("#"+s).find('a:not(a[target="_blank"],a[data-toggle],a[href^="javascript:"])').each(function(){t(this).on("click",function(){return"#"!=t(this).attr("href")&&void 0!=t(this).attr("href")&&(o.start(),a.href=t(this).attr("href"),g(),!1)})})},u=function(){var e=t("#"+s);e.find("form").each(function(i){t(this).submit(function(){var i=t(this),r=i.attr("action")+"&"+i.serialize();return t(this).ajaxSubmit({url:i.attr("action"),target:"#"+s,beforeSubmit:function(e,t,r){o.start(),n(s,{status:"loading"}),i.find('[type="submit"]').prop("disabled",!0)},beforeSerialize:function(e,t){},success:function(t,n,a,s){i.find('[type="submit"]').prop("disabled",!1),void 0!=t.status?(webix.message({text:t.message,type:t.status?"info":"error",expire:1e4}),w(2),g()):(r=b(r),e.attr("data-state-href",r),h.push(r),v()),o.done()},error:function(e,t,r,a,l){webix.modalbox({title:e.statusText+"! Status: "+e.status,buttons:["Close"],width:"80%",text:""+e.responseJSON.message,callback:function(e){i.find('[type="submit"]').prop("disabled",!1),o.done(),n(s,{status:"done"})}}),n(s,{status:"error",error:e})}}),!1})})},d=function(){t("#"+s).find(".grid-per-pager").on("change",function(e){a.href=t(this).val(),g()})},f=function(){t("#"+s).find(".grid-refresh").on("click",function(e){g({},!0)})},p=function(){t("#"+s).find(".form-history-back").on("click",function(e){w(2),g()})},m=function(){t("#"+s).find(".grid-row-delete, .tree_branch_delete").on("click",function(e){var i=t(this);return webix.confirm({title:"Delete",text:"Are you sure to delete this item?",type:"confirm-warning",callback:function(e){e&&(o.start(),t.ajax({url:i.data("delete-uri"),type:"delete",data:{_token:LA.token},success:function(e){"object"===(void 0===e?"undefined":r(e))&&webix.message({text:e.message,type:e.status?"info":"error",expire:1e4}),o.done(),g({},!0)}}))}}),!1})},g=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o.start(),n(s,{status:"loading"}),b(),l.attr("data-state-href",a.href),c||h.push(a.href),t.get(a.href,r,function(t){l.html(t).slimScroll({height:e.height,color:"#fff"}),v()}).fail(function(t){i(11)(e,a,t),n(s,{status:"error",error:t})}).always(function(){o.done()})},v=function(){b(),c(),u(),d(),f(),m(),p(),n(s,{status:"done"})},b=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a.href=a.href.replace(window.location.origin,""),e)return e.replace(window.location.origin,"")},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;void 0==h[h.length-e]&&(e-=1),a.href=h[h.length-e]};g();var x=function(){"reload"==n(s).status&&g({},!0)},y=setInterval(x,100);e.on("open",function(){}),e.on("resize",function(){l&&l.slimScroll({height:e.height,color:"#fff"})}),e.on("destroy",function(){h=[],clearInterval(y)})}}).call(t,i(0),i(2))},function(e,t,i){var n,r,o;/*!
 * jQuery Form Plugin
 * version: 4.2.2
 * Requires jQuery v1.7.2 or later
 * Project repository: https://github.com/jquery-form/form

 * Copyright 2017 Kevin Morris
 * Copyright 2006 M. Alsup

 * Dual licensed under the LGPL-2.1+ or MIT licenses
 * https://github.com/jquery-form/form#license

 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 */
!function(a){r=[i(0)],n=a,void 0!==(o="function"==typeof n?n.apply(t,r):n)&&(e.exports=o)}(function(e){"use strict";function t(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).closest("form").ajaxSubmit(i))}function i(t){var i=t.target,n=e(i);if(!n.is("[type=submit],[type=image]")){var r=n.closest("[type=submit]");if(0===r.length)return;i=r[0]}var o=i.form;if(o.clk=i,"image"===i.type)if(void 0!==t.offsetX)o.clk_x=t.offsetX,o.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var a=n.offset();o.clk_x=t.pageX-a.left,o.clk_y=t.pageY-a.top}else o.clk_x=t.pageX-i.offsetLeft,o.clk_y=t.pageY-i.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function n(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var r=/\r?\n/g,o={};o.fileapi=void 0!==e('<input type="file">').get(0).files,o.formdata=void 0!==window.FormData;var a=!!e.fn.prop;e.fn.attr2=function(){if(!a)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t,i,r,s){function l(i){var n,r,o=e.param(i,t.traditional).split("&"),a=o.length,s=[];for(n=0;n<a;n++)o[n]=o[n].replace(/\+/g," "),r=o[n].split("="),s.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return s}function h(i){function r(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){n("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(i){n("cannot get iframe.contentDocument: "+i),t=e.document}return t}function o(){function t(){try{var e=r(g).readyState;n("state = "+e),e&&"uninitialized"===e.toLowerCase()&&setTimeout(t,50)}catch(e){n("Server abort: ",e," (",e.name,")"),s(E),_&&clearTimeout(_),_=void 0}}var i=f.attr2("target"),o=f.attr2("action"),a=f.attr("enctype")||f.attr("encoding")||"multipart/form-data";k.setAttribute("target",p),c&&!/post/i.test(c)||k.setAttribute("method","POST"),o!==u.url&&k.setAttribute("action",u.url),u.skipEncodingOverride||c&&!/post/i.test(c)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(_=setTimeout(function(){y=!0,s(T)},u.timeout));var l=[];try{if(u.extraData)for(var h in u.extraData)u.extraData.hasOwnProperty(h)&&(e.isPlainObject(u.extraData[h])&&u.extraData[h].hasOwnProperty("name")&&u.extraData[h].hasOwnProperty("value")?l.push(e('<input type="hidden" name="'+u.extraData[h].name+'">',S).val(u.extraData[h].value).appendTo(k)[0]):l.push(e('<input type="hidden" name="'+h+'">',S).val(u.extraData[h]).appendTo(k)[0]));u.iframeTarget||m.appendTo($),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout(t,15);try{k.submit()}catch(e){document.createElement("form").submit.apply(k)}}finally{k.setAttribute("action",o),k.setAttribute("enctype",a),i?k.setAttribute("target",i):f.removeAttr("target"),e(l).remove()}}function s(t){if(!b.aborted&&!N){if((D=r(g))||(n("cannot access response document"),t=E),t===T&&b)return b.abort("timeout"),void C.reject(b,"timeout");if(t===E&&b)return b.abort("server abort"),void C.reject(b,"error","server abort");if(D&&D.location.href!==u.iframeSrc||y){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var i,o="success";try{if(y)throw"timeout";var a="xml"===u.dataType||D.XMLDocument||e.isXMLDoc(D);if(n("isXml="+a),!a&&window.opera&&(null===D.body||!D.body.innerHTML)&&--L)return n("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var l=D.body?D.body:D.documentElement;b.responseText=l?l.innerHTML:null,b.responseXML=D.XMLDocument?D.XMLDocument:D,a&&(u.dataType="xml"),b.getResponseHeader=function(e){return{"content-type":u.dataType}[e.toLowerCase()]},l&&(b.status=+l.getAttribute("status")||b.status,b.statusText=l.getAttribute("statusText")||b.statusText);var h=(u.dataType||"").toLowerCase(),c=/(json|script|text)/.test(h);if(c||u.textarea){var f=D.getElementsByTagName("textarea")[0];if(f)b.responseText=f.value,b.status=+f.getAttribute("status")||b.status,b.statusText=f.getAttribute("statusText")||b.statusText;else if(c){var p=D.getElementsByTagName("pre")[0],v=D.getElementsByTagName("body")[0];p?b.responseText=p.textContent?p.textContent:p.innerText:v&&(b.responseText=v.textContent?v.textContent:v.innerText)}}else"xml"===h&&!b.responseXML&&b.responseText&&(b.responseXML=F(b.responseText));try{A=j(b,h,u)}catch(e){o="parsererror",b.error=i=e||o}}catch(e){n("error caught: ",e),o="error",b.error=i=e||o}b.aborted&&(n("upload aborted"),o=null),b.status&&(o=b.status>=200&&b.status<300||304===b.status?"success":"error"),"success"===o?(u.success&&u.success.call(u.context,A,"success",b),C.resolve(b.responseText,"success",b),d&&e.event.trigger("ajaxSuccess",[b,u])):o&&(void 0===i&&(i=b.statusText),u.error&&u.error.call(u.context,b,o,i),C.reject(b,"error",i),d&&e.event.trigger("ajaxError",[b,u,i])),d&&e.event.trigger("ajaxComplete",[b,u]),d&&!--e.active&&e.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,b,o),N=!0,u.timeout&&clearTimeout(_),setTimeout(function(){u.iframeTarget?m.attr("src",u.iframeSrc):m.remove(),b.responseXML=null},100)}}}var l,h,u,d,p,m,g,b,w,x,y,_,k=f[0],C=e.Deferred();if(C.abort=function(e){b.abort(e)},i)for(h=0;h<v.length;h++)l=e(v[h]),a?l.prop("disabled",!1):l.removeAttr("disabled");(u=e.extend(!0,{},e.ajaxSettings,t)).context=u.context||u,p="jqFormIO"+(new Date).getTime();var S=k.ownerDocument,$=f.closest("body");if(u.iframeTarget?(x=(m=e(u.iframeTarget,S)).attr2("name"))?p=x:m.attr2("name",p):(m=e('<iframe name="'+p+'" src="'+u.iframeSrc+'" />',S)).css({position:"absolute",top:"-1000px",left:"-1000px"}),g=m[0],b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i="timeout"===t?"timeout":"aborted";n("aborting upload... "+i),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(e){}m.attr("src",u.iframeSrc),b.error=i,u.error&&u.error.call(u.context,b,i,t),d&&e.event.trigger("ajaxError",[b,u,i]),u.complete&&u.complete.call(u.context,b,i)}},(d=u.global)&&0==e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[b,u]),u.beforeSend&&!1===u.beforeSend.call(u.context,b,u))return u.global&&e.active--,C.reject(),C;if(b.aborted)return C.reject(),C;(w=k.clk)&&(x=w.name)&&!w.disabled&&(u.extraData=u.extraData||{},u.extraData[x]=w.value,"image"===w.type&&(u.extraData[x+".x"]=k.clk_x,u.extraData[x+".y"]=k.clk_y));var T=1,E=2,M=e("meta[name=csrf-token]").attr("content"),I=e("meta[name=csrf-param]").attr("content");I&&M&&(u.extraData=u.extraData||{},u.extraData[I]=M),u.forceSync?o():setTimeout(o,10);var A,D,N,L=50,F=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!==t.documentElement.nodeName?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},j=function(t,i,n){var r=t.getResponseHeader("content-type")||"",o=("xml"===i||!i)&&r.indexOf("xml")>=0,a=o?t.responseXML:t.responseText;return o&&"parsererror"===a.documentElement.nodeName&&e.error&&e.error("parsererror"),n&&n.dataFilter&&(a=n.dataFilter(a,i)),"string"==typeof a&&(("json"===i||!i)&&r.indexOf("json")>=0?a=P(a):("script"===i||!i)&&r.indexOf("javascript")>=0&&e.globalEval(a)),a};return C}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var c,u,d,f=this;"function"==typeof t?t={success:t}:"string"==typeof t||!1===t&&arguments.length>0?(t={url:t,data:i,dataType:r},"function"==typeof s&&(t.success=s)):void 0===t&&(t={}),c=t.method||t.type||this.attr2("method"),(d=(d="string"==typeof(u=t.url||this.attr2("action"))?e.trim(u):"")||window.location.href||"")&&(d=(d.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:d,success:e.ajaxSettings.success,type:c||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var p={};if(this.trigger("form-pre-serialize",[this,t,p]),p.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&!1===t.beforeSerialize(this,t))return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var m=t.traditional;void 0===m&&(m=e.ajaxSettings.traditional);var g,v=[],b=this.formToArray(t.semantic,v,t.filtering);if(t.data){var w=e.isFunction(t.data)?t.data(b):t.data;t.extraData=w,g=e.param(w,m)}if(t.beforeSubmit&&!1===t.beforeSubmit(b,this,t))return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[b,this,t,p]),p.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var x=e.param(b,m);g&&(x=x?x+"&"+g:g),"GET"===t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+x,t.data=null):t.data=x;var y=[];if(t.resetForm&&y.push(function(){f.resetForm()}),t.clearForm&&y.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var _=t.success||function(){};y.push(function(i,n,r){var o=arguments,a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](i).each(function(){_.apply(this,o)})})}else t.success&&(e.isArray(t.success)?e.merge(y,t.success):y.push(t.success));if(t.success=function(e,i,n){for(var r=t.context||this,o=0,a=y.length;o<a;o++)y[o].apply(r,[e,i,n||f,f])},t.error){var k=t.error;t.error=function(e,i,n){var r=t.context||this;k.apply(r,[e,i,n,f])}}if(t.complete){var C=t.complete;t.complete=function(e,i){var n=t.context||this;C.apply(n,[e,i,f])}}var S=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}).length>0,$="multipart/form-data",T=f.attr("enctype")===$||f.attr("encoding")===$,E=o.fileapi&&o.formdata;n("fileAPI :"+E);var M,I=(S||T)&&!E;!1!==t.iframe&&(t.iframe||I)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){M=h(b)}):M=h(b):M=(S||T)&&E?function(i){for(var n=new FormData,r=0;r<i.length;r++)n.append(i[r].name,i[r].value);if(t.extraData){var o=l(t.extraData);for(r=0;r<o.length;r++)o[r]&&n.append(o[r][0],o[r][1])}t.data=null;var a=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:c||"POST"});t.uploadProgress&&(a.xhr=function(){var i=e.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(e){var i=0,n=e.loaded||e.position,r=e.total;e.lengthComputable&&(i=Math.ceil(n/r*100)),t.uploadProgress(e,n,r,i)},!1),i}),a.data=null;var s=a.beforeSend;return a.beforeSend=function(e,i){t.formData?i.data=t.formData:i.data=n,s&&s.call(this,e,i)},e.ajax(a)}(b):e.ajax(t),f.removeData("jqxhr").data("jqxhr",M);for(var A=0;A<v.length;A++)v[A]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(r,o,a,s){if(("string"==typeof r||!1===r&&arguments.length>0)&&(r={url:r,data:o,dataType:a},"function"==typeof s&&(r.success=s)),r=r||{},r.delegation=r.delegation&&e.isFunction(e.fn.on),!r.delegation&&0===this.length){var l={s:this.selector,c:this.context};return!e.isReady&&l.s?(n("DOM not ready, queuing ajaxForm"),e(function(){e(l.s,l.c).ajaxForm(r)}),this):(n("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return r.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,r,t).on("click.form-plugin",this.selector,r,i),this):this.ajaxFormUnbind().on("submit.form-plugin",r,t).on("click.form-plugin",r,i)},e.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,i,n){var r=[];if(0===this.length)return r;var a,s=this[0],l=this.attr("id"),h=t||void 0===s.elements?s.getElementsByTagName("*"):s.elements;if(h&&(h=e.makeArray(h)),l&&(t||/(Edge|Trident)\//.test(navigator.userAgent))&&(a=e(':input[form="'+l+'"]').get()).length&&(h=(h||[]).concat(a)),!h||!h.length)return r;e.isFunction(n)&&(h=e.map(h,n));var c,u,d,f,p,m,g;for(c=0,m=h.length;c<m;c++)if(p=h[c],(d=p.name)&&!p.disabled)if(t&&s.clk&&"image"===p.type)s.clk===p&&(r.push({name:d,value:e(p).val(),type:p.type}),r.push({name:d+".x",value:s.clk_x},{name:d+".y",value:s.clk_y}));else if((f=e.fieldValue(p,!0))&&f.constructor===Array)for(i&&i.push(p),u=0,g=f.length;u<g;u++)r.push({name:d,value:f[u]});else if(o.fileapi&&"file"===p.type){i&&i.push(p);var v=p.files;if(v.length)for(u=0;u<v.length;u++)r.push({name:d,value:v[u],type:p.type});else r.push({name:d,value:"",type:p.type})}else null!==f&&void 0!==f&&(i&&i.push(p),r.push({name:d,value:f,type:p.type,required:p.required}));if(!t&&s.clk){var b=e(s.clk),w=b[0];(d=w.name)&&!w.disabled&&"image"===w.type&&(r.push({name:d,value:b.val()}),r.push({name:d+".x",value:s.clk_x},{name:d+".y",value:s.clk_y}))}return r},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var n=this.name;if(n){var r=e.fieldValue(this,t);if(r&&r.constructor===Array)for(var o=0,a=r.length;o<a;o++)i.push({name:n,value:r[o]});else null!==r&&void 0!==r&&i.push({name:this.name,value:r})}}),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],n=0,r=this.length;n<r;n++){var o=this[n],a=e.fieldValue(o,t);null===a||void 0===a||a.constructor===Array&&!a.length||(a.constructor===Array?e.merge(i,a):i.push(a))}return i},e.fieldValue=function(t,i){var n=t.name,o=t.type,a=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||t.disabled||"reset"===o||"button"===o||("checkbox"===o||"radio"===o)&&!t.checked||("submit"===o||"image"===o)&&t.form&&t.form.clk!==t||"select"===a&&-1===t.selectedIndex))return null;if("select"===a){var s=t.selectedIndex;if(s<0)return null;for(var l=[],h=t.options,c="select-one"===o,u=c?s+1:h.length,d=c?s:0;d<u;d++){var f=h[d];if(f.selected&&!f.disabled){var p=f.value;if(p||(p=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),c)return p;l.push(p)}}return l}return e(t).val().replace(r,"\r\n")},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,r=this.tagName.toLowerCase();i.test(n)||"textarea"===r?this.value="":"checkbox"===n||"radio"===n?this.checked=!1:"select"===r?this.selectedIndex=-1:"file"===n?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(n)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){var t=e(this),i=this.tagName.toLowerCase();switch(i){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var n=t.parents("select");return n.length&&n[0].multiple?"option"===i?this.selected=this.defaultSelected:t.find("option").resetForm():n.resetForm(),!0;case"select":return t.find("option").each(function(e){if(this.selected=this.defaultSelected,this.defaultSelected&&!t[0].multiple)return t[0].selectedIndex=e,!1}),!0;case"label":var r=e(t.attr("for")),o=t.find("input,select,textarea");return r[0]&&o.unshift(r[0]),o.resetForm(),!0;case"form":return("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset(),!0;default:return t.find("form,input,label,select,textarea").resetForm(),!0}})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var i=this.type;if("checkbox"===i||"radio"===i)this.checked=t;else if("option"===this.tagName.toLowerCase()){var n=e(this).parent("select");t&&n[0]&&"select-one"===n[0].type&&n.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1})},function(e,t,i){var n,r;!function(o){var a=!1;if(n=o,void 0!==(r="function"==typeof n?n.call(t,i,t,e):n)&&(e.exports=r),a=!0,e.exports=o(),a=!0,!a){var s=window.Cookies,l=window.Cookies=o();l.noConflict=function(){return window.Cookies=s,l}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function t(i){function n(t,r,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if(o=e({path:"/"},n.defaults,o),"number"==typeof o.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}o.expires=o.expires?o.expires.toUTCString():"";try{a=JSON.stringify(r),/^[\{\[]/.test(a)&&(r=a)}catch(e){}r=i.write?i.write(r,t):encodeURIComponent(r+"").replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(t+""),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var l="";for(var h in o)o[h]&&(l+="; "+h,!0!==o[h]&&(l+="="+o[h]));return document.cookie=t+"="+r+l}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var f=c[d].split("="),p=f.slice(1).join("=");this.json||'"'!==p.charAt(0)||(p=p.slice(1,-1));try{var m=f[0].replace(u,decodeURIComponent);if(p=i.read?i.read(p,m):i(p,m)||p.replace(u,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===m){a=p;break}t||(a[m]=p)}catch(e){}}return a}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,i){n(t,"",e(i,{expires:-1}))},n.withConverter=t,n}return t(function(){})})},function(e,t,i){"use strict";e.exports=function(e,t){return function(i){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i=i.replace(/[^_0-9a-zA-Z]/gim,""),n?i+"_"+e+"_"+t:i+"["+e+"]["+t+"]"}}},function(e,t,i){function n(e){return i(r(e))}function r(e){var t=o[e];if(!(t+1))throw Error("Cannot find module '"+e+"'.");return t}var o={"./administrators.js":35,"./elements/miniEditor.js":13,"./elements/result.js":6,"./error.js":11,"./exception_reporter.js":36,"./file.js":37,"./ide.js":38,"./language.js":39,"./log_viewer.js":40,"./menu.js":41,"./modals/terminal.js":10,"./modules.js":42,"./modules_ide.js":43,"./operation_log.js":45,"./roles.js":46,"./rout_list.js":47,"./scaffold.js":48,"./scheduling.js":49,"./undefined.js":14};n.keys=function(){return Object.keys(o)},n.resolve=r,e.exports=n,n.id=34},function(e,t,i){"use strict";(function(t){e.exports=function(e){var i=function(){$$(e("roleTable")).clearAll();var t={name:"admin"};""!=$$(e("administrators_sort_username")).getValue()&&(t.username=$$(e("administrators_sort_username")).getValue()),""!=$$(e("administrators_sort_name")).getValue()&&(t.na=$$(e("administrators_sort_name")).getValue()),""!=$$(e("administrators_sort_created_at")).getText()&&(t.created_at=$$(e("administrators_sort_created_at")).getText()),""!=$$(e("administrators_sort_updated_at")).getText()&&(t.updated_at=$$(e("administrators_sort_updated_at")).getText()),$$(e("roleTable")).load(Route("remote.get",t))},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(webix.ui({view:"window",id:"roleModalForm",head:(e?"Edit "+e.name:"New Admin")+"<img style='width: 50px;margin-right: 0;' id='topUserImg' class='minimazedModalMenu' />",position:"center",resize:!0,move:!0,modal:!0,width:t("#layoutContainer").width()/1.5,height:t("#layoutContainer").height()/1,body:{rows:[{view:"form",id:"roleForm",elements:[{view:"text",name:"username",placeholder:"Username",label:"Username",align:"center"},{view:"text",name:"name",placeholder:"Name",label:"Name",align:"center"},{view:"text",type:"password",name:"password",placeholder:"Password",label:"Password",align:"center"},{view:"text",type:"password",name:"re_password",placeholder:"Re password",label:"Re password",align:"center"},{view:"forminput",name:"permissions",labelWidth:0,body:{view:"dbllist",labelBottomLeft:"Premission",labelBottomRight:"Selected",url:Route("remote.get",{name:"premission",list:!0})}},{view:"forminput",name:"roles",labelWidth:0,body:{view:"dbllist",labelBottomLeft:"Roles",labelBottomRight:"Selected",url:Route("remote.get",{name:"role",list:!0})}},{view:"uploader",id:"uplBtn",value:"Upload Avatar",name:"files",accept:"image/png, image/gif, image/jpg",upload:Route("remote.insert",{name:"admin"}),on:{onUploadComplete:function(e){t("#topUserImg").attr("src","/uploads/"+e.sname);var i=$$("roleForm").getValues();return i.avatar=e.sname,$$("roleForm").setValues(i),!1}}}],rules:{name:webix.rules.isNotEmpty,username:webix.rules.isNotEmpty}},{view:"toolbar",id:"administrators_mybar",align:"center",elements:[{view:"button",value:e?"Update":"Create",click:function(){if(!$$("roleForm").validate())return webix.message({type:"error",text:"Form data is invalid"});var t=$$("roleForm").getValues();if(t.password!=t.re_password)return webix.message({type:"error",text:"Passwords do not match!"});webix.ajax().post(Remote("admin",e?"update":"insert"),t,function(){$$("roleModalForm").close(),i()})}},{view:"button",value:"Close",click:"$$('roleModalForm').close();"}]}]}}).show(),e){t("#topUserImg").attr("src",e.avatar);var n=e;delete n.avatar,$$("roleForm").setValues(n)}else t("#topUserImg").attr("src","")};return{rows:[{view:"toolbar",id:e("administrators_controlBar"),align:"center",elements:[{view:"button",type:"iconButton",label:"New user",icon:"plus",click:function(){n()}},{view:"button",type:"iconButton",label:"Reload table",icon:"repeat",click:function(){i()}},{view:"button",type:"iconButton",label:"Select all",icon:"list",click:function(){$$(e("roleTable")).selectAll()}},{view:"button",type:"iconButton",label:"Unselect all",icon:"list",click:function(){$$(e("roleTable")).unselectAll()}},{view:"button",type:"iconButton",label:"Remove selected",icon:"trash",click:function(){var t=$$(e("roleTable")).getSelectedId(!0,!0);webix.confirm({title:"Close",text:"Delete "+t.length+" items?",type:"confirm-error",callback:function(e){webix.ajax().del(Remote("admin","delete"),{ids:t},function(){i()})}})}}]},{view:"toolbar",id:e("administrators_filter"),align:"center",elements:[{view:"text",id:e("administrators_sort_username"),fillspace:!0,placeholder:"Username",align:"center",on:{onChange:function(){i()}}},{view:"text",id:e("administrators_sort_name"),fillspace:!0,placeholder:"Name",align:"center",on:{onChange:function(){i()}}},{view:"datepicker",id:e("administrators_sort_created_at"),placeholder:"Created at",format:"%Y-%m-%d",editable:!0,fillspace:!0,on:{onChange:function(){i()}}},{view:"datepicker",id:e("administrators_sort_updated_at"),placeholder:"Updated at",format:"%Y-%m-%d",editable:!0,fillspace:!0,on:{onChange:function(){i()}}},{view:"button",type:"iconButton",label:"Clear",icon:"close",click:function(){$$(e("administrators_sort_name")).setValue(""),$$(e("administrators_sort_username")).setValue(""),$$(e("administrators_sort_created_at")).setValue(""),$$(e("administrators_sort_updated_at")).setValue(""),i()}}]},{view:"datatable",select:!0,multiselect:!0,id:e("roleTable"),rowHeight:80,columns:[{id:"id",header:"ID"},{id:"avatar",header:"Avatar",template:"<center><img src='#avatar#' width='50px' /></center>",width:80,height:80},{id:"username",header:"Username",fillspace:!0},{id:"name",header:"Name",fillspace:!0},{id:"created_at",header:"Created at",fillspace:!0},{id:"updated_at",header:"Updated at",fillspace:!0}],type:{template:"{common.space()}"},url:Remote("admin"),on:{onItemDblClick:function(e){var t=this.getItem(e.row);n(t)}}}]}}}).call(t,i(0))},function(e,t,i){"use strict";(function(t){e.exports=function(e){var i=function(){$$(e("exceptionsTable")).clearAll();var t={name:"exception"};"all"!=$$(e("exception_reporter_sort_method")).getValue()&&(t.met=$$(e("exception_reporter_sort_method")).getValue()),""!=$$(e("exception_reporter_sort_code")).getValue()&&(t.code=$$(e("exception_reporter_sort_code")).getValue()),""!=$$(e("exception_reporter_sort_type")).getValue()&&(t.type=$$(e("exception_reporter_sort_type")).getValue()),""!=$$(e("exception_reporter_sort_message")).getValue()&&(t.message=$$(e("exception_reporter_sort_message")).getValue()),""!=$$(e("exception_reporter_sort_path")).getValue()&&(t.path=$$(e("exception_reporter_sort_path")).getValue()),""!=$$(e("exception_reporter_sort_query")).getValue()&&(t.que=$$(e("exception_reporter_sort_query")).getValue()),""!=$$(e("exception_reporter_sort_created_at")).getText()&&(t.created_at=$$(e("exception_reporter_sort_created_at")).getText()),$$(e("exceptionsTable")).load(Route("remote.get",t))},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;webix.ui({view:"window",id:"modalForm",head:"Exception detail",position:"center",resize:!0,move:!0,modal:!0,width:t("#layoutContainer").width()/1.5,height:t("#layoutContainer").height()/1,body:{rows:[{view:"segmented",id:"tabbar",value:"listRequest",multiview:!0,options:[{value:'<i class="fa fa-paper-plane"></i> Request',id:"listRequest"},{value:'<i class="fa fa-server"></i> Headers',id:"listHeaders"},{value:'<i class="fa fa-database"></i> Cookies',id:"listCookies",selected:!0},{value:'<i class="fa fa-file-code-o"></i> Exception Trace',id:"listTrace"}]},{id:"mymultiview",cells:[{id:"listRequest",template:"request",scroll:"y"},{id:"listHeaders",template:"headers",scroll:"y"},{id:"listCookies",template:"cookies",scroll:"y"},{id:"listTrace",rows:[{id:"traceInfo",template:"trace",height:130,scroll:"y"},{view:"resizer"},{view:"list",select:!0,data:e.trace,on:{onItemDblClick:function(e){webix.alert({title:"Trace info",ok:"Close",width:5*e.length,text:e})}}}]}]},{view:"toolbar",id:"mybar",align:"center",elements:[{view:"button",value:"Close",click:"$$('modalForm').close();",hotkey:"esc"}]}]}}).show();var i=JSON.parse(e.cookies),n='<table class="table table-condensed"><tr><th>Name</th><th>Value</th></tr>';t.each(i,function(e,t){n+="<tr><td><strong>"+e+": </strong></td><td>"+t+"</td></tr>"}),n+="</table>",$$("listCookies").setHTML(n);var r=JSON.parse(e.headers),o='<table class="table table-condensed"><tr><th>Name</th><th>Value</th></tr>';t.each(r,function(e,t){o+="<tr><td><strong>"+e+": </strong></td><td>"+t[0]+"</td></tr>"}),o+="</table>",$$("listHeaders").setHTML(o);var a='<table class="table table-condensed"><tr><th>Name</th><th>Value</th></tr>';a+="<tr><td><strong>Method: </strong></td><td>"+e.method+"</td></tr>",a+='<tr><td><strong>Url: </strong></td><td><a href="#" id="findPath">'+e.path+' <i class="fa fa-search-plus"></i></a></td></tr>';var s=JSON.parse(e.query);if(e.query.length>2){var l='<table class="table table-condensed"><tr><th>Name</th><th>Value</th></tr>';t.each(s,function(e,t){l+="<tr><td><strong>"+e+": </strong></td><td>"+t+"</td></tr>"}),l+="</table>"}else var l="<em>Empty</em>";a+="<tr><td><strong>Query: </strong></td><td>"+l+"</td></tr>",a+="<tr><td><strong>Time: </strong></td><td>"+e.created_at+"</td></tr>",a+='<tr><td><strong>IP: </strong></td><td><a href="#" id="findIp">'+e.ip+' <i class="fa fa-search-plus"></i></a></td></tr>',a+="</table>",$$("listRequest").setHTML(a);var h='<table class="table table-condensed">';h+="<tr><td><strong>Code: </strong></td><td>"+e.code+"</td></tr>",h+="<tr><td><strong>Exception: </strong></td><td>"+e.type+"</td></tr>",h+="<tr><td><strong>Message: </strong></td><td>"+e.message+"</td></tr>",h+="</table>",$$("traceInfo").setHTML(h),t("#findPath").on("click",function(){return runers.operation_log(function(t){$$(t("operation_log_sort_path")).setValue(e.path)}),$$("modalForm").close(),!1}),t("#findIp").on("click",function(){return runers.operation_log(function(t){$$(t("operation_log_sort_ip")).setValue(JSON.parse(e.ip)[0])}),$$("modalForm").close(),!1})};return{rows:[{view:"toolbar",id:e("filter"),align:"center",elements:[{view:"select",id:e("exception_reporter_sort_method"),fillspace:!0,options:[{id:"all",value:"All methods"},{id:"POST",value:"POST"},{id:"GET",value:"GET"},{id:"PATCH",value:"PATCH"},{id:"PUT",value:"PUT"},{id:"DELETE",value:"DELETE"}],on:{onChange:function(){i()}}},{view:"text",id:e("exception_reporter_sort_code"),fillspace:!0,placeholder:"Code",align:"center",on:{onChange:function(){i()}}},{view:"button",type:"iconButton",label:"Clear filter",icon:"close",click:function(){$$(e("exception_reporter_sort_method")).setValue("all"),$$(e("exception_reporter_sort_code")).setValue(""),$$(e("exception_reporter_sort_type")).setValue(""),$$(e("exception_reporter_sort_message")).setValue(""),$$(e("exception_reporter_sort_path")).setValue(""),$$(e("exception_reporter_sort_query")).setValue(""),$$(e("exception_reporter_sort_created_at")).setValue(""),i()}},{view:"button",type:"iconButton",label:"Reload table",icon:"repeat",click:function(){i()}},{view:"button",type:"iconButton",label:"Remove selected",icon:"trash",click:function(){var t=$$(e("exceptionsTable")).getSelectedId(!0,!0);webix.confirm({title:"Close",text:"Delete "+t.length+" items?",type:"confirm-error",callback:function(e){webix.ajax().del(Remote("exception","delete"),{ids:t},function(){i()})}})}}]},{view:"toolbar",id:e("filter2"),align:"center",elements:[{view:"text",id:e("exception_reporter_sort_type"),fillspace:!0,placeholder:"Type",align:"center",on:{onChange:function(){i()}}},{view:"text",id:e("exception_reporter_sort_message"),fillspace:!0,placeholder:"Message",align:"center",on:{onChange:function(){i()}}},{view:"text",id:e("exception_reporter_sort_path"),fillspace:!0,placeholder:"Path",align:"center",on:{onChange:function(){i()}}},{view:"text",id:e("exception_reporter_sort_query"),fillspace:!0,placeholder:"Data",align:"center",on:{onChange:function(){i()}}},{view:"datepicker",id:e("exception_reporter_sort_created_at"),placeholder:"Updated at",format:"%Y-%m-%d",editable:!0,fillspace:!0,on:{onChange:function(){i()}}}]},{view:"datatable",select:!0,id:e("exceptionsTable"),multiselect:!0,columns:[{id:"id",header:"ID"},{id:"method",header:"Method"},{id:"code",header:"Code"},{id:"type",header:"Type",fillspace:!0},{id:"message",header:"Message",fillspace:!0},{id:"path",header:"Path",fillspace:!0},{id:"query",header:"Data",fillspace:!0},{id:"created_at",header:"Created at",fillspace:!0},{id:"select",header:"",width:50,template:'<i class="fa fa-search-minus" style="cursor: pointer"></i>'}],type:{template:"{common.space()}"},url:Remote("exception"),on:{onItemClick:function(e){var t=this.getItem(e.row);if("select"==e.column)return void n(t)},onItemDblClick:function(t){var i=this.getItem(t.row);if("select"==t.column)return void n(i);i[t.column]&&("method"!=t.column?webix.confirm({title:t.column,width:8*i[t.column].length,text:i[t.column],ok:"Search",cancel:"Cancel",callback:function(n){n&&$$(e("exception_reporter_sort_"+t.column)).setValue(i[t.column].replace(/<\/?[^>]+>/gi,""))}}):webix.alert({title:t.column,ok:"OK",width:8*i[t.column].length,text:i[t.column]}))}}}]}}}).call(t,i(0))},function(e,t,i){"use strict";(function(t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=i(1);e.exports=function(e){var i=!1,o=!1,a="left",s={left:"/",right:"/"},l=function(t,r,s,l){if(9==t){a="left"==s?"right":"left",r.unselectAll();var c="left"==s?o:i;return"object"==(void 0===c?"undefined":n(c))&&(c=c[c.length-1]),$$(e("left"==s?"right":"left")).select(c,!0),webix.UIManager.setFocus(e("left"==s?"right":"left")),!1}if(13==t&&h(r,s),("1"==l.key&&l.altKey||"1"==l.key)&&$$(e("uploadBTN")).isEnabled()&&y(),("2"==l.key&&l.altKey||"2"==l.key)&&$$(e("renameBTN")).isEnabled()&&f(),("3"==l.key&&l.altKey||"3"==l.key)&&$$(e("lookBTN")).isEnabled()&&g(),("4"==l.key&&l.altKey||"4"==l.key)&&$$(e("editBTN")).isEnabled()&&m(),("5"==l.key&&l.altKey||"5"==l.key)&&$$(e("copyBTN")).isEnabled()&&v(),("6"==l.key&&l.altKey||"6"==l.key)&&$$(e("moveBTN")).isEnabled()&&b(),("7"==l.key&&l.altKey||"7"==l.key)&&$$(e("folderBTN")).isEnabled()&&x(),("8"==l.key&&l.altKey||"8"==l.key)&&$$(e("delBTN")).isEnabled()&&w(),l.altKey)return!1},h=function(t,n){var r=t.getSelectedItem();if("folder"==r.type){var a={name:"file"};a.source="left"==n?i[0].id:o[0].id,t.clearAll(),t.load(Route("remote.get",a),function(){void 0!=r.select?t.select(r.select):t.select(t.getFirstId()),webix.UIManager.setFocus(t),$$(e("left"==n?"left_path":"right_path")).setHTML(("/"!=a.source?"/":"")+a.source),s[n]=a.source})}else void 0==r.length&&g()},c=function(i,n){a=n;var r=i.getSelectedItem();if(void 0!=r){if(void 0!=r[0]){var o=0,s=0,l=!1;return t.each(r,function(e,t){"folder"==t.type?o++:s++,".."==t.value&&(l=!0)}),l?($$(e("copyBTN")).disable(),$$(e("moveBTN")).disable(),$$(e("delBTN")).disable()):($$(e("copyBTN")).enable(),$$(e("moveBTN")).enable(),$$(e("delBTN")).enable()),$$(e(n+"_info")).setHTML("Selected: "+(s?'<span class="label bg-gray">'+s+" files</span> ":"")+(o?' <span class="label bg-gray">'+o+" folders</span>":"")),$$(e("renameBTN")).disable(),$$(e("lookBTN")).disable(),$$(e("editBTN")).disable(),$$(e("folderBTN")).disable(),!0}var h=r.value;".."==h?(h="BACK",$$(e("copyBTN")).disable(),$$(e("moveBTN")).disable(),$$(e("delBTN")).disable()):($$(e("copyBTN")).enable(),$$(e("moveBTN")).enable(),$$(e("delBTN")).enable()),$$(e(n+"_info")).setHTML(h+' \n                <span style=\'float: right\'>\n                <span class="label bg-gray"><i class="fa fa-'+r.icon+'"></i> '+(""==r.type?"Undefined":r.type)+'</span>\n                <span class="label bg-gray">'+r.date+"</span>                \n                </span>"),$$(e("renameBTN")).enable(),$$(e("lookBTN")).enable(),$$(e("editBTN")).enable(),$$(e("folderBTN")).enable(),"folder"==r.type?$$(e("editBTN")).disable():$$(e("editBTN")).enable(),".."==r.value?$$(e("renameBTN")).disable():$$(e("renameBTN")).enable()}},u=[{id:"icon",header:"",width:35,template:"<i class='fa fa-#icon#'></i>"},{id:"value",header:"Name",fillspace:!0},{id:"size",header:"Size",width:100}],d=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=i,l=o;s.left==s.right||n?($$(e("left")).clearAll(),$$(e("right")).clearAll(),$$(e("left")).load(Route("remote.get",{name:"file",source:s.left}),function(){t&&$$(e("left")).select(r)}),$$(e("right")).load(Route("remote.get",{name:"file",source:s.right}),function(){t&&$$(e("right")).select(l)})):($$(e(a)).clearAll(),$$(e(a)).load(Route("remote.get",{name:"file",source:s[a]}),function(){t&&("left"==a&&$$(e("left")).select(r),"right"==a&&$$(e("right")).select(l))}))},f=function(){if($$(e(a)).isVisible()){var i=$$(e(a)).getSelectedItem();webix.ui({view:"window",id:"rename",head:"Rename",position:"center",resize:!0,modal:!0,width:t("#layoutContainer").width()/2,height:200,body:{rows:[{view:"form",borderless:!0,elements:[{view:"text",label:"Name",id:"target",labelPosition:"top",value:i.value.replace(/<\/?[^>]+>/gi,"")}]},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Save",icon:"floppy-o",click:function(){r.start(),webix.ajax().post(Route("remote.update",{name:"file"}),{source:i.id,action:"rename",target:$$("target").getValue()},function(e){d(),$$("rename").close(),r.done()})},hotkey:"enter"},{view:"button",type:"iconButton",label:"Close",icon:"remove",click:'$$("rename").close()',hotkey:"esc"}]}]}}).show(),$$("target").focus()}},p=function(e,t,i){r.start(),webix.ajax().post(Route("remote.update",{name:"file"}),{saveFile:e,saveValue:t},function(e){d(!0),i(),r.done()})},m=function(){var i=!1,n=$$(e(a)).getSelectedItem();if("archive"==n.type||"folder"==n.type||"image"==n.type)return g(),!0;r.start(),webix.ajax().get(Route("remote.get",{name:"file",getContent:n.id}),function(o){webix.ui({view:"window",id:"editFWindow",head:"Edit file - "+n.value,fullscreen:!0,modal:!0,body:{rows:[{view:"template",template:"<div id='monacoEditor' style='height: 100%'></div>"},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Save and Exit (Alt+S)",icon:"floppy-o",click:function(){p(n.id,i.getValue(),function(){$$("editFWindow").close(),webix.UIManager.setFocus($$(e(a)))})},hotkey:"Alt+S"},{view:"button",type:"iconButton",label:"Save (Ctrl+S)",icon:"floppy-o",click:function(){p(n.id,i.getValue(),function(){i.focus()})},hotkey:"Ctrl+S"},{view:"button",type:"iconButton",label:"Open Diff and Save (Shift+Ctrl+S)",icon:"floppy-o",click:function(){webix.ui({view:"window",id:"lookDiff",head:n.value,position:"center",resize:!0,modal:!0,move:!0,width:t("#layoutContainer").width()/1.1,height:t("#layoutContainer").height()/1.1,body:{rows:[{view:"template",template:"<div id='monacoDiff' style='height: 100%'></div>"},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Save and Exit (Key: 1)",icon:"floppy-o",click:function(){p(n.id,i.getValue(),function(){$$("lookDiff").close(),$$("editFWindow").close(),webix.UIManager.setFocus($$(e(a)))})},hotkey:"1"},{view:"button",type:"iconButton",label:"Save and close Diff (Key: 2)",icon:"floppy-o",click:function(){p(n.id,i.getValue(),function(){$$("lookDiff").close(),i.focus()})},hotkey:"2"},{view:"button",type:"iconButton",label:"Close (Esc)",icon:"remove",click:function(){$$("lookDiff").close(),i.focus()},hotkey:"esc"}]}]},on:{onShow:function(){var e=n.id.split(".");e=e[e.length-1];var t=monaco.editor.createModel(o,void 0!=vs_exts[e]?vs_exts[e]:"javascript"),r=monaco.editor.createModel(i.getValue(),void 0!=vs_exts[e]?vs_exts[e]:"javascript"),a=monaco.editor.createDiffEditor(document.getElementById("monacoDiff"),{language:void 0!=vs_exts[e]?vs_exts[e]:"javascript",theme:"vs-dark",readOnly:!0,automaticLayout:!0});a.setModel({original:t,modified:r}),a.focus()}}}).show()},hotkey:"Shift+Ctrl+S"},{view:"button",type:"iconButton",label:"Close (Esc)",icon:"remove",click:function(){void 0==$$("lookDiff")&&(i.getValue()!=o?webix.confirm({title:"Close editor?",text:"The file has been modified!",type:"confirm",callback:function(t){t?($$("editFWindow").close(),webix.UIManager.setFocus($$(e(a)))):i.focus()}}):($$("editFWindow").close(),webix.UIManager.setFocus($$(e(a)))))},hotkey:"esc"}]}]},on:{onShow:function(){var e=n.id.split(".");e=e[e.length-1],i=monaco.editor.create(document.getElementById("monacoEditor"),{value:o,language:void 0!=vs_exts[e]?vs_exts[e]:"javascript",theme:"vs-dark",automaticLayout:!0}),i.focus(),r.done()}}}).show()})},g=function(){var i=$$(e(a)).getSelectedItem();if($$(e(a)).isVisible()){if("archive"==i.type)return webix.ui({view:"window",id:"archive",head:"Extract "+i.value,position:"center",resize:!0,modal:!0,width:t("#layoutContainer").width()/2,height:200,body:{rows:[{view:"form",borderless:!0,elements:[{view:"text",label:"To:",id:"extractTo",labelPosition:"top",value:s[a]}]},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"To begin",icon:"angle-double-up",click:function(){r.start(),webix.ajax().get(Route("remote.select",{name:"file",extractTo:$$("extractTo").getValue(),extractFrom:i.id}),function(t){d(),$$("archive").close(),r.done(),webix.UIManager.setFocus($$(e(a)))})}},{view:"button",type:"iconButton",label:"Close",icon:"remove",click:'$$("archive").close()',hotkey:"esc"}]}]}}).show(),!0;if("folder"==i.type)return r.start(),webix.ajax().get(Route("remote.get",{name:"file",dirSize:".."!=i.value.replace(/<\/?[^>]+>/gi,"")?i.id:s[a]}),function(t){$$(e(a)).updateItem($$(e(a)).getSelectedId(),{size:t}),r.done(),webix.UIManager.setFocus($$(e(a)))}),!0;if("image"==i.type)return webix.ui({view:"window",id:"look",head:i.value,position:"center",resize:!0,modal:!0,width:t("#layoutContainer").width()/2,height:t("#layoutContainer").height()/1.5,body:{rows:[{view:"template",id:"lookValue",template:"<img>",position:"center"},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Close",icon:"remove",click:'$$("look").close()',hotkey:"esc"}]}]}}).show(),r.start(),webix.ajax().get(Route("remote.get",{name:"file",getContent:i.id,type:i.type}),function(e){$$("lookValue").setHTML('<center><img src="data:image/gif;base64,'+e+'" style="max-width: '+(t("#layoutContainer").width()/2-20)+"px; max-height: "+(t("#layoutContainer").height()/1.5-100)+'px"/></center>'),r.done()}),!0;r.start(),webix.ajax().get(Route("remote.get",{name:"file",getContent:i.id}),function(e){webix.ui({view:"window",id:"look",head:i.value,position:"center",resize:!0,modal:!0,move:!0,width:t("#layoutContainer").width()/2,height:t("#layoutContainer").height()/1.5,body:{rows:[{view:"template",template:"<div id='monaco' style='height: 100%'></div>"},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Close",icon:"remove",click:'$$("look").close()',hotkey:"esc"}]}]},on:{onShow:function(){var t=i.id.split(".");t=t[t.length-1],monaco.editor.create(document.getElementById("monaco"),{value:e,language:void 0!=vs_exts[t]?vs_exts[t]:"javascript",theme:"vs-dark",readOnly:!0,automaticLayout:!0}).focus(),r.done()}}}).show()})}},v=function(){var i=$$(e(a)).getSelectedItem();webix.ui({view:"window",id:"copyFWindow",head:"Copy "+(void 0!=i[0]?i.length+" objects":"1 object"),position:"center",resize:!0,modal:!0,width:t("#layoutContainer").width()/2.5,height:400,body:{rows:[{view:"datatable",columns:[{id:"path",header:"Path",fillspace:!0}],id:"copydFiles"},{view:"form",borderless:!0,elements:[{view:"text",label:"To:",id:"copyTo",labelPosition:"top",value:s["left"==a?"right":"left"]}]},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Copy",icon:"copy",click:function(){r.start();var e="";if(void 0!=i[0]){var n=[];t.each(i,function(e,t){n[n.length]=t.id}),e=n.join(",")}else e=i.id;webix.ajax().post(Route("remote.update",{name:"file"}),{source:e,action:"copy",target:$$("copyTo").getValue()},function(e){d(!1,!0),$$("copyFWindow").close(),r.done()})},hotkey:"enter"},{view:"button",type:"iconButton",label:"Close",icon:"remove",click:'$$("copyFWindow").close()',hotkey:"esc"}]}]},on:{onShow:function(){void 0!=i[0]?t.each(i,function(e,t){$$("copydFiles").add({path:t.id})}):$$("copydFiles").add({path:i.id})}}}).show()},b=function(){var i=$$(e(a)).getSelectedItem();webix.ui({view:"window",id:"moveFWindow",head:"Move "+(void 0!=i[0]?i.length+" objects":"1 object"),position:"center",resize:!0,modal:!0,width:t("#layoutContainer").width()/2.5,height:400,body:{rows:[{view:"datatable",columns:[{id:"path",header:"Path",fillspace:!0}],id:"movedFiles"},{view:"form",borderless:!0,elements:[{view:"text",label:"To:",id:"moveTo",labelPosition:"top",value:s["left"==a?"right":"left"]}]},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Move",icon:"angle-double-up",click:function(){r.start();var e="";if(void 0!=i[0]){var n=[];t.each(i,function(e,t){n[n.length]=t.id}),e=n.join(",")}else e=i.id;webix.ajax().post(Route("remote.update",{name:"file"}),{source:e,action:"move",target:$$("moveTo").getValue()},function(e){d(!1,!0),$$("moveFWindow").close(),r.done()})},hotkey:"enter"},{view:"button",type:"iconButton",label:"Close",icon:"remove",click:'$$("moveFWindow").close()',hotkey:"esc"}]}]},on:{onShow:function(){void 0!=i[0]?t.each(i,function(e,t){$$("movedFiles").add({path:t.id})}):$$("movedFiles").add({path:i.id})}}}).show()},w=function(){var i=$$(e(a)).getSelectedItem();webix.ui({view:"window",id:"delFWindow",head:"Delete "+(void 0!=i[0]?i.length+" objects":"1 object"),position:"center",resize:!0,modal:!0,width:t("#layoutContainer").width()/2.5,height:400,body:{rows:[{view:"datatable",columns:[{id:"path",header:"Path",fillspace:!0}],id:"deletedFiles"},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Delete",icon:"trash",click:function(){r.start();var e="";if(void 0!=i[0]){var n=[];t.each(i,function(e,t){n[n.length]=t.id}),e=n.join(",")}else e=i.id;webix.ajax().post(Route("remote.update",{name:"file"}),{source:e,action:"remove"},function(e){d(),$$("delFWindow").close(),r.done()})},hotkey:"enter"},{view:"button",type:"iconButton",label:"Close",icon:"remove",click:'$$("delFWindow").close()',hotkey:"esc"}]}]},on:{onShow:function(){void 0!=i[0]?t.each(i,function(e,t){$$("deletedFiles").add({path:t.id})}):$$("deletedFiles").add({path:i.id})}}}).show()},x=function(){$$(e(a)).getSelectedItem();webix.ui({view:"window",id:"newFWindow",head:"Create new",position:"center",resize:!0,modal:!0,width:t("#layoutContainer").width()/2.5,body:{rows:[{view:"form",borderless:!0,elements:[{view:"text",label:"Name",id:"nameCreate",name:"source",labelPosition:"top",value:""},{view:"text",label:"To:",id:"createTo",name:"target",labelPosition:"top",value:s[a]}]},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Folder",icon:"folder-o",click:function(){r.start(),webix.ajax().post(Route("remote.update",{name:"file"}),{source:$$("nameCreate").getValue(),action:"new_folder",target:$$("createTo").getValue()},function(e){d(!0,!0),$$("newFWindow").close(),r.done()})}},{view:"button",type:"iconButton",label:"File",icon:"file-o",click:function(){r.start(),webix.ajax().post(Route("remote.update",{name:"file"}),{source:$$("nameCreate").getValue(),action:"new_file",target:$$("createTo").getValue()},function(e){d(!0,!0),$$("newFWindow").close(),r.done()})}},{view:"button",type:"iconButton",label:"Close",icon:"remove",click:'$$("newFWindow").close()',hotkey:"esc"}]}]},on:{onShow:function(){$$("nameCreate").focus()}}}).show()},y=function(){webix.ui({view:"window",id:"uploadFWindow",head:"Upload to: "+s[a],position:"center",resize:!0,modal:!0,width:t("#layoutContainer").width()/2.5,body:{view:"form",type:"line",rows:[{view:"toolbar",align:"center",elements:[{view:"uploader",id:"upl1",height:37,align:"center",type:"iconButton",icon:"plus-circle",label:"Add files",autosend:!1,link:"mylist",upload:Route("remote.update",{name:"file",action:"upload",target:s[a]}),on:{onUploadComplete:function(){d(!0)}}}]},{view:"list",id:"mylist",type:"uploader",maxHeight:400,autoheight:!0,borderless:!0},{view:"toolbar",align:"center",elements:[{view:"button",label:"Upload",type:"iconButton",icon:"upload",click:function(){$$("upl1").send()},align:"center"},{view:"button",label:"Cancel",type:"iconButton",icon:"times-circle",click:function(){for(var e=$$("upl1").files.getFirstId();e;)$$("upl1").stopUpload(e),e=$$("upl1").files.getNextId(e)},align:"center"},{view:"button",type:"iconButton",label:"Close",icon:"remove",click:'$$("uploadFWindow").close()',hotkey:"esc"}]}]}}).show()};return{rows:[{view:"toolbar",id:e("controlBar"),align:"center",elements:[{view:"button",type:"iconButton",label:"Upload (1)",id:e("uploadBTN"),icon:"upload",click:function(){this.isEnabled()&&y()}},{view:"button",type:"iconButton",label:"Rename (2)",id:e("renameBTN"),icon:"edit",click:function(){this.isEnabled()&&f()}},{view:"button",type:"iconButton",label:"View (3)",id:e("lookBTN"),icon:"eye",click:function(){this.isEnabled()&&g()}},{view:"button",type:"iconButton",label:"Edit (4)",id:e("editBTN"),icon:"pencil",click:function(){this.isEnabled()&&m()}},{view:"button",type:"iconButton",label:"Copy (5)",id:e("copyBTN"),icon:"copy",click:function(){this.isEnabled()&&v()}},{view:"button",type:"iconButton",label:"Move (6)",id:e("moveBTN"),icon:"angle-double-up",click:function(){this.isEnabled()&&b()}},{view:"button",type:"iconButton",label:"New (7)",id:e("folderBTN"),icon:"folder-o",click:function(){this.isEnabled()&&x()}},{view:"button",type:"iconButton",label:"Delete (8)",id:e("delBTN"),icon:"trash",click:function(){this.isEnabled()&&w()}}]},{cols:[{rows:[{view:"template",type:"header",id:e("left_path"),template:"/"},{view:"datatable",select:!0,multiselect:!0,id:e("left"),editable:!0,columns:webix.copy(u),url:Remote("file"),on:{onItemClick:function(){a="left",$$(e("right")).unselectAll(),i=this.getSelectedId(!0).length?this.getSelectedId(!0):i,c(this,"left")},onKeyPress:function(e,t){i=this.getSelectedId(!0).length?this.getSelectedId(!0):i,l(e,this,"left",t)},onAfterLoad:function(){i=this.getFirstId(),this.select(this.getFirstId()),webix.UIManager.setFocus(this),c(this,"left")},onItemDblClick:function(){return h(this,"left"),!1},onSelectChange:function(){c(this,"left")}}},{view:"template",type:"header",id:e("left_info"),template:"/"}]},{view:"resizer"},{rows:[{view:"template",type:"header",id:e("right_path"),template:"/"},{view:"datatable",select:!0,multiselect:!0,id:e("right"),editable:!0,columns:webix.copy(u),url:Remote("file"),on:{onItemClick:function(){a="right",$$(e("left")).unselectAll(),o=this.getSelectedId(!0).length?this.getSelectedId(!0):o,c(this,"right")},onKeyPress:function(e,t){o=this.getSelectedId(!0).length?this.getSelectedId(!0):o,l(e,this,"right",t)},onAfterLoad:function(){o=this.getFirstId(),this.select(this.getFirstId()),c(this,"right"),this.unselectAll(),a="left"},onItemDblClick:function(){return h(this,"right"),!1},onSelectChange:function(){c(this,"right")}}},{view:"template",type:"header",id:e("right_info"),template:"/"}]}]}]}}}).call(t,i(0))},function(e,t,i){"use strict";(function(t,n){e.exports=function(e,r,o){var a=r.query;i(3);i(5);var s=!1,l=function(t){webix.ajax().post(Route("mod.ide.cmd",{cmd:"log_write",module:a,message:t}),function(t){t=JSON.parse(t),$$(e("output_window")).add(t,0)})},h=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];webix.confirm(t,"confirm-warning",function(r){r&&(s.handle("artisan "+i),l(t.replace("?",".")),n&&($$(e("explorer_window")).clearAll(),setTimeout(function(){$$(e("explorer_window")).load(Route("mod.ide.cmd",{cmd:"get_filesystem",module:a}))},1e3)))})},r=webix.storage.local.get(a+"-ide-state");if(r)var c=setInterval(function(){void 0!=$$(e(a+"-ide"))&&($$(e(a+"-ide")).restore(r),clearInterval(c))});var u={select:!0,view:"tree",id:e("explorer_window"),template:"{common.icon()} {common.awesome()} #value#",type:{awesome:function(e){return'<i class="fa fa-'+e.icon+'"></i>'}},url:Route("mod.ide.cmd",{cmd:"get_filesystem",module:a}),on:{onBeforeLoad:function(){t.start()},onAfterLoad:function(){t.done()},onItemDblClick:function(){var i=this.getSelectedItem();n("#"+e("open_files",!0));if("folder"==i.type)return this.open(i.id);$$(e("fileviwer")).addView({header:i.value,close:!0,body:{template:'<div id="'+e(i.id,!0)+'" style="height: 100%"></div>',on:{onAfterRender:function(){t.start(),webix.ajax().get(Route("mod.ide.cmd",{cmd:"get_file",module:a,getContent:i.id}),function(n){var r=i.id.split(".");r=r[r.length-1],monaco.editor.create(document.getElementById(e(i.id,!0)),{value:n,language:void 0!=vs_exts[r]?vs_exts[r]:"javascript",theme:"vs-dark",automaticLayout:!0}).focus(),t.done()})}}}})}}},d={view:"property",id:e("properties"),elements:[{label:"Data url",type:"text",id:"url"},{label:"Data type",type:"select",options:["json","xml","csv"],id:"type"},{label:"Use JSONP",type:"checkbox",id:"jsonp"}]},f={view:"datatable",id:e("output_window"),header:!1,rowLineHeight:20,rowHeight:20,columns:[{id:"date",header:"",width:153},{id:"message",header:"",fillspace:!0}],url:Route("mod.ide.cmd",{cmd:"get_log",module:a})},p={cols:[{rows:[{view:"template",template:" ",height:.1},{view:"template",type:"header",template:"Generator"},{view:"toolbar",elements:[{view:"button",type:"iconButton",label:"Make Scaffold",icon:"keyboard-o",click:function(){}}]},{view:"toolbar",elements:[{view:"button",label:"Make Command",click:function(){webix.ui({view:"window",id:"make_command",head:"Make Command",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",elements:[{view:"text",id:"command_name",label:"Command name",labelPosition:"top",value:"Create"+a+"Command"}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("command_name").getValue();$$("make_command").close(),h('Create a command "'+e+'" for the given module?',"module:make-command "+e+" "+a,!0)}},{view:"button",label:"Cancel",click:function(){$$("make_command").close()}}]}]}}).show()}},{view:"button",label:"Make Test",click:function(){webix.ui({view:"window",id:"make_test",head:"Make Test",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",elements:[{view:"text",id:"test_name",label:"Test name",labelPosition:"top",value:"Eloquent"+a+"RepositoryTest"}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("test_name").getValue();$$("make_test").close(),h('Create a test "'+e+'" for the given module?',"module:make-test "+e+" "+a,!0)}},{view:"button",label:"Cancel",click:function(){$$("make_test").close()}}]}]}}).show()}}]},{view:"toolbar",elements:[{view:"button",label:"Make Seed",click:function(){webix.ui({view:"window",id:"make_seed",head:"Make Seed",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",elements:[{view:"text",id:"seed_name",label:"Seed name",labelPosition:"top",value:"SeedFake"+a}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("seed_name").getValue();$$("make_seed").close(),h('Create a seed "'+e+'" for the given module?',"module:make-seed "+e+" "+a,!0)}},{view:"button",label:"Cancel",click:function(){$$("make_seed").close()}}]}]}}).show()}},{view:"button",label:"Make Controller",click:function(){webix.ui({view:"window",id:"make_Controller",head:"Make Controller",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",elements:[{view:"text",id:"Controller_name",label:"Controller name",labelPosition:"top",value:a+"Controller"}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("Controller_name").getValue();$$("make_Controller").close(),h('Create a Controller "'+e+'" for the given module?',"module:make-controller "+e+" "+a,!0)}},{view:"button",label:"Cancel",click:function(){$$("make_Controller").close()}}]}]}}).show()}}]},{view:"toolbar",elements:[{view:"button",label:"Make Policy",click:function(){webix.ui({view:"window",id:"make_Policy",head:"Make Policy",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",elements:[{view:"text",id:"Policy_name",label:"Policy name",labelPosition:"top",value:"Policy"+a}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("Policy_name").getValue();$$("make_Policy").close(),h('Create a Policy "'+e+'" for the given module?',"module:make-policy "+e+" "+a,!0)}},{view:"button",label:"Cancel",click:function(){$$("make_Policy").close()}}]}]}}).show()}},{view:"button",label:"Make Provider",click:function(){webix.ui({view:"window",id:"make_Provider",head:"Make Provider",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",elements:[{view:"text",id:"Provider_name",label:"Provider name",labelPosition:"top",value:"New"+a+"ServiceProvider"}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("Provider_name").getValue();$$("make_Provider").close(),h('Create a Provider "'+e+'" for the given module?',"module:make-provider "+e+" "+a,!0)}},{view:"button",label:"Cancel",click:function(){$$("make_Provider").close()}}]}]}}).show()}}]},{view:"toolbar",elements:[{view:"button",label:"Make Middleware",click:function(){webix.ui({view:"window",id:"make_Middleware",head:"Make Middleware",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",elements:[{view:"text",id:"Middleware_name",label:"Middleware name",labelPosition:"top",value:a+"Middleware"}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("Middleware_name").getValue();$$("make_Middleware").close(),h('Create a Middleware "'+e+'" for the given module?',"module:make-middleware "+e+" "+a,!0)}},{view:"button",label:"Cancel",click:function(){$$("make_Middleware").close()}}]}]}}).show()}},{view:"button",label:"Make Mail",click:function(){webix.ui({view:"window",id:"make_Email",head:"Make Email",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",elements:[{view:"text",id:"Email_name",label:"Email name",labelPosition:"top",value:a+"Email"}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("Email_name").getValue();$$("make_Email").close(),h('Create a Email "'+e+'" for the given module?',"module:make-mail "+e+" "+a,!0)}},{view:"button",label:"Cancel",click:function(){$$("make_Email").close()}}]}]}}).show()}}]},{view:"toolbar",elements:[{view:"button",label:"Make Notification",click:function(){webix.ui({view:"window",id:"make_Notification",head:"Make Notification",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",elements:[{view:"text",id:"Notification_name",label:"Notification name",labelPosition:"top",value:"Notify"+a}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("Notification_name").getValue();$$("make_Notification").close(),h('Create a Notification "'+e+'" for the given module?',"module:make-notification "+e+" "+a,!0)}},{view:"button",label:"Cancel",click:function(){$$("make_Notification").close()}}]}]}}).show()}},{view:"button",label:"Make Listener",click:function(){webix.ui({view:"window",id:"make_listener",head:"Make Listener",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",id:"listener_form",elements:[{view:"text",id:"listener_name",label:"Notification name",labelPosition:"top",value:"Listener"+a+"Name"},{view:"text",id:"listener_event",name:"listener_event",label:"Event class it should listen to",labelPosition:"top"},{view:"toggle",type:"iconButton",name:"queued",id:"queued",offIcon:"square-o",onIcon:"check-square-o",offLabel:"Allowed queued event listeners",onLabel:"Allowed queued event listeners"}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("listener_name").getValue(),t=$$("listener_form").getValues();$$("make_listener").close(),h('Create a Listener "'+e+'" for the given module?',"module:make-listener "+e+" "+a+(""!=t.listener_event?" --event="+t.listener_event:"")+(1==t.queued?" --queued":""),!0)}},{view:"button",label:"Cancel",click:function(){$$("make_listener").close()}}]}]}}).show()}}]},{view:"toolbar",elements:[{view:"button",label:"Make Request",click:function(){webix.ui({view:"window",id:"make_Request",head:"Make Request",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",elements:[{view:"text",id:"Request_name",label:"Request name",labelPosition:"top",value:"Create"+a+"Request"}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("Request_name").getValue();$$("make_Request").close(),h('Create a Request "'+e+'" for the given module?',"module:make-request "+e+" "+a,!0)}},{view:"button",label:"Cancel",click:function(){$$("make_Request").close()}}]}]}}).show()}},{view:"button",label:"Make Event",click:function(){webix.ui({view:"window",id:"make_Event",head:"Make Event",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",elements:[{view:"text",id:"Event_name",label:"Event name",labelPosition:"top",value:"Event"+a}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("Event_name").getValue();$$("make_Event").close(),h('Create a Event "'+e+'" for the given module?',"module:make-event "+e+" "+a,!0)}},{view:"button",label:"Cancel",click:function(){$$("make_Event").close()}}]}]}}).show()}}]},{view:"toolbar",elements:[{view:"button",label:"Make Job",click:function(){webix.ui({view:"window",id:"make_Job",head:"Make Job",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",id:"Job_form",elements:[{view:"text",id:"Job_name",label:"Job name",labelPosition:"top",value:"JobName"},{view:"toggle",type:"iconButton",name:"sync",id:"sync",offIcon:"square-o",onIcon:"check-square-o",offLabel:"A synchronous job class",onLabel:"A synchronous job class"}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("Job_name").getValue(),t=$$("Job_form").getValues();$$("make_Job").close(),h('Create a Job "'+e+'" for the given module?',"module:make-job "+e+" "+a+(1==t.sync?" --sync":""),!0)}},{view:"button",label:"Cancel",click:function(){$$("make_Job").close()}}]}]}}).show()}},{view:"button",label:"Route Provider",click:function(){h("Create a rout provider for the given module?","module:route-provider "+a,!0)}}]},{view:"toolbar",elements:[{view:"button",label:"Make Rule",click:function(){webix.ui({view:"window",id:"make_Rule",head:"Make Rule",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",elements:[{view:"text",id:"Rule_name",label:"Rule name",labelPosition:"top",value:"ValidationRule"}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("Rule_name").getValue();$$("make_Rule").close(),h('Create a Rule "'+e+'" for the given module?',"module:make-rule "+e+" "+a,!0)}},{view:"button",label:"Cancel",click:function(){$$("make_Rule").close()}}]}]}}).show()}},{view:"button",label:"Make Resource",click:function(){webix.ui({view:"window",id:"make_Resource",head:"Make Resource",position:"center",width:400,autoheight:!0,modal:!0,body:{rows:[{view:"form",id:"Resource_form",elements:[{view:"text",id:"Resource_name",label:"Resource name",labelPosition:"top",value:"ResourceName"},{view:"toggle",type:"iconButton",name:"collection",id:"collection",offIcon:"square-o",onIcon:"check-square-o",offLabel:"Generate a resource collection",onLabel:"Generate a resource collection"}]},{view:"toolbar",elements:[{view:"button",label:"Make",click:function(){var e=$$("Resource_name").getValue(),t=$$("Resource_form").getValues();$$("make_Resource").close(),h('Create a Resource "'+e+'" for the given module?',"module:make-resource "+e+" "+a+(1==t.collection?" --collection":""),!0)}},{view:"button",label:"Cancel",click:function(){$$("make_Resource").close()}}]}]}}).show()}}]}]},{rows:[{view:"template",template:" ",height:.1},{view:"template",type:"header",template:"Utility"},{view:"toolbar",elements:[{view:"button",label:"Migrate",click:function(){h("Migrate the given module?","module:migrate "+a)}},{view:"button",label:"Migrate Rollback",click:function(){h("Rollback the given module?","module:migrate-rollback "+a)}}]},{view:"toolbar",elements:[{view:"button",label:"Migrate Refresh",click:function(){h("Refresh the migration for the given module?","module:migrate-refresh "+a)}},{view:"button",label:"Migrate Reset",click:function(){h("Reset the migration for the given module?","module:migrate-reset "+a)}}]},{view:"toolbar",elements:[{view:"button",label:"Seed",click:function(){h("Seed the given module?","module:seed "+a)}},{view:"button",label:"Publish Migration",click:function(){h("Publish the migration files for the given module?","module:publish-migration "+a)}}]},{view:"toolbar",elements:[{view:"button",label:"Publish Config",click:function(){h("Publish the given module configuration files?","module:publish-config "+a)}},{view:"button",label:"Publish Translation",click:function(){h("Publish the translation files for the given module?","module:publish-translation "+a)}}]},{view:"toolbar",elements:[{view:"button",label:"Enable",click:function(){h("Enable the given module?","module:enable "+a)}},{view:"button",label:"Disable",click:function(){h("Disable the given module?","module:disable "+a)}}]},{view:"toolbar",elements:[{view:"button",label:"Update",click:function(){h("Update the given module?","module:update "+a)}}]}]}]},m={view:"tabview",id:e("fileviwer"),tabbar:{optionWidth:285},padding:0,animate:!1,cells:[{header:"Tools",body:p}]};return webix.ajax().get(Route("terminal.index"),function(i){s=new Terminal("#"+e("terminal_window",!0),JSON.parse(i)),n('[view_id="'+e(a+"_terminal",!0)+'"] div').css("padding",0),n(".CodeMirror-fullscreen").height(n("#layoutContainer").height()+34),n(".CodeMirror-scroll").slimScroll({height:n("#layoutContainer").height()+34,color:"#fff"}),n(".CodeMirror-fullscreen").css("position","absolute"),t.done(),setInterval(function(){n('[view_id="'+e(a+"_terminal",!0)+'"] .webix_template').height()==n("#"+e("terminal_window",!0)).height()&&n('[view_id="'+e(a+"_terminal",!0)+'"] .webix_template').width()==n("#"+e("terminal_window",!0)).width()||(n("#"+e("terminal_window",!0)).height(n('[view_id="'+e(a+"_terminal",!0)+'"] .webix_template').height()),n("#"+e("terminal_window",!0)).width(n('[view_id="'+e(a+"_terminal",!0)+'"] .webix_template').width()),s.scrollToBottom())})}),{view:"dashboard",id:e(a+"-ide"),gridColumns:12,gridRows:12,cells:[{view:"panel",x:0,y:0,dx:2,dy:6,resize:!0,headerHeight:10,header:"<i class='fa fa-folder-o'></i> Module Explorer",body:u},{view:"panel",x:0,y:6,dx:2,dy:6,resize:!0,header:"<i class='fa fa-edit'></i> Properties",body:d},{view:"panel",x:2,y:0,dx:10,dy:9,resize:!0,body:m},{view:"panel",x:2,y:9,dx:5,dy:3,resize:!0,header:"<i class='fa fa-terminal'></i> Terminal",body:{id:e(a+"_terminal",!0),view:"template",template:'<div id="'+e("terminal_window",!0)+'"></div>'}},{view:"panel",x:7,y:9,dx:5,dy:3,resize:!0,header:"<i class='fa fa-leanpub'></i> Output",body:f}],on:{onChange:function(){var e=this.serialize();webix.storage.local.put(a+"-ide-state",e)},onBindRequest:function(){}}}}}).call(t,i(1),i(0))},function(e,t,i){"use strict";(function(t){var n=i(1),r=[{id:"key",header:"Key",fillspace:!0}],o=localStorage.getItem("locales");null==o?(locales=JSON.parse(locales),localStorage.setItem("locales",JSON.stringify(locales))):locales=JSON.parse(o),t.each(locales,function(e,t){r[r.length]={id:t,header:t.toUpperCase(),fillspace:!0}}),r[r.length]={id:"del",header:"Delete",width:100,template:"<a class='btn btn-danger btn-sm'><i class='fa fa-remove'></i></a>"},e.exports=function(e){var i=!0,o=[],a=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.start();var s={groupKey:""};s=Object.assign(s,r),webix.ajax().get(Route("trans.getIndex",s),function(r){o=JSON.parse(r),a&&(i||$$(e("groups")).clearAll(),t.each(o.groups,function(t,i){$$(e("groups")).add({group:i})})),i||$$(e("locales")).clearAll(),t.each(o.locales,function(t,i){$$(e("locales")).add({locale:i})}),i||$$(e("translations")).clearAll();var s=0;t.each(o.translations,function(i,n){var r={key:i};t.each(n,function(e,t){r[e]=t.value,t.status&&(r[e]="<strong style='text-decoration: underline;'>"+r[e]+"</strong>")}),$$(e("translations")).add(r),s++}),void 0==o.group||null==o.group?t("#"+e("selected_group",!0)).html(""):t("#"+e("selected_group",!0)).html('<span class="label bg-gray">Group: ['+o.group+']</span><span class="label bg-gray">Keys: '+s+'</span><span class="label bg-gray">Translations: '+o.numTranslations+'</span><span class="label bg-'+(o.numChanged?"yellow":"gray")+'">Changed: '+o.numChanged+"</span>"),i=!1,n.done()})};a();var s=function(e,i){webix.ui({view:"window",id:"transEditModal",head:"Translate ["+i+"]["+o.group+"."+e.key+"]",position:"center",resize:!0,modal:!0,width:t("#layoutContainer").width()/2,height:t("#layoutContainer").height()/2,body:{rows:[{view:"form",borderless:!0,elements:[{view:"textarea",label:"Value",id:"trValueArea",labelPosition:"top",value:void 0!=o.translations[e.key][i]?o.translations[e.key][i].value:""}]},{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Save",icon:"floppy-o",click:function(){n.start();var t=0;void 0!=o.translations[e.key][i]&&(t=o.translations[e.key][i].id),webix.ajax().post(Route("trans.postEdit",{groupKey:o.group}),{name:i+"|"+e.key,value:$$("trValueArea").getValue(),pk:t},function(){a({groupKey:o.group},!1),$$("transEditModal").close(),n.done()})}},{view:"button",type:"iconButton",disabled:defaultLocale==i||void 0==o.translations[e.key][defaultLocale],label:"Default locale",icon:"angle-double-up",click:function(){$$("trValueArea").setValue(o.translations[e.key][defaultLocale].value)}},{view:"button",type:"iconButton",label:"Translate to "+i.toUpperCase(),icon:"language",click:function(){n.start(),webix.ajax().get(Route("remote.get",{name:"translate",to_lang:i,value:$$("trValueArea").getValue()}),function(e){""!=e?$$("trValueArea").setValue(e):webix.alert({title:"Translate error",ok:"Very sorry",text:"It did not turn out to translate."}),n.done()})}},{view:"button",type:"iconButton",label:"Close",icon:"remove",click:'$$("transEditModal").close()'}]}]}}).show()};return{rows:[{view:"toolbar",id:e("controlBar"),align:"center",elements:[{view:"button",type:"iconButton",label:"Append new translations",icon:"arrow-circle-o-down",click:function(){webix.confirm({title:"Are you sure?",text:"Append new translations",type:"confirm",callback:function(e){e&&(n.start(),webix.ajax().post(Route("trans.postImport",{replace:0}),function(e){e=JSON.parse(e),a(),n.done(),webix.alert({title:"Done!",text:"Status: "+e.status+"<br>Counter: "+e.counter})}))}})}},{view:"button",type:"iconButton",label:"Replace existing translations",icon:"repeat",click:function(){webix.confirm({title:"Are you sure?",text:"Replace existing translations",type:"confirm",callback:function(e){e&&(n.start(),webix.ajax().post(Route("trans.postImport",{replace:1}),function(e){e=JSON.parse(e),a(),n.done(),webix.alert({title:"Done!",text:"Status: "+e.status+"<br>Counter: "+e.counter})}))}})}},{view:"button",type:"iconButton",label:"Find translations in files",icon:"search",click:function(){webix.confirm({title:"Find translations in files",text:"Are you sure you want to scan you app folder?<br> All found translation keys will be added to the database.",width:500,padding:20,type:"confirm",callback:function(e){e&&(n.start(),webix.ajax().post(Route("trans.postFind"),function(e){e=JSON.parse(e),a(),n.done(),webix.alert({title:"Done!",text:"Status: "+e.status+"<br>Counter: "+e.counter})}))}})}},{view:"button",type:"iconButton",label:"Export all translations",icon:"angle-double-up",click:function(){webix.confirm({title:"Export all translations",text:"Are you sure you want to publish all translations group? This will overwrite existing language files.",type:"confirm",callback:function(e){e&&(n.start(),webix.ajax().post(Route("trans.postPublish",{groupKey:"*"}),function(){a({groupKey:o.group}),n.done()}))}})}},{view:"button",type:"iconButton",label:"Reload table",icon:"repeat",click:function(){a({groupKey:void 0==o.group||null==o.group?"":o.group})}}]},{cols:[{width:500,rows:[{rows:[{view:"template",type:"header",template:"Groups"},{view:"datatable",select:!0,id:e("groups"),columns:[{id:"group",header:"Group name",fillspace:!0}],type:{template:"{common.space()}"},data:[],on:{onAfterSelect:function(e){var t=this.getItem(e.row);a({groupKey:t.group},!1)}}},{view:"toolbar",align:"center",elements:[{view:"text",placeholder:"Enter a new group name",id:e("add_group")},{view:"button",type:"iconButton",label:"",icon:"plus",width:35,click:function(){var t=$$(e("add_group")).getValue();if(t.length<2)return webix.alert({title:"Error",width:300,text:"A minimum of 2 characters is required."});n.start(),webix.ajax().post(Route("trans.postAddGroup",{"new-group":t}),function(){$$(e("add_group")).setValue(""),a({groupKey:t}),n.done()})}}]}]},{view:"resizer"},{height:250,rows:[{view:"template",type:"header",template:"Locales"},{view:"datatable",id:e("locales"),blockselect:!0,select:"cell",columns:[{id:"locale",header:"Locale code",fillspace:!0},{id:"del",header:"Delete",width:100,template:"<a class='btn btn-danger btn-sm'><i class='fa fa-remove'></i></a>"}],type:{template:"{common.space()}"},on:{onItemClick:function(e){if("del"==e.column){if(!o.deleteEnabled)return webix.alert({title:"Error",width:300,text:"The ability to delete is disabled!"});var t=this.getItem(e.row);webix.confirm({title:"Delete locale",text:'Are you sure to remove "'+t.locale+'" locale and all of data?',type:"confirm-error",callback:function(e){e&&(n.start(),webix.ajax().post(Route("trans.postRemoveLocale",{remove_locale:t.locale}),function(){locales.splice(locales.indexOf(t.locale),1),localStorage.setItem("locales",JSON.stringify(locales)),location.reload()}))}})}}}},{view:"toolbar",align:"center",elements:[{view:"text",placeholder:"Enter new locale key",id:e("add_locale")},{view:"button",type:"iconButton",label:"",icon:"plus",width:35,click:function(){var t=$$(e("add_locale")).getValue();if(t.length<2)return webix.alert({title:"Error",width:300,text:"A minimum of 2 characters is required."});n.start(),webix.ajax().post(Route("trans.postAddLocale"),{"new-locale":t},function(){locales[locales.length]=t,localStorage.setItem("locales",JSON.stringify(locales)),location.reload()})}}]}]}]},{view:"resizer"},{rows:[{view:"template",type:"header",template:"Translations <span id='"+e("selected_group",!0)+"' style='float: right;'></span>"},{view:"datatable",id:e("translations"),blockselect:!0,select:"cell",resizeColumn:!0,type:{template:"{common.space()}"},columns:r,on:{onItemDblClick:function(e){var t=this.getItem(e.row);return"key"!=e.column&&"del"!=e.column?s(t,e.column):"key"==e.column?webix.alert({title:"Key",text:'__("'+o.group+"."+t.key+'")'}):void 0},onItemClick:function(e){if("del"==e.column){if(!o.deleteEnabled)return webix.alert({title:"Error",width:300,text:"The ability to delete is disabled!"});var t=this.getItem(e.row);webix.confirm({title:"Delete",text:'Are you sure you want to delete the translations for "'+t.key+'"?',type:"confirm-error",callback:function(e){e&&(n.start(),webix.ajax().post(Route("trans.postDelete",{groupKey:o.group,translationKey:t.key}),function(){a({groupKey:o.group}),n.done()}))}})}}}},{view:"toolbar",align:"center",elements:[{view:"text",placeholder:'Add new keys to this group. Across ";" will add a few.',id:e("add_keys")},{view:"button",type:"iconButton",label:"",icon:"plus",width:35,click:function(){if(void 0==o.group)return webix.alert({title:"Error",text:"You must select a group."});var t=$$(e("add_keys")).getValue();if(t.length<2)return webix.alert({title:"Error",width:300,text:"A minimum of 2 characters is required."});n.start(),webix.ajax().post(Route("trans.postAdd",{groupKey:o.group}),{keys:t},function(){$$(e("add_keys")).setValue(""),a({groupKey:o.group},!1),n.done()})}},{view:"button",type:"iconButton",label:"Publish translations",icon:"arrow-circle-o-up",click:function(){webix.confirm({title:"Publish translations",text:'Are you sure you want to publish the translations group "'+o.group+'"? This will overwrite existing language files.',type:"confirm",callback:function(e){e&&(n.start(),webix.ajax().post(Route("trans.postPublish",{groupKey:o.group}),function(){a({groupKey:o.group}),n.done()}))}})}}]}]}]}]}}}).call(t,i(0))},function(e,t,i){"use strict";(function(t){e.exports=function(e){var i=!1,n=!1,r=!1,o=function o(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];arguments.length>1&&void 0!==arguments[1]&&arguments[1]||$$(e("logViewerTable")).clearAll();var s={name:"logViewer"};a&&(n&&"prev"==a&&(s=Object.assign(s,n)),i&&"next"==a&&(s=Object.assign(s,i))),webix.ajax().get(Route("remote.get",s),function(a){a=JSON.parse(a),r=a,i=a.nextUrl,n=a.prevUrl,t.each(a.logs,function(t,i){$$(e("logViewerTable")).add(i)}),i&&o("next",!0)})};return o(!1,!0),{rows:[{view:"toolbar",id:e("controlBar"),align:"center",elements:[{view:"button",type:"iconButton",label:"Reload table",icon:"repeat",click:function(){o(!1,!1)}}]},{view:"datatable",select:!0,multiselect:!0,id:e("logViewerTable"),columns:[{id:"env",header:"Env"},{id:"level",header:"Level"},{id:"info",header:"Info",fillspace:!0},{id:"time",header:"Time",width:150}],type:{template:"{common.space()}"}}]}}}).call(t,i(0))},function(e,t,i){"use strict";(function(t){var i=[{id:"fa-500px",name:"fa-500px"},{id:"fa-adjust",name:"fa-adjust"},{id:"fa-adn",name:"fa-adn"},{id:"fa-align-center",name:"fa-align-center"},{id:"fa-align-justify",name:"fa-align-justify"},{id:"fa-align-left",name:"fa-align-left"},{id:"fa-align-right",name:"fa-align-right"},{id:"fa-amazon",name:"fa-amazon"},{id:"fa-ambulance",name:"fa-ambulance"},{id:"fa-american-sign-language-interpreting",name:"fa-american-sign-language-interpreting"},{id:"fa-anchor",name:"fa-anchor"},{id:"fa-android",name:"fa-android"},{id:"fa-angellist",name:"fa-angellist"},{id:"fa-angle-double-down",name:"fa-angle-double-down"},{id:"fa-angle-double-left",name:"fa-angle-double-left"},{id:"fa-angle-double-right",name:"fa-angle-double-right"},{id:"fa-angle-double-up",name:"fa-angle-double-up"},{id:"fa-angle-down",name:"fa-angle-down"},{id:"fa-angle-left",name:"fa-angle-left"},{id:"fa-angle-right",name:"fa-angle-right"},{id:"fa-angle-up",name:"fa-angle-up"},{id:"fa-apple",name:"fa-apple"},{id:"fa-archive",name:"fa-archive"},{id:"fa-area-chart",name:"fa-area-chart"},{id:"fa-arrow-circle-down",name:"fa-arrow-circle-down"},{id:"fa-arrow-circle-left",name:"fa-arrow-circle-left"},{id:"fa-arrow-circle-o-down",name:"fa-arrow-circle-o-down"},{id:"fa-arrow-circle-o-left",name:"fa-arrow-circle-o-left"},{id:"fa-arrow-circle-o-right",name:"fa-arrow-circle-o-right"},{id:"fa-arrow-circle-o-up",name:"fa-arrow-circle-o-up"},{id:"fa-arrow-circle-right",name:"fa-arrow-circle-right"},{id:"fa-arrow-circle-up",name:"fa-arrow-circle-up"},{id:"fa-arrow-down",name:"fa-arrow-down"},{id:"fa-arrow-left",name:"fa-arrow-left"},{id:"fa-arrow-right",name:"fa-arrow-right"},{id:"fa-arrow-up",name:"fa-arrow-up"},{id:"fa-arrows",name:"fa-arrows"},{id:"fa-arrows-alt",name:"fa-arrows-alt"},{id:"fa-arrows-h",name:"fa-arrows-h"},{id:"fa-arrows-v",name:"fa-arrows-v"},{id:"fa-asl-interpreting",name:"fa-asl-interpreting"},{id:"fa-assistive-listening-systems",name:"fa-assistive-listening-systems"},{id:"fa-asterisk",name:"fa-asterisk"},{id:"fa-at",name:"fa-at"},{id:"fa-audio-description",name:"fa-audio-description"},{id:"fa-automobile",name:"fa-automobile"},{id:"fa-backward",name:"fa-backward"},{id:"fa-balance-scale",name:"fa-balance-scale"},{id:"fa-ban",name:"fa-ban"},{id:"fa-bank",name:"fa-bank"},{id:"fa-bar-chart",name:"fa-bar-chart"},{id:"fa-bar-chart-o",name:"fa-bar-chart-o"},{id:"fa-barcode",name:"fa-barcode"},{id:"fa-bars",name:"fa-bars"},{id:"fa-battery-0",name:"fa-battery-0"},{id:"fa-battery-1",name:"fa-battery-1"},{id:"fa-battery-2",name:"fa-battery-2"},{id:"fa-battery-3",name:"fa-battery-3"},{id:"fa-battery-4",name:"fa-battery-4"},{id:"fa-battery-empty",name:"fa-battery-empty"},{id:"fa-battery-full",name:"fa-battery-full"},{id:"fa-battery-half",name:"fa-battery-half"},{id:"fa-battery-quarter",name:"fa-battery-quarter"},{id:"fa-battery-three-quarters",name:"fa-battery-three-quarters"},{id:"fa-bed",name:"fa-bed"},{id:"fa-beer",name:"fa-beer"},{id:"fa-behance",name:"fa-behance"},{id:"fa-behance-square",name:"fa-behance-square"},{id:"fa-bell",name:"fa-bell"},{id:"fa-bell-o",name:"fa-bell-o"},{id:"fa-bell-slash",name:"fa-bell-slash"},{id:"fa-bell-slash-o",name:"fa-bell-slash-o"},{id:"fa-bicycle",name:"fa-bicycle"},{id:"fa-binoculars",name:"fa-binoculars"},{id:"fa-birthday-cake",name:"fa-birthday-cake"},{id:"fa-bitbucket",name:"fa-bitbucket"},{id:"fa-bitbucket-square",name:"fa-bitbucket-square"},{id:"fa-bitcoin",name:"fa-bitcoin"},{id:"fa-black-tie",name:"fa-black-tie"},{id:"fa-blind",name:"fa-blind"},{id:"fa-bluetooth",name:"fa-bluetooth"},{id:"fa-bluetooth-b",name:"fa-bluetooth-b"},{id:"fa-bold",name:"fa-bold"},{id:"fa-bolt",name:"fa-bolt"},{id:"fa-bomb",name:"fa-bomb"},{id:"fa-book",name:"fa-book"},{id:"fa-bookmark",name:"fa-bookmark"},{id:"fa-bookmark-o",name:"fa-bookmark-o"},{id:"fa-braille",name:"fa-braille"},{id:"fa-briefcase",name:"fa-briefcase"},{id:"fa-btc",name:"fa-btc"},{id:"fa-bug",name:"fa-bug"},{id:"fa-building",name:"fa-building"},{id:"fa-building-o",name:"fa-building-o"},{id:"fa-bullhorn",name:"fa-bullhorn"},{id:"fa-bullseye",name:"fa-bullseye"},{id:"fa-bus",name:"fa-bus"},{id:"fa-buysellads",name:"fa-buysellads"},{id:"fa-cab",name:"fa-cab"},{id:"fa-calculator",name:"fa-calculator"},{id:"fa-calendar",name:"fa-calendar"},{id:"fa-calendar-check-o",name:"fa-calendar-check-o"},{id:"fa-calendar-minus-o",name:"fa-calendar-minus-o"},{id:"fa-calendar-o",name:"fa-calendar-o"},{id:"fa-calendar-plus-o",name:"fa-calendar-plus-o"},{id:"fa-calendar-times-o",name:"fa-calendar-times-o"},{id:"fa-camera",name:"fa-camera"},{id:"fa-camera-retro",name:"fa-camera-retro"},{id:"fa-car",name:"fa-car"},{id:"fa-caret-down",name:"fa-caret-down"},{id:"fa-caret-left",name:"fa-caret-left"},{id:"fa-caret-right",name:"fa-caret-right"},{id:"fa-caret-square-o-down",name:"fa-caret-square-o-down"},{id:"fa-caret-square-o-left",name:"fa-caret-square-o-left"},{id:"fa-caret-square-o-right",name:"fa-caret-square-o-right"},{id:"fa-caret-square-o-up",name:"fa-caret-square-o-up"},{id:"fa-caret-up",name:"fa-caret-up"},{id:"fa-cart-arrow-down",name:"fa-cart-arrow-down"},{id:"fa-cart-plus",name:"fa-cart-plus"},{id:"fa-cc",name:"fa-cc"},{id:"fa-cc-amex",name:"fa-cc-amex"},{id:"fa-cc-diners-club",name:"fa-cc-diners-club"},{id:"fa-cc-discover",name:"fa-cc-discover"},{id:"fa-cc-jcb",name:"fa-cc-jcb"},{id:"fa-cc-mastercard",name:"fa-cc-mastercard"},{id:"fa-cc-paypal",name:"fa-cc-paypal"},{id:"fa-cc-stripe",name:"fa-cc-stripe"},{id:"fa-cc-visa",name:"fa-cc-visa"},{id:"fa-certificate",name:"fa-certificate"},{id:"fa-chain",name:"fa-chain"},{id:"fa-chain-broken",name:"fa-chain-broken"},{id:"fa-check",name:"fa-check"},{id:"fa-check-circle",name:"fa-check-circle"},{id:"fa-check-circle-o",name:"fa-check-circle-o"},{id:"fa-check-square",name:"fa-check-square"},{id:"fa-check-square-o",name:"fa-check-square-o"},{id:"fa-chevron-circle-down",name:"fa-chevron-circle-down"},{id:"fa-chevron-circle-left",name:"fa-chevron-circle-left"},{id:"fa-chevron-circle-right",name:"fa-chevron-circle-right"},{id:"fa-chevron-circle-up",name:"fa-chevron-circle-up"},{id:"fa-chevron-down",name:"fa-chevron-down"},{id:"fa-chevron-left",name:"fa-chevron-left"},{id:"fa-chevron-right",name:"fa-chevron-right"},{id:"fa-chevron-up",name:"fa-chevron-up"},{id:"fa-child",name:"fa-child"},{id:"fa-chrome",name:"fa-chrome"},{id:"fa-circle",name:"fa-circle"},{id:"fa-circle-o",name:"fa-circle-o"},{id:"fa-circle-o-notch",name:"fa-circle-o-notch"},{id:"fa-circle-thin",name:"fa-circle-thin"},{id:"fa-clipboard",name:"fa-clipboard"},{id:"fa-clock-o",name:"fa-clock-o"},{id:"fa-clone",name:"fa-clone"},{id:"fa-close",name:"fa-close"},{id:"fa-cloud",name:"fa-cloud"},{id:"fa-cloud-download",name:"fa-cloud-download"},{id:"fa-cloud-upload",name:"fa-cloud-upload"},{id:"fa-cny",name:"fa-cny"},{id:"fa-code",name:"fa-code"},{id:"fa-code-fork",name:"fa-code-fork"},{id:"fa-codepen",name:"fa-codepen"},{id:"fa-codiepie",name:"fa-codiepie"},{id:"fa-coffee",name:"fa-coffee"},{id:"fa-cog",name:"fa-cog"},{id:"fa-cogs",name:"fa-cogs"},{id:"fa-columns",name:"fa-columns"},{id:"fa-comment",name:"fa-comment"},{id:"fa-comment-o",name:"fa-comment-o"},{id:"fa-commenting",name:"fa-commenting"},{id:"fa-commenting-o",name:"fa-commenting-o"},{id:"fa-comments",name:"fa-comments"},{id:"fa-comments-o",name:"fa-comments-o"},{id:"fa-compass",name:"fa-compass"},{id:"fa-compress",name:"fa-compress"},{id:"fa-connectdevelop",name:"fa-connectdevelop"},{id:"fa-contao",name:"fa-contao"},{id:"fa-copy",name:"fa-copy"},{id:"fa-copyright",name:"fa-copyright"},{id:"fa-creative-commons",name:"fa-creative-commons"},{id:"fa-credit-card",name:"fa-credit-card"},{id:"fa-credit-card-alt",name:"fa-credit-card-alt"},{id:"fa-crop",name:"fa-crop"},{id:"fa-crosshairs",name:"fa-crosshairs"},{id:"fa-css3",name:"fa-css3"},{id:"fa-cube",name:"fa-cube"},{id:"fa-cubes",name:"fa-cubes"},{id:"fa-cut",name:"fa-cut"},{id:"fa-cutlery",name:"fa-cutlery"},{id:"fa-dashboard",name:"fa-dashboard"},{id:"fa-dashcube",name:"fa-dashcube"},{id:"fa-database",name:"fa-database"},{id:"fa-deaf",name:"fa-deaf"},{id:"fa-deafness",name:"fa-deafness"},{id:"fa-dedent",name:"fa-dedent"},{id:"fa-delicious",name:"fa-delicious"},{id:"fa-desktop",name:"fa-desktop"},{id:"fa-deviantart",name:"fa-deviantart"},{id:"fa-diamond",name:"fa-diamond"},{id:"fa-digg",name:"fa-digg"},{id:"fa-dollar",name:"fa-dollar"},{id:"fa-dot-circle-o",name:"fa-dot-circle-o"},{id:"fa-download",name:"fa-download"},{id:"fa-dribbble",name:"fa-dribbble"},{id:"fa-dropbox",name:"fa-dropbox"},{id:"fa-drupal",name:"fa-drupal"},{id:"fa-edge",name:"fa-edge"},{id:"fa-edit",name:"fa-edit"},{id:"fa-eject",name:"fa-eject"},{id:"fa-ellipsis-h",name:"fa-ellipsis-h"},{id:"fa-ellipsis-v",name:"fa-ellipsis-v"},{id:"fa-empire",name:"fa-empire"},{id:"fa-envelope",name:"fa-envelope"},{id:"fa-envelope-o",name:"fa-envelope-o"},{id:"fa-envelope-square",name:"fa-envelope-square"},{id:"fa-envira",name:"fa-envira"},{id:"fa-eraser",name:"fa-eraser"},{id:"fa-eur",name:"fa-eur"},{id:"fa-euro",name:"fa-euro"},{id:"fa-exchange",name:"fa-exchange"},{id:"fa-exclamation",name:"fa-exclamation"},{id:"fa-exclamation-circle",name:"fa-exclamation-circle"},{id:"fa-exclamation-triangle",name:"fa-exclamation-triangle"},{id:"fa-expand",name:"fa-expand"},{id:"fa-expeditedssl",name:"fa-expeditedssl"},{id:"fa-external-link",name:"fa-external-link"},{id:"fa-external-link-square",name:"fa-external-link-square"},{id:"fa-eye",name:"fa-eye"},{id:"fa-eye-slash",name:"fa-eye-slash"},{id:"fa-eyedropper",name:"fa-eyedropper"},{id:"fa-fa",name:"fa-fa"},{id:"fa-facebook",name:"fa-facebook"},{id:"fa-facebook-f",name:"fa-facebook-f"},{id:"fa-facebook-official",name:"fa-facebook-official"},{id:"fa-facebook-square",name:"fa-facebook-square"},{id:"fa-fast-backward",name:"fa-fast-backward"},{id:"fa-fast-forward",name:"fa-fast-forward"},{id:"fa-fax",name:"fa-fax"},{id:"fa-feed",name:"fa-feed"},{id:"fa-female",name:"fa-female"},{id:"fa-fighter-jet",name:"fa-fighter-jet"},{id:"fa-file",name:"fa-file"},{id:"fa-file-archive-o",name:"fa-file-archive-o"},{id:"fa-file-audio-o",name:"fa-file-audio-o"},{id:"fa-file-code-o",name:"fa-file-code-o"},{id:"fa-file-excel-o",name:"fa-file-excel-o"},{id:"fa-file-image-o",name:"fa-file-image-o"},{id:"fa-file-movie-o",name:"fa-file-movie-o"},{id:"fa-file-o",name:"fa-file-o"},{id:"fa-file-pdf-o",name:"fa-file-pdf-o"},{id:"fa-file-photo-o",name:"fa-file-photo-o"},{id:"fa-file-picture-o",name:"fa-file-picture-o"},{id:"fa-file-powerpoint-o",name:"fa-file-powerpoint-o"},{id:"fa-file-sound-o",name:"fa-file-sound-o"},{id:"fa-file-text",name:"fa-file-text"},{id:"fa-file-text-o",name:"fa-file-text-o"},{id:"fa-file-video-o",name:"fa-file-video-o"},{id:"fa-file-word-o",name:"fa-file-word-o"},{id:"fa-file-zip-o",name:"fa-file-zip-o"},{id:"fa-files-o",name:"fa-files-o"},{id:"fa-film",name:"fa-film"},{id:"fa-filter",name:"fa-filter"},{id:"fa-fire",name:"fa-fire"},{id:"fa-fire-extinguisher",name:"fa-fire-extinguisher"},{id:"fa-firefox",name:"fa-firefox"},{id:"fa-first-order",name:"fa-first-order"},{id:"fa-flag",name:"fa-flag"},{id:"fa-flag-checkered",name:"fa-flag-checkered"},{id:"fa-flag-o",name:"fa-flag-o"},{id:"fa-flash",name:"fa-flash"},{id:"fa-flask",name:"fa-flask"},{id:"fa-flickr",name:"fa-flickr"},{id:"fa-floppy-o",name:"fa-floppy-o"},{id:"fa-folder",name:"fa-folder"},{id:"fa-folder-o",name:"fa-folder-o"},{id:"fa-folder-open",name:"fa-folder-open"},{id:"fa-folder-open-o",name:"fa-folder-open-o"},{id:"fa-font",name:"fa-font"},{id:"fa-font-awesome",name:"fa-font-awesome"},{id:"fa-fonticons",name:"fa-fonticons"},{id:"fa-fort-awesome",name:"fa-fort-awesome"},{id:"fa-forumbee",name:"fa-forumbee"},{id:"fa-forward",name:"fa-forward"},{id:"fa-foursquare",name:"fa-foursquare"},{id:"fa-frown-o",name:"fa-frown-o"},{id:"fa-futbol-o",name:"fa-futbol-o"},{id:"fa-gamepad",name:"fa-gamepad"},{id:"fa-gavel",name:"fa-gavel"},{id:"fa-gbp",name:"fa-gbp"},{id:"fa-ge",name:"fa-ge"},{id:"fa-gear",name:"fa-gear"},{id:"fa-gears",name:"fa-gears"},{id:"fa-genderless",name:"fa-genderless"},{id:"fa-get-pocket",name:"fa-get-pocket"},{id:"fa-gg",name:"fa-gg"},{id:"fa-gg-circle",name:"fa-gg-circle"},{id:"fa-gift",name:"fa-gift"},{id:"fa-git",name:"fa-git"},{id:"fa-git-square",name:"fa-git-square"},{id:"fa-github",name:"fa-github"},{id:"fa-github-alt",name:"fa-github-alt"},{id:"fa-github-square",name:"fa-github-square"},{id:"fa-gitlab",name:"fa-gitlab"},{id:"fa-gittip",name:"fa-gittip"},{id:"fa-glass",name:"fa-glass"},{id:"fa-glide",name:"fa-glide"},{id:"fa-glide-g",name:"fa-glide-g"},{id:"fa-globe",name:"fa-globe"},{id:"fa-google",name:"fa-google"},{id:"fa-google-plus",name:"fa-google-plus"},{id:"fa-google-plus-circle",name:"fa-google-plus-circle"},{id:"fa-google-plus-official",name:"fa-google-plus-official"},{id:"fa-google-plus-square",name:"fa-google-plus-square"},{id:"fa-google-wallet",name:"fa-google-wallet"},{id:"fa-graduation-cap",name:"fa-graduation-cap"},{id:"fa-gratipay",name:"fa-gratipay"},{id:"fa-group",name:"fa-group"},{id:"fa-h-square",name:"fa-h-square"},{id:"fa-hacker-news",name:"fa-hacker-news"},{id:"fa-hand-grab-o",name:"fa-hand-grab-o"},{id:"fa-hand-lizard-o",name:"fa-hand-lizard-o"},{id:"fa-hand-o-down",name:"fa-hand-o-down"},{id:"fa-hand-o-left",name:"fa-hand-o-left"},{id:"fa-hand-o-right",name:"fa-hand-o-right"},{id:"fa-hand-o-up",name:"fa-hand-o-up"},{id:"fa-hand-paper-o",name:"fa-hand-paper-o"},{id:"fa-hand-peace-o",name:"fa-hand-peace-o"},{id:"fa-hand-pointer-o",name:"fa-hand-pointer-o"},{id:"fa-hand-rock-o",name:"fa-hand-rock-o"},{id:"fa-hand-scissors-o",name:"fa-hand-scissors-o"},{id:"fa-hand-spock-o",name:"fa-hand-spock-o"},{id:"fa-hand-stop-o",name:"fa-hand-stop-o"},{id:"fa-hard-of-hearing",name:"fa-hard-of-hearing"},{id:"fa-hashtag",name:"fa-hashtag"},{id:"fa-hdd-o",name:"fa-hdd-o"},{id:"fa-header",name:"fa-header"},{id:"fa-headphones",name:"fa-headphones"},{id:"fa-heart",name:"fa-heart"},{id:"fa-heart-o",name:"fa-heart-o"},{id:"fa-heartbeat",name:"fa-heartbeat"},{id:"fa-history",name:"fa-history"},{id:"fa-home",name:"fa-home"},{id:"fa-hospital-o",name:"fa-hospital-o"},{id:"fa-hotel",name:"fa-hotel"},{id:"fa-hourglass",name:"fa-hourglass"},{id:"fa-hourglass-1",name:"fa-hourglass-1"},{id:"fa-hourglass-2",name:"fa-hourglass-2"},{id:"fa-hourglass-3",name:"fa-hourglass-3"},{id:"fa-hourglass-end",name:"fa-hourglass-end"},{id:"fa-hourglass-half",name:"fa-hourglass-half"},{id:"fa-hourglass-o",name:"fa-hourglass-o"},{id:"fa-hourglass-start",name:"fa-hourglass-start"},{id:"fa-houzz",name:"fa-houzz"},{id:"fa-html5",name:"fa-html5"},{id:"fa-i-cursor",name:"fa-i-cursor"},{id:"fa-ils",name:"fa-ils"},{id:"fa-image",name:"fa-image"},{id:"fa-inbox",name:"fa-inbox"},{id:"fa-indent",name:"fa-indent"},{id:"fa-industry",name:"fa-industry"},{id:"fa-info",name:"fa-info"},{id:"fa-info-circle",name:"fa-info-circle"},{id:"fa-inr",name:"fa-inr"},{id:"fa-instagram",name:"fa-instagram"},{id:"fa-institution",name:"fa-institution"},{id:"fa-internet-explorer",name:"fa-internet-explorer"},{id:"fa-intersex",name:"fa-intersex"},{id:"fa-ioxhost",name:"fa-ioxhost"},{id:"fa-italic",name:"fa-italic"},{id:"fa-joomla",name:"fa-joomla"},{id:"fa-jpy",name:"fa-jpy"},{id:"fa-jsfiddle",name:"fa-jsfiddle"},{id:"fa-key",name:"fa-key"},{id:"fa-keyboard-o",name:"fa-keyboard-o"},{id:"fa-krw",name:"fa-krw"},{id:"fa-language",name:"fa-language"},{id:"fa-laptop",name:"fa-laptop"},{id:"fa-lastfm",name:"fa-lastfm"},{id:"fa-lastfm-square",name:"fa-lastfm-square"},{id:"fa-leaf",name:"fa-leaf"},{id:"fa-leanpub",name:"fa-leanpub"},{id:"fa-legal",name:"fa-legal"},{id:"fa-lemon-o",name:"fa-lemon-o"},{id:"fa-level-down",name:"fa-level-down"},{id:"fa-level-up",name:"fa-level-up"},{id:"fa-life-bouy",name:"fa-life-bouy"},{id:"fa-life-buoy",name:"fa-life-buoy"},{id:"fa-life-ring",name:"fa-life-ring"},{id:"fa-life-saver",name:"fa-life-saver"},{id:"fa-lightbulb-o",name:"fa-lightbulb-o"},{id:"fa-line-chart",name:"fa-line-chart"},{id:"fa-link",name:"fa-link"},{id:"fa-linkedin",name:"fa-linkedin"},{id:"fa-linkedin-square",name:"fa-linkedin-square"},{id:"fa-linux",name:"fa-linux"},{id:"fa-list",name:"fa-list"},{id:"fa-list-alt",name:"fa-list-alt"},{id:"fa-list-ol",name:"fa-list-ol"},{id:"fa-list-ul",name:"fa-list-ul"},{id:"fa-location-arrow",name:"fa-location-arrow"},{id:"fa-lock",name:"fa-lock"},{id:"fa-long-arrow-down",name:"fa-long-arrow-down"},{id:"fa-long-arrow-left",name:"fa-long-arrow-left"},{id:"fa-long-arrow-right",name:"fa-long-arrow-right"},{id:"fa-long-arrow-up",name:"fa-long-arrow-up"},{id:"fa-low-vision",name:"fa-low-vision"},{id:"fa-magic",name:"fa-magic"},{id:"fa-magnet",name:"fa-magnet"},{id:"fa-mail-forward",name:"fa-mail-forward"},{id:"fa-mail-reply",name:"fa-mail-reply"},{id:"fa-mail-reply-all",name:"fa-mail-reply-all"},{id:"fa-male",name:"fa-male"},{id:"fa-map",name:"fa-map"},{id:"fa-map-marker",name:"fa-map-marker"},{id:"fa-map-o",name:"fa-map-o"},{id:"fa-map-pin",name:"fa-map-pin"},{id:"fa-map-signs",name:"fa-map-signs"},{id:"fa-mars",name:"fa-mars"},{id:"fa-mars-double",name:"fa-mars-double"},{id:"fa-mars-stroke",name:"fa-mars-stroke"},{id:"fa-mars-stroke-h",name:"fa-mars-stroke-h"},{id:"fa-mars-stroke-v",name:"fa-mars-stroke-v"},{id:"fa-maxcdn",name:"fa-maxcdn"},{id:"fa-meanpath",name:"fa-meanpath"},{id:"fa-medium",name:"fa-medium"},{id:"fa-medkit",name:"fa-medkit"},{id:"fa-meh-o",name:"fa-meh-o"},{id:"fa-mercury",name:"fa-mercury"},{id:"fa-microphone",name:"fa-microphone"},{id:"fa-microphone-slash",name:"fa-microphone-slash"},{id:"fa-minus",name:"fa-minus"},{id:"fa-minus-circle",name:"fa-minus-circle"},{id:"fa-minus-square",name:"fa-minus-square"},{id:"fa-minus-square-o",name:"fa-minus-square-o"},{id:"fa-mixcloud",name:"fa-mixcloud"},{id:"fa-mobile",name:"fa-mobile"},{id:"fa-mobile-phone",name:"fa-mobile-phone"},{id:"fa-modx",name:"fa-modx"},{id:"fa-money",name:"fa-money"},{id:"fa-moon-o",name:"fa-moon-o"},{id:"fa-mortar-board",name:"fa-mortar-board"},{id:"fa-motorcycle",name:"fa-motorcycle"},{id:"fa-mouse-pointer",name:"fa-mouse-pointer"},{id:"fa-music",name:"fa-music"},{id:"fa-navicon",name:"fa-navicon"},{id:"fa-neuter",name:"fa-neuter"},{id:"fa-newspaper-o",name:"fa-newspaper-o"},{id:"fa-object-group",name:"fa-object-group"},{id:"fa-object-ungroup",name:"fa-object-ungroup"},{id:"fa-odnoklassniki",name:"fa-odnoklassniki"},{id:"fa-odnoklassniki-square",name:"fa-odnoklassniki-square"},{id:"fa-opencart",name:"fa-opencart"},{id:"fa-openid",name:"fa-openid"},{id:"fa-opera",name:"fa-opera"},{id:"fa-optin-monster",name:"fa-optin-monster"},{id:"fa-outdent",name:"fa-outdent"},{id:"fa-pagelines",name:"fa-pagelines"},{id:"fa-paint-brush",name:"fa-paint-brush"},{id:"fa-paper-plane",name:"fa-paper-plane"},{id:"fa-paper-plane-o",name:"fa-paper-plane-o"},{id:"fa-paperclip",name:"fa-paperclip"},{id:"fa-paragraph",name:"fa-paragraph"},{id:"fa-paste",name:"fa-paste"},{id:"fa-pause",name:"fa-pause"},{id:"fa-pause-circle",name:"fa-pause-circle"},{id:"fa-pause-circle-o",name:"fa-pause-circle-o"},{id:"fa-paw",name:"fa-paw"},{id:"fa-paypal",name:"fa-paypal"},{id:"fa-pencil",name:"fa-pencil"},{id:"fa-pencil-square",name:"fa-pencil-square"},{id:"fa-pencil-square-o",name:"fa-pencil-square-o"},{id:"fa-percent",name:"fa-percent"},{id:"fa-phone",name:"fa-phone"},{id:"fa-phone-square",name:"fa-phone-square"},{id:"fa-photo",name:"fa-photo"},{id:"fa-picture-o",name:"fa-picture-o"},{id:"fa-pie-chart",name:"fa-pie-chart"},{id:"fa-pied-piper",name:"fa-pied-piper"},{id:"fa-pied-piper-alt",name:"fa-pied-piper-alt"},{id:"fa-pied-piper-pp",name:"fa-pied-piper-pp"},{id:"fa-pinterest",name:"fa-pinterest"},{id:"fa-pinterest-p",name:"fa-pinterest-p"},{id:"fa-pinterest-square",name:"fa-pinterest-square"},{id:"fa-plane",name:"fa-plane"},{id:"fa-play",name:"fa-play"},{id:"fa-play-circle",name:"fa-play-circle"},{id:"fa-play-circle-o",name:"fa-play-circle-o"},{id:"fa-plug",name:"fa-plug"},{id:"fa-plus",name:"fa-plus"},{id:"fa-plus-circle",name:"fa-plus-circle"},{id:"fa-plus-square",name:"fa-plus-square"},{id:"fa-plus-square-o",name:"fa-plus-square-o"},{id:"fa-power-off",name:"fa-power-off"},{id:"fa-print",name:"fa-print"},{id:"fa-product-hunt",name:"fa-product-hunt"},{id:"fa-puzzle-piece",name:"fa-puzzle-piece"},{id:"fa-qq",name:"fa-qq"},{id:"fa-qrcode",name:"fa-qrcode"},{id:"fa-question",name:"fa-question"},{id:"fa-question-circle",name:"fa-question-circle"},{id:"fa-question-circle-o",name:"fa-question-circle-o"},{id:"fa-quote-left",name:"fa-quote-left"},{id:"fa-quote-right",name:"fa-quote-right"},{id:"fa-ra",name:"fa-ra"},{id:"fa-random",name:"fa-random"},{id:"fa-rebel",name:"fa-rebel"},{id:"fa-recycle",name:"fa-recycle"},{id:"fa-reddit",name:"fa-reddit"},{id:"fa-reddit-alien",name:"fa-reddit-alien"},{id:"fa-reddit-square",name:"fa-reddit-square"},{id:"fa-refresh",name:"fa-refresh"},{id:"fa-registered",name:"fa-registered"},{id:"fa-remove",name:"fa-remove"},{id:"fa-renren",name:"fa-renren"},{id:"fa-reorder",name:"fa-reorder"},{id:"fa-repeat",name:"fa-repeat"},{id:"fa-reply",name:"fa-reply"},{id:"fa-reply-all",name:"fa-reply-all"},{id:"fa-resistance",name:"fa-resistance"},{id:"fa-retweet",name:"fa-retweet"},{id:"fa-rmb",name:"fa-rmb"},{id:"fa-road",name:"fa-road"},{id:"fa-rocket",name:"fa-rocket"},{id:"fa-rotate-left",name:"fa-rotate-left"},{id:"fa-rotate-right",name:"fa-rotate-right"},{id:"fa-rouble",name:"fa-rouble"},{id:"fa-rss",name:"fa-rss"},{id:"fa-rss-square",name:"fa-rss-square"},{id:"fa-rub",name:"fa-rub"},{id:"fa-ruble",name:"fa-ruble"},{id:"fa-rupee",name:"fa-rupee"},{id:"fa-safari",name:"fa-safari"},{id:"fa-save",name:"fa-save"},{id:"fa-scissors",name:"fa-scissors"},{id:"fa-scribd",name:"fa-scribd"},{id:"fa-search",name:"fa-search"},{id:"fa-search-minus",name:"fa-search-minus"},{id:"fa-search-plus",name:"fa-search-plus"},{id:"fa-sellsy",name:"fa-sellsy"},{id:"fa-send",name:"fa-send"},{id:"fa-send-o",name:"fa-send-o"},{id:"fa-server",name:"fa-server"},{id:"fa-share",name:"fa-share"},{id:"fa-share-alt",name:"fa-share-alt"},{id:"fa-share-alt-square",name:"fa-share-alt-square"},{id:"fa-share-square",name:"fa-share-square"},{id:"fa-share-square-o",name:"fa-share-square-o"},{id:"fa-shekel",name:"fa-shekel"},{id:"fa-sheqel",name:"fa-sheqel"},{id:"fa-shield",name:"fa-shield"},{id:"fa-ship",name:"fa-ship"},{id:"fa-shirtsinbulk",name:"fa-shirtsinbulk"},{id:"fa-shopping-bag",name:"fa-shopping-bag"},{id:"fa-shopping-basket",name:"fa-shopping-basket"},{id:"fa-shopping-cart",name:"fa-shopping-cart"},{id:"fa-sign-in",name:"fa-sign-in"},{id:"fa-sign-language",name:"fa-sign-language"},{id:"fa-sign-out",name:"fa-sign-out"},{id:"fa-signal",name:"fa-signal"},{id:"fa-signing",name:"fa-signing"},{id:"fa-simplybuilt",name:"fa-simplybuilt"},{id:"fa-sitemap",name:"fa-sitemap"},{id:"fa-skyatlas",name:"fa-skyatlas"},{id:"fa-skype",name:"fa-skype"},{id:"fa-slack",name:"fa-slack"},{id:"fa-sliders",name:"fa-sliders"},{id:"fa-slideshare",name:"fa-slideshare"},{id:"fa-smile-o",name:"fa-smile-o"},{id:"fa-snapchat",name:"fa-snapchat"},{id:"fa-snapchat-ghost",name:"fa-snapchat-ghost"},{id:"fa-snapchat-square",name:"fa-snapchat-square"},{id:"fa-soccer-ball-o",name:"fa-soccer-ball-o"},{id:"fa-sort",name:"fa-sort"},{id:"fa-sort-alpha-asc",name:"fa-sort-alpha-asc"},{id:"fa-sort-alpha-desc",name:"fa-sort-alpha-desc"},{id:"fa-sort-amount-asc",name:"fa-sort-amount-asc"},{id:"fa-sort-amount-desc",name:"fa-sort-amount-desc"},{id:"fa-sort-asc",name:"fa-sort-asc"},{id:"fa-sort-desc",name:"fa-sort-desc"},{id:"fa-sort-down",name:"fa-sort-down"},{id:"fa-sort-numeric-asc",name:"fa-sort-numeric-asc"},{id:"fa-sort-numeric-desc",name:"fa-sort-numeric-desc"},{id:"fa-sort-up",name:"fa-sort-up"},{id:"fa-soundcloud",name:"fa-soundcloud"},{id:"fa-space-shuttle",name:"fa-space-shuttle"},{id:"fa-spinner",name:"fa-spinner"},{id:"fa-spoon",name:"fa-spoon"},{id:"fa-spotify",name:"fa-spotify"},{id:"fa-square",name:"fa-square"},{id:"fa-square-o",name:"fa-square-o"},{id:"fa-stack-exchange",name:"fa-stack-exchange"},{id:"fa-stack-overflow",name:"fa-stack-overflow"},{id:"fa-star",name:"fa-star"},{id:"fa-star-half",name:"fa-star-half"},{id:"fa-star-half-empty",name:"fa-star-half-empty"},{id:"fa-star-half-full",name:"fa-star-half-full"},{id:"fa-star-half-o",name:"fa-star-half-o"},{id:"fa-star-o",name:"fa-star-o"},{id:"fa-steam",name:"fa-steam"},{id:"fa-steam-square",name:"fa-steam-square"},{id:"fa-step-backward",name:"fa-step-backward"},{id:"fa-step-forward",name:"fa-step-forward"},{id:"fa-stethoscope",name:"fa-stethoscope"},{id:"fa-sticky-note",name:"fa-sticky-note"},{id:"fa-sticky-note-o",name:"fa-sticky-note-o"},{id:"fa-stop",name:"fa-stop"},{id:"fa-stop-circle",name:"fa-stop-circle"},{id:"fa-stop-circle-o",name:"fa-stop-circle-o"},{id:"fa-street-view",name:"fa-street-view"},{id:"fa-strikethrough",name:"fa-strikethrough"},{id:"fa-stumbleupon",name:"fa-stumbleupon"},{id:"fa-stumbleupon-circle",name:"fa-stumbleupon-circle"},{id:"fa-subscript",name:"fa-subscript"},{id:"fa-subway",name:"fa-subway"},{id:"fa-suitcase",name:"fa-suitcase"},{id:"fa-sun-o",name:"fa-sun-o"},{id:"fa-superscript",name:"fa-superscript"},{id:"fa-support",name:"fa-support"},{id:"fa-table",name:"fa-table"},{id:"fa-tablet",name:"fa-tablet"},{id:"fa-tachometer",name:"fa-tachometer"},{id:"fa-tag",name:"fa-tag"},{id:"fa-tags",name:"fa-tags"},{id:"fa-tasks",name:"fa-tasks"},{id:"fa-taxi",name:"fa-taxi"},{id:"fa-television",name:"fa-television"},{id:"fa-tencent-weibo",name:"fa-tencent-weibo"},{id:"fa-terminal",name:"fa-terminal"},{id:"fa-text-height",name:"fa-text-height"},{id:"fa-text-width",name:"fa-text-width"},{id:"fa-th",name:"fa-th"},{id:"fa-th-large",name:"fa-th-large"},{id:"fa-th-list",name:"fa-th-list"},{id:"fa-themeisle",name:"fa-themeisle"},{id:"fa-thumb-tack",name:"fa-thumb-tack"},{id:"fa-thumbs-down",name:"fa-thumbs-down"},{id:"fa-thumbs-o-down",name:"fa-thumbs-o-down"},{id:"fa-thumbs-o-up",name:"fa-thumbs-o-up"},{id:"fa-thumbs-up",name:"fa-thumbs-up"},{id:"fa-ticket",name:"fa-ticket"},{id:"fa-times",name:"fa-times"},{id:"fa-times-circle",name:"fa-times-circle"},{id:"fa-times-circle-o",name:"fa-times-circle-o"},{id:"fa-tint",name:"fa-tint"},{id:"fa-toggle-down",name:"fa-toggle-down"},{id:"fa-toggle-left",name:"fa-toggle-left"},{id:"fa-toggle-off",name:"fa-toggle-off"},{id:"fa-toggle-on",name:"fa-toggle-on"},{id:"fa-toggle-right",name:"fa-toggle-right"},{id:"fa-toggle-up",name:"fa-toggle-up"},{id:"fa-trademark",name:"fa-trademark"},{id:"fa-train",name:"fa-train"},{id:"fa-transgender",name:"fa-transgender"},{id:"fa-transgender-alt",name:"fa-transgender-alt"},{id:"fa-trash",name:"fa-trash"},{id:"fa-trash-o",name:"fa-trash-o"},{id:"fa-tree",name:"fa-tree"},{id:"fa-trello",name:"fa-trello"},{id:"fa-tripadvisor",name:"fa-tripadvisor"},{id:"fa-trophy",name:"fa-trophy"},{id:"fa-truck",name:"fa-truck"},{id:"fa-try",name:"fa-try"},{id:"fa-tty",name:"fa-tty"},{id:"fa-tumblr",name:"fa-tumblr"},{id:"fa-tumblr-square",name:"fa-tumblr-square"},{id:"fa-turkish-lira",name:"fa-turkish-lira"},{id:"fa-tv",name:"fa-tv"},{id:"fa-twitch",name:"fa-twitch"},{id:"fa-twitter",name:"fa-twitter"},{id:"fa-twitter-square",name:"fa-twitter-square"},{id:"fa-umbrella",name:"fa-umbrella"},{id:"fa-underline",name:"fa-underline"},{id:"fa-undo",name:"fa-undo"},{id:"fa-universal-access",name:"fa-universal-access"},{id:"fa-university",name:"fa-university"},{id:"fa-unlink",name:"fa-unlink"},{id:"fa-unlock",name:"fa-unlock"},{id:"fa-unlock-alt",name:"fa-unlock-alt"},{id:"fa-unsorted",name:"fa-unsorted"},{id:"fa-upload",name:"fa-upload"},{id:"fa-usb",name:"fa-usb"},{id:"fa-usd",name:"fa-usd"},{id:"fa-user",name:"fa-user"},{id:"fa-user-md",name:"fa-user-md"},{id:"fa-user-plus",name:"fa-user-plus"},{id:"fa-user-secret",name:"fa-user-secret"},{id:"fa-user-times",name:"fa-user-times"},{id:"fa-users",name:"fa-users"},{id:"fa-venus",name:"fa-venus"},{id:"fa-venus-double",name:"fa-venus-double"},{id:"fa-venus-mars",name:"fa-venus-mars"},{id:"fa-viacoin",name:"fa-viacoin"},{id:"fa-viadeo",name:"fa-viadeo"},{id:"fa-viadeo-square",name:"fa-viadeo-square"},{id:"fa-video-camera",name:"fa-video-camera"},{id:"fa-vimeo",name:"fa-vimeo"},{id:"fa-vimeo-square",name:"fa-vimeo-square"},{id:"fa-vine",name:"fa-vine"},{id:"fa-vk",name:"fa-vk"},{id:"fa-volume-control-phone",name:"fa-volume-control-phone"},{id:"fa-volume-down",name:"fa-volume-down"},{id:"fa-volume-off",name:"fa-volume-off"},{id:"fa-volume-up",name:"fa-volume-up"},{id:"fa-warning",name:"fa-warning"},{id:"fa-wechat",name:"fa-wechat"},{id:"fa-weibo",name:"fa-weibo"},{id:"fa-weixin",name:"fa-weixin"},{id:"fa-whatsapp",name:"fa-whatsapp"},{id:"fa-wheelchair",name:"fa-wheelchair"},{id:"fa-wheelchair-alt",name:"fa-wheelchair-alt"},{id:"fa-wifi",name:"fa-wifi"},{id:"fa-wikipedia-w",name:"fa-wikipedia-w"},{id:"fa-windows",name:"fa-windows"},{id:"fa-won",name:"fa-won"},{id:"fa-wordpress",name:"fa-wordpress"},{id:"fa-wpbeginner",name:"fa-wpbeginner"},{id:"fa-wpforms",name:"fa-wpforms"},{id:"fa-wrench",name:"fa-wrench"},{id:"fa-xing",name:"fa-xing"},{id:"fa-xing-square",name:"fa-xing-square"},{id:"fa-y-combinator",name:"fa-y-combinator"},{id:"fa-y-combinator-square",name:"fa-y-combinator-square"},{id:"fa-yahoo",name:"fa-yahoo"},{id:"fa-yc",name:"fa-yc"},{id:"fa-yc-square",name:"fa-yc-square"},{id:"fa-yelp",name:"fa-yelp"},{id:"fa-yen",name:"fa-yen"},{id:"fa-yoast",name:"fa-yoast"},{id:"fa-youtube",name:"fa-youtube"},{id:"fa-youtube-play",name:"fa-youtube-play"},{id:"fa-youtube-square",name:"fa-youtube-square"}];e.exports=function(e,n){return{cols:[{rows:[{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",label:"Open all",icon:"plus-square",click:function(){$$(e("menuList")).openAll()}},{view:"button",type:"iconButton",label:"Close all",icon:"minus-square",click:function(){$$(e("menuList")).closeAll()}},{view:"button",type:"iconButton",label:"Reload list",icon:"refresh",click:function(){$$(e("menuList")).clearAll(),$$(e("menuList")).load(Route("remote.get",{name:"menu"}))}},{view:"button",type:"danger",label:"Remove selected",click:function(){var t=$$(e("menuList")).getSelectedId();if(!t)return webix.alert("Please select a menu item that you want to remove!");var i=$$(e("menuList")).getItem(t);webix.confirm({title:"Close",text:'Delete menu item "'+i.title+'"?',type:"confirm-error",callback:function(t){webix.ajax().del(Route("remote.delete",{name:"menu"}),{id:i.id},function(){$$(e("menuList")).remove(i.id),reloadTopMenu()})}})}}]},{view:"treetable",select:!0,id:e("menuList"),drag:!0,type:{awesome:function(e){return'<i class="fa '+e.icon+'"></i>'},spaces:function(e){return'<div class="webix_tree_none" style="width: '+(1!=e.$level?15*e.$level:0)+'px;"></div>'}},columns:[{id:"id",header:"",template:"#id#",width:40},{id:"order",header:"#",width:40},{id:"title",header:"Title",template:" {common.spaces()} {common.icon()} {common.awesome()} #title#",fillspace:!0},{id:"uri",header:"Action",fillspace:!0},{id:"type",header:"Page type",width:70},{id:"hotkey",header:"Hot key",width:70}],url:Route("remote.get",{name:"menu"}),on:{onAfterSelect:function(t){webix.ajax().get(Route("remote.get",{name:"menu"}),{id:t.id},function(t){var i=JSON.parse(t);$$(e("menuForm")).setValues(i)}),$$(e("editBtn")).enable()},onAfterDrop:function(t,i){webix.ajax().post(Route("remote.update",{name:"menu"}),{id:t.start,order:t.index,parent_id:t.parent,noRole:!0},function(){reloadTopMenu(),$$(e("menuList")).load(Route("remote.get",{name:"menu"}))})}}}]},{view:"resizer"},{rows:[{view:"toolbar",id:e("mybar"),align:"center",elements:[{view:"button",type:"iconButton",label:"Add",icon:"plus",click:function(){if(!$$(e("menuForm")).validate())return webix.message({type:"error",text:"Form data is invalid"});var t=$$(e("menuForm")).getValues();webix.ajax().post(Route("remote.insert",{name:"menu"}),t,function(){$$(e("menuList")).clearAll(),$$(e("menuList")).load(Route("remote.get",{name:"menu"})),reloadTopMenu(),webix.message("Saved!","info")}),$$(e("menuForm")).clear(),$$(e("menuForm")).setValues({roles:""})}},{view:"button",type:"iconButton",label:"Clear",icon:"repeat",click:"$$('"+e("menuForm")+"').clear();$$('"+e("menuForm")+"').setValues({roles:''});$$('"+e("menuList")+"').unselectAll();$$('"+e("editBtn")+"').disable();"},{view:"button",disabled:!0,id:e("editBtn"),type:"iconButton",label:"Edit",icon:"pencil",click:function(){var t=$$(e("menuForm")).getValues();return void 0==t.id?webix.message("No select item","error"):$$(e("menuForm")).validate()?(webix.ajax().post(Route("remote.update",{name:"menu"}),t,function(){$$(e("menuList")).clearAll(),$$(e("menuList")).load(Route("remote.get",{name:"menu"})),webix.message("Saved!","info"),$$(e("menuList")).unselectAll(),$$(e("menuForm")).clear(),$$(e("menuForm")).setValues({roles:""}),reloadTopMenu()}),void $$(e("editBtn")).disable()):webix.message({type:"error",text:"Form data is invalid"})}}]},{view:"form",id:e("menuForm"),elements:[{view:"richselect",name:"parent_id",label:"Parent",options:window.menuItems},{view:"text",name:"title",placeholder:"Title",label:"Title",align:"center"},{view:"text",name:"uri",placeholder:"Action",label:"Action",align:"center"},{view:"text",name:"type",placeholder:"Page type",label:"Type",align:"center"},{view:"text",name:"hotkey",placeholder:"Hot key",label:"Hot key",align:"center"},{cols:[{view:"combo",name:"icon",id:e("iconList"),label:"Icon",on:{onChange:function(e){t("#selectedIcon").html('<i class="fa '+e+'"></i>').css("font-size","20px")}},options:{filter:function(e,t){return 0===(""+e.name).toLowerCase().indexOf("fa-"+t.toLowerCase().replace("fa-","").replace(" ",""))},body:{template:"<i class='fa #name# fa-m10'></i>#name#",yCount:5,data:i}}},{align:"left",template:"<center><div id='selectedIcon'></div></center>",width:34}]},{view:"forminput",name:"roles",labelWidth:0,body:{view:"dbllist",labelBottomLeft:"Roles",labelBottomRight:"Selected",url:Route("remote.get",{name:"role",list:!0}),template:"{common.spaces()} {common.icon()} {common.awesome()} #name#"}}],rules:{title:webix.rules.isNotEmpty,type:webix.rules.isNotEmpty,icon:webix.rules.isNotEmpty,parent_id:webix.rules.isNotEmpty}}]}]}}}).call(t,i(0))},function(e,t,i){"use strict";(function(t,i,n){e.exports=function(e){var r=function(){webix.ui({view:"window",modal:!0,position:"center",head:"New Module",width:t("#layoutContainer").width()/2,id:e("moduleFormModal"),body:{rows:[{view:"form",id:e("moduleForm"),elements:[{rows:[{view:"text",label:"Name",name:"name",labelPosition:"top"},{view:"textarea",label:"Description",name:"description",labelPosition:"top",minHeight:100},{view:"toggle",type:"iconButton",name:"plain",offIcon:"square-o",onIcon:"check-square-o",offLabel:"Generate a plain module (without some resources).",onLabel:"Generate a plain module (without some resources)."},{view:"toggle",type:"iconButton",name:"force",offIcon:"square-o",onIcon:"check-square-o",offLabel:"Force the operation to run when module already exist.",onLabel:"Force the operation to run when module already exist."}]}]},{view:"toolbar",elements:[{view:"button",type:"iconButton",label:"Create",icon:"check",click:function(){i.start(),webix.ajax().post(Route("mod.list.create"),$$(e("moduleForm")).getValues(),function(t){t=JSON.parse(t),n(t,{success:function(){$$(e("modules")).load(Route("mod.list")),$$(e("moduleFormModal")).close()}})})}},{view:"button",type:"iconButton",label:"Close",icon:"remove",click:function(){$$(e("moduleFormModal")).close()}}]}]}}).show()};return{rows:[{view:"toolbar",id:e("controlBar"),align:"center",elements:[{view:"button",type:"iconButton",label:"New Module",icon:"plus",tooltip:!0,click:function(){r()}},{view:"button",type:"iconButton",label:"Reload table",icon:"repeat",click:function(){i.start(),$$(e("modules")).load(Route("mod.list"),function(){i.done()})}}]},{view:"datatable",select:!0,multiselect:!0,id:e("modules"),editable:!0,editaction:"dblclick",columns:[{id:"name",header:"Name"},{id:"alias",header:"Alias"},{id:"description",header:"Description",fillspace:!0,editor:"text"},{id:"active",css:{"text-align":"center"},header:"Status",template:function(e){return e.active?"<button class='off_button btn btn-success'>On</button>":"<button class='on_button btn btn-danger'>Off</button>"}},{id:"ide",css:{"text-align":"center"},header:"IDE",template:function(e){return"<button class='edit_button btn btn-primary'><i class='fa fa-edit'></i></button>"}}],url:Route("mod.list"),onClick:{off_button:function(t,r){i.start(),webix.ajax().post(Route("mod.list.cmd"),{cmd:"disable",module:r.row},function(t){t=JSON.parse(t),n(t,{success:function(){$$(e("modules")).load(Route("mod.list"))}})})},on_button:function(t,r){i.start(),webix.ajax().post(Route("mod.list.cmd"),{cmd:"enable",module:r.row},function(t){t=JSON.parse(t),n(t,{success:function(){$$(e("modules")).load(Route("mod.list"))}})})},edit_button:function(e,t){run({title:"Edit module ["+t.row+"]",uri:"ide",icon:"edit",query:t.row})}},on:{onAfterEditStop:function(e,t){i.start(),webix.ajax().post(Route("mod.list.cmd"),{cmd:"edit_description",module:t.row,description:e.value},function(e){i.done()})}}}]}}}).call(t,i(0),i(1),i(6))},function(e,t,i){"use strict";(function(t,n,r){e.exports=function(e,o,a){var s=i(44)();i(3);i(5);var l=o.query,h=function(i){setInterval(function(){$$(e(i)).$height==t("#"+e(i,!0)).height()-2&&$$(e(i)).$width==t("#"+e(i,!0)).width()-2||$$(e(i)).$setSize(t("#"+e(i,!0)).width(),t("#"+e(i,!0)).height())},100)},c=!1,u=function(t){webix.ajax().post(Route("mod.ide.cmd",{cmd:"log_write",module:l,message:t}),function(t){t=JSON.parse(t),$$(e("output_window")).add(t,0)})},d=function(e,t){webix.confirm(e,"confirm-warning",function(i){i&&(c.handle("artisan "+t),u(e.replace("?",".")))})},f=function(i,o){i.initialize();var a=function(e){i.resize(window.innerWidth-(o.clientLeft+o.offsetLeft),window.innerHeight-(o.clientTop+o.offsetTop)-60)};window.onresize=a,a(),n("#"+e("explorer_window",!0)).disableSelection();var u=new s.PanelContainer(document.getElementById(e("explorer_window",!0)),i),f=new s.PanelContainer(document.getElementById(e("properties_window",!0)),i),p=new s.PanelContainer(document.getElementById(e("utility_window",!0)),i),m=new s.PanelContainer(document.getElementById(e("output_window",!0)),i),g=new s.PanelContainer(document.getElementById(e("terminal_window",!0)),i),v=i.context.model.documentManagerNode,b=i.dockLeft(v,u,.15),w=(i.dockDown(b,f,.4),i.dockDown(v,g,.2));i.dockRight(w,m,.5),i.dockRight(v,p,.2);webix.ui({container:e("explorer_window",!0),select:!0,view:"tree",id:e("explorer_window"),template:"{common.icon()} {common.awesome()} #value#",type:{awesome:function(e){return'<i class="fa fa-'+e.icon+'"></i>'}},url:Route("mod.ide.cmd",{cmd:"get_filesystem",module:l}),on:{onAfterRender:function(){h("explorer_window")},onBeforeLoad:function(){r.start()},onAfterLoad:function(){r.done()},onItemDblClick:function(){var n=this.getSelectedItem(),o=t("#"+e("open_files",!0));if("folder"==n.type)return this.open(n.id);if(t("#tab_"+e(n.id,!0)).length)t("#tab_"+e(n.id,!0)).trigger("click");else{o.append('<div id="'+e(n.id,!0)+'" caption="<span id=\'tab_'+e(n.id,!0)+"'>"+n.value+'</span>" icon="fa fa-'+n.icon+'"></div>');var a=new s.PanelContainer(document.getElementById(e(n.id,!0)),i);i.dockFill(v,a),r.start(),webix.ajax().get(Route("mod.ide.cmd",{cmd:"get_file",module:l,getContent:n.id}),function(t){var i=n.id.split(".");i=i[i.length-1],monaco.editor.create(document.getElementById(e(n.id,!0)),{value:t,language:void 0!=vs_exts[i]?vs_exts[i]:"javascript",theme:"vs-dark",automaticLayout:!0}).focus(),r.done()})}return!0}}}),webix.ui({view:"property",id:e("properties_window"),container:e("properties_window",!0),elements:[{label:"Data url",type:"text",id:"url"},{label:"Data type",type:"select",options:["json","xml","csv"],id:"type"},{label:"Use JSONP",type:"checkbox",id:"jsonp"}],on:{onAfterRender:function(){h("properties_window")}}}),webix.ajax().get(Route("terminal.index"),function(i){c=new Terminal("#"+e("terminal_window",!0),JSON.parse(i)),t('[view_id="bodyTerminal"] div').css("padding",0),t(".CodeMirror-fullscreen").height(t("#layoutContainer").height()+34),t(".CodeMirror-scroll").slimScroll({height:t("#layoutContainer").height()+34,color:"#fff"}),t(".CodeMirror-fullscreen").css("position","absolute"),r.done()}),webix.ui({view:"tabview",container:e("utility_window",!0),id:e("utility_window"),cells:[{header:"Utility",body:{rows:[{view:"toolbar",elements:[{view:"button",label:"Migrate",click:function(){d("Migrate the given module?","module:migrate "+l)}},{view:"button",label:"Migrate Rollback",click:function(){d("Rollback the given module?","module:migrate-rollback "+l)}}]},{view:"toolbar",elements:[{view:"button",label:"Migrate Refresh",click:function(){d("Refresh the migration for the given module?","module:migrate-refresh "+l)}},{view:"button",label:"Migrate Reset",click:function(){d("Reset the migration for the given module?","module:migrate-reset "+l)}}]},{view:"toolbar",elements:[{view:"button",label:"Seed",click:function(){d("Seed the given module?","module:seed "+l)}},{view:"button",label:"Publish Migration",click:function(){d("Publish the migration files for the given module?","module:publish-migration "+l)}}]},{view:"toolbar",elements:[{view:"button",label:"Publish Config",click:function(){d("Publish the given module configuration files?","module:publish-config "+l)}},{view:"button",label:"Publish Translation",click:function(){d("Publish the translation files for the given module?","module:publish-translation "+l)}}]},{view:"toolbar",elements:[{view:"button",label:"Enable",click:function(){d("Enable the given module?","module:enable "+l)}},{view:"button",label:"Disable",click:function(){d("Disable the given module?","module:disable "+l)}}]},{view:"toolbar",elements:[{view:"button",label:"Update",click:function(){d("Update the given module?","module:update "+l)}}]}]}},{header:"Generator",body:{rows:[{view:"toolbar",elements:[{view:"button",type:"iconButton",label:"Make Scaffold",icon:"keyboard-o",click:function(){}}]},{view:"toolbar",elements:[{view:"button",label:"Make Command",click:function(){}},{view:"button",label:"Make Test",click:function(){}}]},{view:"toolbar",elements:[{view:"button",label:"Make Seed",click:function(){}},{view:"button",label:"Make Controller",click:function(){}}]},{view:"toolbar",elements:[{view:"button",label:"Make Policy",click:function(){}},{view:"button",label:"Make Provider",click:function(){}}]},{view:"toolbar",elements:[{view:"button",label:"Make Middleware",click:function(){}},{view:"button",label:"Make Mail",click:function(){}}]},{view:"toolbar",elements:[{view:"button",label:"Make Notification",click:function(){}},{view:"button",label:"Make Listener",click:function(){}}]},{view:"toolbar",elements:[{view:"button",label:"Make Request",click:function(){}},{view:"button",label:"Make Event",click:function(){}}]},{view:"toolbar",elements:[{view:"button",label:"Make Job",click:function(){}},{view:"button",label:"Route Provider",click:function(){}}]},{view:"toolbar",elements:[{view:"button",label:"Make Rule",click:function(){}},{view:"button",label:"Make Resource",click:function(){}}]}]}}],on:{onAfterRender:function(){}}}),h("utility_window"),webix.ui({view:"datatable",container:e("output_window",!0),id:e("output_window"),header:!1,rowLineHeight:20,rowHeight:20,columns:[{id:"date",header:"",width:153},{id:"message",header:"",fillspace:!0}],url:Route("mod.ide.cmd",{cmd:"get_log",module:l}),on:{onAfterRender:function(){h("output_window")}}})};return{rows:[{view:"template",template:'\n                <div id="'+e("my_dock_manager",!0)+'"></div>\n                <div id="'+e("explorer_window",!0)+'" caption="Module Explorer" icon="fa fa-folder-o"></div>\n                <div id="'+e("properties_window",!0)+'" caption="Properties"></div>\n                <div id="'+e("output_window",!0)+'" caption="Output" icon="fa fa-leanpub"></div>\n                \n                <div id="'+e("terminal_window",!0)+'" caption="Terminal" icon="fa fa-terminal"></div>\n                <div id="'+e("utility_window",!0)+'" caption="Tools" icon="fa fa-gears"></div>\n                <div id="'+e("open_files",!0)+'"></div>\n            ',on:{onAfterRender:function(){var t=document.getElementById(e("my_dock_manager",!0));if(null==t)setTimeout(function(){t=document.getElementById(e("my_dock_manager",!0));var i=new s.DockManager(t);f(i,t)},500);else{var i=new s.DockManager(t);f(i,t)}}}}]}}}).call(t,i(0),i(0),i(1))},function(e,t,i){"use strict";e.exports=function(){return function(){function e(){this.element=void 0,this.handleSize=6,this.cornerSize=12,this.east=!1,this.west=!1,this.north=!1,this.south=!1,this.corner=!1}function t(e,t){this.wheel=e,this.id=t;var i=t.replace("-s","");this.element=document.createElement("div"),this.element.classList.add("dock-wheel-item"),this.element.classList.add("disable-selection"),this.element.classList.add("dock-wheel-"+i),this.element.classList.add("dock-wheel-"+i+"-icon"),this.hoverIconClass="dock-wheel-"+i+"-icon-hover",this.mouseOverHandler=new c.EventHandler(this.element,"mouseover",this.onMouseMoved.bind(this)),this.mouseOutHandler=new c.EventHandler(this.element,"mouseout",this.onMouseOut.bind(this)),this.active=!1}function i(e){return null==e?0:parseInt(e.replace("px",""))}function n(){document.body.classList.add("disable-selection")}function r(){document.body.classList.remove("disable-selection")}function o(e,t,i){var n=i.container.containerElement,r=n.offsetLeft,o=n.offsetTop,a=n.clientWidth,s=n.clientHeight;return e>=r&&e<=r+a&&t>=o&&t<=o+s}function a(){}function s(e){return e+s.counter++}function l(e){return null!=e.parentNode&&(e.parentNode.removeChild(e),!0)}function h(e,t){this.x=e,this.y=t}var c={version:"0.0.2"};return c.TabHandle=function(e){this.parent=e;var t=c.TabHandle.prototype._performUndock.bind(this);this.elementBase=document.createElement("div"),this.elementText=document.createElement("div"),this.elementCloseButton=document.createElement("div"),this.elementBase.classList.add("tab-handle"),this.elementBase.classList.add("disable-selection"),this.elementText.classList.add("tab-handle-text"),this.elementCloseButton.classList.add("tab-handle-close-button"),this.elementBase.appendChild(this.elementText),this.parent.host.displayCloseButton&&this.elementBase.appendChild(this.elementCloseButton),this.parent.host.tabListElement.appendChild(this.elementBase);var i=e.container,n=i.getRawTitle();this.elementText.innerHTML=n;this.elementCloseButton.innerHTML='<i class="fa fa-remove"></i>',this._bringToFront(this.elementBase),this.undockInitiator=new c.UndockInitiator(this.elementBase,t),this.undockInitiator.enabled=!0,this.mouseClickHandler=new c.EventHandler(this.elementBase,"click",this.onMouseClicked.bind(this)),this.closeButtonHandler=new c.EventHandler(this.elementCloseButton,"mousedown",this.onCloseButtonClicked.bind(this)),this.zIndexCounter=90},c.TabHandle.prototype.updateTitle=function(){if(this.parent.container instanceof c.PanelContainer){var e=this.parent.container,t=e.getRawTitle();this.elementText.innerHTML=t}},c.TabHandle.prototype.destroy=function(){this.mouseClickHandler.cancel(),this.closeButtonHandler.cancel(),l(this.elementBase),l(this.elementCloseButton),delete this.elementBase,delete this.elementCloseButton},c.TabHandle.prototype._performUndock=function(e,t){if("panel"==this.parent.container.containerType){this.undockInitiator.enabled=!1;return this.parent.container.performUndockToDialog(e,t)}return null},c.TabHandle.prototype.onMouseClicked=function(){this.parent.onSelected()},c.TabHandle.prototype.onCloseButtonClicked=function(){if("panel"==this.parent.container.containerType){this.undockInitiator.enabled=!1;this.parent.container.performUndock()}},c.TabHandle.prototype.setSelected=function(e){e?this.elementBase.classList.add("tab-handle-selected"):this.elementBase.classList.remove("tab-handle-selected")},c.TabHandle.prototype.setZIndex=function(e){this.elementBase.style.zIndex=e},c.TabHandle.prototype._bringToFront=function(e){e.style.zIndex=this.zIndexCounter,this.zIndexCounter++},c.TabHost=function(e,t){if(void 0===e&&(e=c.TabHost.DIRECTION_BOTTOM),void 0===t&&(t=!1),this.tabStripDirection=e,this.displayCloseButton=t,this.pages=[],this.hostElement=document.createElement("div"),this.tabListElement=document.createElement("div"),this.separatorElement=document.createElement("div"),this.contentElement=document.createElement("div"),this.createTabPage=this._createDefaultTabPage,this.tabStripDirection==c.TabHost.DIRECTION_BOTTOM)this.hostElement.appendChild(this.contentElement),this.hostElement.appendChild(this.separatorElement),this.hostElement.appendChild(this.tabListElement);else{if(this.tabStripDirection!=c.TabHost.DIRECTION_TOP)throw new c.Exception("Only top and bottom tab strip orientations are supported");this.hostElement.appendChild(this.tabListElement),this.hostElement.appendChild(this.separatorElement),this.hostElement.appendChild(this.contentElement)}this.hostElement.classList.add("tab-host"),this.tabListElement.classList.add("tab-handle-list-container"),this.separatorElement.classList.add("tab-handle-content-seperator"),this.contentElement.classList.add("tab-content")},c.TabHost.DIRECTION_TOP=0,c.TabHost.DIRECTION_BOTTOM=1,c.TabHost.DIRECTION_LEFT=2,c.TabHost.DIRECTION_RIGHT=3,c.TabHost.prototype._createDefaultTabPage=function(e,t){return new c.TabPage(e,t)},c.TabHost.prototype.setActiveTab=function(e){var t=this;this.pages.forEach(function(i){if(i.container===e)return void t.onTabPageSelected(i)})},c.TabHost.prototype.resize=function(e,t){this.hostElement.style.width=e+"px",this.hostElement.style.height=t+"px";var i=this.tabListElement.clientHeight,n=this.separatorElement.clientHeight,r=t-i-n;this.contentElement.style.height=r+"px",this.activeTab&&this.activeTab.resize(e,r)},c.TabHost.prototype.performLayout=function(e){this.pages.forEach(function(e){e.destroy()}),this.pages.length=0;var t=this.activeTab;delete this.activeTab;var i=e.filter(function(e){return"panel"==e.containerType});if(i.length>0){var n=this;i.forEach(function(e){var i=n.createTabPage(n,e);n.pages.push(i),t&&i.container===t.container&&(n.activeTab=i)}),this._setTabHandlesVisible(!0)}else this._setTabHandlesVisible(!1);this.activeTab&&this.onTabPageSelected(this.activeTab)},c.TabHost.prototype._setTabHandlesVisible=function(e){this.tabListElement.style.display=e?"block":"none",this.separatorElement.style.display=e?"block":"none"},c.TabHost.prototype.onTabPageSelected=function(e){this.activeTab=e,this.pages.forEach(function(t){var i=t===e;t.setSelected(i)});var t=1,i=90;this.pages.forEach(function(n){n.handle.setZIndex(i),n==e&&(t=-1),i+=t})},c.TabPage=function(e,t){if(0!=arguments.length&&(this.selected=!1,this.host=e,this.container=t,this.handle=new c.TabHandle(this),this.containerElement=t.containerElement,t instanceof c.PanelContainer)){t.onTitleChanged=this.onTitleChanged.bind(this)}},c.TabPage.prototype.onTitleChanged=function(e,t){this.handle.updateTitle()},c.TabPage.prototype.destroy=function(){if(this.handle.destroy(),this.container instanceof c.PanelContainer){delete this.container.onTitleChanged}},c.TabPage.prototype.onSelected=function(){this.host.onTabPageSelected(this)},c.TabPage.prototype.setSelected=function(e){if(this.selected=e,this.handle.setSelected(e),this.selected){this.host.contentElement.appendChild(this.containerElement);var t=this.host.contentElement.clientWidth,i=this.host.contentElement.clientHeight;this.container.resize(t,i)}else l(this.containerElement)},c.TabPage.prototype.resize=function(e,t){this.container.resize(e,t)},c.Dialog=function(e,t){this.panel=e,this.zIndexCounter=90,this.dockManager=t,this.eventListener=t,this._initialize()},c.Dialog.fromElement=function(e,t){return new c.Dialog(new c.PanelContainer(document.getElementById(e),t),t)},c.Dialog.prototype._initialize=function(){this.panel.floatingDialog=this,this.elementDialog=document.createElement("div"),this.elementDialog.appendChild(this.panel.elementPanel),this.draggable=new c.DraggableContainer(this,this.panel,this.elementDialog,this.panel.elementTitle),this.resizable=new c.ResizableContainer(this,this.draggable,this.draggable.topLevelElement),document.body.appendChild(this.elementDialog),this.elementDialog.classList.add("dialog-floating"),this.elementDialog.classList.add("rounded-corner-top"),this.panel.elementTitle.classList.add("rounded-corner-top"),this.mouseDownHandler=new c.EventHandler(this.elementDialog,"mousedown",this.onMouseDown.bind(this)),this.resize(this.panel.elementPanel.clientWidth,this.panel.elementPanel.clientHeight),this.bringToFront()},c.Dialog.prototype.setPosition=function(e,t){this.elementDialog.style.left=e+"px",this.elementDialog.style.top=t+"px"},c.Dialog.prototype.onMouseDown=function(e){this.bringToFront()},c.Dialog.prototype.destroy=function(){this.mouseDownHandler&&(this.mouseDownHandler.cancel(),delete this.mouseDownHandler),this.elementDialog.classList.remove("rounded-corner-top"),this.panel.elementTitle.classList.remove("rounded-corner-top"),l(this.elementDialog),this.draggable.removeDecorator(),l(this.panel.elementPanel),delete this.panel.floatingDialog},c.Dialog.prototype.resize=function(e,t){this.resizable.resize(e,t)},c.Dialog.prototype.setTitle=function(e){this.panel.setTitle(e)},c.Dialog.prototype.setTitleIcon=function(e){this.panel.setTitleIcon(e)},c.Dialog.prototype.bringToFront=function(){this.elementDialog.style.zIndex=this.zIndexCounter++},c.DraggableContainer=function(e,t,i,n){this.dialog=e,this.delegate=t,this.containerElement=t.containerElement,this.dockManager=t.dockManager,this.topLevelElement=i,this.containerType=t.containerType,this.mouseDownHandler=new c.EventHandler(n,"mousedown",this.onMouseDown.bind(this)),this.topLevelElement.style.marginLeft=i.offsetLeft+"px",this.topLevelElement.style.marginTop=i.offsetTop+"px",this.minimumAllowedChildNodes=t.minimumAllowedChildNodes},c.DraggableContainer.prototype.destroy=function(){this.removeDecorator(),this.delegate.destroy()},c.DraggableContainer.prototype.saveState=function(e){this.delegate.saveState(e)},c.DraggableContainer.prototype.loadState=function(e){this.delegate.loadState(e)},c.DraggableContainer.prototype.setActiveChild=function(e){},Object.defineProperty(c.DraggableContainer.prototype,"width",{get:function(){return this.delegate.width}}),Object.defineProperty(c.DraggableContainer.prototype,"height",{get:function(){return this.delegate.height}}),c.DraggableContainer.prototype.name=function(e){return e&&(this.delegate.name=e),this.delegate.name},c.DraggableContainer.prototype.resize=function(e,t){this.delegate.resize(e,t)},c.DraggableContainer.prototype.performLayout=function(e){this.delegate.performLayout(e)},c.DraggableContainer.prototype.removeDecorator=function(){this.mouseDownHandler&&(this.mouseDownHandler.cancel(),delete this.mouseDownHandler)},c.DraggableContainer.prototype.onMouseDown=function(e){this._startDragging(e),this.previousMousePosition={x:e.pageX,y:e.pageY},this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler),this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler),this.mouseMoveHandler=new c.EventHandler(window,"mousemove",this.onMouseMove.bind(this)),this.mouseUpHandler=new c.EventHandler(window,"mouseup",this.onMouseUp.bind(this))},c.DraggableContainer.prototype.onMouseUp=function(e){this._stopDragging(e),this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler,this.mouseUpHandler.cancel(),delete this.mouseUpHandler},c.DraggableContainer.prototype._startDragging=function(e){this.dialog.eventListener&&this.dialog.eventListener.onDialogDragStarted(this.dialog,e),document.body.classList.add("disable-selection")},c.DraggableContainer.prototype._stopDragging=function(e){this.dialog.eventListener&&this.dialog.eventListener.onDialogDragEnded(this.dialog,e),document.body.classList.remove("disable-selection")},c.DraggableContainer.prototype.onMouseMove=function(e){var t=new h(e.pageX,e.pageY),i=Math.floor(t.x-this.previousMousePosition.x),n=Math.floor(t.y-this.previousMousePosition.y);this._performDrag(i,n),this.previousMousePosition=t},c.DraggableContainer.prototype._performDrag=function(e,t){var n=e+i(this.topLevelElement.style.marginLeft),r=t+i(this.topLevelElement.style.marginTop);this.topLevelElement.style.marginLeft=n+"px",this.topLevelElement.style.marginTop=r+"px"},c.ResizableContainer=function(e,t,i){this.dialog=e,this.delegate=t,this.containerElement=t.containerElement,this.dockManager=t.dockManager,this.topLevelElement=i,this.containerType=t.containerType,this.topLevelElement.style.marginLeft=this.topLevelElement.offsetLeft+"px",this.topLevelElement.style.marginTop=this.topLevelElement.offsetTop+"px",this.minimumAllowedChildNodes=t.minimumAllowedChildNodes,this._buildResizeHandles(),this.readyToProcessNextResize=!0},c.ResizableContainer.prototype.setActiveChild=function(e){},c.ResizableContainer.prototype._buildResizeHandles=function(){this.resizeHandles=[],this._buildResizeHandle(!1,!0,!0,!1),this._buildResizeHandle(!0,!1,!1,!0),this._buildResizeHandle(!1,!0,!1,!0),this._buildResizeHandle(!0,!1,!1,!1),this._buildResizeHandle(!1,!0,!1,!1),this._buildResizeHandle(!1,!1,!0,!1),this._buildResizeHandle(!1,!1,!1,!0)},c.ResizableContainer.prototype._buildResizeHandle=function(t,i,n,r){var o=new e;o.east=t,o.west=i,o.north=n,o.south=r,o.element=document.createElement("div"),this.topLevelElement.appendChild(o.element);var a="",s="";n&&(a="n"),r&&(a="s"),t&&(s="e"),i&&(s="w");var l="resize-handle-"+a+s;a.length>0&&s.length>0&&(o.corner=!0),o.element.classList.add(o.corner?"resize-handle-corner":"resize-handle"),o.element.classList.add(l),this.resizeHandles.push(o);var h=this;o.mouseDownHandler=new c.EventHandler(o.element,"mousedown",function(e){h.onMouseDown(o,e)})},c.ResizableContainer.prototype.saveState=function(e){this.delegate.saveState(e)},c.ResizableContainer.prototype.loadState=function(e){this.delegate.loadState(e)},Object.defineProperty(c.ResizableContainer.prototype,"width",{get:function(){return this.delegate.width}}),Object.defineProperty(c.ResizableContainer.prototype,"height",{get:function(){return this.delegate.height}}),c.ResizableContainer.prototype.name=function(e){return e&&(this.delegate.name=e),this.delegate.name},c.ResizableContainer.prototype.resize=function(e,t){this.delegate.resize(e,t),this._adjustResizeHandles(e,t)},c.ResizableContainer.prototype._adjustResizeHandles=function(e,t){var i=this;this.resizeHandles.forEach(function(n){n.adjustSize(i.topLevelElement,e,t)})},c.ResizableContainer.prototype.performLayout=function(e){this.delegate.performLayout(e)},c.ResizableContainer.prototype.destroy=function(){this.removeDecorator(),this.delegate.destroy()},c.ResizableContainer.prototype.removeDecorator=function(){},c.ResizableContainer.prototype.onMouseMoved=function(e,t){if(this.readyToProcessNextResize){this.readyToProcessNextResize=!1,this.dockManager.suspendLayout();var i=new h(t.pageX,t.pageY),n=Math.floor(i.x-this.previousMousePosition.x),r=Math.floor(i.y-this.previousMousePosition.y);this._performDrag(e,n,r),this.previousMousePosition=i,this.readyToProcessNextResize=!0,this.dockManager.resumeLayout()}},c.ResizableContainer.prototype.onMouseDown=function(e,t){this.previousMousePosition=new h(t.pageX,t.pageY),e.mouseMoveHandler&&(e.mouseMoveHandler.cancel(),delete e.mouseMoveHandler),e.mouseUpHandler&&(e.mouseUpHandler.cancel(),delete e.mouseUpHandler);var i=this;e.mouseMoveHandler=new c.EventHandler(window,"mousemove",function(t){i.onMouseMoved(e,t)}),e.mouseUpHandler=new c.EventHandler(window,"mouseup",function(t){i.onMouseUp(e,t)}),document.body.classList.add("disable-selection")},c.ResizableContainer.prototype.onMouseUp=function(e,t){e.mouseMoveHandler.cancel(),e.mouseUpHandler.cancel(),delete e.mouseMoveHandler,delete e.mouseUpHandler,document.body.classList.remove("disable-selection")},c.ResizableContainer.prototype._performDrag=function(e,t,n){var r={};r.left=i(this.topLevelElement.style.marginLeft),r.top=i(this.topLevelElement.style.marginTop),r.width=this.topLevelElement.clientWidth,r.height=this.topLevelElement.clientHeight,e.east&&this._resizeEast(t,r),e.west&&this._resizeWest(t,r),e.north&&this._resizeNorth(n,r),e.south&&this._resizeSouth(n,r)},c.ResizableContainer.prototype._resizeWest=function(e,t){this._resizeContainer(e,0,-e,0,t)},c.ResizableContainer.prototype._resizeEast=function(e,t){this._resizeContainer(0,0,e,0,t)},c.ResizableContainer.prototype._resizeNorth=function(e,t){this._resizeContainer(0,e,0,-e,t)},c.ResizableContainer.prototype._resizeSouth=function(e,t){this._resizeContainer(0,0,0,e,t)},c.ResizableContainer.prototype._resizeContainer=function(e,t,i,n,r){r.left+=e,r.top+=t,r.width+=i,r.height+=n;r.width=Math.max(r.width,50),r.height=Math.max(r.height,50),this.topLevelElement.style.marginLeft=r.left+"px",this.topLevelElement.style.marginTop=r.top+"px",this.resize(r.width,r.height)},e.prototype.adjustSize=function(e,t,i){this.corner?(this.west&&(this.element.style.left="0px"),this.east&&(this.element.style.left=t-this.cornerSize+"px"),this.north&&(this.element.style.top="0px"),this.south&&(this.element.style.top=i-this.cornerSize+"px")):(this.west&&(this.element.style.left="0px",this.element.style.top=this.cornerSize+"px"),this.east&&(this.element.style.left=t-this.handleSize+"px",this.element.style.top=this.cornerSize+"px"),this.north&&(this.element.style.left=this.cornerSize+"px",this.element.style.top="0px"),this.south&&(this.element.style.left=this.cornerSize+"px",this.element.style.top=i-this.handleSize+"px"),this.west||this.east?this.element.style.height=i-2*this.cornerSize+"px":this.element.style.width=t-2*this.cornerSize+"px")},c.Exception=function(e){this.message=e},c.Exception.prototype.toString=function(){return this.message},c.DockManager=function(e){if(void 0===e)throw new c.Exception("Invalid Dock Manager element provided");this.element=e,this.context=this.dockWheel=this.layoutEngine=this.mouseMoveHandler=void 0,this.layoutEventListeners=[]},c.DockManager.prototype.initialize=function(){this.context=new c.DockManagerContext(this);var e=new c.DockNode(this.context.documentManagerView);this.context.model.rootNode=e,this.context.model.documentManagerNode=e,this.setRootNode(this.context.model.rootNode),this.resize(this.element.clientWidth,this.element.clientHeight),this.dockWheel=new c.DockWheel(this),this.layoutEngine=new c.DockLayoutEngine(this),this.rebuildLayout(this.context.model.rootNode)},c.DockManager.prototype.rebuildLayout=function(e){var t=this;e.children.forEach(function(e){t.rebuildLayout(e)}),e.performLayout()},c.DockManager.prototype.invalidate=function(){this.resize(this.element.clientWidth,this.element.clientHeight)},c.DockManager.prototype.resize=function(e,t){this.element.style.width=e+"px",this.element.style.height=t+"px",this.context.model.rootNode.container.resize(e,t)},c.DockManager.prototype.setModel=function(e){l(this.context.documentManagerView.containerElement),this.context.model=e,this.setRootNode(e.rootNode),this.rebuildLayout(e.rootNode),this.invalidate()},c.DockManager.prototype.setRootNode=function(e){this.context.model.rootNode,e.detachFromParent(),this.context.model.rootNode=e,this.element.appendChild(e.container.containerElement)},c.DockManager.prototype.onDialogDragStarted=function(e,t){this.dockWheel.activeNode=this._findNodeOnPoint(t.pageX,t.pageY),this.dockWheel.activeDialog=e,this.dockWheel.showWheel(),this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler),this.mouseMoveHandler=new c.EventHandler(window,"mousemove",this.onMouseMoved.bind(this))},c.DockManager.prototype.onDialogDragEnded=function(e,t){this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler),this.dockWheel.onDialogDropped(e),this.dockWheel.hideWheel(),delete this.dockWheel.activeDialog},c.DockManager.prototype.onMouseMoved=function(e){this.dockWheel.activeNode=this._findNodeOnPoint(e.clientX,e.clientY)},c.DockManager.prototype._findNodeOnPoint=function(e,t){var i=[];i.push(this.context.model.rootNode);for(var n;i.length>0;){var r=i.pop();o(e,t,r)&&(n=r,[].push.apply(i,r.children))}return n},c.DockManager.prototype.dockDialogLeft=function(e,t){return this._requestDockDialog(e,t,this.layoutEngine.dockLeft.bind(this.layoutEngine))},c.DockManager.prototype.dockDialogRight=function(e,t){return this._requestDockDialog(e,t,this.layoutEngine.dockRight.bind(this.layoutEngine))},c.DockManager.prototype.dockDialogUp=function(e,t){return this._requestDockDialog(e,t,this.layoutEngine.dockUp.bind(this.layoutEngine))},c.DockManager.prototype.dockDialogDown=function(e,t){return this._requestDockDialog(e,t,this.layoutEngine.dockDown.bind(this.layoutEngine))},c.DockManager.prototype.dockDialogFill=function(e,t){return this._requestDockDialog(e,t,this.layoutEngine.dockFill.bind(this.layoutEngine))},c.DockManager.prototype.dockLeft=function(e,t,i){return this._requestDockContainer(e,t,this.layoutEngine.dockLeft.bind(this.layoutEngine),i)},c.DockManager.prototype.dockRight=function(e,t,i){return this._requestDockContainer(e,t,this.layoutEngine.dockRight.bind(this.layoutEngine),i)},c.DockManager.prototype.dockUp=function(e,t,i){return this._requestDockContainer(e,t,this.layoutEngine.dockUp.bind(this.layoutEngine),i)},c.DockManager.prototype.dockDown=function(e,t,i){return this._requestDockContainer(e,t,this.layoutEngine.dockDown.bind(this.layoutEngine),i)},c.DockManager.prototype.dockFill=function(e,t){return this._requestDockContainer(e,t,this.layoutEngine.dockFill.bind(this.layoutEngine))},c.DockManager.prototype._requestDockDialog=function(e,t,i){var n=t.panel,r=new c.DockNode(n);return n.prepareForDocking(),t.destroy(),i(e,r),this.invalidate(),r},c.DockManager.prototype._requestDockContainer=function(e,t,i,n){var r=new c.DockNode(t);if("panel"==t.containerType){var o=t;o.prepareForDocking(),l(o.elementPanel)}if(i(e,r),n&&r.parent&&("vertical"==r.parent.container.containerType||"horizontal"==r.parent.container.containerType)){r.parent.container.setContainerRatio(t,n)}return this.rebuildLayout(this.context.model.rootNode),this.invalidate(),r},c.DockManager.prototype.requestUndockToDialog=function(e,t,i){var n=this._findNodeFromContainer(e);this.layoutEngine.undock(n);var r=new c.Dialog(n.container,this),o=r.elementDialog.clientWidth;return i.x>o&&(i.x=.75*o),r.setPosition(t.clientX-i.x,t.clientY-i.y),r.draggable.onMouseDown(t),r},c.DockManager.prototype.requestUndock=function(e){var t=this._findNodeFromContainer(e);this.layoutEngine.undock(t)},c.DockManager.prototype.requestRemove=function(e){var t=this._findNodeFromContainer(e),i=t.parent;return t.detachFromParent(),i&&this.rebuildLayout(i),t},c.DockManager.prototype._findNodeFromContainer=function(e){var t=[];for(t.push(this.context.model.rootNode);t.length>0;){var i=t.pop();if(i.container===e)return i;[].push.apply(t,i.children)}throw new c.Exception("Cannot find dock node belonging to the element")},c.DockManager.prototype.addLayoutListener=function(e){this.layoutEventListeners.push(e)},c.DockManager.prototype.removeLayoutListener=function(e){this.layoutEventListeners.splice(this.layoutEventListeners.indexOf(e),1)},c.DockManager.prototype.suspendLayout=function(){var e=this;this.layoutEventListeners.forEach(function(t){t.onSuspendLayout&&t.onSuspendLayout(e)})},c.DockManager.prototype.resumeLayout=function(){var e=this;this.layoutEventListeners.forEach(function(t){t.onResumeLayout&&t.onResumeLayout(e)})},c.DockManager.prototype.notifyOnDock=function(e){var t=this;this.layoutEventListeners.forEach(function(i){i.onDock&&i.onDock(t,e)})},c.DockManager.prototype.notifyOnUnDock=function(e){var t=this;this.layoutEventListeners.forEach(function(i){i.onUndock&&i.onUndock(t,e)})},c.DockManager.prototype.saveState=function(){return(new c.DockGraphSerializer).serialize(this.context.model)},c.DockManager.prototype.loadState=function(e){var t=new c.DockGraphDeserializer(this);this.context.model=t.deserialize(e),this.setModel(this.context.model)},c.DockLayoutEngine=function(e){this.dockManager=e},c.DockLayoutEngine.prototype.dockLeft=function(e,t){this._performDock(e,t,"horizontal",!0)},c.DockLayoutEngine.prototype.dockRight=function(e,t){this._performDock(e,t,"horizontal",!1)},c.DockLayoutEngine.prototype.dockUp=function(e,t){this._performDock(e,t,"vertical",!0)},c.DockLayoutEngine.prototype.dockDown=function(e,t){this._performDock(e,t,"vertical",!1)},c.DockLayoutEngine.prototype.dockFill=function(e,t){this._performDock(e,t,"fill",!1)},c.DockLayoutEngine.prototype.undock=function(e){var t=e.parent;if(!t)throw new c.Exception("Cannot undock.  panel is not a leaf node");var i=t.children.indexOf(e);if(e.detachFromParent(),t.children.length<t.container.minimumAllowedChildNodes)for(var n=t.parent,r=0;r<t.children.length;r++){var o=t.children[r];n?(n.addChildAfter(t,o),t.detachFromParent(),t.container.destroy(),n.performLayout()):(t.detachFromParent(),t.container.destroy(),this.dockManager.setRootNode(o))}else if(t.performLayout(),t.children.length>0){var a=t.children[Math.max(0,i-1)];t.container.setActiveChild(a.container)}this.dockManager.invalidate(),this.dockManager.notifyOnUnDock(e)},c.DockLayoutEngine.prototype._performDock=function(e,t,i,n){if(e.parent&&"fill"==e.parent.container.containerType&&(e=e.parent),"fill"==i&&"fill"==e.container.containerType)return e.addChild(t),e.performLayout(),void e.container.setActiveChild(t.container);if(e===this.dockManager.context.model.rootNode){var r=this._createDockContainer(i,t,e),o=new c.DockNode(r);return n?(o.addChild(t),o.addChild(e)):(o.addChild(e),o.addChild(t)),this.dockManager.setRootNode(o),this.dockManager.rebuildLayout(this.dockManager.context.model.rootNode),void o.container.setActiveChild(t.container)}if(e.parent.container.containerType!=i){var a=e.parent,s=e.container.containerElement.clientWidth,h=e.container.containerElement.clientHeight,u=a.container.containerElement.clientWidth,d=a.container.containerElement.clientHeight,r=this._createDockContainer(i,t,e),o=new c.DockNode(r);a.addChildAfter(e,o),e.detachFromParent(),l(e.container.containerElement),n?(o.addChild(t),o.addChild(e)):(o.addChild(e),o.addChild(t)),a.performLayout(),o.performLayout(),o.container.setActiveChild(t.container),o.container.resize(s,h),a.container.resize(u,d)}else{var a=e.parent;n?a.addChildBefore(e,t):a.addChildAfter(e,t),a.performLayout(),a.container.setActiveChild(t.container)}var f=t.container.containerElement.clientWidth,p=t.container.containerElement.clientHeight;t.container.resize(f,p),this.dockManager.notifyOnDock(t)},c.DockLayoutEngine.prototype._forceResizeCompositeContainer=function(e){var t=e.containerElement.clientWidth,i=e.containerElement.clientHeight;e.resize(t,i)},c.DockLayoutEngine.prototype._createDockContainer=function(e,t,i){if("horizontal"==e)return new c.HorizontalDockContainer(this.dockManager,[t.container,i.container]);if("vertical"==e)return new c.VerticalDockContainer(this.dockManager,[t.container,i.container]);if("fill"==e)return new c.FillDockContainer(this.dockManager);throw new c.Exception("Failed to create dock container of type: "+e)},c.DockLayoutEngine.prototype.getDockBounds=function(e,t,i,n){var r,o,s;if("fill"==i){var l=e.container.containerElement,h=new a;return h.x=l.offsetLeft,h.y=l.offsetTop,h.width=l.clientWidth,h.height=l.clientHeight,h}e.parent&&"fill"==e.parent.container.containerType&&(e=e.parent);var c=!1;e.parent&&e.parent.container.containerType==i?(r=e.parent,o=r.children.length,s=r.children.indexOf(e)+(n?0:1)):(r=e,o=1,s=n?0:1,c=!0);var u=0,d=0;if("vertical"==i||"horizontal"==i){var f=this._getVaringDimension(r.container,i)-5*(o-1),p=this._getVaringDimension(t,i),m=f/(f+p);if(u=p*m,c)d=n?0:f*m;else{for(var g=0;g<s;g++)d+=this._getVaringDimension(r.children[g].container,i);d*=m}}var h=new a;return"vertical"==i?(h.x=r.container.containerElement.offsetLeft,h.y=r.container.containerElement.offsetTop+d,h.width=r.container.width,h.height=u):"horizontal"==i&&(h.x=r.container.containerElement.offsetLeft+d,h.y=r.container.containerElement.offsetTop,h.width=u,h.height=r.container.height),h},c.DockLayoutEngine.prototype._getVaringDimension=function(e,t){return"vertical"==t?e.height:"horizontal"==t?e.width:0},c.DockManagerContext=function(e){this.dockManager=e,this.model=new c.DockModel,this.documentManagerView=new c.DocumentManagerContainer(this.dockManager)},c.DockModel=function(){this.rootNode=this.documentManagerNode=void 0},c.DockNode=function(e){this.container=e,this.children=[]},c.DockNode.prototype.detachFromParent=function(){this.parent&&(this.parent.removeChild(this),delete this.parent)},c.DockNode.prototype.removeChild=function(e){var t=this.children.indexOf(e);t>=0&&this.children.splice(t,1)},c.DockNode.prototype.addChild=function(e){e.detachFromParent(),e.parent=this,this.children.push(e)},c.DockNode.prototype.addChildBefore=function(e,t){this._addChildWithDirection(e,t,!0)},c.DockNode.prototype.addChildAfter=function(e,t){this._addChildWithDirection(e,t,!1)},c.DockNode.prototype._addChildWithDirection=function(e,t,i){t.detachFromParent(),t.parent=this;var n=this.children.indexOf(e),r=this.children.slice(0,n),o=this.children.slice(n+1,this.children.length);this.children=r.slice(0),i?(this.children.push(t),this.children.push(e)):(this.children.push(e),this.children.push(t)),Array.prototype.push.apply(this.children,o)},c.DockNode.prototype.performLayout=function(){var e=this.children.map(function(e){return e.container});this.container.performLayout(e)},c.DockNode.prototype.debug_DumpTree=function(e){void 0===e&&(e=0);for(var t=this.container.name,i=0;i<e;i++)t="\t"+t;void 0===this.parent||this.parent.container.containerType;this.children.forEach(function(t){t.debug_DumpTree(e+1)})},c.DockWheel=function(e){this.dockManager=e,this.elementMainWheel=document.createElement("div"),this.elementSideWheel=document.createElement("div"),this.wheelItems={};var i=["left","right","top","down","fill","left-s","right-s","top-s","down-s"],n=this;i.forEach(function(e){n.wheelItems[e]=new t(n,e),"-s"==e.substr(-2,2)?n.elementSideWheel.appendChild(n.wheelItems[e].element):n.elementMainWheel.appendChild(n.wheelItems[e].element)});this.elementMainWheel.classList.add("dock-wheel-base"),this.elementSideWheel.classList.add("dock-wheel-base"),this.elementMainWheel.style.zIndex=1e5+1,this.elementSideWheel.style.zIndex=1e5,this.elementPanelPreview=document.createElement("div"),this.elementPanelPreview.classList.add("dock-wheel-panel-preview"),this.elementPanelPreview.style.zIndex=99999,this.activeDialog=void 0,this._activeNode=void 0,this._visible=!1},Object.defineProperty(c.DockWheel.prototype,"activeNode",{get:function(){return this._activeNode},set:function(e){var t=this._activeNode;this._activeNode=e,t!==this._activeNode&&this._visible&&this.showWheel()}}),c.DockWheel.prototype.showWheel=function(){if(this._visible=!0,!this.activeNode)return l(this.elementMainWheel),void l(this.elementSideWheel);var e=this.activeNode.container.containerElement,t=e.clientWidth,i=e.clientHeight,n=Math.floor(t/2)+e.offsetLeft,r=Math.floor(i/2)+e.offsetTop;this.elementMainWheel.style.left=n+"px",this.elementMainWheel.style.top=r+"px";var o=this.dockManager.element.clientWidth,a=this.dockManager.element.clientHeight;this.dockManager.element.offsetLeft,this.dockManager.element.offsetTop;l(this.elementMainWheel),l(this.elementSideWheel),e.appendChild(this.elementMainWheel),this.dockManager.element.appendChild(this.elementSideWheel),this._setWheelButtonPosition("left-s",20,-a/2),this._setWheelButtonPosition("right-s",o-40,-a/2),this._setWheelButtonPosition("top-s",o/2,20-a),this._setWheelButtonPosition("down-s",o/2,-20)},c.DockWheel.prototype._setWheelButtonPosition=function(e,t,i){var n=this.wheelItems[e],r=n.element.clientWidth/2,o=n.element.clientHeight/2,a=Math.floor(t-r),s=Math.floor(i-o);n.element.style.marginLeft=a+"px",n.element.style.marginTop=s+"px"},c.DockWheel.prototype.hideWheel=function(){this._visible=!1,this.activeNode=void 0,l(this.elementMainWheel),l(this.elementSideWheel),l(this.elementPanelPreview);for(var e in this.wheelItems)this.wheelItems[e].active=!1},c.DockWheel.prototype.onMouseOver=function(e,t){if(this.activeDialog){var i,n=this.dockManager.context.model.rootNode;"top"==e.id?i=this.dockManager.layoutEngine.getDockBounds(this.activeNode,this.activeDialog.panel,"vertical",!0):"down"==e.id?i=this.dockManager.layoutEngine.getDockBounds(this.activeNode,this.activeDialog.panel,"vertical",!1):"left"==e.id?i=this.dockManager.layoutEngine.getDockBounds(this.activeNode,this.activeDialog.panel,"horizontal",!0):"right"==e.id?i=this.dockManager.layoutEngine.getDockBounds(this.activeNode,this.activeDialog.panel,"horizontal",!1):"fill"==e.id?i=this.dockManager.layoutEngine.getDockBounds(this.activeNode,this.activeDialog.panel,"fill",!1):"top-s"==e.id?i=this.dockManager.layoutEngine.getDockBounds(n,this.activeDialog.panel,"vertical",!0):"down-s"==e.id?i=this.dockManager.layoutEngine.getDockBounds(n,this.activeDialog.panel,"vertical",!1):"left-s"==e.id?i=this.dockManager.layoutEngine.getDockBounds(n,this.activeDialog.panel,"horizontal",!0):"right-s"==e.id&&(i=this.dockManager.layoutEngine.getDockBounds(n,this.activeDialog.panel,"horizontal",!1)),i&&(this.dockManager.element.appendChild(this.elementPanelPreview),this.elementPanelPreview.style.left=Math.round(i.x)+"px",this.elementPanelPreview.style.top=Math.round(i.y)+"px",this.elementPanelPreview.style.width=Math.round(i.width)+"px",this.elementPanelPreview.style.height=Math.round(i.height)+"px")}},c.DockWheel.prototype.onMouseOut=function(e,t){l(this.elementPanelPreview)},c.DockWheel.prototype.onDialogDropped=function(e){var t=this._getActiveWheelItem();t&&this._handleDockRequest(t,e)},c.DockWheel.prototype._getActiveWheelItem=function(){for(var e in this.wheelItems){var t=this.wheelItems[e];if(t.active)return t}},c.DockWheel.prototype._handleDockRequest=function(e,t){this.activeNode&&("left"==e.id?this.dockManager.dockDialogLeft(this.activeNode,t):"right"==e.id?this.dockManager.dockDialogRight(this.activeNode,t):"top"==e.id?this.dockManager.dockDialogUp(this.activeNode,t):"down"==e.id?this.dockManager.dockDialogDown(this.activeNode,t):"fill"==e.id?this.dockManager.dockDialogFill(this.activeNode,t):"left-s"==e.id?this.dockManager.dockDialogLeft(this.dockManager.context.model.rootNode,t):"right-s"==e.id?this.dockManager.dockDialogRight(this.dockManager.context.model.rootNode,t):"top-s"==e.id?this.dockManager.dockDialogUp(this.dockManager.context.model.rootNode,t):"down-s"==e.id&&this.dockManager.dockDialogDown(this.dockManager.context.model.rootNode,t))},t.prototype.onMouseMoved=function(e){this.active=!0,this.element.classList.add(this.hoverIconClass),this.wheel.onMouseOver(this,e)},t.prototype.onMouseOut=function(e){this.active=!1,this.element.classList.remove(this.hoverIconClass),this.wheel.onMouseOut(this,e)},c.FillDockContainer=function(e,t){0!=arguments.length&&(void 0===t&&(t=c.TabHost.DIRECTION_BOTTOM),this.dockManager=e,this.tabOrientation=t,this.name=s("fill_"),this.element=document.createElement("div"),this.containerElement=this.element,this.containerType="fill",this.minimumAllowedChildNodes=2,this.element.classList.add("dock-container"),this.element.classList.add("dock-container-fill"),this.tabHost=new c.TabHost(this.tabOrientation),this.element.appendChild(this.tabHost.hostElement))},c.FillDockContainer.prototype.setActiveChild=function(e){this.tabHost.setActiveTab(e)},c.FillDockContainer.prototype.resize=function(e,t){this.element.style.width=e+"px",this.element.style.height=t+"px",this.tabHost.resize(e,t)},c.FillDockContainer.prototype.performLayout=function(e){this.tabHost.performLayout(e)},c.FillDockContainer.prototype.destroy=function(){l(this.element)&&delete this.element},c.FillDockContainer.prototype.saveState=function(e){e.width=this.width,e.height=this.height},c.FillDockContainer.prototype.loadState=function(e){this.width=e.width,this.height=e.height},Object.defineProperty(c.FillDockContainer.prototype,"width",{get:function(){return this.element.clientWidth},set:function(e){this.element.style.width=e+"px"}}),Object.defineProperty(c.FillDockContainer.prototype,"height",{get:function(){return this.element.clientHeight},set:function(e){this.element.style.height=e+"px"}}),c.DocumentManagerContainer=function(e){c.FillDockContainer.call(this,e,c.TabHost.DIRECTION_TOP),this.minimumAllowedChildNodes=0,this.element.classList.add("document-manager"),this.tabHost.createTabPage=this._createDocumentTabPage,this.tabHost.displayCloseButton=!0},c.DocumentManagerContainer.prototype=new c.FillDockContainer,c.DocumentManagerContainer.prototype.constructor=c.DocumentManagerContainer,c.DocumentManagerContainer.prototype._createDocumentTabPage=function(e,t){return new c.DocumentTabPage(e,t)},c.DocumentManagerContainer.prototype.saveState=function(e){c.FillDockContainer.prototype.saveState.call(this,e),e.documentManager=!0},c.DocumentManagerContainer.prototype.selectedTab=function(){return this.tabHost.activeTab},c.DocumentTabPage=function(e,t){c.TabPage.call(this,e,t),"panel"==this.container.containerType&&(this.panel=t,this.containerElement=this.panel.elementContent,l(this.containerElement))},c.DocumentTabPage.prototype=new c.TabPage,c.DocumentTabPage.prototype.constructor=c.DocumentTabPage,c.DocumentTabPage.prototype.destroy=function(){c.TabPage.prototype.destroy.call(this),l(this.containerElement),this.panel.elementContentHost.appendChild(this.containerElement)},c.SplitterPanel=function(e,t){this.childContainers=e,this.stackedVertical=t,this.panelElement=document.createElement("div"),this.spiltterBars=[],this._buildSplitterDOM()},c.SplitterPanel.prototype._buildSplitterDOM=function(){if(this.childContainers.length<=1)throw new c.Exception("Splitter panel should contain atleast 2 panels");this.spiltterBars=[];for(var e=0;e<this.childContainers.length-1;e++){var t=this.childContainers[e],i=this.childContainers[e+1],n=new c.SplitterBar(t,i,this.stackedVertical);this.spiltterBars.push(n),this._insertContainerIntoPanel(t),this.panelElement.appendChild(n.barElement)}this._insertContainerIntoPanel(this.childContainers.slice(-1)[0])},c.SplitterPanel.prototype.performLayout=function(e){this.removeFromDOM(),this.childContainers=e,this._buildSplitterDOM()},c.SplitterPanel.prototype.removeFromDOM=function(){this.childContainers.forEach(function(e){e.containerElement&&(e.containerElement.classList.remove("splitter-container-vertical"),e.containerElement.classList.remove("splitter-container-horizontal"),l(e.containerElement))}),this.spiltterBars.forEach(function(e){l(e.barElement)})},c.SplitterPanel.prototype.destroy=function(){this.removeFromDOM(),this.panelElement.parentNode.removeChild(this.panelElement)},c.SplitterPanel.prototype._insertContainerIntoPanel=function(e){l(e.containerElement),this.panelElement.appendChild(e.containerElement),e.containerElement.classList.add(this.stackedVertical?"splitter-container-vertical":"splitter-container-horizontal")},c.SplitterPanel.prototype.setContainerRatio=function(e,t){for(var i=this.stackedVertical?this.panelElement.clientHeight:this.panelElement.clientWidth,n=i*t,r=this.stackedVertical?this.spiltterBars[0].barElement.clientHeight:this.spiltterBars[0].barElement.clientWidth,o=i-n-r*this.spiltterBars.length,a=o/i,s=0;s<this.childContainers.length;s++){var l,h=this.childContainers[s];h!==e?(l=this.stackedVertical?h.containerElement.clientHeight:h.containerElement.clientWidth,l*=a):l=n,this.stackedVertical?h.resize(h.width,Math.floor(l)):h.resize(Math.floor(l),h.height)}},c.SplitterPanel.prototype.resize=function(e,t){if(!(this.childContainers.length<=1)){for(var i=0;i<this.childContainers.length;i++){var n=this.childContainers[i];if(this.stackedVertical?n.resize(e,n.height):n.resize(n.width,t),i<this.spiltterBars.length){var r=this.spiltterBars[i];this.stackedVertical?r.barElement.style.width=e+"px":r.barElement.style.height=t+"px"}}var o=0,a=this;this.childContainers.forEach(function(e){var t=a.stackedVertical?e.height:e.width;o+=t});var s=this.stackedVertical?this.spiltterBars[0].barElement.clientHeight:this.spiltterBars[0].barElement.clientWidth,l=this.stackedVertical?t:e;l-=s*this.spiltterBars.length,o=Math.max(o,1);for(var h=l/o,c=0,i=0;i<this.childContainers.length;i++){var u=this.childContainers[i],d=this.stackedVertical?u.containerElement.clientHeight:u.containerElement.clientWidth,f=Math.floor(d*h);c+=f,i==this.childContainers.length-1&&(f+=l-c),this.stackedVertical?u.resize(u.width,f):u.resize(f,u.height)}this.panelElement.style.width=e+"px",this.panelElement.style.height=t+"px"}},c.SplitterDockContainer=function(e,t,i){0!=arguments.length&&(this.name=e,this.dockManager=t,this.splitterPanel=new c.SplitterPanel(i,this.stackedVertical),this.containerElement=this.splitterPanel.panelElement,this.minimumAllowedChildNodes=2)},c.SplitterDockContainer.prototype.resize=function(e,t){this.splitterPanel.resize(e,t),this._cachedWidth=e,this._cachedHeight=t},c.SplitterDockContainer.prototype.performLayout=function(e){this.splitterPanel.performLayout(e)},c.SplitterDockContainer.prototype.setActiveChild=function(e){},c.SplitterDockContainer.prototype.destroy=function(){this.splitterPanel.destroy()},c.SplitterDockContainer.prototype.setContainerRatio=function(e,t){this.splitterPanel.setContainerRatio(e,t),this.resize(this.width,this.height)},c.SplitterDockContainer.prototype.saveState=function(e){e.width=this.width,e.height=this.height},c.SplitterDockContainer.prototype.loadState=function(e){this.resize(e.width,e.height)},Object.defineProperty(c.SplitterDockContainer.prototype,"width",{get:function(){return void 0===this._cachedWidth&&(this._cachedWidth=this.splitterPanel.panelElement.clientWidth),this._cachedWidth}}),Object.defineProperty(c.SplitterDockContainer.prototype,"height",{get:function(){return void 0===this._cachedHeight&&(this._cachedHeight=this.splitterPanel.panelElement.clientHeight),this._cachedHeight}}),c.HorizontalDockContainer=function(e,t){this.stackedVertical=!1,c.SplitterDockContainer.call(this,s("horizontal_splitter_"),e,t),this.containerType="horizontal"},c.HorizontalDockContainer.prototype=new c.SplitterDockContainer,c.HorizontalDockContainer.prototype.constructor=c.HorizontalDockContainer,c.PanelContainer=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fa fa-edit";i||(i="Panel"),this.elementContent=e,this.dockManager=t,this.title=i,this.containerType="panel",this.iconName=n,this.minimumAllowedChildNodes=0,this._floatingDialog=void 0,this._initialize()},Object.defineProperty(c.PanelContainer.prototype,"floatingDialog",{get:function(){return this._floatingDialog},set:function(e){this._floatingDialog=e;var t=void 0===this._floatingDialog;this.undockInitiator.enabled=t}}),c.PanelContainer.loadFromState=function(e,t){var i=e.element,n=document.getElementById(i),r=new c.PanelContainer(n,t);return r.elementContent=n,r._initialize(),r.loadState(e),r},c.PanelContainer.prototype.saveState=function(e){e.element=this.elementContent.id,e.width=this.width,e.height=this.height},c.PanelContainer.prototype.loadState=function(e){this.width=e.width,this.height=e.height,this.resize(this.width,this.height)},c.PanelContainer.prototype.setActiveChild=function(e){},Object.defineProperty(c.PanelContainer.prototype,"containerElement",{get:function(){return this.elementPanel}}),c.PanelContainer.prototype._initialize=function(){this.name=s("panel_"),this.elementPanel=document.createElement("div"),this.elementTitle=document.createElement("div"),this.elementTitleText=document.createElement("div"),this.elementContentHost=document.createElement("div"),this.elementButtonClose=document.createElement("div"),this.elementPanel.appendChild(this.elementTitle),this.elementTitle.appendChild(this.elementTitleText),this.elementTitle.appendChild(this.elementButtonClose),this.elementButtonClose.innerHTML='<i class="fa fa-remove"></i>',this.elementButtonClose.classList.add("panel-titlebar-button-close"),this.elementPanel.appendChild(this.elementContentHost),this.elementPanel.classList.add("panel-base"),this.elementTitle.classList.add("panel-titlebar"),this.elementTitle.classList.add("disable-selection"),this.elementTitleText.classList.add("panel-titlebar-text"),this.elementContentHost.classList.add("panel-content");var e=this.elementContent.clientWidth,t=this.elementContent.clientHeight,i=this.elementTitle.clientHeight;this._setPanelDimensions(e,t+i),document.body.appendChild(this.elementPanel),this.closeButtonClickedHandler=new c.EventHandler(this.elementButtonClose,"click",this.onCloseButtonClicked.bind(this)),l(this.elementContent),this.elementContentHost.appendChild(this.elementContent);var n=this.elementContent.getAttribute("caption"),r=this.elementContent.getAttribute("icon");null!=n&&(this.title=n),null!=r&&(this.iconName=r),this._updateTitle(),this.undockInitiator=new c.UndockInitiator(this.elementTitle,this.performUndockToDialog.bind(this)),delete this.floatingDialog},c.PanelContainer.prototype.destroy=function(){l(this.elementPanel),this.closeButtonClickedHandler&&(this.closeButtonClickedHandler.cancel(),delete this.closeButtonClickedHandler)},c.PanelContainer.prototype.performUndockToDialog=function(e,t){return this.undockInitiator.enabled=!1,this.dockManager.requestUndockToDialog(this,e,t)},c.PanelContainer.prototype.performUndock=function(){this.undockInitiator.enabled=!1,this.dockManager.requestUndock(this)},c.PanelContainer.prototype.prepareForDocking=function(){this.undockInitiator.enabled=!0},Object.defineProperty(c.PanelContainer.prototype,"width",{get:function(){return this._cachedWidth},set:function(e){e!==this._cachedWidth&&(this._cachedWidth=e,this.elementPanel.style.width=e+"px")}}),Object.defineProperty(c.PanelContainer.prototype,"height",{get:function(){return this._cachedHeight},set:function(e){e!==this._cachedHeight&&(this._cachedHeight=e,this.elementPanel.style.height=e+"px")}}),c.PanelContainer.prototype.resize=function(e,t){this._cachedWidth==e&&this._cachedHeight==t||(this._setPanelDimensions(e,t),this._cachedWidth=e,this._cachedHeight=t)},c.PanelContainer.prototype._setPanelDimensions=function(e,t){this.elementTitle.style.width=e+"px",this.elementContentHost.style.width=e+"px",this.elementContent.style.width=e+"px",this.elementPanel.style.width=e+"px";var i=this.elementTitle.clientHeight,n=t-i;this.elementContentHost.style.height=n+"px",this.elementContent.style.height=n+"px",this.elementPanel.style.height=t+"px"},c.PanelContainer.prototype.setTitle=function(e){this.title=e,this._updateTitle(),this.onTitleChanged&&this.onTitleChanged(this,e)},c.PanelContainer.prototype.setTitleIcon=function(e){this.iconName=e,this._updateTitle()},c.PanelContainer.prototype._updateTitle=function(){this.elementTitleText.innerHTML='<i class="'+this.iconName+'"></i> '+this.title},c.PanelContainer.prototype.getRawTitle=function(){return this.elementTitleText.innerHTML},c.PanelContainer.prototype.performLayout=function(e){},c.PanelContainer.prototype.onCloseButtonClicked=function(e){this.floatingDialog?this.floatingDialog.destroy():(this.performUndock(),this.destroy())},c.VerticalDockContainer=function(e,t){this.stackedVertical=!0,c.SplitterDockContainer.call(this,s("vertical_splitter_"),e,t),this.containerType="vertical"},c.VerticalDockContainer.prototype=new c.SplitterDockContainer,c.VerticalDockContainer.prototype.constructor=c.VerticalDockContainer,c.SplitterBar=function(e,t,i){this.previousContainer=e,this.nextContainer=t,this.stackedVertical=i,this.barElement=document.createElement("div"),this.barElement.classList.add(i?"splitbar-horizontal":"splitbar-vertical"),this.mouseDownHandler=new c.EventHandler(this.barElement,"mousedown",this.onMouseDown.bind(this)),this.minPanelSize=50,this.readyToProcessNextDrag=!0},c.SplitterBar.prototype.onMouseDown=function(e){this._startDragging(e)},c.SplitterBar.prototype.onMouseUp=function(e){this._stopDragging(e)},c.SplitterBar.prototype.onMouseMoved=function(e){if(this.readyToProcessNextDrag){this.readyToProcessNextDrag=!1;var t=this.previousContainer.dockManager;t.suspendLayout();var i=e.pageX-this.previousMouseEvent.pageX,n=e.pageY-this.previousMouseEvent.pageY;this._performDrag(i,n),this.previousMouseEvent=e,this.readyToProcessNextDrag=!0,t.resumeLayout()}},c.SplitterBar.prototype._performDrag=function(e,t){var i=this.previousContainer.containerElement.clientWidth,n=this.previousContainer.containerElement.clientHeight,r=this.nextContainer.containerElement.clientWidth,o=this.nextContainer.containerElement.clientHeight,a=this.stackedVertical?n:i,s=this.stackedVertical?o:r,l=this.stackedVertical?t:e,h=a+l,c=s-l;if(h<this.minPanelSize||c<this.minPanelSize){if(!(h<this.minPanelSize&&h>a||c<this.minPanelSize&&c>s))return}this.stackedVertical?(this.previousContainer.resize(i,h),this.nextContainer.resize(r,c)):(this.previousContainer.resize(h,n),this.nextContainer.resize(c,o))},c.SplitterBar.prototype._startDragging=function(e){n(),this.mouseMovedHandler&&(this.mouseMovedHandler.cancel(),delete this.mouseMovedHandler),this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler),this.mouseMovedHandler=new c.EventHandler(window,"mousemove",this.onMouseMoved.bind(this)),this.mouseUpHandler=new c.EventHandler(window,"mouseup",this.onMouseUp.bind(this)),this.previousMouseEvent=e},c.SplitterBar.prototype._stopDragging=function(e){r(),document.body.classList.remove("disable-selection"),this.mouseMovedHandler&&(this.mouseMovedHandler.cancel(),delete this.mouseMovedHandler),this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler)},c.DockGraphDeserializer=function(e){this.dockManager=e},c.DockGraphDeserializer.prototype.deserialize=function(e){var t=JSON.parse(_json),i=new c.DockModel;return i.rootNode=this._buildGraph(t),i},c.DockGraphDeserializer.prototype._buildGraph=function(e){var t=e.children,i=[],n=this;t.forEach(function(e){var t=n._buildGraph(e);i.push(t)});var r=this._createContainer(e,i),o=new c.DockNode(r);return o.children=i,o.children.forEach(function(e){e.parent=o}),o},c.DockGraphDeserializer.prototype._createContainer=function(e,t){var i,n=e.containerType,r=e.state,o=[];if(t.forEach(function(e){o.push(e.container)}),o=[],"panel"==n)i=new c.PanelContainer.loadFromState(r,this.dockManager);else if("horizontal"==n)i=new c.HorizontalDockContainer(this.dockManager,o);else if("vertical"==n)i=new c.VerticalDockContainer(this.dockManager,o);else{if("fill"!=n)throw new c.Exception("Cannot create dock container of unknown type: "+n);var a=r.documentManager;i=a?new DocumentManagerContainer(this.dockManager):new c.FillDockContainer(this.dockManager)}return i.loadState(r),i.performLayout(o),i},c.DockGraphSerializer=function(){},c.DockGraphSerializer.prototype.serialize=function(e){var t=this._buildGraphInfo(e.rootNode);return JSON.stringify(t)},c.DockGraphSerializer.prototype._buildGraphInfo=function(e){var t={};e.container.saveState(t);var i=[],n=this;e.childNodes.forEach(function(e){i.push(n._buildGraphInfo(e))});var r={};return r.containerType=e.container.containerType,r.state=t,r.children=i,r},s.counter=0,c.EventHandler=function(e,t,i){this.target=i,this.eventName=t,this.source=e,this.source.addEventListener(t,this.target)},c.EventHandler.prototype.cancel=function(){this.source.removeEventListener(this.eventName,this.target)},c.UndockInitiator=function(e,t,i){i||(i=10),this.element=e,this.listener=t,this.thresholdPixels=i,this._enabled=!1},Object.defineProperty(c.UndockInitiator.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e,this._enabled?(this.mouseDownHandler&&(this.mouseDownHandler.cancel(),delete this.mouseDownHandler),this.mouseDownHandler=new c.EventHandler(this.element,"mousedown",this.onMouseDown.bind(this))):(this.mouseDownHandler&&(this.mouseDownHandler.cancel(),delete this.mouseDownHandler),this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler),this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler))}}),c.UndockInitiator.prototype.onMouseDown=function(e){this.enabled&&(this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler),this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler),this.mouseUpHandler=new c.EventHandler(window,"mouseup",this.onMouseUp.bind(this)),this.mouseMoveHandler=new c.EventHandler(window,"mousemove",this.onMouseMove.bind(this)),this.dragStartPosition=new h(e.pageX,e.pageY))},c.UndockInitiator.prototype.onMouseUp=function(e){this.mouseUpHandler&&(this.mouseUpHandler.cancel(),delete this.mouseUpHandler),this.mouseMoveHandler&&(this.mouseMoveHandler.cancel(),delete this.mouseMoveHandler)},c.UndockInitiator.prototype.onMouseMove=function(e){var t=new h(e.pageX,e.pageY),i=t.x-this.dragStartPosition.x,n=t.y-this.dragStartPosition.y;Math.sqrt(i*i+n*n)>this.thresholdPixels&&(this.enabled=!1,this._requestUndock(e))},c.UndockInitiator.prototype._requestUndock=function(e){var t=this.dragStartPosition.x-this.element.offsetLeft,i=this.dragStartPosition.y-this.element.offsetTop,n=new h(t,i);this.listener(e,n)},c}()}},function(module,exports,__webpack_require__){"use strict";module.exports=function(id){var reloadTable=function(){$$(id("logTable")).clearAll();var e={name:"log"};"all"!=$$(id("operation_log_sort_method")).getValue()&&(e.met=$$(id("operation_log_sort_method")).getValue()),""!=$$(id("operation_log_sort_ip")).getValue()&&(e.ip=$$(id("operation_log_sort_ip")).getValue()),"all"!=$$(id("operation_log_sort_admin")).getValue()&&(e.user_id=$$(id("operation_log_sort_admin")).getValue()),""!=$$(id("operation_log_sort_path")).getValue()&&(e.path=$$(id("operation_log_sort_path")).getValue()),""!=$$(id("operation_log_sort_data")).getValue()&&(e.data=$$(id("operation_log_sort_data")).getValue()),""!=$$(id("operation_log_sort_date")).getText()&&(e.date=$$(id("operation_log_sort_date")).getText()),$$(id("logTable")).load(Route("remote.get",e))},requestGenerator=function requestGenerator(){webix.ui({view:"window",id:id("request"),head:"Request generator",position:"center",move:!0,modal:!0,width:800,height:600,body:{rows:[{multi:!0,view:"accordion",minWidth:800,cols:[{header:"Form",body:{view:"form",id:"request-form",elements:[{view:"text",name:"path",label:"Path",placeholder:"Path",align:"center"},{view:"select",name:"method",label:"Method",options:[{id:"POST",value:"POST"},{id:"GET",value:"GET"},{id:"PATCH",value:"PATCH"},{id:"PUT",value:"PUT"},{id:"DELETE",value:"DELETE"}]},{view:"textarea",name:"input",label:"Data",placeholder:"Data",align:"center"}]}},{header:"Request result",body:{view:"textarea",id:"right"}}]},{view:"toolbar",id:"mybar",align:"center",elements:[{view:"button",value:"Send data",click:function click(){var data=$$("request-form").getValues(),fnResult=function(e){try{$$("right").setValue(JSON.stringify(JSON.parse(e),null,"\t"))}catch(e){$$("right").setValue("Result not JSON")}reloadTable()};if("[]"==data.input)data.input=fnResult;else try{data.input=JSON.parse(data.input)}catch(e){data.input=fnResult}var result=eval("webix.ajax()."+data.method.toLowerCase()+"(data.path, data.input, fnResult)");result.fail(function(e){var t=e.responseURL.replace(window.location.origin+"/","");webix.confirm({title:"Error "+e.status,text:"Find in exception report?<br>"+t,ok:"Search",cancel:"Cancel",callback:function(e){e&&runers.exception_reporter(function(e){$$(e("exception_reporter_sort_path")).setValue(t),$$(id("request")).close()})}})})}},{view:"button",value:"Close",click:"$$('"+id("request")+"').close();"}]}]}}).show()};return{rows:[{view:"toolbar",id:id("controlBar"),align:"center",elements:[{view:"button",type:"iconButton",label:"New request",icon:"plus",click:function(){requestGenerator()}},{view:"button",type:"iconButton",label:"Reload table",icon:"repeat",click:function(){reloadTable()}},{view:"button",type:"iconButton",label:"Select all",icon:"list",click:function(){$$(id("logTable")).selectAll()}},{view:"button",type:"iconButton",label:"Unselect all",icon:"list",click:function(){$$(id("logTable")).unselectAll()}},{view:"button",type:"iconButton",label:"Remove selected",icon:"trash",click:function(){var e=$$(id("logTable")).getSelectedId(!0,!0);webix.confirm({title:"Close",text:"Delete "+e.length+" items?",type:"confirm-error",callback:function(t){webix.ajax().del(Remote("log","delete"),{ids:e},function(){reloadTable()})}})}}]},{view:"toolbar",id:id("operation_log_filter"),align:"center",elements:[{view:"select",id:id("operation_log_sort_admin"),fillspace:!0,options:Route("remote.get",{name:"log",selectListAdmin:!0}),on:{onChange:function(){reloadTable()}}},{view:"select",id:id("operation_log_sort_method"),fillspace:!0,options:[{id:"all",value:"All methods"},{id:"POST",value:"POST"},{id:"GET",value:"GET"},{id:"PATCH",value:"PATCH"},{id:"PUT",value:"PUT"},{id:"DELETE",value:"DELETE"}],on:{onChange:function(){reloadTable()}}},{view:"text",id:id("operation_log_sort_path"),fillspace:!0,placeholder:"Path",align:"center",on:{onChange:function(){reloadTable()}}},{view:"text",id:id("operation_log_sort_data"),fillspace:!0,placeholder:"Data",align:"center",on:{onChange:function(){reloadTable()}}},{view:"text",id:id("operation_log_sort_ip"),placeholder:"IP",fillspace:!0,align:"center",on:{onChange:function(){reloadTable()}}},{view:"datepicker",id:id("operation_log_sort_date"),placeholder:"Date",format:"%Y-%m-%d",editable:!0,fillspace:!0,on:{onChange:function(){reloadTable()}}},{view:"button",type:"iconButton",label:"Clear",icon:"close",click:function(){$$(id("operation_log_sort_method")).setValue("all"),$$(id("operation_log_sort_ip")).setValue(""),$$(id("operation_log_sort_admin")).setValue("all"),$$(id("operation_log_sort_path")).setValue(""),$$(id("operation_log_sort_data")).setValue(""),$$(id("operation_log_sort_data")).setValue(""),reloadTable()}}]},{view:"datatable",select:!0,multiselect:!0,id:id("logTable"),columns:[{id:"id",header:"ID"},{id:"user_id",header:"Admin ID"},{id:"method",header:"Method"},{id:"path",header:"Path",fillspace:!0},{id:"input",header:"Data",fillspace:!0},{id:"ip",header:"IP",fillspace:!0},{id:"created_at",header:"Date",fillspace:!0}],type:{template:"{common.space()}"},url:Route("remote.get",{name:"log"}),on:{onItemDblClick:function(e){var t=this.getItem(e.row);t.input=JSON.stringify(JSON.parse(t.input),null,"\t"),requestGenerator(),t.method=t.method.replace(/<\/?[^>]+>/gi,""),$$("request-form").setValues(t)}}}]}}},function(e,t,i){"use strict";(function(t){e.exports=function(e){var i=function(){$$(e("roleTable")).clearAll();var t={name:"role"};""!=$$(e("sort_name")).getValue()&&(t.na=$$(e("sort_name")).getValue()),""!=$$(e("sort_slug")).getValue()&&(t.slug=$$(e("sort_slug")).getValue()),""!=$$(e("sort_created_at")).getText()&&(t.created_at=$$(e("sort_created_at")).getText()),""!=$$(e("sort_updated_at")).getText()&&(t.updated_at=$$(e("sort_updated_at")).getText()),$$(e("roleTable")).load(Route("remote.get",t))},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;webix.ui({view:"window",id:"roleModalForm",head:e?"Edit "+e.name:"New role",position:"center",resize:!0,move:!0,modal:!0,width:t("#layoutContainer").width()/1.5,height:t("#layoutContainer").height()/1,body:{rows:[{view:"form",id:"roleForm",elements:[{view:"text",name:"name",placeholder:"Name",label:"Name",align:"center"},{view:"text",name:"slug",placeholder:"Slug",label:"Slug",align:"center"},{view:"forminput",name:"permissions",labelWidth:0,body:{view:"dbllist",labelBottomLeft:"Premission",labelBottomRight:"Selected",url:Route("remote.get",{name:"premission",list:!0})}}],rules:{name:webix.rules.isNotEmpty,slug:webix.rules.isNotEmpty}},{view:"toolbar",id:"mybar",align:"center",elements:[{view:"button",value:e?"Update":"Create",click:function(){if(!$$("roleForm").validate())return webix.message({type:"error",text:"Form data is invalid"});webix.ajax().post(Remote("role",e?"update":"insert"),$$("roleForm").getValues(),function(){$$("roleModalForm").close(),i()})}},{view:"button",value:"Close",click:"$$('roleModalForm').close();"}]}]}}).show(),e&&$$("roleForm").setValues(e)};return{rows:[{view:"toolbar",id:e("controlBar"),align:"center",elements:[{view:"button",type:"iconButton",label:"New role",icon:"plus",click:function(){n()}},{view:"button",type:"iconButton",label:"Reload table",icon:"repeat",click:function(){i()}},{view:"button",type:"iconButton",label:"Select all",icon:"list",click:function(){$$(e("roleTable")).selectAll()}},{view:"button",type:"iconButton",label:"Unselect all",icon:"list",click:function(){$$(e("roleTable")).unselectAll()}},{view:"button",type:"iconButton",label:"Remove selected",icon:"trash",click:function(){var t=$$(e("roleTable")).getSelectedId(!0,!0);webix.confirm({title:"Close",text:"Delete "+t.length+" items?",type:"confirm-error",callback:function(e){webix.ajax().del(Remote("role","delete"),{ids:t},function(){i()})}})}}]},{view:"toolbar",id:e("filter"),align:"center",elements:[{view:"text",id:e("sort_name"),fillspace:!0,placeholder:"Name",align:"center",on:{onChange:function(){i()}}},{view:"text",id:e("sort_slug"),fillspace:!0,placeholder:"Slug",align:"center",on:{onChange:function(){i()}}},{view:"datepicker",id:e("sort_created_at"),placeholder:"Created at",format:"%Y-%m-%d",editable:!0,fillspace:!0,on:{onChange:function(){i()}}},{view:"datepicker",id:e("sort_updated_at"),placeholder:"Updated at",format:"%Y-%m-%d",editable:!0,fillspace:!0,on:{onChange:function(){i()}}},{view:"button",type:"iconButton",label:"Clear",icon:"close",click:function(){$$(e("sort_name")).setValue(""),$$(e("sort_slug")).setValue(""),$$(e("sort_created_at")).setValue(""),$$(e("sort_updated_at")).setValue(""),i()}}]},{view:"datatable",select:!0,multiselect:!0,id:e("roleTable"),columns:[{id:"id",header:"ID"},{id:"name",header:"Name",fillspace:!0},{id:"slug",header:"Slug",fillspace:!0},{id:"created_at",header:"Created at",fillspace:!0},{id:"updated_at",header:"Updated at",fillspace:!0}],type:{template:"{common.space()}"},url:Route("remote.get",{name:"role"}),on:{onItemDblClick:function(e){var t=this.getItem(e.row);n(t)}}}]}}}).call(t,i(0))},function(e,t,i){"use strict";e.exports=function(e){var t=function(){$$(e("routesTable")).clearAll();var t={name:"routes"};""!=$$(e("sort_host")).getValue()&&(t.host=$$(e("sort_host")).getValue()),"all"!=$$(e("sort_method")).getValue()&&(t.met=$$(e("sort_method")).getValue()),""!=$$(e("sort_uri")).getValue()&&(t.uri=$$(e("sort_uri")).getValue()),""!=$$(e("sort_name")).getValue()&&(t.na=$$(e("sort_name")).getValue()),""!=$$(e("sort_action")).getValue()&&(t.action=$$(e("sort_action")).getValue()),""!=$$(e("sort_middleware")).getValue()&&(t.middleware=$$(e("sort_middleware")).getValue()),$$(e("routesTable")).load(Route("remote.get",t))};return{rows:[{view:"toolbar",id:e("filter"),align:"center",elements:[{view:"text",id:e("sort_host"),fillspace:!0,placeholder:"Host",align:"center",on:{onChange:function(){t()}}},{view:"select",id:e("sort_method"),fillspace:!0,options:[{id:"all",value:"All methods"},{id:"POST",value:"POST"},{id:"GET",value:"GET"},{id:"PATCH",value:"PATCH"},{id:"PUT",value:"PUT"},{id:"DELETE",value:"DELETE"}],on:{onChange:function(){t()}}},{view:"text",id:e("sort_uri"),fillspace:!0,placeholder:"Uri",align:"center",on:{onChange:function(){t()}}},{view:"text",id:e("sort_name"),fillspace:!0,placeholder:"Name",align:"center",on:{onChange:function(){t()}}},{view:"text",id:e("sort_action"),fillspace:!0,placeholder:"Action",align:"center",on:{onChange:function(){t()}}},{view:"text",id:e("sort_middleware"),fillspace:!0,placeholder:"Middleware",align:"center",on:{onChange:function(){t()}}},{view:"button",type:"iconButton",label:"Clear filter",icon:"close",click:function(){$$(e("sort_method")).setValue("all"),$$(e("sort_host")).setValue(""),$$(e("sort_uri")).setValue(""),$$(e("sort_name")).setValue(""),$$(e("sort_action")).setValue(""),$$(e("sort_middleware")).setValue(""),t()}},{view:"button",type:"iconButton",label:"Reload table",icon:"repeat",click:function(){t()}}]},{view:"datatable",select:!0,id:e("routesTable"),columns:[{id:"host",header:"Host"},{id:"method",header:"Method"},{id:"uri",header:"Uri",fillspace:!0},{id:"name",header:"Name",fillspace:!0},{id:"action",header:"Action",fillspace:!0},{id:"middleware",header:"Middleware",fillspace:!0}],type:{template:"{common.space()}"},url:Route("remote.get",{name:"routes"}),on:{onItemDblClick:function(t){var i=this.getItem(t.row);i[t.column]&&("method"!=t.column?webix.confirm({title:t.column,width:8*i[t.column].length,text:i[t.column],ok:"Search",cancel:"Cancel",callback:function(n){n&&$$(e("sort_"+t.column)).setValue(i[t.column].replace(/<\/?[^>]+>/gi,""))}}):webix.alert({title:t.column,ok:"OK",width:8*i[t.column].length,text:i[t.column]}))}}}]}}},function(e,t,i){"use strict";(function(t,n,r){var o=i(13),a=["string","integer","text","float","double","decimal","boolean","date","time","dateTime","timestamp","char","mediumText","longText","tinyInteger","smallInteger","mediumInteger","bigInteger","unsignedTinyInteger","unsignedSmallInteger","unsignedMediumInteger","unsignedInteger","unsignedBigInteger","enum","json","jsonb","dateTimeTz","timeTz","timestampTz","nullableTimestamps","binary","ipAddress","macAddress"],s=["primary","unique","index"],l={Base:{randomDigit:"randomDigit() // 7",randomDigitNotNull:"randomDigitNotNull() // 5",randomNumber:"randomNumber($nbDigits = NULL, $strict = false) // 79907610",randomFloat:"randomFloat($nbMaxDecimals = NULL, $min = 0, $max = NULL) // 48.8932",numberBetween:"numberBetween($min = 1000, $max = 9000) // 8567",randomLetter:"randomLetter() // 'b'",randomElements:"randomElements($array = array ('a','b','c'), $count = 1) // array('c')",randomElement:"randomElement($array = array ('a','b','c')) // 'b'",shuffle:"shuffle('hello, world') // 'rlo,h eoldlw' <br> shuffle(array(1, 2, 3)) // array(2, 1, 3)",numerify:"numerify('Hello ###') // 'Hello 609'",lexify:"lexify('Hello ???') // 'Hello wgt'",bothify:"bothify('Hello ##??') // 'Hello 42jz'",asciify:"asciify('Hello ***') // 'Hello R6+'",regexify:"regexify('[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}') // sm0@y8k96a.ej"},Lorem:{word:"word() // 'aut'",words:"words($nb = 3, $asText = false) // array('porro', 'sed', 'magni')",sentence:"sentence($nbWords = 6, $variableNbWords = true) // 'Sit vitae voluptas sint non voluptates.'",sentences:"sentences($nb = 3, $asText = false) // array('Optio quos qui illo error.', 'Laborum vero a officia id corporis.', 'Saepe provident esse hic eligendi.')",paragraph:"paragraph($nbSentences = 3, $variableNbSentences = true) // 'Ut ab voluptas sed a nam. Sint autem inventore aut officia aut aut blanditiis. Ducimus eos odit amet et est ut eum.'",paragraphs:"paragraphs($nb = 3, $asText = false) // array('Quidem ut sunt et quidem est accusamus aut. Fuga est placeat rerum ut. Enim ex eveniet facere sunt.', '...', '...')",text:"text($maxNbChars = 200) // 'Fuga totam reiciendis qui architecto fugiat nemo. Consequatur recusandae qui cupiditate eos quod.'"},Person:{title:"title($gender = null|'male'|'female') // 'Ms.'",titleMale:"titleMale() // 'Mr.'",titleFemale:"titleFemale() // 'Ms.'",suffix:"suffix() // 'Jr.'",name:"name($gender = null|'male'|'female') // 'Dr. Zane Stroman'",firstName:"firstName($gender = null|'male'|'female') // 'Maynard'",firstNameMale:"firstNameMale() // 'Maynard'",firstNameFemale:"firstNameFemale() // 'Rachel'",lastName:"lastName() // 'Zulauf'"},Address:{cityPrefix:"cityPrefix() // 'Lake'",secondaryAddress:"secondaryAddress() // 'Suite 961'",state:"state() // 'NewMexico'",stateAbbr:"stateAbbr() // 'OH'",citySuffix:"citySuffix() // 'borough'",streetSuffix:"streetSuffix() // 'Keys'",buildingNumber:"buildingNumber() // '484'",city:"city() // 'West Judge'",streetName:"streetName() // 'Keegan Trail'",streetAddress:"streetAddress() // '439 Karley Loaf Suite 897'",postcode:"postcode() // '17916'",address:"address() // '8888 Cummings Vista Apt. 101, Susanbury, NY 95473'",country:"country() // 'Falkland Islands (Malvinas)'",latitude:"latitude($min = -90, $max = 90) // 77.147489",longitude:"longitude($min = -180, $max = 180) // 86.211205"},PhoneNumber:{phoneNumber:"phoneNumber() // '201-886-0269 x3767'",tollFreePhoneNumber:"tollFreePhoneNumber() // '(888) 937-7238'",e164PhoneNumber:"e164PhoneNumber() // '+27113456789'"},Company:{catchPhrase:"catchPhrase() // 'Monitored regional contingency'",bs:"bs() // 'e-enable robust architectures'",company:"company() // 'Bogan-Treutel'",companySuffix:"companySuffix() // 'and Sons'",jobTitle:"jobTitle() // 'Cashier'"},Text:{realText1:"realText($maxNbChars = 200, $indexSize = 2) // \"And yet I wish you could manage it?) 'And what are they made of?' Alice asked in a ...\""},DateTime:{unixTime:"unixTime($max = 'now') // 58781813",dateTime:"dateTime($max = 'now', $timezone = null) // DateTime('2008-04-25 08:37:17', 'UTC')",dateTimeAD:"dateTimeAD($max = 'now', $timezone = null) // DateTime('1800-04-29 20:38:49', 'Europe/Paris')",iso8601:"iso8601($max = 'now') // '1978-12-09T10:10:29+0000'",date:"date($format = 'Y-m-d', $max = 'now') // '1979-06-09'",time:"time($format = 'H:i:s', $max = 'now') // '20:49:42'",dateTimeBetween:"dateTimeBetween($startDate = '-30 years', $endDate = 'now', $timezone = null) // DateTime('2003-03-15 02:00:49', 'Africa/Lagos')",dateTimeInInterval:"dateTimeInInterval($startDate = '-30 years', $interval = '+ 5 days', $timezone = null) // DateTime('2003-03-15 02:00:49', 'Antartica/Vostok')",dateTimeThisCentury:"dateTimeThisCentury($max = 'now', $timezone = null) // DateTime('1915-05-30 19:28:21', 'UTC')",dateTimeThisDecade:"dateTimeThisDecade($max = 'now', $timezone = null) // DateTime('2007-05-29 22:30:48', 'Europe/Paris')",dateTimeThisYear:"dateTimeThisYear($max = 'now', $timezone = null) // DateTime('2011-02-27 20:52:14', 'Africa/Lagos')",dateTimeThisMonth:"dateTimeThisMonth($max = 'now', $timezone = null) // DateTime('2011-10-23 13:46:23', 'Antarctica/Vostok')",amPm:"amPm($max = 'now') // 'pm'",dayOfMonth:"dayOfMonth($max = 'now') // '04'",dayOfWeek:"dayOfWeek($max = 'now') // 'Friday'",month:"month($max = 'now') // '06'",monthName:"monthName($max = 'now') // 'January'",year:"year($max = 'now') // '1993'",century:"century // 'VI'",timezone:"timezone // 'Europe/Paris'"},Internet:{email:"email() // 'tkshlerin@collins.com'",safeEmail:"safeEmail() // 'king.alford@example.org'",freeEmail:"freeEmail() // 'bradley72@gmail.com'",companyEmail:"companyEmail() // 'russel.durward@mcdermott.org'",freeEmailDomain:"freeEmailDomain() // 'yahoo.com'",safeEmailDomain:"safeEmailDomain() // 'example.org'",userName:"userName() // 'wade55'",password:"password() // 'k&|X+a45*2['",domainName:"domainName() // 'wolffdeckow.net'",domainWord:"domainWord() // 'feeney'",tld:"tld() // 'biz'",url:"url() // 'http://www.skilesdonnelly.biz/aut-accusantium-ut-architecto-sit-et.html'",slug:"slug() // 'aut-repellat-commodi-vel-itaque-nihil-id-saepe-nostrum'",ipv4:"ipv4() // '109.133.32.252'",localIpv4:"localIpv4() // '10.242.58.8'",ipv6:"ipv6() // '8e65:933d:22ee:a232:f1c1:2741:1f10:117c'",macAddress:"macAddress() // '43:85:B7:08:10:CA'"},UserAgent:{userAgent:"userAgent() // 'Mozilla/5.0 (Windows CE) AppleWebKit/5350 (KHTML, like Gecko) Chrome/13.0.888.0 Safari/5350'",chrome:"chrome() // 'Mozilla/5.0 (Macintosh; PPC Mac OS X 10_6_5) AppleWebKit/5312 (KHTML, like Gecko) Chrome/14.0.894.0 Safari/5312'",firefox:"firefox() // 'Mozilla/5.0 (X11; Linuxi686; rv:7.0) Gecko/20101231 Firefox/3.6'",safari:"safari() // 'Mozilla/5.0 (Macintosh; U; PPC Mac OS X 10_7_1 rv:3.0; en-US) AppleWebKit/534.11.3 (KHTML, like Gecko) Version/4.0 Safari/534.11.3'",opera:"opera() // 'Opera/8.25 (Windows NT 5.1; en-US) Presto/2.9.188 Version/10.00'",internetExplorer:"internetExplorer() // 'Mozilla/5.0 (compatible; MSIE 7.0; Windows 98; Win 9x 4.90; Trident/3.0)'"},Payment:{creditCardType:"creditCardType() // 'MasterCard'",creditCardNumber:"creditCardNumber() // '4485480221084675'",creditCardExpirationDate:"creditCardExpirationDate() // 04/13",creditCardExpirationDateString:"creditCardExpirationDateString() // '04/13'",creditCardDetails:"creditCardDetails() // array('MasterCard', '4485480221084675', 'Aleksander Nowak', '04/13')",iban:"iban($countryCode) // 'IT31A8497112740YZ575DJ28BP4'",swiftBicNumber:"swiftBicNumber() // 'RZTIAT22263'"},Color:{hexcolor:"hexcolor() // '#fa3cc2'",rgbcolor:"rgbcolor() // '0,255,122'",rgbColorAsArray:"rgbColorAsArray() // array(0,255,122)",rgbCssColor:"rgbCssColor() // 'rgb(0,255,122)'",safeColorName:"safeColorName() // 'fuchsia'",colorName:"colorName() // 'Gainsbor'"},File:{fileExtension:"fileExtension() // 'avi'",mimeType:"mimeType() // 'video/x-msvideo'",file:"file($sourceDir = '/tmp', $targetDir = '/tmp') // '/path/to/targetDir/13b73edae8443990be1aa8f1a483bc27.jpg' <br> file($sourceDir, $targetDir, false) // '13b73edae8443990be1aa8f1a483bc27.jpg'"},Image:{imageUrl:"imageUrl($width = 640, $height = 480) // 'http://lorempixel.com/640/480/' <br> imageUrl($width, $height, 'cats') // 'http://lorempixel.com/800/600/cats/' <br> imageUrl($width, $height, 'cats', true, 'Faker') // 'http://lorempixel.com/800/400/cats/Faker' <br> imageUrl($width, $height, 'cats', true, 'Faker', true) // 'http://lorempixel.com/grey/800/400/cats/Faker/' Monochrome image",image:"image($dir = '/tmp', $width = 640, $height = 480) // '/tmp/13b73edae8443990be1aa8f1a483bc27.jpg' <br> image($dir, $width, $height, 'cats')  // 'tmp/13b73edae8443990be1aa8f1a483bc27.jpg' it's a cat! <br> image($dir, $width, $height, 'cats', false) // '13b73edae8443990be1aa8f1a483bc27.jpg' it's a filename without path <br> image($dir, $width, $height, 'cats', true, false) // it's a no randomize images (default: 'true') <br> image($dir, $width, $height, 'cats', true, true, 'Faker') // 'tmp/13b73edae8443990be1aa8f1a483bc27.jpg' it's a cat with 'Faker' text. Default, 'null'."},Uuid:{uuid:"uuid() // '7e57d004-2b97-0e7a-b45f-5387367791cd'"},Barcode:{ean13:"ean13() // '4006381333931'",ean8:"ean8() // '73513537'",isbn13:"isbn13() // '9790404436093'",isbn10:"isbn10() // '4881416324'"},Miscellaneous:{boolean:"boolean() // false <br> boolean($chanceOfGettingTrue = 50) // true",md5:"md5() // 'de99a620c50f2990e87144735cd357e7'",sha1:"sha1() // 'f08e7f04ca1a413807ebc47551a40a20a0b4de5c'",sha256:"sha256() // '0061e4c60dac5c1d82db0135a42e00c89ae3a333e7c26485321f24348c7e98a5'",locale:"locale() // en_UK",countryCode:"countryCode() // UK",languageCode:"languageCode() // en",currencyCode:"currencyCode() // EUR",emoji:"emoji() // ð"},Biased:{biasedNumberBetween:"biasedNumberBetween($min = 10, $max = 20, $function = 'sqrt') // get a random number between 10 and 20, with more chances to be close to 20"},HtmlLorem:{randomHtml:"randomHtml(2,3) // Generate HTML document which is no more than 2 levels deep, and no more than 3 elements wide at any level."}},h=["unique","optional","valid"];e.exports=function(e){var i=function(){$$(e("creatorFormMigration")).clear(),$$(e("fakerFunction")).define("options",[]),$$(e("fakerFunction")).refresh(),$$(e("fakerFunctionParams")).setValue(""),$$(e("editBtn")).disable(),$$(e("addBtn")).enable()},c=function(){if(void 0!=$$("createModal"))return $$("createModal").show();webix.ui({view:"window",id:"createModal",head:"Create Settings",modal:!0,position:"center",width:400,body:{rows:[{view:"form",id:e("lastConf"),elements:[{view:"text",label:"Primary key",name:"primary_key",labelPosition:"top",value:"id"},{view:"toggle",type:"iconButton",name:"timestamps",offIcon:"square-o",onIcon:"check-square-o",offLabel:"Created_at & Updated_at",onLabel:"Created_at & Updated_at",value:"on"},{view:"toggle",type:"iconButton",name:"soft_deletes",offIcon:"square-o",onIcon:"check-square-o",offLabel:"Soft deletes",onLabel:"Soft deletes"},{view:"toggle",type:"iconButton",name:"run_factory",offIcon:"square-o",disabled:!$$(e("createFactoryCheck")).getValue(),onIcon:"check-square-o",offLabel:"No run factory",onLabel:"Run factory",on:{onChange:function(){this.getValue()?$$("run_factory_num").enable():$$("run_factory_num").disable()}}},{view:"text",label:"Number of records added:",name:"run_factory_num",id:"run_factory_num",labelPosition:"top",disabled:!0,value:"10"}]},{view:"toolbar",elements:[{view:"button",type:"iconButton",label:"Create",icon:"keyboard-o",click:function(){var i=$$(e("creatorForm")).getValues();return""==i.table_name?webix.message("Need to enter table name!","error"):(i.fields=$$(e("createMigrateTable")).serialize(),i.fields.length?(i=Object.assign(i,$$(e("lastConf")).getValues(),$$(e("creatorFormSettings")).getValues()),t.start(),void webix.ajax().post(Remote("scaffold","insert"),i,function(r){if(r=JSON.parse(r),"error"==r.status)webix.alert({title:"Oops, something went wrong!",type:"alert-error",width:n("#layoutContainer").width()/2,text:r.messages}),t.done(),$$("createModal").hide();else{if("success"!=r.status)return webix.message("Oops, something went wrong!","error");webix.alert({title:"Success",width:n("#layoutContainer").width()/2,text:r.messages}),"1"==i.run_factory&&(t.start(),i.new_run_factory=!0,webix.ajax().post(Remote("scaffold","insert"),i,function(e){webix.message(e),t.done()})),$$(e("creatorForm")).setValues({model_name:"App\\Models\\",controller_name:"App\\Admin\\Controllers\\"}),$$("createModal").close()}})):webix.message("Need to add fields!","error"))}},{view:"button",type:"iconButton",label:"Cancel",icon:"remove",click:function(){$$("createModal").close()}}]}]}}).show()};return{rows:[{cols:[{view:"tabview",cells:[{header:"<span class='webix_icon fa-keyboard-o'></span> Create scaffold",body:{rows:[{view:"toolbar",elements:[{view:"form",id:e("creatorFormSettings"),align:"center",padding:5,elements:[{cols:[{view:"button",type:"iconButton",label:"Create scaffold",icon:"keyboard-o",click:function(){c()}},{view:"toggle",type:"iconButton",name:"create[migration]",offIcon:"square-o",onIcon:"check-square-o",offLabel:"No create migration",onLabel:"Create migration",value:"on"},{view:"toggle",type:"iconButton",name:"create[model]",offIcon:"square-o",onIcon:"check-square-o",offLabel:"No create model",onLabel:"Create model",value:"on"},{view:"toggle",type:"iconButton",name:"create[controller]",offIcon:"square-o",disabled:!0,onIcon:"check-square-o",offLabel:"No create controller",onLabel:"Create controller"},{view:"toggle",type:"iconButton",name:"create[migrate]",offIcon:"square-o",onIcon:"check-square-o",offLabel:"No run migrate",onLabel:"Run migrate",value:"on"},{view:"toggle",type:"iconButton",name:"create[factory]",id:e("createFactoryCheck"),offIcon:"square-o",onIcon:"check-square-o",offLabel:"No create factory",onLabel:"Create factory",value:"on",on:{onChange:function(){this.getValue()?($$(e("fakerGroup")).enable(),$$(e("fakerFunction")).enable(),$$(e("fakerFunctionParams")).enable(),$$(e("fakerHelpBTN")).enable(),$$(e("fakerModifier")).enable()):($$(e("fakerGroup")).disable(),$$(e("fakerFunction")).disable(),$$(e("fakerFunctionParams")).disable(),$$(e("fakerHelpBTN")).disable(),$$(e("fakerModifier")).disable())}}}]}]}]},{view:"toolbar",align:"center",elements:[{view:"form",id:e("creatorForm"),align:"center",padding:5,elements:[{cols:[{view:"text",label:"Table name",name:"table_name",labelPosition:"top",value:""},{view:"text",label:"Model",name:"model_name",labelPosition:"top",value:"App\\Models\\"},{view:"text",label:"Controller",name:"controller_name",labelPosition:"top",value:"App\\Admin\\Controllers\\"}]}]}]},{view:"toolbar",elements:[{view:"form",id:e("creatorFormMigration"),elements:[{cols:[{view:"text",label:"Field name",name:"name",labelPosition:"top",value:""},{view:"combo",label:"Type",name:"type",labelPosition:"top",yCount:"10",options:webix.copy(a)},{view:"combo",label:"Key",name:"key",labelPosition:"top",yCount:"10",options:webix.copy(s)},{view:"text",label:"Default value",id:e("default_value_area"),name:"default",labelPosition:"top",value:""},{view:"checkbox",labelRight:"",label:"Nullable",name:"nullable",labelPosition:"top",width:100,padding:10,on:{onChange:function(){this.getValue()?($$(e("default_value_area")).setValue(""),$$(e("default_value_area")).disable()):$$(e("default_value_area")).enable()}}},{view:"text",label:"Comment",name:"comment",labelPosition:"top",value:""},{view:"richselect",label:"Add attribute to:",name:"add_to",labelPosition:"top",options:["","fillable","guarded"]},{view:"richselect",label:"Cast:",name:"casts",labelPosition:"top",options:["","integer","real","float","double","string","boolean","object","array","collection","date","datetime","timestamp"]}]},{cols:[{view:"richselect",label:"Factory group",name:"fakerGroup",id:e("fakerGroup"),labelPosition:"top",yCount:"10",options:webix.copy(Object.keys(l)),on:{onChange:function(){void 0!=l[this.getValue()]&&$$(e("fakerFunction")).define("options",Object.keys(l[this.getValue()])),$$(e("fakerFunction")).refresh(),$$(e("fakerFunctionParams")).setValue("")}}},{view:"combo",label:"Function",name:"fakerFunction",id:e("fakerFunction"),labelPosition:"top",yCount:"10",on:{onChange:function(){$$(e("fakerFunctionParams")).setValue("")}}},{view:"richselect",label:"Modifier",name:"fakerModifier",id:e("fakerModifier"),labelPosition:"top",yCount:"10",options:webix.copy(h)},{view:"text",label:"Parameters",name:"fakerFunctionParams",id:e("fakerFunctionParams"),labelPosition:"top",value:""},{view:"button",type:"iconButton",label:"",icon:"info-circle",id:e("fakerHelpBTN"),width:36,height:36,click:function(){var t=$$(e("fakerGroup")).getValue();if(""==t)return webix.message("Select faker Group","error"),$$(e("fakerGroup")).focus();var i=$$(e("fakerFunction")).getValue();if(""==i)return webix.message("Select faker Function","error"),$$(e("fakerFunction")).focus();webix.alert({title:i+" info",width:n("#layoutContainer").width()/2,text:l[t][i].replace(RegExp(" // ","g"),"<br> <strong>Return example:</strong> ")})}}]}],rules:{name:webix.rules.isNotEmpty,type:webix.rules.isNotEmpty}}]},{view:"toolbar",id:e("mybar"),elements:[{view:"button",type:"iconButton",id:e("addBtn"),label:"Add",icon:"plus",click:function(){if(!$$(e("creatorFormMigration")).validate())return webix.message({type:"error",text:"Form data is invalid"});var t=$$(e("creatorFormMigration")).getValues();$$(e("createMigrateTable")).add(t),i()}},{view:"button",disabled:!0,id:e("editBtn"),type:"iconButton",label:"Edit",icon:"pencil",click:function(){var t=$$(e("creatorFormMigration")).getValues(),n=t.id;delete t.id,$$(e("createMigrateTable")).updateItem(n,t),i(),$$(e("createMigrateTable")).enable(),$$(e("removeBtn")).enable()}},{view:"button",type:"iconButton",label:"Clear",icon:"repeat",click:function(){i(),$$(e("createMigrateTable")).enable(),$$(e("removeBtn")).enable()}},{view:"button",type:"iconButton",id:e("removeBtn"),label:"Remove",icon:"trash",click:function(){var t=$$(e("createMigrateTable")).getSelectedId();if(!t)return webix.alert("Please select a field item that you want to remove!");var i=$$(e("createMigrateTable")).getItem(t);webix.confirm({title:"Remove",text:'Delete field item "'+i.name+'"?',type:"confirm-error",callback:function(t){t&&$$(e("createMigrateTable")).remove(i.id)}})}}]},{view:"datatable",id:e("createMigrateTable"),select:!0,drag:!0,columns:[{id:"name",header:"Name",fillspace:!0},{id:"type",header:"Type",fillspace:!0},{id:"key",header:"Key",fillspace:!0,template:function(e){return""==e.key?"None":e.key}},{id:"default",header:"Default",fillspace:!0,template:function(e){return""==e.default?"Empty":e.default}},{id:"nullable",header:"Nullable",fillspace:!0,template:function(e){return e.nullable?"Yes":"No"}},{id:"comment",header:"Comment",fillspace:!0,template:function(e){return""==e.comment?"Empty":e.comment}},{id:"add_to",header:"Add attribute to",fillspace:!0,template:function(e){return""==e.add_to?"Empty":e.add_to}},{id:"casts",header:"Cast",fillspace:!0,template:function(e){return""==e.casts?"Empty":e.casts}}],on:{onItemDblClick:function(){var t=this.getSelectedItem();$$(e("creatorFormMigration")).setValues(t),$$(e("editBtn")).enable(),$$(e("addBtn")).disable(),$$(e("removeBtn")).disable(),this.disable()}}}]}},{header:"<span class='webix_icon fa-fa'></span> Factories",select:!0,body:{rows:[{view:"toolbar",elements:[{view:"button",type:"iconButton",label:"Reload Table",icon:"repeat",click:function(){t.start(),$$(e("factoriesTable")).load(Route("remote.get",{name:"file",source:"/database/factories",see:!0}),function(){t.done()})}}]},{view:"datatable",id:e("factoriesTable"),editable:!0,columns:[{id:"icon",header:"",width:35,template:"<i class='fa fa-#icon#'></i>"},{id:"value",header:"Name",fillspace:!0},{id:"date",header:"Date",width:200},{id:"size",header:"Size",width:100},{id:"",header:"Run",css:{"text-align":"center"},width:70,template:"<button class='run_button btn btn-success'><span class='webix_icon fa-play'></span></button>"},{id:"",header:"Edit",css:{"text-align":"center"},width:70,template:"<button class='edit_button btn btn-primary'><span class='webix_icon fa-pencil'></span></button>"}],url:Route("remote.get",{name:"file",source:"/database/factories",see:!0}),onClick:{edit_button:function(t,i){o($$(e("factoriesTable")).getItem(i.row))},run_button:function(i,n){var o=$$(e("factoriesTable")).getItem(n.row);webix.ui({view:"window",id:"runFactoryModal",head:'Run "'+o.value+'" Settings',modal:!0,position:"center",width:400,body:{view:"toolbar",elements:[{rows:[{view:"text",label:"Number of records added:",name:"run_factory_num",id:"run_factory_num",labelPosition:"top",value:"10"},{cols:[{view:"button",type:"iconButton",label:"Run",icon:"play",click:function(){this.disable(),t.start(),webix.ajax().post(Route("remote.post",{name:"scaffold",method:"run_factory"}),{factory_num:$$("run_factory_num").getValue(),target:o.id},function(e){e=JSON.parse(e),r(e),t.done(),$$("runFactoryModal").close()})}},{view:"button",type:"iconButton",label:"Cancel",icon:"remove",click:function(){$$("runFactoryModal").close()}}]}]}]}}).show()}}}]}}]}]}]}}}).call(t,i(1),i(0),i(6))},function(e,t,i){"use strict";i(1);e.exports=function(e){return{rows:[{view:"datatable",select:!0,multiselect:!0,id:e("logViewerTable"),columns:[{id:"id",header:"#"},{id:"task",header:"Task",template:"#task.name#",fillspace:!0},{id:"expression",header:"Expression"},{id:"readable",header:"Run at",fillspace:!0},{id:"nextRunDate",header:"Next run time",width:155},{id:"description",header:"Description",fillspace:!0},{id:"run",header:"Run",template:"<i class='fa fa-play' style='cursor: pointer'></i>"}],type:{template:"{common.space()}"},url:Route("remote.get",{name:"scheduling"}),on:{onItemClick:function(e){var t=this.getItem(e.row);"run"==e.column&&webix.confirm({title:"Run task?",text:t.task.name,callback:function(e){e&&runers.terminal(function(e){terminal.spinner.start(""),webix.ajax().post(Route("remote.insert",{name:"scheduling",id:t.id}),function(e){e=JSON.parse(e),terminal.spinner.stop();var t="info";e.status||(t="error"),terminal.messageType(e.data,t),terminal.serverInfo()})})}})}}}]}}},function(e,t,i){"use strict";(function(t){function i(){++a>=r&&(webix.ui({view:"window",id:"sessionOut",head:"Session TimeOut",width:200,height:200,position:"center",modal:!0,body:{view:"toolbar",align:"center",elements:[{view:"button",type:"iconButton",labelPosition:"center",label:"Reload page",icon:"repeat",click:function(){location.reload()}}]}}).show(),window.clearInterval(o))}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=1800,o=null,a=0;document.onclick=function(){a=0},document.onmousemove=function(){a=0},document.onkeypress=function(){a=0},o=window.setInterval(i,1e3),e.exports=function(){function e(){webix.confirm({title:"LogOut",text:"Are you sure you want to log out?",type:"confirm-error",callback:function(e){e&&(location=Route("admin.login.logout"))}})}return webix.ui({container:"menuContainer",rows:[{type:"clean",cols:[{view:"menu",id:"menuContainer",autowidth:!0,on:{onAfterLoad:function(){"load"==this.getFirstId()&&this.load(Route("remote.get",{name:"menu",fromTop:!0}),function(){this.remove("load")});var e=function(e,t){null!==t.uri&&"#"!=t.uri&&(e.on("click",function(){return runers[t.id](),!1}),"modal"!=t.type&&myLayout.createDragSource(e,newItem[t.id]))};setInterval(function(){t('a[role="menuitem"]').each(function(){if(void 0==t(this).attr("menu-init")){var i=t(this).attr("webix_l_id"),n=window.getMenu(i);null!=n&&(t(this).attr("menu-init","true"),e(t(this),n))}})},100)}},type:{subsign:!0},data:"object"===n(window.menuFromTop)?window.menuFromTop:{id:"load",value:"Loading..."}},{view:"resizer"},{view:"toolbar",id:"userBar",align:"right",paddingY:-5,elements:[{view:"button",type:"iconButton",label:"WebSite",width:100,icon:"external-link",click:function(){window.open("/","_blank")}},{view:"button",type:"iconButton",label:"LogOut",width:100,icon:"power-off",click:function(){e()}}]},{padding:1,width:34,template:'<img src="'+admin.avatar+'" width="34px" style="margin-top: -6px;margin-left: -5px; cursor: pointer;">'}]}]})}}).call(t,i(0))}]);